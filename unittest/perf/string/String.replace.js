function TestStringReplace1()
{
    var str = "abcdefghijklmnopqrstuvwxyz";
    var pat = "mn";
    var rep = "--";
    var res = null;
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    return res;
}
TestStringReplace1.testId = "String.replace.1";
TestStringReplace1.description = "\"a...z\".replace(\"mn\", \"--\")";
TestStringReplace1.iterations = 5000;
TestStringReplace1.quantifier = 100;
Register(TestStringReplace1);

function TestStringReplace2()
{
    var str = "abcdefghijklmnopqrstuvwxyz";
    var pat = /mn/;
    var rep = "--";
    var res = null;
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    return res;
}
TestStringReplace2.testId = "String.replace.2";
TestStringReplace2.description = "\"a...z\".replace(/mn/, \"--\")";
TestStringReplace2.iterations = 5000;
TestStringReplace2.quantifier = 100;
Register(TestStringReplace2);

function TestStringReplace3()
{
    var str = "abcdefghijklmnopqrstuvwxyz";
    var pat = /mn/;
    var rep = "...";
    var res = null;
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    return res;
}
TestStringReplace3.testId = "String.replace.3";
TestStringReplace3.description = "\"a...z\".replace(/[f-s]*/, \"...\")";
TestStringReplace3.iterations = 5000;
TestStringReplace3.quantifier = 100;
Register(TestStringReplace3);

function TestStringReplace4()
{
    var str = "abc12345432abc12345432abc12345432abc12345432abc12345432" + 
		"abc12345abcdef432abc12345432abc123454abcdef32abc12345432" +
		"abc12345abc12345432abc12345432abc12345432abc12345432abc1234" + 
		"543212345abcdef43212345432123454abcdef32123454321234543212345" + 
		"4321234543212345432123454321234543212345432123454321234543212345" + 
		"43212345432123454321234543212345432123454321234512345";
    var pat = "abc12345defgh";
    var rep = "--";
    var res = null;
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    return res;
}
TestStringReplace4.testId = "String.replace.4";
TestStringReplace4.description = "long string replace";
TestStringReplace4.iterations = 5000;
TestStringReplace4.quantifier = 100;
Register(TestStringReplace4);

function TestStringReplace5()
{
    var str = "abc12345432abc12345432abc12345432abc12345432abc12345432" + 
		"abc12345abcdef432abc12345432abc123454abcdef32abc12345432" +
		"abc12345abc12345432abc12345432abc12345432abc12345432abc1234" + 
		"543212345abcdef43212345432123454abcdef32123454321234543212345" + 
		"4321234543212345432123454321234543212345432123454321234543212345";
    for (var i=0; i<3; i++) str+=str;
    var pat = "abc12345de";
    var rep = "++";
    var res = null;
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    return res;
}

TestStringReplace5.testId = "String.replace.5";
TestStringReplace5.description = "extra long string replace";
TestStringReplace5.iterations = 5000;
TestStringReplace5.quantifier = 100;
Register(TestStringReplace5);

function TestStringReplace6()
{
    var str = "abc12345432abc12345432abc12345432abc12345432abc12345432" + 
		"abc12345abcdef432abc12345432abc123454abcdef32abc12345432" +
		"abc12345abc12345432abc12345432abc12345432abc12345432abc1234" + 
		"543212345abcdef43212345432123454abcdef32123454321234543212345" + 
		"4321234543212345432123454321234543212345432123454321234543212345" + 
		"43212345432123454321234543212345432123454321234512345";
    var pat = "abc12345defgh";
    var rep = function() {return "";};
    var res = null;
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    res = str.replace(pat, rep);
    return res;
}
TestStringReplace6.testId = "String.replace.6";
TestStringReplace6.description = "long string replace func";
TestStringReplace6.iterations = 5000;
TestStringReplace6.quantifier = 100;
Register(TestStringReplace6);

var totalAverage = 0;
var testIterations = 6;

var _global;

function Register(test)
{
    if (_global == undefined)
    {
        _global = [];
    }
    _global[_global.length] = test;
}

function RunTest(test)
{
    var iter = test.iterations;
    var func = test;
    var tot = 0;
    for (var i = 0; i < testIterations; i++)
    {
        if (test.preCondition)
        {
            test.preCondition();
        }
        var start = new Date();
        for (var j = 0; j < iter; j++) {
            func();
        }
        var end = new Date();
        tot += (end - start);
    }
    return tot / testIterations;
}

function Write(s)
{
    if (typeof(WScript) == "undefined") { document.write(s + "<br/>"); }
    else { WScript.Echo(s); }
}

function PadR(s, w, c)
{
    if (s.length >= w) {
        s = s.substring(0, w);
    }
    for (var i = s.length; i < w; i++) {
        s += c;
    }
    return s;
}

function PadL(s, w, c) {
    if (s.length >= w) {
        s = s.substring(0, w);
    }
    for (var i = s.length; i < w; i++) {
        s = c + s;
    }
    return s;
}

Write(PadR("Test Name", 30, " ") + " " + PadL("Iterations", 10, " ") + " " + PadR("Elapsed", 10, " "));
Write(PadR("", 30, "-") + " " + PadL("", 10, "-") + " " + PadL("", 10, "-"));

for (var i=0;i<_global.length;i++) {
    try {
        var test = _global[i];
        if (test.testId) {
            var testAverage = RunTest(test);
            totalAverage += testAverage;
            Write(PadR(test.description, 30, " ") + " " + PadL("" + (test.iterations * test.quantifier), 10, " ") + " " + PadL("" + Math.floor(testAverage), 7, " ") + " ms");
        }
    }
    catch(e) {
    }
}

Write(PadR("", 30, "-") + " " + PadL("", 10, "-") + " " + PadL("", 10, "-"));
Write(PadR("Total", 30, " ") + " " + PadL("", 10, " ") + " " + PadL("" + Math.floor(totalAverage), 7, " ") + " ms");