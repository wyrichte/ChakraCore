/*
* © JSC "PROGNOZ", 2012.
*/
(function(){
var ObjProto,prDel,CultInfoP,enCulture,ruCulture,arCulture,zhCulture,resMngrPr,ctrlP,menuItemP,splitMenuItemP,textAreaP,ScrollBarP,ScrollBoxP,dropPanelP,TextEdtP,comboP,SpinEdtP,MonCalP,DTEditP,DTPickerP,buttonP,ribbonButtonP,menuP,mainMenuP,tabItemP,ribbonPanelP,ribbonCategoryP,ribbonP,imageListP,listItemP,listBoxP,NumEdP,htmlXamlConverterP,windowP,ColorP,CComboP,comboBoxP,numComboBoxP,confirmDialogP,dialogP,MesgPro,containerP,gridPanelP,iPanelp,iStPanelp,member,masterP,labelP,checkProto,NavigationItemPr,masterpPr,splitButtonP,stripePanelP,stripeContextPanelP,stripeP,treeListP,treeColumnP,list,treeColumnsP,treeNodeP,treeNodesP,toolBarButtonP,toolBarSeparatorP,toolBarP,CPanelP,panelP,gridP,NumOrdEdP,sliderP,sliderAxisP,sliderAxisGradientP,sliderItemP,sliderItemColorP,splitterPr,iFntP,deDlg,expDlg,paretoDlg,fontComboBoxP,textSettingsP,cpDialogP,confirmSaveDlgP,copyDialogP,hyperlinkP,errdproto,TreeComboP,radioProto,navigationBarP,tabControlP,nfProto,dialogBaseProto,animPr,BCProto,activeMenuItemP,simpleSepP,waiterP,fontDialogP,InfoWinPanelP,InfoWinP,scriptMp,mapSliderP,PbarPr,pntP,brshP,sldClrBrshP,grdntBrshP,grdntStpP,lnrGrdntBrshP,rdlGrdntBrshP,rctP,toolTipP,ClipboardP,textEditorP,saveAsDialogProto,fileUploadPr,openDialogProto,bzSpln,sepP,autocompletePr,contentMenuItemP,iE,brE,alphChnlE,brshE,blrE,drpShdwE,sclE,mainMenuButtonP,menuHeaderP,cellPickerP,tabsComboBoxP,thknsP;Function.prototype.bind||(Function.prototype.bind=function(){var r,t,i,u;if(arguments.length<1&&typeof arguments[0]!="undefined")return this;for(r=this,t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);return u=t.shift(),function(){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);for(n=0;n<arguments.length;n++)i.push(arguments[n]);return r.apply(u,i)}}),Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1}),Array.prototype.some||(Array.prototype.some=function(n,t){var r,i;if(typeof n!="function")throw new TypeError;for(r=this.length,i=0;i<r;i++)if(i in this&&n.call(t,this[i],i,this))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(n,t){var r,i;if(typeof n!="function")throw new TypeError;for(r=this.length,i=0;i<r;i++)i in this&&n.call(t,this[i],i,this)}),typeof DOMParser=="undefined"&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(n){if(typeof ActiveXObject!="undefined"){var t=new ActiveXObject("MSXML.DomDocument");return t.async=!1,t.loadXML(n),t}}),typeof console=="undefined"&&(window.console={assert:function(n){if(!!n)throw"Assertion failed";},count:function(){},debug:function(){},dir:function(){},dirxml:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},profile:function(){},profileEnd:function(){},time:function(){},timeEnd:function(){},timeStamp:function(){},trace:function(){},warn:function(){}}),Object.keys||(Object.keys=function(n){var t,i;if(!n||typeof n!="object")throw TypeError("Object.keys called on non-object");t=[];for(i in n)t.push(i);return t}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(n){var t,i;if(!n||typeof n!="object")throw TypeError("Object.keys called on non-object");t=[];for(i in n)n.hasOwnProperty(i)&&t.push(i);return t}),window.PP={},PP.IsIE=navigator.userAgent.indexOf(" MSIE ")>-1,PP.IsFF=navigator.userAgent.indexOf(" Firefox/")>-1,PP.IsChrome=!1,PP.IsSafari=!1,navigator.userAgent.indexOf("Chrome")>-1?PP.IsChrome=!0:navigator.userAgent.indexOf(" Safari/")>-1&&(PP.IsSafari=!0),PP.IsOpera=navigator.userAgent.indexOf("Opera/")>-1,PP.IsiPad=navigator.userAgent.indexOf("iPad")>-1,PP.IsiPhone=navigator.userAgent.indexOf("iPhone")>-1,PP.isTouch="ontouchstart"in document,PP.IsIE?(PP.IEVer=window.atob?10:document.getElementsByClassName?9:document.querySelector?8:7,PP.IsSVG=PP.IEVer>8):PP.IsSVG=!0,PP._allClasses={},PP._allEnums={},PP._allIntarfaces={},PP._allFunctions={},PP._allNamespaces={},PP.Entity={Class:"Class",Interface:"Interface",Enum:"Enum",Method:"Function",Namespace:"Namespace"},PP.ClassMembers={Property:"Property",Method:"Method",Event:"Event"},PP._addEntity=function(n,t,i){var u=PP._getFullNamespaceofEntity(n,t),f,r;t.indexOf(u)===0&&(t=t.substr(u.length+1)),f={Entity:n,FullPath:u},r=i[t],r?(i[t]=r=Array.isArray(r)?r:[r],r.push(f)):i[t]=f},PP.initClass=function(n,t,i,r){if(t){var u=new Function;u.prototype=t.prototype,n.prototype=new u,n.prototype.constructor=n,n.base=t.prototype,n.baseClass=t}i&&(n._Name=i),n._Interfaces=r,n._Type=PP.Entity.Class,PP._addEntity(n,i,PP._allClasses)},PP.initEnum=function(n,t){n._Name=t,n._Type=PP.Entity.Enum,PP._addEntity(n,t,PP._allEnums)},PP.initInterface=function(n,t,i){n._Name=t,n._Type=PP.Entity.Interface,i&&(n._base=Array.isArray(i)?i:[i]),PP._addEntity(n,t,PP._allIntarfaces)},PP.initNamespace=function(n,t,i){n._Name=t,n._Type=PP.Entity.Namespace,PP._allNamespaces[t]=n,i&&(n._ResourceGroup=i)},PP._getFullNamespaceofEntity=function(n,t){var i="",f=null,r=-1,u=-1;if((r=t.indexOf("."))>=0){while((u=t.indexOf(".",r+1))>=0)if(i=t.substr(0,u),PP._allNamespaces[i])r=u;else break;return i=t.substr(0,r)}for(i in PP._allNamespaces)if(f=PP._allNamespaces[i],f[t]===n)return i;return""},PP.initNamespace(PP,"PP","PP"),PP.extend=function(n,t,i,r){if(t){var u;if(r)for(u in t)t.hasOwnProperty(u)&&(n[u]?typeof n[u]!="object"||typeof t[u]!="object"||t[u].tagName?n[u]=i?t[u]:Array(n[u],t[u]):Array.isArray(n[u])?i&&!Array.isArray(t[u])?n[u].length>0&&(n[u]=n[u][0]):i&&Array.isArray(t[u])?PP.extend(n[u],t[u],i,!0):n[u].push(t[u]):PP.extend(n[u],t[u],i,!0):n[u]=t[u]);else for(u in t)(i||!n[u])&&(n[u]=t[u]);return n}},PP.isMemberOf=function(n,t){for(var i in n)if(n[i]===t)return!0;return!1},PP.getEnumInterfMembers=function(n,t){var r=t?[]:{},i;for(i in n)n.hasOwnProperty(i)&&i.indexOf("_")!=0&&i!="prototype"&&(t?r.push(i):r[i]=n[i]);return r},PP.isPPInstance=function(n){return n&&n.constructor._Type===PP.Entity.Class},PP.isBaseClass=function(n,t){var i,r;if(!n||!t)return!1;for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++){if(n===t[i])return!0;for(r=n.baseClass;r!==t[i]&&r;)r=r.baseClass;if(r===t[i])return!0}return!1},PP.isBaseMemberOf=function(n,t){var r,i;if(!n||!t||n._Type!==PP.Entity.Class)throw new Error("ArgumentException");for(r=!!n.prototype[t],i=n.baseClass;i&&r;i=i.baseClass)if(i.prototype[t])return!0;return!r},PP.getFirstMember=function(n){for(var t in n)return t},PP.getFirstValue=function(n){for(var t in n)return n[t]},PP.IsTrueString=function(n){return n!=null&&(n.toLocaleLowerCase()==="true"||n.toString()==="1")},PP.startsWith=function(n,t){return n.lastIndexOf(t,0)===0},PP.endsWith=function(n,t){return n.indexOf(t,n.length-t.length)!==-1},PP.rmvFrmArr=function(n,t){var i=n.indexOf(t);return i>-1?(n.splice(i,1),!0):!1},PP.rmvFrmArrByIdx=function(n,t,i){var r=n.slice((i||t)+1||n.length);return n.length=t<0?n.length+t:t,n.push.apply(n,r)},PP.insertToArr=function(n,t,i){return i>-1?(i<=n.length?n.splice(i,0,t):n.push(t),!0):!1},PP.arrInsertBefore=function(n,t,i){var r=n.indexOf(i);return r==-1?n.push(t):r==0?(n.unshift(t),!0):PP.insertToArr(n,t,r)},PP.compareArr=function(n,t){if(n.length!=t.length)return!1;for(var i=0;i<t.length;i++)if(n[i].compare&&!n[i].compare(t[i])||n[i]!==t[i])return!1;return!0},PP.intersectArr=function(n,t){for(var f=[],e={},r=t.length,u,i=0;i<r;i++)e[t[i]]=!0;for(r=n.length,i=0;i<r;i++)u=n[i],u in e&&f.push(u);return f},PP.each=function(n,t,i){if(n&&n.length)for(var r=0;r<n.length;r++)i.call(t,r,n[r])},PP.delFrom=function(n,t){if(n&&t)for(var i=0;i<t.length;i++)delete n[t[i]],delete n["@"+t[i]]},PP.isPrimitive=function(n){return PP.isString(n)||PP.isNumber(n)||PP.isBoolean(n)},PP.isFunction=function(n){return Object.prototype.toString.apply(n)==="[object Function]"},PP.isNumber=function(n,t){return t?typeof parseFloat(n)=="number"&&isFinite(parseFloat(n)):typeof n=="number"&&isFinite(n)},PP.isString=function(n){return typeof n=="string"},PP.isBoolean=function(n){return typeof n=="boolean"},PP.isDate=function(n){return Object.prototype.toString.apply(n)==="[object Date]"},PP.isObject=function(n){return!!n&&Object.prototype.toString.call(n)==="[object Object]"},PP.isDefined=function(n){return typeof n!="undefined"},PP.override=function(n,t){var i,r,u;for(i in t)if(r=t[i],Array.isArray(r))for(Array.isArray(n[i])||(n[i]=[]),u=0;u<r.length;u++)PP.overrideObject(n[i],r,u);else PP.overrideObject(n,t,i)},PP.overrideObject=function(n,t,i){n=n||{};var r=t[i];PP.isObject(r)?(PP.isDefined(n[i])&&n[i]!=null||(n[i]={}),PP.override(n[i],r)):n[i]=r},PP.create=function(n){var f,i,o,t,e,r,u;if(n||PP.getProperty(n,"PPType")){if(i=PP.getProperty(n,"PPType"),o=i,delete n.PPType,PP.isString(i)){if(i.indexOf(".")>-1&&(r=i.split("."),e=i.replace("."+r[r.length-1],""),i=r[r.length-1]),t=PP._allClasses[i],t)if(Array.isArray(t))if(e){for(u=0;u<t.length;u++)if(t[u].FullPath==e){t=t[u].Entity;break}}else t=t[0].Entity;else t=t.Entity;f=new t(n)}else f=new i(n);return n.PPType=o,f}return n},PP.setTimeout=function(n,t,i){if(PP.IsIE&&typeof i!="undefined"){var r=PP.setTimeout._tims.push({Handler:n,Params:i})-1;return{nativeId:setTimeout("PP.setTimeout._on("+r+")",t),index:r}}return setTimeout(n,t,i)},PP.setTimeout._tims=[],PP.setTimeout._on=function(n){var t=PP.setTimeout._tims[n];return delete PP.setTimeout._tims[n],t.Handler.call(this,t.Params)},PP.clearTimeout=function(n){n!=undefined&&(n.nativeId?(clearTimeout(n.nativeId),delete PP.setTimeout._tims[n.index]):clearTimeout(n))},PP.setValueToJSON=function(n,t,i,r){var o,f,u,e;if(i&&t){for(o=i.split("."),u=t,e=0;e<o.length;e++){if(f=o[e],!u[f]){if(r)return u;u[f]={}}if(e==o.length-1){if(r)return u[f]}else u=u[f]}u[f]=n}},PP.getProperty=function(n,t){var f,e,o,u,h,c;if(typeof t!="string")throw PP.ArgumentException("Type of jsonPath must be string");var l=/(\[\d*\])/ig,s=t.split("."),i=n,r;for(f=0;f<s.length;f++){if(!i)return undefined;if(r=s[f],r==="")throw PP.ArgumentException("Property name can not be empty");if(r.indexOf("[")>=0)for(e=r.substr(0,r.indexOf("[")),o=r.match(l),i=PP.isDefined(i[e])?i[e]:i["@"+e],u=0,h=o.length;u<h;u++){if(!i)return undefined;c=o[u].substr(1,o[u].length-2),i=i[c]}else i=PP.isDefined(i[r])?i[r]:i["@"+r]}return i},PP.Object=function(n){this._Id=null,n&&this._initFields(n),this._Id==null&&(this._Id=PP.Object._idInc++)},PP.initClass(PP.Object,null,"PP.Object"),PP.Object._idInc=0,ObjProto=PP.Object.prototype,PP.Object.defineProps=function(n,t,i){if(t&&n){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)n.prototype["get"+t[r]]=function(n){return function(){return this["_"+n]}}(t[r]),i&&(n.prototype["set"+t[r]]=function(n){return function(t){this["_"+n]=t}}(t[r]))}},ObjProto._defineEvents=function(n,t){var i=this._Events,r,e,u,f;for(i||(i=this._Events={}),Array.isArray(n)||(n=[n]),r=t?t:this.getTypeName(),i[r]||(i[r]={}),e=i[r],u=n.length;u--;)f=n[u],e[f]=this[f]=new PP.Delegate},ObjProto._initFields=function(n){var f,t,i,l,r,u,o,s,h;if(n){var c=PP.Delegate,a=PP.Object,e=this._XmlNames;for(f in n)if(t=f,t.indexOf("@")==0&&(t=t.substring(1),e||(e=this._XmlNames={}),e[t]=f),i=n[f],t.indexOf(".")>-1&&(l=t.split("."),t=l[1]),r="_"+t,u=this[r],t!="ParentNode"&&t!=="__gwt_ObjectId"&&u!==i)if(o=(typeof i).toLowerCase(),i instanceof c||o=="function")if(this[t]instanceof c)this[t].add(i);else if(u===null)this[r]=i;else throw PP.ArgumentException(f,this);else switch(o){case"object":!u||!u._initFields||i instanceof a?this[r]=i:u._initFields(i);break;case"string":PP.isBoolean(u)?(s=i.toLowerCase(),s=="true"?this[r]=!0:s=="false"&&(this[r]=!1)):PP.isNumber(u)?(h=parseFloat(i),this[r]=h?h:0):this[r]=i;break;case"undefined":break;default:this[r]=i}}},ObjProto.setSettings=function(n){var t,i,r;if(n){if((typeof n).toLowerCase()!="object")throw new Error("SetFields Error in "+n);for(t in n)if(t!="ParentNode"){i=t,t.indexOf("@")==0&&(t=t.substring(1));var f=(typeof this["get"+t]).toLowerCase(),e=(typeof n[i]).toLowerCase(),u=(typeof this["set"+t]).toLowerCase();switch(e){case"function":this[t]instanceof PP.Delegate&&this[t].add(n[i]);break;case"object":if(f!="undefined")if(r=this["get"+t](),r&&r.setSettings)r.setSettings(n[i]);else if(u!="undefined")this["set"+t](n[i]);else throw PP.Exception("Settings Error: '"+t+"'",this);break;case"undefined":break;default:if(u!="undefined")this["set"+t](n[i]);else throw PP.Exception("Settings Error: '"+t+"'",this);}}}},ObjProto._getXmlName=function(n){var t=this._XmlNames;return t&&t[n]?t[n]:n},ObjProto.getSettings=function(n,t){var r,f,i,u,o,e;n=typeof n=="undefined"?!1:n==!0,t=t||[],t.push(this),r={};for(f in this)if(this.hasOwnProperty(f)){if(i=this[f],i&&i instanceof PP.Delegate){i.getCount()>0&&(r[f]=i.clone());continue}if(i&&typeof i.innerHTML!="undefined"||f.indexOf("_")!==0)continue;if(u=this._getXmlName(f.replace("_","")),PP.isFunction(this["get"+u]))if(Array.isArray(i))for(r[u]=[],o=0;o<i.length;o++)e=i[o],e instanceof PP.Object?t.indexOf(e)==-1&&(t.push(e),r[u].push(e.getSettings(n,t))):r[u].push(e);else i instanceof PP.Object?t.indexOf(i)==-1&&(t.push(i),r[u]=i.getSettings(n,t)):(i||PP.isBoolean(i))&&(r[u]=i)}return n&&(r.PPType=this.getTypeName()),r},ObjProto._checkValue=function(n){return n=parseFloat(n),isNaN(n)||n==undefined||n<0?0:n},ObjProto._disposeArray=function(n,t){if(n&&n.length!==0&&(t||n[0]&&n[0].dispose))for(var f=n.length,i,r,u;f--;)i=n[f],i&&(r=i.isLive,u=i.dispose,u&&(!r||r.call(i))&&u.call(i))},ObjProto._disposeObj=function(n){var i,t;if(n)for(i in n)t=n[i],t&&t.dispose&&(!t.isLive||t.isLive&&t.isLive())&&t.dispose(),delete n[i]},ObjProto.dispose=function(){var i,t,n;if(this.isLive()){delete this._Id,i=!!this._removeAllEvents;for(t in this)if(this.hasOwnProperty(t))switch(t){case"_Parent":case"_Events":delete this[t];break;default:n=this[t],n&&(Array.isArray(n)?this._disposeArray(n):n.dispose&&(!n.isLive||n.isLive&&n.isLive())&&n.dispose(),n.events&&i&&this._removeAllEvents(n)),delete this[t]}}},ObjProto.removeAllEvents=function(n){var t,i,r;if(this.isLive()&&n){t=this._Events;for(i in t)for(r in t[i])t[i][r].clear(n)}},ObjProto.getId=function(){return this._Id},ObjProto.setId=function(n){return this._Id=n,this},ObjProto.clone=function(){throw new Error("NotImplementedException");},ObjProto.getTypeName=function(){return this.constructor._Name},ObjProto.isLive=function(){return this._Id!=undefined},ObjProto=null,PP.Exception=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"Exception",n)},PP.Exception.getSource=function(n){var t;if(!n)return"";if(!n.getTypeName)return n+"";var r=arguments.callee.caller.caller,u=n.getTypeName(),i="";for(t in n.constructor.prototype)if(n.constructor.prototype[t]===r){i=t;break}return u+"."+i+"."},PP.Exception.format=function(n,t,i){var r=t+". Source: "+PP.Exception.getSource(n);return i&&PP.isString(i)&&(r+=" Message: "+i),r},PP.ArgumentNullException=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"ArgumentNullException: Argument "+n)},PP.OutOfRangeException=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"OutOfRangeException",n)},PP.ArgumentException=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"ArgumentException",n)},PP.NotSupportedException=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"NotSupportedException",n)},PP.NotImplementedException=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"NotImplementedException",n)},PP.InterfaceNotImpException=function(n,t){return t=t||(PP.isString(n)?undefined:n),PP.Exception.format(t,"InterfaceNotImpException",n)},(PP.XMLNodeType=function(){var n=PP.XMLNodeType;n.ELEMENT_NODE=1,n.ENTITY_REFERENCE_NODE=5,n.TEXT_NODE=3,n.ATTRIBUTE_NODE=2,n.CDATA_SECTION_NODE=4,n.ENTITY_NODE=6,n.PROCESSING_INSTRUCTION_NODE=7,n.COMMENT_NODE=8,n.DOCUMENT_NODE=9,n.DOCUMENT_TYPE_NODE=10,n.DOCUMENT_FRAGMENT_NODE=11,n.NOTATION_NODE=12,PP.initEnum(n,"PP.XMLNodeType")})(),PP.Util={},PP.initNamespace(PP.Util,"PP.Util"),PP.Delegate=function(n,t,i){if(!(this instanceof PP.Delegate))return new PP.Delegate(n,t,i);n&&this.add(n,t,i)},PP.initClass(PP.Delegate,null,"Delegate"),PP.Delegate.fire=function(n,t,i,r){n&&(n instanceof PP.Delegate?n.fire(t,i,r):PP.isFunction(n)&&(PP.isNumber(r)?PP.setTimeout(PP.Delegate._onTimefire,r,{callback:n,sender:t,args:i}):n.call(window,t,i)))},PP.Delegate._onTimefire=function(n){n.callback.call(window,n.sender,n.args)},PP.Delegate.compare=function(){throw PP.NotImplementedException(this);},prDel=PP.Delegate.prototype,prDel._onTimefire=function(n){n.self.fire(n.sender,n.args)},prDel.fire=function(n,t,i){var u=this._On,o,f,s,e,r;if(u&&u.length){if(o=u.length,i!=undefined&&PP.isNumber(i)){PP.setTimeout(this._onTimefire,i,{sender:n,args:t,self:this});return}for(f=undefined,t||(t={}),s=o==1?u:[].concat(u),e=0;e<o;e++)if(r=s[e],r&&r.Callback&&(r.Context?(t.Args=r.Args,r.Context.isLive&&!r.Context.isLive()?this.remove(r.Callback,r.Context):f=r.Callback.call(r.Context,n,t)):f=r.Callback.call(n,n,t),t&&t.Break))break;return f}},prDel.clear=function(n){if(n||(n=null),this._On)for(var t=this._On.length-1;t>=0;t--)this._On[t]&&n===this._On[t].Context&&this._On.splice(t,1)},prDel.clearAll=function(){delete this._On},prDel.dispose=function(){delete this._On,delete this._Parent,delete this._Name},prDel.add=function(n,t,i){var r,u,f;if(!n)return null;if(r=this._On,r||(r=this._On=[]),t||(t=null),n instanceof PP.Delegate)return n._On?(this._On=r.concat(n._On),r.length):!1;if(Array.isArray(n))for(u=0;u<n.length;u++)r.push({Callback:n[u],Context:t,Args:i});else return f=r.length,r.push({Callback:n,Context:t,Args:i}),f},prDel.addOne=function(n,t,i){this.contains(n,t)||this.add(n,t,i)},prDel.remove=function(n,t){if(this._On){t=t?t:null;var r=(typeof n).toLowerCase(),i;if(r=="number")this._On.length>n&&this._On.splice(n,1);else if(r=="function"){for(i=this._On.length-1;i>=0;i--)if(this._On[i]&&this._On[i].Callback==n&&this._On[i].Context===t){this._On.splice(i,1);return}}else if(Array.isArray(n))for(i=0;i<n.length;i++)this.remove(n[i],t);else if(n instanceof PP.Delegate){if(n._On&&n._On.length>0)for(i=0;i<n._On.length;i++)this.remove(n._On[i].Callback,n._On[i].Context)}else throw PP.ArgumentException(this);}},prDel.contains=function(n,t){if(!n)throw PP.ArgumentException(this);if(!this._On)return!1;t||(t=null);for(var i=0;i<this._On.length;i++)if(this._On[i]&&(this._On[i].Callback==n||n==this._On[i].Id)&&this._On[i].Context===t)return!0;return!1},prDel.clone=function(){var n=new PP.Delegate;return this._On&&this._On.length>0&&(n._On=[].concat(this._On)),n},prDel.insert=function(n,t,i,r){var u,f;if(!t)throw PP.ArgumentException("",this);if(this._On||(this._On=[]),t instanceof PP.Delegate){if(t._On){for(u=0;u<t._On.length;u++)PP.insertToArr(this._On,t._On[u],n++);return this._On.length}return!1}return f=this._On.length,i||(i=null),PP.insertToArr(this._On,{Callback:t,Context:i,Args:r},n),f},prDel.getCount=function(){return this._On?this._On.length:0},prDel.toString=function(){var n,i,t;if(!this._On||!this._On.length)return"";for(n=[],i=0;i<this._On.length;i++)t=this._On[i].Context,t?t.getTypeName?n.push(t.getTypeName()):n.push(typeof t):n.push("window");return n.toString()},prDel=null,PP.EventArgs=function(n){this.Event=n},PP.CultureInfo=function(){this.CultureName=PP.CultureNames.en,this.DisplayName="English",this.ShortDayNames=["mo","tu","we","th","fr","sa","su"],this.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.ShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.QuarterNames=["I First","II Second","III Third","IV Fourth"],this.HalfYearNames=["I First","II Second"],this.IsSundayFirst=!1,this.DateSeparator=".",this.DateOrder="dmy",this.TimeAmPm=["PM","AM"],this.Hour24Mode=!0,this.TimeSeparator=":",this.WEEKMS=6048e5,this._TimeZoneoffset=0,this.DecimalSeparator=".",this.GroupSeparator="",this.IsRTL=!1,this.LCID=1033},CultInfoP=PP.CultureInfo.prototype,CultInfoP.getDaysInMonth=function(n,t){return 32-new Date(t,n,32).getDate()},CultInfoP.to12hMode=function(n){if(n=parseInt(n,10),n=n%24,n==0)return[12,!0];var t=n<12;return(t||(n-=12),n==0)?[12,!1]:[n,t]},CultInfoP.to24hMode=function(n,t){if(n=parseInt(n,10),n<1||n>12)throw"Invalid hour range";return n==12?t?0:12:t?n:n+12},CultInfoP.getWeekNumber=function(n){for(var t=new Date(n.getFullYear(),0,1,0,0,0,0),r=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),i=-1;t<=r;)i++,t.setDate(t.getDate()+7);return i},CultInfoP.getFirstWeekDate=function(n,t){if(typeof n=="undefined"||n==null||typeof t=="undefined"||t==null)throw new Error("incorrect input arguments");var i=new Date(t,0,1,0,0,0,0);return i.setDate(n*7+1),i},CultInfoP.getLastWeekDate=function(n,t){if(typeof n=="undefined"||n==null||typeof t=="undefined"||t==null)throw new Error("incorrect input arguments");var i=new Date(t,0,1,0,0,0,0);return i.setDate(n*7+7),i.setHours(23,59,0,0),i},CultInfoP.dateToStr=function(n,t,i){var e,r,h,o,c,s,u,f,l;if(t=t==!0,i=i==!0,i&&t)return"";for(e={},r=n.getDate()+"",r.length<2&&(r="0"+r),e.d=r,r=n.getMonth()+1+"",r.length<2&&(r="0"+r),e.m=r,e.y=n.getFullYear()+"",h=[],o=0;o<3;o++)h[o]=e[this.DateOrder.substr(o,1)];return(c=h.join(this.DateSeparator),t)?c:(s="",u=n.getMinutes()+"",u.length<2&&(u="0"+u),f=n.getSeconds()+"",f.length<2&&(f="0"+f),this.Hour24Mode?s=n.getHours()+this.TimeSeparator+u+this.TimeSeparator+f:(l=this.to12hMode(n.getHours()),s=l[0]+this.TimeSeparator+u+this.TimeSeparator+f+" "+this.TimeAmPm[l[1]?0:1]),i?s:c+" "+s)},CultInfoP.getTimezoneOffsetInMsec=function(){return this._TimeZoneoffset||(this._TimeZoneoffset=(new Date).getTimezoneOffset()*6e4),this._TimeZoneoffset},CultInfoP.validateNumber=function(n,t,i,r){var s=!1,u=n.value,o,h,c,l;if(PP.isNumber(u))return n.numberValue=u,!0;if(typeof u!="string")throw new Error("incorrect input arguments. Type of argument ValObj.value must be string");var f=typeof t=="undefined"?this.GroupSeparator:t,e=typeof i=="undefined"?this.DecimalSeparator:i,a=typeof r=="undefined"?null:r;return f!=""&&this._isRegExpSpecSymbol(f)&&(f="\\"+f),this._isRegExpSpecSymbol(e)&&(e="\\"+e),o=f==""?"^-?(\\d+)DECIMAL?(\\d+)?$":"^-?(\\d+(GROUP\\d+)*)DECIMAL?(\\d+)?$",o=o.replace("GROUP",f).replace("DECIMAL",e),h=new RegExp(o,"img"),h.test(u)&&(f!=""&&(c=new RegExp(f+"(?=\\d)","img"),u=u.replace(c,"")),l=new RegExp(e,"img"),u=u.replace(l,"."),n.numberValue=a==0?parseInt(u,10):parseFloat(u),s=!0),s},CultInfoP._isRegExpSpecSymbol=function(n){return".()[]^$|?+".indexOf(n)>=0},CultInfoP.numberToFormattedString=function(n,t,i,r){var o,h,c;if(typeof n!="number")return null;var l=typeof i=="undefined"?this.DecimalSeparator:i,v=typeof t=="undefined"?this.GroupSeparator:t,e=typeof r=="undefined"?null:r,y=n+"",s=y.split("."),a=n<0?s[0].substring(1):s[0],u=s[1]?s[1]:"",f="";if(v!=="")for(o=a.length-1,h=0;o>=0;)f=a.charAt(o)+f,h==2&&o!=0?(f=v+f,h=0):h++,o--;else f=a;if(e!=null)if(e==0)u="";else if(e<=u.length)u=l+u.substr(0,e);else{while(u.length<e)u+="0";u=l+u}else u!=""&&(u=l+u);return c=f+u,n<0&&(c="-"+c),c},CultInfoP=null,PP.CultureNames={ru:"ru",en:"en",ar:"ar",zh:"zh-CN"},enCulture=new PP.CultureInfo,enCulture.CultureName=PP.CultureNames.en,enCulture.DisplayName="English",enCulture.DayNames=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],enCulture.ShortDayNames=["mo","tu","we","th","fr","sa","su"],enCulture.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],enCulture.ShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],enCulture.QuarterNames=["I First","II Second","III Third","IV Fourth"],enCulture.HalfYearNames=["I First","II Second"],enCulture.DateSeparator="/",enCulture.DateOrder="mdy",enCulture.DecimalSeparator=".",enCulture.GroupSeparator=",",enCulture.IsRTL=!1,enCulture.LCID=1033,ruCulture=new PP.CultureInfo,ruCulture.CultureName=PP.CultureNames.ru,ruCulture.DisplayName="Русский",ruCulture.DayNames=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],ruCulture.ShortDayNames=["П","В","С","Ч","П","С","В"],ruCulture.MonthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],ruCulture.ShortMonthNames=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],ruCulture.QuarterNames=["I первый","II второй","III третий","IV четвертый"],ruCulture.HalfYearNames=["I первое","II второе"],ruCulture.DateSeparator=".",ruCulture.DateOrder="dmy",ruCulture.DecimalSeparator=",",ruCulture.GroupSeparator=" ",ruCulture.IsRTL=!1,ruCulture.LCID=1049,arCulture=new PP.CultureInfo,arCulture.CultureName=PP.CultureNames.ar,arCulture.DisplayName="العربية",arCulture.DayNames=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],arCulture.ShortDayNames=["mo","tu","we","th","fr","sa","su"],arCulture.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],arCulture.ShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],arCulture.QuarterNames=["I First","II Second","III Third","IV Fourth"],arCulture.HalfYearNames=["I First","II Second"],arCulture.DateSeparator="/",arCulture.DateOrder="mdy",arCulture.DecimalSeparator=".",arCulture.GroupSeparator=",",arCulture.IsRTL=!0,arCulture.LCID=1,zhCulture=new PP.CultureInfo,zhCulture.CultureName=PP.CultureNames.zh,zhCulture.DisplayName="中文",zhCulture.DayNames=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],zhCulture.ShortDayNames=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],zhCulture.MonthNames=["1 月"," 2 月 "," 3 月 "," 4 月 "," 5 月 "," 6 月 "," 7 月 "," 8 月 "," 9 月 "," 10 月 "," 11 月 "," 12 月 "],zhCulture.ShortMonthNames=["1 月 ","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],zhCulture.QuarterNames=["一季度","二季度","三季度","四季度"],zhCulture.HalfYearNames=["上半年","下半年"],zhCulture.DateSeparator="/",zhCulture.DateOrder="mdy",zhCulture.DecimalSeparator=".",zhCulture.GroupSeparator=",",zhCulture.IsRTL=!1,zhCulture.LCID=2052,PP.Cultures={ru:ruCulture,en:enCulture,ar:arCulture,zh_CN:zhCulture},PP._currentCulture=PP.Cultures.en,PP.getCurrentCulture=function(){return PP._currentCulture},PP.setCurrentCulture=function(n){n instanceof PP.CultureInfo&&(PP._currentCulture=n,PP.cultureChanging.fire(this,new PP.EventArgs),PP.isResourceGroupLoaded(n.CultureName)&&(PP.resourceManager.refreshControls(),PP.cultureChanged.fire(this,new PP.EventArgs)),PP.resourceManager.isResourceFilesAttached()&&PP.resourceManager.StartupSetLoaded.fire(PP.resourceManager,new PP.EventArgs))},PP.isResourceGroupLoaded=function(n){return PP.resourceManager._resourceMap&&PP.resourceManager._resourceMap[n]},PP.cultureChanging=new PP.Delegate,PP.cultureChanged=new PP.Delegate,PP.ResourceManager=function(){this._RootResourcesFolder="",this._LoadedResources={},this._ResourceList=[],this._RegisteredResources={},this._NsRegistered=!1,this._ResourceNameTemplate="{0}.{1}",PP.ResourceManager.base.constructor.apply(this,arguments),this._controlMap={},this._resourceMap={},this._defineEvents(["ResourcesLoaded","ResourceFileLoaded","StartupSetLoaded"]),PP.cultureChanging&&PP.cultureChanging.add(this._onCultureChanging,this),this.ResourcesLoaded.add(this._onResourcesLoaded,this),this.ResourceFileLoaded.add(this._onResourceFileLoaded,this),this.StartupSetLoaded.add(this._onStartupSetLoaded,this),this._RootResourcesFolder&&this.attachResourceFiles()},PP.initClass(PP.ResourceManager,PP.Object,"ResourceManager"),resMngrPr=PP.ResourceManager.prototype,resMngrPr.getString=function(n,t){var i=PP.getCurrentCulture();return this._innerGetString(i,n,t)},resMngrPr.setString=function(n,t,i,r){var o=t.CultureName,u,f,e,s;if(i||(i=r,r=null),this._resourceMap[o]||(this._resourceMap[o]={}),u=this._resourceMap[o],r?(u[r]||(u[r]={}),f=u[r]):f=u,Array.isArray(i))for(e=0;e<i.length;e++)s=i[e],f[s]=n;else f[i]=n},resMngrPr.getRootResourcesFolder=function(){return this._RootResourcesFolder},resMngrPr.setRootResourcesFolder=function(n,t){if(this._RootResourcesFolder!==n&&(this._RootResourcesFolder=n,this._RootResourcesFolder&&t)){var i=PP.getCurrentCulture();this.isResourceFilesAttached(i)&&this.detachResourceFiles(i),this.attachResourceFiles()}},resMngrPr.isResourceFilesAttached=function(n){n||(n=PP.getCurrentCulture());return document.getElementById(this._getStartupResourceId(n))},resMngrPr.detachResourceFiles=function(n){var t,r,i,u;if(n||(n=PP.getCurrentCulture()),this._detachStartupResourceFile(n),this._NsRegistered)for(r in this._RegisteredResources)t=r,this._detachResourceFile(t,n);else for(i=0,u=this._ResourceList.length;i<u;i++)t=this._ResourceList[i],this._detachResourceFile(t,n)},resMngrPr._detachStartupResourceFile=function(n){var t=this._getStartupResourceId(n),i=document.getElementById(t),r=document.getElementsByTagName("head")[0];r.removeChild(i)},resMngrPr.isControlRegistered=function(n){var t=this._controlMap[n.getResourceKey()];return t?t.indexOf(n)>=0:!1},resMngrPr.registerControl=function(n){var t=n.getResourceKey(),u,f,i,r;this._controlMap[t]||(this._controlMap[t]=[]),this._controlMap[t].push(n),u=PP.getCurrentCulture(),f=u.CultureName,n&&(i=this._resourceMap[f],i&&(r=i[t],r&&n.setSettings(r)))},resMngrPr.unRegisterControl=function(n){var t=this._controlMap[n.getResourceKey()],i=t.indexOf(n);PP.rmvFrmArr(t,i),t.length==0&&delete this._controlMap[n.getResourceKey()],delete this._controlMap[n.getResourceKey()]},resMngrPr.isResourceFileAttached=function(n){if(!n)return!1;return document.getElementById(n)},resMngrPr.attachResourceFiles=function(n){var i;if(this._RootResourcesFolder||(this._RootResourcesFolder=this._findResourceFolder(),this._RootResourcesFolder)){n||(n=PP.getCurrentCulture()),this._RegisteredResources={};var r=this._getStartupResourceId(n),u=this._getStartupResourceName(n)+".js",t=document.createElement("script");t.setAttribute("id",r),t.setAttribute("src",this._RootResourcesFolder+u),t.setAttribute("type","text/javascript"),i=document.getElementsByTagName("head")[0],i.appendChild(t)}},resMngrPr._getStartupResourceName=function(){return"Startup.resources"},resMngrPr._getStartupResourceId=function(){return"Startup"},resMngrPr._detachResourceFile=function(n,t){t||(t=PP.getCurrentCulture());var i=document.getElementsByTagName("head")[0],r=document.getElementById(this._getResId(n,t));i.removeChild(r),delete this._resourceMap[t.CultureName]},resMngrPr._getResId=function(n,t){return this._ResourceNameTemplate.replace("{0}",n).replace("{1}",t.CultureName)},resMngrPr.setResourceList=function(n){this._ResourcesCnt=n.length,this._ResourceList=n},resMngrPr._innerGetString=function(n,t,i){var f=n.CultureName,r,u;if(this._resourceMap[f]&&(r=this._resourceMap[f],r))if(i){if(u=r[i],u)return u[t]?u[t]:""}else return r[t]?r[t]:"";return""},resMngrPr._onCultureChanging=function(){this.isResourceFilesAttached()||this.attachResourceFiles()},resMngrPr._onResourcesLoaded=function(){var r=PP.getCurrentCulture(),i=r.CultureName;this._resourceMap[i]||(this._resourceMap[i]={}),this.refreshControls(),PP.cultureChanged.fire(this,new PP.EventArgs)},resMngrPr._onResourceFileLoaded=function(n,t){var i=PP.getCurrentCulture(),r=t.Name+"."+i.CultureName;this._LoadedResources[r]=!0,this._isAllResourcesLoaded(i)&&this.ResourcesLoaded.fire(this,new PP.EventArgs)},resMngrPr._onStartupSetLoaded=function(){var i=PP.getCurrentCulture();this._registerNamespaces(),this._loadResources(i)},resMngrPr._registerNamespaces=function(){var i,n,t,r;if(!PP._allNamespaces)return null;for(i in PP._allNamespaces)if(n=PP._allNamespaces[i],n._Type==PP.Entity.Namespace&&n._ResourceGroup)if(this._NsRegistered=!0,Array.isArray(n._ResourceGroup))for(t=0,r=n._ResourceGroup.length;t<r;t++)this._RegisteredResources[n._ResourceGroup[t]]=n._Name;else this._RegisteredResources[n._ResourceGroup]=n._Name},resMngrPr._isAllResourcesLoaded=function(n){var t,r,i,u;if(this._NsRegistered){for(r in this._RegisteredResources)if(t=r+"."+n.CultureName,!this._LoadedResources[t])return!1;return!0}for(i=0,u=this._ResourceList.length;i<u;i++)if(t=this._ResourceList[i]+"."+n.CultureName,!this._LoadedResources[t])return!1;return!0},resMngrPr._loadResources=function(n){var t,i,u,r,f;if(this._NsRegistered)for(u in this._RegisteredResources)t=u,i=this._getResId(t,n),this.isResourceFileAttached(i)||this._loadResourceFile(t);else for(r=0,f=this._ResourceList.length;r<f;r++)t=this._ResourceList[r],i=this._getResId(t,n),this.isResourceFileAttached(i)||this._loadResourceFile(t)},resMngrPr._loadResourceFile=function(n){var i=PP.getCurrentCulture(),r=this._RootResourcesFolder+n+".resources."+i.CultureName+".js",t=document.createElement("script"),u;t.setAttribute("id",this._getResId(n,i)),t.setAttribute("src",r),t.setAttribute("type","text/javascript"),u=document.getElementsByTagName("head")[0],u.appendChild(t),this._fileExists(r)||this.ResourceFileLoaded.fire(this,{Name:n})},resMngrPr.refreshControls=function(){var o=PP.getCurrentCulture(),s=o.CultureName,i,r,t,u,f,e;for(i in this._controlMap)for(r=this._controlMap[i],t=0;t<r.length;t++)u=r[t],u&&(f=this._resourceMap[s],f&&(e=f[i],e&&u.setSettings(e)))},resMngrPr._fileExists=function(n){if(!n.indexOf("file:"))return!1;var t=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;return t.open("GET",n,!1),t.send(),t.status===404?!1:!0},resMngrPr._findResourceFolder=function(){for(var u="{0}//{1}".replace("{0}",location.protocol).replace("{1}",location.host),t=location.pathname.split("/"),i="",f=t.length>2?2:t.length,r,n=0;n<f;n++)if(i="{0}{1}/{2}".replace("{0}",u).replace("{1}",t[n]?"/"+t[n]:"").replace("{2}","resources/"),r=i+"Startup.resources.js",this._fileExists(r))return i;return i},resMngrPr=null,PP.resourceManager=new PP.ResourceManager,PP.Ui={},PP.initNamespace(PP.Ui,"PP.Ui",["MapMaster","ChartMaster","TabSheetMaster","GaugeMaster"]),(PP.Ui.Visibility=function(){var n=PP.Ui.Visibility;n.Collapsed="Collapsed",n.Visible="Visible",n.Hidden="Hidden",PP.initEnum(n,"PP.Ui.Visibility")})(),(PP.LTRB=function(){PP.LTRB.Left="Left",PP.LTRB.Top="Top",PP.LTRB.Right="Right",PP.LTRB.Bottom="Bottom",PP.initEnum(PP.LTRB,"PP.LTRB")})(),(PP.Orientation=function(){PP.Orientation.Vertical="Vertical",PP.Orientation.Horizontal="Horizontal",PP.initEnum(PP.Orientation,"PP.Orientation")})(),(PP.Ui.AnchorStyles=function(){var n=PP.Ui.AnchorStyles;n.Top="Top",n.Left="Left",n.Right="Right",n.Bottom="Bottom",n.None="None",PP.initEnum(PP.Ui.AnchorStyles,"PP.Ui.AnchorStyles")})(),(PP.Key=function(){PP.Key.Backspace=8,PP.Key.Tab=9,PP.Key.Enter=13,PP.Key.Esc=27,PP.Key.Space=32,PP.Key.PageUp=33,PP.Key.PageDown=34,PP.Key.End=35,PP.Key.Home=36,PP.Key.Left=37,PP.Key.Up=38,PP.Key.Right=39,PP.Key.Down=40,PP.Key.Del=46,PP.initEnum(PP.Key,"PP.Key")})(),(PP.MouseButton=function(){var n=PP.MouseButton;n.Left=1,n.Middle=2,n.Right=3,PP.initEnum(n,"PP.MouseButton")})(),PP.Templates={Radius0:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr><td class='PPRoundedMiddleCenter'>{Content}</td></tr></tbody></table>",Radius1:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr style='height: 1px'><td class='PPRoundedTopLeft' style='width: 1px'><div class='PPFirst'></div></td><td class='PPRoundedTopCenter'><div class='PPFirst'></div></td><td class='PPRoundedTopRight' style='width: 1px'><div class='PPFirst'></div></td></tr><tr><td class='PPMiddleFirst' style='width: 1px;'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPMiddleFirst' style='width: 1px;'></td></tr><tr style='height: 1px'><td class='PPRoundedBottomLeft' style='width: 1px'><div class='PPFirst'></div></td><td class='PPRoundedBottomCenter'><div class='PPFirst'></div></td><td class='PPRoundedBottomRight' style='width: 1px'><div class='PPFirst'></div></td></tr></tbody></table>",Radius2:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr style='height: 2px'><td class='PPRoundedTopLeft' colspan='2' style='width: 2px'><div class='PPFirst'></div><div class='PPSecond'></div></td><td class='PPRoundedTopCenter'><div class='PPFirst'></div></td><td class='PPRoundedTopRight' colspan='2' style='width: 2px'><div class='PPFirst'></div><div class='PPSecond'></div></td></tr><tr><td class='PPMiddleFirst Left' style='width: 1px;'></td><td class='PPMiddleSecond Left' style='width: 1px;'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPMiddleSecond Right' style='width: 1px;'></td><td class='PPMiddleFirst Right' style='width: 1px;'></td></tr><tr style='height: 2px'><td class='PPRoundedBottomLeft' colspan='2' style='width: 2px'><div class='PPSecond'></div><div class='PPFirst'></div></td><td class='PPRoundedBottomCenter'><div class='PPFirst'></div></td><td class='PPRoundedBottomRight' colspan='2' style='width: 2px'><div class='PPSecond'></div><div class='PPFirst'></div></td></tr></tbody></table>",Button:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr class='PPRoundedTop'><td class='PPRoundedTopLeft' colspan='3'><div></div></td><td class='PPRoundedTopCenter'><div class='PPFirst'></div></td><td class='PPRoundedTopRight' colspan='3'><div></div></td></tr><tr class='PPRoundedMiddle'><td class='PPMiddleFirst Left'></td><td class='PPMiddleSecond Left'></td><td class='PPMiddleThird Left'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPMiddleThird Right'></td><td class='PPMiddleSecond Right'></td><td class='PPMiddleFirst Right'></td></tr><tr class='PPRoundedBottom'><td class='PPRoundedBottomLeft' colspan='3'></td><td class='PPRoundedBottomCenter'><div class='PPFirst'></div></td><td class='PPRoundedBottomRight' colspan='3'></td></tr></tbody></table>",RibbonButton:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr class='PPRoundedTop'><td class='PPRoundedTopLeft' colspan='2'></td><td class='PPRoundedTopCenter'><div class='PPFirst'></div></td><td class='PPRoundedTopRight' colspan='2'></td></tr><tr class='PPRoundedMiddle'><td class='PPMiddleFirst Left'></td><td class='PPMiddleSecond Left'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPMiddleSecond Right'></td><td class='PPMiddleFirst Right'></td></tr><tr class='PPRoundedBottom'><td class='PPRoundedBottomLeft' colspan='2'></td><td class='PPRoundedBottomCenter'><div class='PPFirst'></div></td><td class='PPRoundedBottomRight' colspan='2'></td></tr></tbody></table>",ScrollBar:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr style='height: 2px'><td class='PPRoundedTopLeft' colspan='2' style='width: 2px'><div class='PPFirst'></div><div class='PPSecond'></div></td><td class='PPRoundedTopCenter'><div class='PPFirst'></div></td><td class='PPRoundedTopRight' colspan='2' style='width: 2px'><div class='PPFirst'></div><div class='PPSecond'></div></td></tr><tr><td class='PPMiddleFirst'></td><td class='PPMiddleSecond Left'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPMiddleSecond Right'></td><td class='PPMiddleFirst'></td></tr><tr style='height: 2px'><td class='PPRoundedBottomLeft' colspan='2' style='width: 2px'><div class='PPSecond'></div><div class='PPFirst'></div></td><td class='PPRoundedBottomCenter'><div class='PPFirst'></div></td><td class='PPRoundedBottomRight' colspan='2' style='width: 2px'><div class='PPSecond'></div><div class='PPFirst'></div></td></tr></tbody></table>",DropPanel:"<table cellspacing='0' cellpadding='0' border='0' class='DropPanelTable'><tbody><tr><td class='PPDropPanelTopLeft'><div class='PPDropSpacer'>&nbsp;</div></td><td class='PPDropPanelTopCenter'>&nbsp;</td><td class='PPDropPanelTopRight'><div class='PPDropSpacer'>&nbsp;</div></td></tr><tr><td class='PPDropPanelMiddleLeft'>&nbsp;</td><td class='PPDropPanelMiddleCenter'>{Content}</td><td class='PPDropPanelMiddleRight'>&nbsp;</td></tr><tr><td class='PPDropPanelBottomLeft'>&nbsp;</td><td class='PPDropPanelBottomCenter'>&nbsp;</td><td class='PPDropPanelBottomRight'>&nbsp;</td></tr></tbody></table>",RibbonMainButton:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr><td class='PPRoundedMiddleLeft'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPRoundedMiddleRight'></td></tr></tbody></table>",ToolBarButton:"<table cellspacing='0' cellpadding='0' border='0' class='PPRoundedTable'><tbody><tr><td class='PPRoundedTopLeft' colspan='3'></td><td class='PPRoundedTopCenter'><div class='PPFirst'></div></td><td class='PPRoundedTopRight' colspan='3'></td></tr><tr><td class='PPMiddleFirst Left'></td><td class='PPMiddleSecond Left'></td><td class='PPMiddleThird Left'></td><td class='PPRoundedMiddleCenter'>{Content}</td><td class='PPMiddleThird Right'></td><td class='PPMiddleSecond Right'></td><td class='PPMiddleFirst Right'></td></tr><tr><td class='PPRoundedBottomLeft' colspan='3'></td><td class='PPRoundedBottomCenter'><div class='PPFirst'></div></td><td class='PPRoundedBottomRight' colspan='3'></td></tr></tbody></table>"},(PP.HorizontalAlignment=function(){var n=PP.HorizontalAlignment;n.Left="Left",n.Center="Center",n.Right="Right",n.Justify="Justify"})(),(PP.VerticalAlignment=function(){var n=PP.VerticalAlignment;n.Top="Top",n.Middle="Middle",n.Bottom="Bottom"})(),PP._htmlCache={},PP.htmlToDOM=function(n,t,i){var r=PP._htmlCache[n];return r?r=r.cloneNode(!0):(r=document.createElement("span"),r._ppTmpSpan=!0,r.innerHTML=n,i||(PP._htmlCache[n]=r.cloneNode(!0))),t?r.childNodes:r.firstChild},PP.getSizeOf=function(n){var t,i;return typeof n.innerHTML=="undefined"?null:(t=PP.htmlToDOM("<div style='position:absolute; zIndex:400; top:-500px; left:-500px; overflow:auto'>"+n.innerHTML+" </div>"),document.body.appendChild(t),i={Height:t.offsetHeight,Width:t.offsetWidth},document.body.removeChild(t),i)},PP.Capture=["click","mousedown","mouseup","mousemove","mouseover","mouseout"],PP.Ui._capture=function(n){var t=PP.Ui._capture.domNode;if(!t.flag){t.flag=!0;var u=document.createEvent("MouseEvents"),r=n.type,f=n.bubbles,e=n.cancelable,o=n.view,s=n.detail,b=n.screenX,c=n.screenY,l=n.clientX,a=n.clientY,v=n.ctrlKey,y=n.altKey,p=n.shiftKey,w=n.metaKey,h=n.button,i=n.relatedTarget;Object.prototype.toString.call(i)=="[object XULElement]"&&(i=null),u.initMouseEvent(r,f,e,o,s,b,c,l,a,v,y,p,w,h,i),t.dispatchEvent?t.dispatchEvent(u):t.fireEvent("on"+r),delete t.flag}},PP.getCaptureNode=function(){return PP.Ui._capture.domNode},PP.setCapture=function(n,t){if(!n)throw PP.ArgumentNullException();if(n.setCapture&&n.releaseCapture&&!t)n.setCapture(!0);else{if(t=t||PP.Capture,PP.Ui._capture.domNode)throw PP.Exception();PP.Ui._capture.domNode=n;for(var i=0;i<t.length;i++)window.addEventListener?window.addEventListener(t[i],PP.Ui._capture,!0):window.attachEvent&&window.attachEvent("on"+t[i],PP.Ui._capture);PP.Ui._capture.events=t}},PP.releaseCapture=function(n){var i,t;if(!n)throw new Error("ArgumentNullException");if(n.setCapture&&n.releaseCapture&&!PP.Ui._capture.events)n.releaseCapture();else if(n==PP.Ui._capture.domNode)for(i=PP.Ui._capture.events||PP.Capture,delete PP.Ui._capture.domNode,delete PP.Ui._capture.events,t=0;t<i.length;t++)window.removeEventListener?window.removeEventListener(i[t],PP.Ui._capture,!0):window.detachEvent&&window.detachEvent("on"+i[t],PP.Ui._capture)},PP.Ui._preventDefault=function(){this.returnValue=!1},PP.Ui._stopPropagation=function(){this.cancelBubble=!0},PP.fixEvent=function(n,t){var u,i,r;if(n.isFixed)return n;if(n.isFixed=!0,n.preventDefault=n.preventDefault||PP.Ui._preventDefault,n.stopPropagation=n.stopPropagation||PP.Ui._stopPropagation,n.target||(n.target=n.srcElement),!n.relatedTarget&&n.fromElement&&(u=n.fromElement==n.target?n.toElement:n.fromElement,(u||!PP.IsOpera)&&(n.relatedTarget=u)),n.pageX==null&&n.clientX!=null&&(i=document.documentElement,r=document.body,n.pageX=n.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i.clientLeft||0),n.pageY=n.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i.clientTop||0)),!n.which&&typeof n.button=="number")switch(n.button){case 1:n.which=1;break;case 2:n.which=3;break;case 3:n.which=0;break;case 4:n.which=2}return n.sourceElement=t,n},PP.getStyle=function(n,t,i){var r,f,e,u;if(typeof n!="object"&&(n=document.getElementById(n)),!PP.IsIE&&document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(n,""),e.getPropertyValue&&(t.match(/[A-Z]/)&&(t=t.replace(/([A-Z])/g,"-$1").toLowerCase()),r=n.style[t]||e.getPropertyValue(t))),n.currentStyle){while((u=t.indexOf("-"))!=-1)t=t.substr(0,u)+t.substr(u+1,1).toUpperCase()+t.substr(u+2);r=n.style[t]||n.currentStyle[t]}return(PP.IsOpera&&r!=undefined&&(r=r.replace(/"(.*)"/,"$1")),r!=undefined)?i?(f=parseFloat(r),isNaN(f)?0:f):r:""},PP.addClass=function(n,t){if(n.className){var i=" "+n.className+" ";i.indexOf(" "+t+" ")<0&&(n.className+=" "+t)}else n.className=t},PP.removeClass=function(n,t){var i=" "+n.className+" ";i=i.replace(" "+t+" "," "),i=PP.String.trim(i),n.className=i},PP.hasClass=function(n,t){var i=" "+n.className+" ";return i.indexOf(" "+t+" ")>=0},PP.isVisible=function(n){if((n instanceof PP.Ui.Control&&(n=n.getDomNode()),!n||n.parentNode==null||n.offsetParent==null)||PP.getStyle(n,"visibility")=="hidden"||PP.getStyle(n,"display")=="none")return!1;var i=!0,t=n.getAttribute("id"),r=!t;return t||(t="PPTempId",n.setAttribute("id",t)),document.getElementById(t)==null&&(i=!1),r&&n.removeAttribute("id"),i},PP.show=function(n){PP.IsFF&&n.tagName==="g"||typeof n.ownerSVGElement!="undefined"?n.style.display="":PP.removeClass(n,"PPHide")},PP.hide=function(n){PP.IsFF&&n.tagName==="g"||typeof n.ownerSVGElement!="undefined"?n.style.display="none":PP.addClass(n,"PPHide")},PP.removeChildren=function(n){n&&n.innerHTML&&(n.innerHTML="")},PP.widthToPixel=function(n){if(isNaN(parseInt(n))||isNaN(parseFloat(n)))return 0;if(n.length<3)return null;if(n.substr(n.length-2,2)=="px")return parseInt(n);var t=document.createElement("DIV");return t.style.height=n,t.style.pixelHeight},PP.calculateOffset=function(n){if(typeof n.getBoundingClientRect!="undefined"){var e=n.getBoundingClientRect(),u=document.body,f=document.documentElement,o=window.pageYOffset||f.scrollTop||u.scrollTop,s=window.pageXOffset||f.scrollLeft||u.scrollLeft,h=f.clientTop||u.clientTop||0,c=f.clientLeft||u.clientLeft||0,l=e.top+o-h,a=e.left+s-c;return{X:Math.round(a),Y:Math.round(l)}}var i=0,r=0,t=n;if(PP.IsIE){while(t)i+=t.offsetLeft-t.scrollLeft,r+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{X:i,Y:r}}while(t)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;for(t=n;t;)t.scrollLeft&&(i-=t.scrollLeft),t.scrollTop&&(r-=t.scrollTop),t=t.parentNode;return{X:i,Y:r}},PP.calculateMouseCoords=function(n){return{X:PP.calculateMouseX(n),Y:PP.calculateMouseY(n)}},PP.calculateMouseX=function(n){return n.pageX?n.pageX:n.clientX?n.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):null},PP.calculateMouseY=function(n){return n.pageY?n.pageY:n.clientY?n.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):null},PP.reallyOut=function(n,t){for(var i=t.relatedTarget?t.relatedTarget:t.toElement;i&&i!=n;)i=i.parentNode;return i!=n},PP.reallyOver=function(n,t){for(var i=t.relatedTarget?t.relatedTarget:t.fromElement;i&&i!=n;)i=i.parentNode;return i!=n},PP.isDownOn=function(n,t){var i=PP.calculateMouseCoords(t),r=PP.calculateOffset(n);return i.X>=r.X&&i.X<=r.X+n.offsetWidth&&i.Y>=r.Y&&i.Y<=r.Y+n.offsetHeight?!0:!1},PP.querySelector=function(n,t){try{if(n.querySelector)return n.querySelector(t)}catch(i){}if(typeof jQuery!="undefined")return $(n).find(t).get(0);throw new Error("'querySelector' function is not available");},PP.querySelectorAll=function(n,t){try{if(n.querySelectorAll)return n.querySelectorAll(t)}catch(i){}if(typeof jQuery!="undefined")return $(n).find(t).toArray();throw new Error("'querySelectorAll' function is not available");},PP.createElement=function(n,t,i){i||(i="DIV");var r=document.createElement(i);return i.toUpperCase()=="TABLE"&&(r.cellPadding=0,r.cellSpacing=0,r.border=0),t&&(r.className=t),n&&n.appendChild(r),r},PP.initOS=function(n){n&&(window.navigator.appVersion.indexOf("Win")!=-1&&PP.addClass(n,"PPWindows"),window.navigator.appVersion.indexOf("Mac")!=-1&&PP.addClass(n,"PPMacOS"),window.navigator.appVersion.indexOf("X11")!=-1&&PP.addClass(n,"PPUnix"),window.navigator.appVersion.indexOf("Linux")!=-1&&PP.addClass(n,"PPLinux"))},PP.AnimationSettings=function(n,t){this.UseAnimation=typeof n=="undefined"?!0:n,this.AnimationTime=typeof t=="undefined"?400:t},PP.Ui.Control=function(n){if(this._IsRTL||(this._IsRTL=document.dir==="rtl"),this._defineEvents(["Click","DblClick","KeyDown","KeyUp","MouseDown","MouseUp","MouseOver","MouseOut","ContextMenu","DragStart","Drag","DragEnd","DragOver","DragOut","KeyPress","SizeChanging","SizeChanged"],"Control"),this._NodesStyles=null,this._Style=null,n){var t=n.ParentNode;if(t)if(typeof t=="string")this._ParentNode=document.getElementById(t);else if(t.appendChild)this._ParentNode=t;else throw new Error("Error in ParentNode");}PP.Ui.Control.base.constructor.apply(this,arguments)},PP.Ui.Control._DragDrop={Data:null},PP.Ui.Control._EventMap={Click:{NativeEvent:"click",HandleName:"_onClicked"},DblClick:{NativeEvent:"dblclick",HandleName:"_onDblClick"},KeyDown:{NativeEvent:"keydown",HandleName:"_onKeyDown"},KeyPress:{NativeEvent:"keypress",HandleName:"_onKeypress"},KeyUp:{NativeEvent:"keyup",HandleName:"_onKeyUp"},MouseDown:{NativeEvent:"mousedown",HandleName:"_onMouseDown"},MouseUp:{NativeEvent:"mouseup",HandleName:"_onMouseUp"},MouseOver:{NativeEvent:"mouseover",HandleName:"_onMouseOver"},MouseOut:{NativeEvent:"mouseout",HandleName:"_onMouseOut"},ContextMenu:{NativeEvent:"contextmenu",HandleName:"_onContextMenu"}},PP.initClass(PP.Ui.Control,PP.Object,"Control"),ctrlP=PP.Ui.Control.prototype,ctrlP._ParentNode=null,ctrlP._Content=null,ctrlP._ContextMenu=null,ctrlP._TabIndex=null,ctrlP._Data=null,ctrlP._Tag=null,ctrlP._Value=null,ctrlP._ToolTip=null,ctrlP._ResourceKey="",ctrlP._Anchors=PP.Ui.AnchorStyles.None,ctrlP._AnchorFlags=null,ctrlP._IsResizable=!1,ctrlP._IsVisible=!0,ctrlP._Enabled=!0,ctrlP._ShowToolTip=!0,ctrlP._Class="",ctrlP._Top=0,ctrlP._Left=0,ctrlP._Bottom=0,ctrlP._Right=0,ctrlP._isBind=!1,ctrlP._Width="0",ctrlP._Height="0",ctrlP.getDomNode=function(){return this._DomNode},ctrlP._handle=function(n){var t=this,r,u,e,f,o,i;if(t.events){e=t.ownerDocument==null?t.parentWindow?t.parentWindow:window:t.ownerDocument.parentWindow,n=n?n:e.event,PP.IsIE&&PP.IEVer<9&&(n=n?n:t.event),f=t.events[n.type];for(o in f)if(i=f[o],i.FixEvent!==!1&&(n=PP.fixEvent(n,t)),u={Event:n,Element:t,Break:!1},r=i.Handle.call(i.Self,i.Self,u),u.Break)break}if(r===!1)return n.preventDefault(),n.stopPropagation(),r},ctrlP._addEvent=function(n,t,i,r){var f=this._getGuid(i,t),u;n.events||(n.events={}),u=n.events[t],u||(u=n.events[t]={},n.addEventListener?n.addEventListener(t,this._handle,!1):n["on"+t]=this._handle),u&&!u[f]&&(u[f]={Handle:i,Self:this,FixEvent:r})},ctrlP._addEvents=function(n,t,i){if(!n||!t)throw PP.ArgumentNullException(this);for(var r in t)this._addEvent(n,r,t[r],i)},PP.Ui.Control._handleId=0,ctrlP._getGuid=function(n,t){return n.guid||(n.guid=++PP.Ui.Control._handleId),this._Id+t+n.guid},ctrlP._removeEvent=function(n,t,i){var r=n.events&&n.events[t],u;if(r){delete r[this._getGuid(i,t)];for(u in r)return;n.removeEventListener?n.removeEventListener(t,this._handle,!1):n["on"+t]=null,delete n.events[t];for(u in n.events)return;try{delete n.events}catch(f){n.removeAttribute&&n.removeAttribute("events")}}},ctrlP._removeAllEvents=function(n){if(n.events)try{for(var t in n.events)n.removeEventListener?n.removeEventListener(t,this._handle,!1):n["on"+t]=null;delete n.events}catch(i){n.removeAttribute&&n.removeAttribute("events")}},ctrlP._bindEvents=function(){var n,i,r,t;if(!this._isBind){PP.cultureChanged&&PP.cultureChanged.add(this._onCultureChanged,this),PP.cultureChanging&&PP.cultureChanging.add(this._onCultureChanging,this),n=PP.Ui.Control._EventMap,i=this._DomNode;for(r in n)t=n[r],this._addEvent(i,t.NativeEvent,this[t.HandleName]);this._isBind=!0}},ctrlP._unBindEvents=function(){this._isBind&&(this._removeAllEvents(this._DomNode),PP.cultureChanged.remove(this._onCultureChanged,this),PP.cultureChanging.remove(this._onCultureChanging,this),this._isBind=!1)},ctrlP._hideContextMenu=function(){this._ContextMenu&&this._ContextMenu.hide&&this._ContextMenu.hide()},ctrlP._onContextMenu=function(n,t){if(this.isLive()&&this._Enabled&&(this._hideContextMenu(),t.ShowMenu=!0,this.ContextMenu.fire(n,t),this._ContextMenu&&this._ContextMenu.show&&t.ShowMenu)){var i=PP.calculateMouseCoords(t.Event);this._ContextMenu.showContext(i.X,i.Y)}t.Event.preventDefault()},ctrlP._onClicked=function(n,t){if(this.isLive()&&this._Enabled)return this.Click.fire(n,t)},ctrlP._onDblClick=function(n,t){if(this.isLive()&&this._Enabled)return this.DblClick.fire(n,t)},ctrlP._onKeyDown=function(n,t){if(this.isLive()&&this._Enabled)return this.KeyDown.fire(n,t)},ctrlP._onKeyUp=function(n,t){if(this.isLive()&&this._Enabled)return this.KeyUp.fire(n,t)},ctrlP._onKeypress=function(n,t){if(this.isLive()&&this._Enabled)return this.KeyPress.fire(n,t)},ctrlP._onMouseDown=function(n,t){if(this.isLive()&&this._Enabled)return this._onContentMouseDown(n,t),!this._isResingNow&&this.DragStart.getCount()>0&&!PP.getCaptureNode()&&!PP.Ui.Control._DragDrop.Data&&(this._addEvent(this._DomNode,"mousemove",this._onDragDropMouseMove),this._addEvent(document,"mouseup",this._onDDDocMouseUp)),this.MouseDown.fire(n,t)},ctrlP._onDragDropMouseMove=function(n,t){if(!PP.Ui.Control._DragDrop.Data&&(t.Data=null,t.MovingNode=null,t.DoDragDrop=!1,this._raiseDragStart(t),t.DoDragDrop)){var i=PP.Ui.Control._DragDrop;i.Data=t.Data?t.Data:{},t.MovingNode&&(i.MovingNode=t.MovingNode,PP.addClass(i.MovingNode,"PPCtrlDragNode"),document.body.appendChild(i.MovingNode),i.MovingNode._PPW=i.MovingNode.offsetWidth,i.MovingNode._PPH=i.MovingNode.offsetHeight),this.Drag.fire(this,t),this._addEvent(document,"mousemove",this._onDragMouseMove)}this._removeEvent(this._DomNode,"mousemove",this._onDragDropMouseMove)},ctrlP._onDragMouseMove=function(n,t){this.Drag.fire(this,t);var i=PP.Ui.Control._DragDrop.MovingNode;i&&(PP.IsIE||PP.IsOpera?(i.style.top=t.Event.clientY+1+"px",i.style.left=t.Event.clientX+1+"px"):(i.style.top=t.Event.clientY-i._PPH/2+"px",i.style.left=t.Event.clientX-i._PPW/2+"px"))},ctrlP._onMouseUp=function(n,t){if(this.isLive()&&this._Enabled)return this._onDDDocMouseUp(n,t),this.MouseUp.fire(n,t)},ctrlP._onDragEndTimout=function(){delete PP.Ui.Control._DragDrop.timeId,PP.Ui.Control._DragDrop.Data=null},ctrlP._onDDDocMouseUp=function(n,t){var i=PP.Ui.Control._DragDrop;i.Data&&(document.body.style.cursor="auto",t.Data=i.Data,this.DragEnd.fire(this,t),i.timeId||(i.timeId=PP.setTimeout(this._onDragEndTimout,0,null))),i.MovingNode&&(document.body.removeChild(i.MovingNode),delete i.MovingNode),this._removeEvent(this._DomNode,"mousemove",this._onDragDropMouseMove),this._removeEvent(document,"mouseup",this._onDDDocMouseUp),this._removeEvent(document,"mousemove",this._onDragMouseMove)},ctrlP._onMouseOver=function(n,t){return this.isLive()&&this._Enabled&&PP.reallyOver(this._DomNode,t.Event)&&(PP.Ui.Control._DragDrop.Data&&(t.Data=PP.Ui.Control._DragDrop.Data,this.DragOver.fire(this,t)),this.MouseOver.fire(n,t)),this},ctrlP._showToolTip=function(){this._ToolTipTOId&&PP.clearTimeout(this._ToolTipTOId),this._ToolTip&&this._ShowToolTip&&(this._addEvent(this._DomNode,"mousemove",this._onBeforeTooltipShowMouseMove),this._ToolTipTOId=PP.setTimeout(this._onBeforeTooltipShow,500,{Self:this}))},ctrlP._onBeforeTooltipShow=function(n){var t,i,r,u;n!=null&&n.Self!=null&&n.Self.isLive()&&(t=n.Self,t._removeEvent(t._DomNode,"mousemove",t._onBeforeTooltipShowMouseMove),i=t._ToolTipCoords,i)&&(r=i.X,u=i.Y,t._ToolTipCoords=null,t._Enabled&&PP.isVisible(t._DomNode)&&t._ToolTip.show(r,u+24))},ctrlP._onBeforeTooltipShowMouseMove=function(n,t){this._ToolTipCoords=PP.calculateMouseCoords(t.Event)},ctrlP._onMouseOut=function(n,t){return this.isLive()&&this._Enabled&&PP.reallyOut(this._DomNode,t.Event)&&(PP.Ui.Control._DragDrop.Data&&(t.Data=PP.Ui.Control._DragDrop.Data,this.DragOut.fire(this,t)),this.MouseOut.fire(n,t)),this},ctrlP._hideToolTip=function(){this.hideToolTip()},ctrlP._onCultureChanged=function(){},ctrlP._onCultureChanging=function(){},ctrlP._initFromHTML=function(n,t){var u=this._DomNode,e,i,r,f;u?u.innerHTML=PP.htmlToDOM(n).innerHTML:u=this._DomNode=PP.htmlToDOM(n),this._Id!=null&&(u.id=this._Id),PP.isNumber(this.getTabIndex())||this.setTabIndex(this._TabIndex),this._ToolTip&&this.setToolTip(this._ToolTip),e=this._Style,e&&this.setStyle(e),i=this._Width,r=this._Height,t&&(f="px",parseFloat(i)&&(i.toString().indexOf("%")>-1?f="%":this._Width=parseFloat(i),u.style.width=this._checkValue(i)+f),f="px",parseFloat(r)&&(r.toString().indexOf("%")>-1?f="%":this._Height=parseFloat(r),u.style.height=this._checkValue(r)+f)),i=this._Width,r=this._Height,PP.isString(i)&&i.indexOf("%")<0&&(this._Width=parseFloat(i)),PP.isString(r)&&r.indexOf("%")<0&&(this._Height=parseFloat(r)),this._Class&&PP.addClass(u,this._Class)},ctrlP._initSize=function(){var n,t;this._Width&&(n=this._Width,this._Width=null,this.setWidth(n)),this._Height&&(t=this._Height,this._Height=null,this.setHeight(t))},ctrlP._adjustMarkup=function(){this._DomNode&&(this._DomNode.dir=this._IsRTL?"rtl":"ltr")},ctrlP._setContentToNode=function(n,t,i,r){var f,e,u,o;if(typeof i=="undefined"&&(i="Content"),f=this["_"+i],typeof f=="undefined"||!t)throw new Error("ArgumentNullException");if(f!==n||r){if(Array.isArray(f))for(e=0;e<f.length;e++)f[e]instanceof PP.Ui.Control&&f[e].removeFromDOM();else f instanceof PP.Ui.Control&&f.removeFromDOM();if(u="",Array.isArray(n)){for(t.innerHTML="",e=0;e<n.length;e++)o=n[e],u=typeof o,u=="string"||u=="number"||u=="date"||u=="boolean"?t.appendChild(PP.htmlToDOM(o)):o&&(o instanceof PP.Ui.Control?o.addToNode(t):o.PPType?PP.create(o).addToNode(t):t.appendChild(o));this["_"+i]=n}else u=typeof n,u=="string"||u=="number"||u=="date"||u=="boolean"?t.innerHTML=n:(t.innerHTML="",n&&(n instanceof PP.Ui.Control?n.addToNode(t):n.PPType?PP.create(n).addToNode(t):t.appendChild(n))),n===undefined&&(n=null),this["_"+i]=n}return this},ctrlP._getMouseButton=function(n){return!n.which&&n.button&&(n.button&1?n.which=1:n.button&4?n.which=2:n.button&2&&(n.which=3)),n.which},ctrlP._onDragStart=function(n,t){var f,e;this._DragCloneNode=PP.htmlToDOM("<div class='PPDragClone' style='display: none; position: absolute;'></div>"),f=this._DomNode.offsetHeight,e=this._DomNode.offsetWidth+"px",this._DragCloneNode.style.height=f+"px",this._DragCloneNode.style.width=e,document.body.insertBefore(this._DragCloneNode,document.body.firstChild),PP.setCapture(this._DragCloneNode);for(var r=PP.calculateOffset(this._DomNode),o=PP.calculateMouseCoords(t.Event),u={X:0,Y:0},i=this._DomNode.parentNode;i;){if(PP.getStyle(i,"position")=="absolute"){u=PP.calculateOffset(i);break}i=i.offsetParent}this._DragXMouseDifference=o.X-r.X,this._DragYMouseDifference=o.Y-r.Y,this._DragXDomDifference=u.X,this._DragYDomDifference=u.Y,this._DragCloneNode.style.left=r.X+"px",this._DragCloneNode.style.top=r.Y+"px",this.MouseDown.remove(this._onDragStart,this),this._addEvents(document,{mousemove:this._onDrag,mouseup:this._onDragEnd}),this._raiseDragStart(t)},ctrlP._raiseDragStart=function(n){this.DragStart.fire(this,n)},ctrlP._onDrag=function(n,t){this._DragCloneNode.style.display="";var i=PP.calculateMouseCoords(t.Event);this._DragCloneNode.style.left=i.X-this._DragXMouseDifference+"px",this._DragCloneNode.style.top=i.Y-this._DragYMouseDifference+"px",this.Drag.fire(this,t)},ctrlP._onDragEnd=function(n,t){this._removeEvent(document,"mousemove",this._onDrag),this._removeEvent(document,"mouseup",this._onDragEnd),PP.releaseCapture(this._DragCloneNode);var i=PP.getStyle(this._DomNode,"position");i!="relative"&&i!="absolute"&&(this._DomNode.style.position="absolute"),this._DomNode.style.left=parseInt(this._DragCloneNode.style.left)-this._DragXDomDifference+"px",this._DomNode.style.top=parseInt(this._DragCloneNode.style.top)-this._DragYDomDifference+"px",document.body.removeChild(this._DragCloneNode),delete this._DragCloneNode,this.MouseDown.add(this._onDragStart,this),this.DragEnd.fire(this,t)},ctrlP._onContentMouseDown=function(n,t){if(!this._IsResizable||this._getMouseButton(t.Event)!=1||(this._LastX=PP.calculateMouseX(t.Event),this._LastY=PP.calculateMouseY(t.Event),this._ActiveResizer=this["_Resizer"+t.Event.target.getAttribute("ResizeWay")],!this._ActiveResizer))return!0;this._resizeWay=this._ActiveResizer.getAttribute("ResizeWay"),typeof this._ActiveResizer.ownerSVGElement=="undefined"&&PP.hasClass(this._ActiveResizer,"Resizer")&&this._resizeWay&&(PP.setCapture(this._ActiveResizer),this._addEvents(document,{mousemove:this._onResize,mouseup:this._onEndResize}),this._addEvents(document.body,{mousewheel:this._onScrollAtResize,DOMMouseScroll:this._onScrollAtResize}),t.Event.stopPropagation(),t.Event.preventDefault(),this._isResingNow=!0)},ctrlP.isResingNow=function(){return this._isResingNow==!0},ctrlP._onResize=function(n,t){var w=PP.calculateMouseX(t.Event),p=PP.calculateMouseY(t.Event),a,b,f,nt,k,u,g,d;if(w&&w<0||p&&p<0)return this._onEndResize(n,t),!1;var i=w-this._LastX,r=p-this._LastY,it=this._Width,tt=this._Height,c=!1,l=!1,s=!1,h=!1;switch(this._resizeWay){case"L":l=!0,t.Side=[PP.LTRB.Left];break;case"R":s=!0,t.Side=[PP.LTRB.Right];break;case"T":c=!0,t.Side=[PP.LTRB.Top];break;case"B":h=!0,t.Side=[PP.LTRB.Bottom];break;case"BR":h=!0,s=!0,t.Side=[PP.LTRB.Right,PP.LTRB.Bottom];break;case"BL":h=!0,l=!0,t.Side=[PP.LTRB.Left,PP.LTRB.Bottom];break;case"TR":c=!0,s=!0,t.Side=[PP.LTRB.Top,PP.LTRB.Right];break;case"TL":c=!0,l=!0,t.Side=[PP.LTRB.Top,PP.LTRB.Left]}b=this.getCssStyle(null,"position"),a=b=="absolute"||b=="relative"?{X:PP.getStyle(this._DomNode,"left",!0),Y:PP.getStyle(this._DomNode,"top",!0)}:PP.calculateOffset(this._DomNode);var v=a.X,o=a.X+it,y=a.Y,e=a.Y+tt;if(i&&(l||s)){if(f=0,l){if(f=i-o+v,i>=0&&f>=0)return this._resizeWay=(c?"T":"")+(h?"B":"")+"R",this._LastX+=f,this.setLeft(o),this.setWidth(0),this._Width=0,this._onResize(n,t),!1;v=v+i,t.DeltaX=-i}if(s){if(f=i+o-v,i<=0&&f<=0)return this._resizeWay=(c?"T":"")+(h?"B":"")+"L",this._LastX+=f,this.setWidth(0),this._Width=0,this._onResize(n,t),!1;o=o+i,t.DeltaX=i}nt=Math.min(v,o),k=Math.abs(v-o),this.setLeft(nt),this.setWidth(k,!1),this._Width=k}if(r&&(c||h)){if(u=0,c){if(u=r-e+y,r>0&&u>=0)return this._resizeWay="B"+(l?"L":"")+(s?"R":""),this._LastY+=u,this.setTop(e),this.setHeight(0),this._Height=0,this._onResize(n,t),!1;y=y+r,t.DeltaY=-r}if(h){if(u=r+e-y,r<0&&u<=0)return this._resizeWay="T"+(l?"L":"")+(s?"R":""),this._LastY+=u,this.setHeight(0),this._Height=0,this._onResize(n,t),!1;e=e+r,t.DeltaY=r}g=Math.min(y,e),d=Math.abs(y-e),this.setTop(g),this.setHeight(d,!1),this._Height=d}return this._IsStartResize==undefined&&(this._IsStartResize=!0,t.IsStartResize=!0),this.SizeChanging.fire(this,t),this._LastX=w,this._LastY=p,!1},ctrlP._onEndResize=function(n,t){if(this._removeEvent(document,"mousemove",this._onResize),this._removeEvent(document,"mouseup",this._onEndResize),this._removeEvent(document.body,"mousewheel",this._onScrollAtResize),this._removeEvent(document.body,"DOMMouseScroll",this._onScrollAtResize),PP.releaseCapture(this._ActiveResizer),t.Event.stopPropagation(),t.Event.preventDefault(),this._ActiveResizer=null,PP.IsIE){var i=this;setTimeout(function(){i._DomNode&&(i._DomNode.className=i._DomNode.className)},0)}delete this._isResingNow,delete this._IsStartResize,t.IsEnd=!0,this.SizeChanged.fire(this,t)},ctrlP._onScrollAtResize=function(){return!1},ctrlP.getParentNode=function(){return this._ParentNode},ctrlP.getTop=function(){return this._Top},ctrlP.setTop=function(n){if(PP.isNumber(n,!0))this._Top=n;else throw PP.ArgumentException(this);return this},ctrlP.getLeft=function(){return this._Left},ctrlP.setLeft=function(n){if(PP.isNumber(n,!0))this._Left=n;else throw PP.ArgumentException(this);return this},ctrlP.getAnchors=function(){return this._Anchors},ctrlP.setAnchors=function(n){this._Anchors=n},ctrlP.addClass=function(n){if(!n)throw new Error("ArgumentNullException");return this._Class||(this._Class=""),this._Class+=" "+n,PP.addClass(this._DomNode,n),this},ctrlP.removeClass=function(n){if(!n)throw new Error("ArgumentNullException");var t=this._Class;return t.indexOf(n)>-1&&(this._Class=t==n?"":t.replace(" "+n,""),PP.removeClass(this._DomNode,n)),this},ctrlP.getClass=function(){return this._Class},ctrlP.getId=function(){return this._DomNode?this._DomNode.id:this._Id},ctrlP.setId=function(n){return this._Id!=n&&(PP.Object.prototype.setId.call(this,n),this.getDomNode().id=n),this},ctrlP.setWidth=function(n){if(typeof n=="undefined")throw new Error("ArgumentNullException");if(n!==this._Width){var i=this._DomNode,t=i.style;this._Width=this._checkValue(parseInt(n,10)),n===""||n===null?t.width="":n==="auto"?t.width="auto":n&&n.toString().indexOf("%")>-1?(t.width=n.toString(),this._Width=n.toString()):(t.width=this._Width+"px",PP.IsIE&&(i.className=i.className))}return this},ctrlP.getWidth=function(){return this._DomNode&&this._Width===0&&this._DomNode.offsetWidth>0&&(this._Width=this._DomNode.offsetWidth),this._Width},ctrlP.setHeight=function(n){if(typeof n=="undefined")throw new Error("ArgumentNullException");if(n!==this._Height){var i=this._DomNode,t=i.style;this._Height=this._checkValue(parseInt(n,10)),n===""||n===null?t.height="":n==="auto"?t.height="auto":n&&n.toString().indexOf("%")>-1?(t.height=n.toString(),this._Height=n.toString()):(t.height=this._Height+"px",PP.IsIE&&(i.className=i.className))}return this},ctrlP.getHeight=function(){if(this._DomNode&&this._Height===0){var n=this._DomNode.offsetHeight;n>0&&(this._Height=n)}return this._Height},ctrlP.setContent=function(n){return this._Content=n,this._DomNode.className=this._DomNode.className,this},ctrlP.getContent=function(){return this._Content},ctrlP.getFocused=function(){return this._DomNode===document.activeElement},ctrlP.setContextMenu=function(n){this._ContextMenu=n,this._ContextMenu&&this._ContextMenu.setIsRTL(this.getIsRTL())},ctrlP.getContextMenu=function(){return this._ContextMenu},ctrlP.setEnabled=function(n,t){return(this._Enabled!==n||t)&&(this._Enabled=n,n?(this._DomNode.setAttribute("enabled","enabled"),this._DomNode.removeAttribute("disabled")):(this._DomNode.setAttribute("disabled","disabled"),this._DomNode.removeAttribute("enabled"))),this._Content instanceof PP.Ui.Control&&this._Content.setEnabled(n,t),this},ctrlP.getEnabled=function(){return this._Enabled},ctrlP.getAnimation=function(){return this._Animation},ctrlP.setAnimation=function(n){this._Animation=n},ctrlP.setToolTip=function(n){return this._ToolTip instanceof PP.Ui.ToolTip&&this._ToolTip===n?this:(this._ToolTip&&this._ToolTip instanceof PP.Ui.ToolTip?n instanceof PP.Ui.ToolTip?(this._ToolTip.dispose(),this._ToolTip=n):n?this._ToolTip.setContent(n):(this._ToolTip.dispose(),this._ToolTip=null,this.MouseOver.remove(this._showToolTip,this),this.MouseOut.remove(this._hideToolTip,this)):n instanceof PP.Ui.ToolTip?(this._ToolTip=n,this.MouseOver.contains(this._showToolTip,this)||(this.MouseOver.add(this._showToolTip,this),this.MouseOut.add(this._hideToolTip,this))):n?(this._ToolTip=new PP.Ui.ToolTip({Content:n}),this.MouseOver.contains(this._showToolTip,this)||(this.MouseOver.add(this._showToolTip,this),this.MouseOut.add(this._hideToolTip,this))):(this._ToolTip=null,this.MouseOver.contains(this._showToolTip,this)&&(this.MouseOver.remove(this._showToolTip,this),this.MouseOut.remove(this._hideToolTip,this))),this)},ctrlP.getToolTip=function(){return this._ToolTip},ctrlP.setShowToolTip=function(n){return this._ShowToolTip!=n&&(this._ShowToolTip=n),this},ctrlP.getShowToolTip=function(){return this._ShowToolTip},ctrlP.setTabIndex=function(n){return isNaN(parseInt(n))?(this._DomNode.tabIndex=null,this._DomNode.removeAttribute("tabindex")):this._DomNode.tabIndex=n,this},ctrlP.getTabIndex=function(){return this._DomNode?this._DomNode.getAttribute("tabindex"):null},ctrlP.setIsRTL=function(n){return this._IsRTL=n,this._ContextMenu&&(this._ContextMenu instanceof PP.Ui.Control?this._ContextMenu.setIsRTL(this._IsRTL):this._ContextMenu.IsRTL=this._IsRTL),this._adjustMarkup(),this},ctrlP.getIsRTL=function(){return this._IsRTL},ctrlP.setData=function(n){return this._Data=n,this},ctrlP.getData=function(){return this._Data},ctrlP.setTag=function(n){return this._Tag=n,this},ctrlP.getTag=function(){return this._Tag},ctrlP.setResourceKey=function(n){return this._ResourceKey&&PP.resourceManager.isControlRegistered(this)&&PP.resourceManager.unRegisterControl(this),this._ResourceKey=n,this._ResourceKey&&PP.resourceManager.registerControl(this),this},ctrlP.getResourceKey=function(){return this._ResourceKey},ctrlP.setValue=function(n){return this._Value=n,this},ctrlP.getValue=function(){return this._Value},ctrlP.setIsResizable=function(n,t){return this._IsResizable===!!n&&!t?!1:this._DomNode?(this._IsResizable=!!n,this._ResizerT&&(this._IsResizable?(PP.addClass(this._ResizerT,"Resizer"),this._ResizerT.setAttribute("ResizeWay","T")):(PP.removeClass(this._ResizerT,"Resizer"),this._ResizerT.removeAttribute("ResizeWay","T"))),this._ResizerL&&(this._IsResizable?(PP.addClass(this._ResizerL,"Resizer"),this._ResizerL.setAttribute("ResizeWay","L")):(PP.removeClass(this._ResizerL,"Resizer"),this._ResizerL.removeAttribute("ResizeWay","L"))),this._ResizerR&&(this._IsResizable?(PP.addClass(this._ResizerR,"Resizer"),this._ResizerR.setAttribute("ResizeWay","R")):(PP.removeClass(this._ResizerR,"Resizer"),this._ResizerR.removeAttribute("ResizeWay","R"))),this._ResizerB&&(this._IsResizable?(PP.addClass(this._ResizerB,"Resizer"),this._ResizerB.setAttribute("ResizeWay","B")):(PP.removeClass(this._ResizerB,"Resizer"),this._ResizerB.removeAttribute("ResizeWay","B"))),this._ResizerTL&&(this._IsResizable?(PP.addClass(this._ResizerTL,"Resizer"),this._ResizerTL.setAttribute("ResizeWay","TL")):(PP.removeClass(this._ResizerTL,"Resizer"),this._ResizerTL.removeAttribute("ResizeWay","TL"))),this._ResizerTR&&(this._IsResizable?(PP.addClass(this._ResizerTR,"Resizer"),this._ResizerTR.setAttribute("ResizeWay","TR")):(PP.removeClass(this._ResizerTR,"Resizer"),this._ResizerTR.removeAttribute("ResizeWay","TR"))),this._ResizerBL&&(this._IsResizable?(PP.addClass(this._ResizerBL,"Resizer"),this._ResizerBL.setAttribute("ResizeWay","BL")):(PP.removeClass(this._ResizerBL,"Resizer"),this._ResizerBL.removeAttribute("ResizeWay","BL"))),this._ResizerBR&&(this._IsResizable?(PP.addClass(this._ResizerBR,"Resizer"),this._ResizerBR.setAttribute("ResizeWay","BR")):(PP.removeClass(this._ResizerBR,"Resizer"),this._ResizerBR.removeAttribute("ResizeWay","BR"))),this):!1},ctrlP.getIsResizable=function(){return this._IsResizable},ctrlP.setIsVisible=function(n){PP.isBoolean(n)&&(n=n?PP.Ui.Visibility.Visible:PP.Ui.Visibility.Collapsed);var t=this._DomNode.style;switch(n){case PP.Ui.Visibility.Collapsed:PP.hide(this._DomNode),this._IsVisible=!1;break;case PP.Ui.Visibility.Visible:this._IsVisible=!0,t.visibility="",PP.show(this._DomNode);break;case PP.Ui.Visibility.Hidden:t.visibility="hidden",this._IsVisible=!1}},ctrlP.getIsVisible=function(){return this._IsVisible},ctrlP.setDraggable=function(n){n?this.MouseDown.add(this._onDragStart,this):this.MouseDown.contains(this._onDragStart,this)&&this.MouseDown.remove(this._onDragStart,this)},ctrlP.getOffset=function(){return PP.calculateOffset(this._DomNode)},ctrlP.getStyle=function(){return this._Style},ctrlP.setStyle=function(n){this._Style=n,this._DomNode.setAttribute("style",n)},ctrlP._render=function(){var n=this._DomNode;this._IsRTL&&n&&n.dir!="rtl"&&this.setIsRTL(!0,!0),this.setEnabled(this._Enabled,!0),this._IsVisible||this.setIsVisible(this._IsVisible),this.setResourceKey(this._ResourceKey)},ctrlP.hideToolTip=function(){this._ToolTipTOId&&PP.clearTimeout(this._ToolTipTOId),this._removeEvent(this._DomNode,"mousemove",this._onBeforeTooltipShowMouseMove),this._ToolTip&&this._ToolTip.hide()},ctrlP.setFocus=function(){try{this.getTabIndex()instanceof Number||this.setTabIndex(0),this._DomNode.focus()}catch(n){}},ctrlP.setSize=function(n,t){this.setWidth(n),this.setHeight(t)},ctrlP.updateSize=function(){},ctrlP.addToNode=function(n,t,i){if(!n)throw PP.ArgumentException(this);if(PP.isString(n)&&(n=document.getElementById(n),!n))throw PP.ArgumentException(this);this._DomNode&&(t?n.insertBefore(this._DomNode,t):n.appendChild(this._DomNode)),this._ParentNode=n,delete this._nextSibl,i||this._bindEvents()},ctrlP.removeFromDOM=function(){if(this._DomNode&&this._DomNode.parentNode){var n=this._DomNode.parentNode;if(n._ppTmpSpan==!0)return;this._unBindEvents(),n&&n.removeChild(this._DomNode),delete this._ParentNode,this._IsVisible=!1}return this},ctrlP.show=function(){if(this._ParentNode){var n=this._DomNode.parentNode;(!n||PP.IsIE&&n.nodeName=="#document-fragment")&&(this._nextSibl&&this._nextSibl.parentNode===this._ParentNode?this.addToNode(this._ParentNode,this._nextSibl):this.addToNode(this._ParentNode),delete this._nextSibl)}this._IsVisible||this.setIsVisible(!0)},ctrlP.hide=function(){if(!this._nextSibl){var n=this._ParentNode;this._nextSibl=this._DomNode.nextSibling,this.removeFromDOM(),this._ParentNode=n,this.setIsVisible(!1)}},ctrlP.dispose=function(){this.isLive()&&(PP.cultureChanged&&PP.cultureChanged.remove(this._onCultureChanged,this),PP.cultureChanging&&PP.cultureChanging.remove(this._onCultureChanging,this),this.removeFromDOM(),delete this._Data,delete this._Tag,delete this._nextSibl,PP.resourceManager.isControlRegistered(this)&&PP.resourceManager.unRegisterControl(this),PP.Ui.Control.base.dispose.apply(this,arguments))},ctrlP.setSettings=function(n){n&&n.Class&&(this.addClass(n.Class),delete n.Class),PP.Ui.Control.base.setSettings.apply(this,arguments)},ctrlP.getCssStyle=function(n,t,i){var r="";return(n||(n=this.getDomNode()),this._NodesStyles||(this._NodesStyles={}),this._NodesStyles[n]||(this._NodesStyles[n]={}),this._NodesStyles[n][t]?r=this._NodesStyles[n][t]:(r=PP.getStyle(n,t),r&&r!="auto"&&(this._NodesStyles[n][t]=r)),i&&(r=parseFloat(r),isNaN(r)))?0:r},ctrlP.clearStylesCache=function(){this._NodesStyles=null},ctrlP=null,(PP.IView=function(){PP.initInterface(PP.IView,"PP.IView"),PP.IView.refresh=PP.ClassMembers.Method,PP.IView.refreshAll=PP.ClassMembers.Method})(),PP.IView._implement=function(){},PP.Ui.MenuItem=function(){this._Parent=null,this._Menu=null,this._defineEvents(["CheckedChanged"]),PP.Ui.MenuItem.base.constructor.apply(this,arguments),this._ContentDomNode=null,this._render()},PP.initClass(PP.Ui.MenuItem,PP.Ui.Control,"MenuItem"),menuItemP=PP.Ui.MenuItem.prototype,menuItemP._Checked=null,menuItemP._CloseOnChecked=!0,menuItemP._ImageUrl="",menuItemP._GroupName="",menuItemP._HotKey="",menuItemP._RowIndex=-1,menuItemP._ColumnIndex=-1,menuItemP._Visible=!0,menuItemP._IsHovered=!1,menuItemP._Template=PP.Templates.RibbonButton,menuItemP._render=function(){var n=this._Template.replace("{Content}","<table border='0' cellspacing='0' cellpadding='0' class='PPMenuItemTable'><tr>"+this._getLeftPart()+"<td class='PPMenuItemContentPart'></td><td class='PPMenuItemHotKey' disabled='disabled'>"+this._HotKey+"</td>"+this._getRightPart()+"</tr></table>");this._initFromHTML("<div class='PPMenuItem'>"+n+"</div>"),this._ContentDomNode=PP.querySelector(this._DomNode,".PPMenuItemContentPart"),this._ArrowContainerDomNode=PP.querySelector(this._DomNode,".PPMenuItemRightPart"),this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),this._Visible||PP.hide(this._DomNode),this._bindEvents(),PP.Ui.MenuItem.base._render.call(this)},menuItemP._getLeftPart=function(){if(this._Checked!=null)return this._Checked?"<td class='PPMenuItemLeftPart Checked'><div></div><div class='PPMenuIconSeparator'></div></td>":"<td class='PPMenuItemLeftPart Unchecked'><div></div><div class='PPMenuIconSeparator'></div></td>";if(this._ImageUrl)return"<td class='PPMenuItemLeftPart'><img src='"+this._ImageUrl+"'/><div></div><div class='PPMenuIconSeparator'></div></td>";if(this._Parent){var n=this._Parent.getImageList();if(n&&n.getSource()&&this._RowIndex>-1&&this._ColumnIndex>-1)return"<td class='PPMenuItemLeftPart'><div style='background: url("+n.getSource()+") "+n.getIcon(this._RowIndex,this._ColumnIndex)+" no-repeat;'></div><div class='PPMenuIconSeparator'></div></td>"}return"<td class='PPMenuItemLeftPart'><div></div><div class='PPMenuIconSeparator'></div></td>"},menuItemP._getRightPart=function(){var n=document.createElement("td"),i,t;return n.className="PPMenuItemRightPart",this._Menu&&(i=PP.htmlToDOM("<div class='PPMenuArrow'></div>"),n.appendChild(i)),t=document.createElement("span"),t.appendChild(n),t.innerHTML},menuItemP._onClicked=function(n,t){var r,u,i;if(!this._Enabled||this._Parent&&!this._Parent.getEnabled())return!1;if(this._Menu==null){for(this._Checked==null||this._Checked&&this._GroupName||this.setChecked(!this._Checked),r=this._Parent.getItems(),u=r.length,i=0;i<u;i++)this==r[i]&&(t.SelectedIndex=i);t.MenuItem=this,this._Parent.ItemSelected.fire(this,t),this.isLive()?(this.Click.fire(this,t),(this._Checked==null||this._CloseOnChecked)&&(this.setIsHovered(!1),PP.Ui.Menu.RootMenu&&PP.Ui.Menu.RootMenu.isLive()&&PP.Ui.Menu.RootMenu.hide())):PP.Ui.Menu.RootMenu&&PP.Ui.Menu.RootMenu.isLive()?PP.Ui.Menu.RootMenu.hide():PP.Ui.Menu.RootMenu=null}else return!1},menuItemP._onMouseDown=function(){if(!this._Enabled||this._Parent&&!this._Parent.getEnabled()||!this._CloseOnChecked)return!1;if(this._Menu==null)PP.Ui.MenuItem.base._onMouseDown.apply(this,arguments);else return!1},menuItemP._onMouseOver=function(n,t){var r,i;if(this._Enabled&&(!this._Parent||this._Parent.getEnabled())){if(this._reallyOver(t.Event)){for(this._Parent._hideChildMenu(this._Parent),r=this._Parent.getItems(),i=0;i<r.length;i++)r[i].setIsHovered(!1);this.setIsHovered(!0),this._Menu!=null&&(this._Parent._OpenTimeoutId&&PP.clearTimeout(this._Parent._OpenTimeoutId),this._Parent._OpenTimeoutId=PP.setTimeout(this._showChildMenu,100,{Self:this}))}PP.Ui.MenuItem.base._onMouseOver.apply(this,arguments)}},menuItemP._showChildMenu=function(n){var t=n.Self,u,r,i,f;t.setIsHovered(!0),t._Parent._DomNode.style.display!="none"&&(u=PP.IEVer!==7?t._DomNode.offsetTop+t._Parent._DomNode.offsetTop-t._DomNode.parentNode.scrollTop:t._DomNode.offsetTop+t._Parent._DomNode.offsetTop,r=0,i=t._Menu.isVisibleArea(u,r,!0),r=t._IsRTL?t._Parent._DomNode.offsetLeft-i.Width+7:t._Parent._DomNode.offsetLeft+t._Parent._DomNode.offsetWidth-7,i=t._Menu.isVisibleArea(u,r,!0),f=null,i.VisibleByHeight||(u-i.Height>-1?(f=t._Menu.isVisibleArea(u-i.Height,r,!0),f.VisibleByHeight&&(u=u-(u+i.Height-document.documentElement.clientHeight))):u=document.documentElement.clientHeight-i.Height>-1?document.documentElement.clientHeight-i.Height:0),i.VisibleByWidth||(t._IsRTL?r+i.Width+(t._Parent._DomNode.offsetWidth-7)-7>-1&&(f=t._Menu.isVisibleArea(u,r+i.Width+(t._Parent._DomNode.offsetWidth-7)-7,!0),f.VisibleByWidth&&(r=r+i.Width+(t._Parent._DomNode.offsetWidth-7)-7)):r-i.Width-(t._Parent._DomNode.offsetWidth-7)+7>-1&&(f=t._Menu.isVisibleArea(u,r-i.Width-(t._Parent._DomNode.offsetWidth-7)+7,!0),f.VisibleByWidth&&(r=r-i.Width-(t._Parent._DomNode.offsetWidth-7)+7))),t._Parent.getDroppedDown()&&(t._Menu.show(r,u,!0),t._Parent._OpenedChildMenu&&t._Parent._OpenedChildMenu.hide(),t._Parent._OpenedChildMenu=t._Menu))},menuItemP._onMouseOut=function(n,t){this._Enabled&&(!this._Parent||this._Parent.getEnabled())&&(this._reallyOut(t.Event)&&(this._Menu!=null?(this._CloseTimeoutId&&PP.clearTimeout(this._CloseTimeoutId),this._CloseTimeoutId=PP.setTimeout(this._hideChildMenu,100,{Self:this,Event:t.Event})):this.setIsHovered(!1)),PP.Ui.MenuItem.base._onMouseOut.apply(this,arguments))},menuItemP._hideChildMenu=function(n){var t=n.Self;t._Menu._DomNode.offsetLeft<=n.Event.pageX&&t._Menu._DomNode.offsetLeft+t._Menu._DomNode.offsetWidth>=n.Event.pageX&&t._Menu._DomNode.offsetTop<=n.Event.pageY&&t._Menu._DomNode.offsetTop+t._Menu._DomNode.offsetHeight>=n.Event.pageY||(t._Parent._hideChildMenu(t._Parent),t._Menu.getDroppedDown()||t.setIsHovered(!1))},menuItemP._reallyOver=function(n){for(var t=n.relatedTarget?n.relatedTarget:n.fromElement;t&&t!=this._DomNode;){if(this._Menu&&t==this._Menu._DomNode)return!1;t=t.parentNode}return t!=this._DomNode},menuItemP._reallyOut=function(n){for(var t=n.relatedTarget?n.relatedTarget:n.toElement;t&&t!=this._DomNode;){if(this._Menu&&t==this._Menu._DomNode)return!1;t=t.parentNode}return t!=this._DomNode},menuItemP.setContent=function(n){this._setContentToNode(n,this._ContentDomNode)},menuItemP.setMenu=function(n){if(n&&n instanceof PP.Ui.DropPanel&&n!=this._Menu){if(this._Menu&&(this._Menu.dispose(),PP.removeChildren(this._ArrowContainerDomNode)),this._Menu=n,this._Menu){var t=PP.htmlToDOM("<div class='PPMenuArrow'></div>");this._ArrowContainerDomNode.appendChild(t)}this._Menu.setIsRTL(this._IsRTL)}},menuItemP.getMenu=function(){return this._Menu},menuItemP._getGroupName=function(n){return(n?n:this._GroupName)+this._Parent.getId()},menuItemP.setChecked=function(n,t,i,r){var f,e,u;if(t=typeof t=="undefined"?!0:t==!0,r=typeof r=="undefined"?!1:r==!0,PP.isBoolean(n)&&n!=this._Checked||i){if(this._GroupName&&!r&&this._Parent){f=this._Parent._Groups[this._getGroupName()].Controls;for(e in f)n&&this!==f[e]&&f[e].getChecked()&&f[e].setChecked(!1,!1,!1,!0)}this._Checked=n,u=PP.querySelector(this._DomNode,".PPMenuItemLeftPart"),PP.hasClass(u,"Checked")?PP.removeClass(u,"Checked"):PP.hasClass(u,"Unchecked")?PP.removeClass(u,"Unchecked"):(PP.removeChildren(u),u.appendChild(PP.htmlToDOM("<div></div>")),u.appendChild(PP.htmlToDOM("<div class='PPMenuIconSeparator'></div>"))),PP.addClass(u,n?"Checked":"Unchecked"),t&&this.CheckedChanged.fire(this,{})}return this},menuItemP.getChecked=function(){return this._Checked},menuItemP.setCloseOnChecked=function(n){n!=this._Checked&&(this._CloseOnChecked=n==!0)},menuItemP.getCloseOnChecked=function(){return this._CloseOnChecked},menuItemP.setVisible=function(n){n!=this._Visible&&(this._Visible=n,this._Visible?PP.show(this._DomNode):PP.hide(this._DomNode))},menuItemP.getVisible=function(){return this._Visible},menuItemP.setColumnIndex=function(n){var t,i;parseInt(n)>-1&&(this._ColumnIndex=n,this._Parent&&(t=this._Parent.getImageList(),t&&t.getSource()&&this._RowIndex>-1&&this._ColumnIndex>-1&&(i=PP.querySelector(this._DomNode,".PPMenuItemLeftPart"),PP.removeChildren(i),i.appendChild(PP.htmlToDOM("<div style='background: url("+t.getSource()+") "+t.getIcon(this._RowIndex,this._ColumnIndex)+" no-repeat;'></div>")),i.appendChild(PP.htmlToDOM("<div class='PPMenuIconSeparator'></div>")))))},menuItemP.getColumnIndex=function(){return this._ColumnIndex},menuItemP.setRowIndex=function(n){var t,i;parseInt(n)>-1&&(this._RowIndex=n,this._Parent&&(t=this._Parent.getImageList(),t&&t.getSource()&&this._RowIndex>-1&&this._ColumnIndex>-1&&(i=PP.querySelector(this._DomNode,".PPMenuItemLeftPart"),PP.removeChildren(i),i.appendChild(PP.htmlToDOM("<div style='background: url("+t.getSource()+") "+t.getIcon(this._RowIndex,this._ColumnIndex)+" no-repeat;'></div>")),i.appendChild(PP.htmlToDOM("<div class='PPMenuIconSeparator'></div>")))))},menuItemP.getRowIndex=function(){return this._RowIndex},menuItemP.setImageUrl=function(n){if(n!=this._ImageUrl){this._ImageUrl=n;var t=PP.querySelector(this._DomNode,".PPMenuItemLeftPart");PP.removeChildren(t),t.appendChild(PP.htmlToDOM("<img src='"+this._ImageUrl+"'/>")),t.appendChild(PP.htmlToDOM("<div class='PPMenuIconSeparator'></div>"))}},menuItemP.getImageUrl=function(){return this._ImageUrl},menuItemP.setIsRTL=function(n){PP.Ui.MenuItem.base.setIsRTL.call(this,n);var t=PP.querySelector(this._DomNode,".PPRoundedMiddleCenter");t&&(t.dir=this._IsRTL?"rtl":"ltr"),this._Menu&&this._Menu.setIsRTL(n)},menuItemP.setShowIcon=function(n){var t=PP.querySelector(this._DomNode,".PPMenuItemLeftPart");t&&(t.style.display=n==!0?"":"none")},menuItemP.setIsHovered=function(n){n!=this._IsHovered&&(this._IsHovered=!!n,this._IsHovered&&this._Enabled?this.addClass("Hovered"):this.removeClass("Hovered"))},menuItemP.getIsHovered=function(){return this._IsHovered},menuItemP.setGroupName=function(n,t){var r,i,u;(t||this._GroupName!==n)&&(this._Parent&&(this._GroupName&&(r=this._Parent._Groups[this._getGroupName()],r&&delete r.Controls[this.getId()]),this._Parent._Groups[this._getGroupName(n)]?(this._Parent._Groups[this._getGroupName(n)].Controls[this.getId()]=this,this._Checked==null?this.setChecked(!1):this.setChecked(this._Checked,!0,!0)):(i={},i.Controls={},i.Controls[this.getId()]=this,this._Parent._Groups[this._getGroupName(n)]=i,this._Checked==null&&this.setChecked(!1))),this._GroupName=n,u=PP.querySelector(this._DomNode,".PPMenuItemLeftPart"),this._GroupName?PP.addClass(u,"PPRadio"):PP.removeClass(u,"PPRadio"))},menuItemP.getGroupName=function(){return this._GroupName},menuItemP.setEnabled=function(){return PP.Ui.MenuItem.base.setEnabled.apply(this,arguments),this._Enabled||this.setIsHovered(!1),this},menuItemP.getHotKey=function(){return this._HotKey},menuItemP.dispose=function(){if(this.isLive()){if(this._GroupName&&this._Parent){var n=this._Parent._Groups[this._getGroupName()].Controls;delete n[this._Id],n=={}&&(delete this._Parent._Groups[this._getGroupName()].Controls,delete this._Parent._Groups[this._getGroupName()])}delete this._Parent,PP.Ui.MenuItem.base.dispose.apply(this,arguments)}},menuItemP=null,PP.Ui.SplitMenuItem=function(){this._ContentButton=null,this._ArrowButton=null,PP.Ui.SplitMenuItem.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.SplitMenuItem,PP.Ui.MenuItem,"SplitMenuItem"),splitMenuItemP=PP.Ui.SplitMenuItem.prototype,splitMenuItemP._render=function(){var i="<table border='0' cellspacing='0' cellpadding='0' class='PPMenuItemTable'><tr>"+this._getLeftPart()+"<td class='PPMenuItemContentPart'></td><td class='PPMenuItemHotKey' disabled='disabled'>"+this._HotKey+"</td></tr></table>",t="<div class='PPMenuArrow'></div>",n;this._initFromHTML("<div class='PPMenuItem PPSplitMenuItem'><table border='0' cellspacing='0' cellpadding='0' class='PPSplitMenuItemTable'><tr><td class='PPContentButtonContainer'></td><td class='PPArrowButtonContainer PPMenuItemRightPart'></td></tr></table></div>"),n=PP.querySelector(this._DomNode,".PPSplitMenuItemTable"),this._ContentButton=new PP.Ui.RibbonButton({ParentNode:n.rows[0].cells[0],Class:"PPContentButton",Content:PP.htmlToDOM(i)}),this._ArrowButton=new PP.Ui.RibbonButton({IsToggleButton:!0,ParentNode:n.rows[0].cells[1],Class:"PPArrowButton",Content:PP.htmlToDOM(t),Click:PP.Delegate(this._onArrowClick,this)}),this._ContentDomNode=PP.querySelector(this._DomNode,".PPMenuItemContentPart"),this._ArrowContainerDomNode=PP.querySelector(this._DomNode,".PPMenuItemRightPart"),this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),PP.Ui.MenuItem.base._render.apply(this,arguments),this._Menu&&(this._Menu.Opened.add(this._onMenuOpened,this),this._Menu.Closed.add(this._onMenuClosed,this))},splitMenuItemP._onMenuOpened=function(){this._ArrowButton.setIsPressed(!0)},splitMenuItemP._onMenuClosed=function(){this._ArrowButton.setIsPressed(!1)},splitMenuItemP._onArrowClick=function(n,t){this._Menu&&(this._Menu.getDroppedDown()?(this._CloseTimeoutId&&PP.clearTimeout(this._CloseTimeoutId),this._Parent._OpenTimeoutId&&PP.clearTimeout(this._Parent._OpenTimeoutId),this._CloseTimeoutId=PP.setTimeout(this._hideChildMenu,100,{Self:this,Event:t.Event})):(this._CloseTimeoutId&&PP.clearTimeout(this._CloseTimeoutId),this._Parent._OpenTimeoutId&&PP.clearTimeout(this._Parent._OpenTimeoutId),this._Parent._OpenTimeoutId=PP.setTimeout(this._showChildMenu,100,{Self:this}))),this._ArrowButton.setIsPressed(!1),this._ArrowButton.setIsHovered(!0),t.Event.stopPropagation(),t.Event.preventDefault()},splitMenuItemP._hideChildMenu=function(n){var t=n.Self;t._Menu._DomNode.offsetLeft<=n.Event.pageX&&t._Menu._DomNode.offsetLeft+t._Menu._DomNode.offsetWidth>=n.Event.pageX&&t._Menu._DomNode.offsetTop<=n.Event.pageY&&t._Menu._DomNode.offsetTop+t._Menu._DomNode.offsetHeight>=n.Event.pageY||t._Parent._hideChildMenu(t._Parent)},splitMenuItemP._onClicked=function(n,t){var r,u,i;if(this._Enabled&&(!this._Parent||this._Parent.getEnabled())){for(this._Checked==null||this._Checked&&this._GroupName||this.setChecked(!this._Checked),r=this._Parent.getItems(),u=r.length,i=0;i<u;i++)this==r[i]&&(t.SelectedIndex=i);t.MenuItem=this,this._Parent.ItemSelected.fire(this,t),this.isLive()?(this.Click.fire(this,t),(this._Checked==null||this._CloseOnChecked)&&(this.setIsHovered(!1),PP.Ui.Menu.RootMenu&&PP.Ui.Menu.RootMenu.isLive()&&PP.Ui.Menu.RootMenu.hide())):PP.Ui.Menu.RootMenu&&PP.Ui.Menu.RootMenu.isLive()?PP.Ui.Menu.RootMenu.hide():PP.Ui.Menu.RootMenu=null}},splitMenuItemP._onMouseOut=function(n,t){this._Enabled&&(!this._Parent||this._Parent.getEnabled())&&(this._reallyOut(t.Event)&&(this._Menu!=null&&this._Menu.getDroppedDown()?(this._CloseTimeoutId&&PP.clearTimeout(this._CloseTimeoutId),this._CloseTimeoutId=PP.setTimeout(this._hideChildMenu,100,{Self:this,Event:t.Event})):this.setIsHovered(!1)),PP.Ui.MenuItem.base._onMouseOut.apply(this,arguments))},splitMenuItemP=null,PP.Ui.getWidthOfElement=function(n){var t=0;return PP.Ui._textWidthDiv?document.body.appendChild(PP.Ui._textWidthDiv):(PP.Ui._textWidthDiv=PP.createElement(document.body),PP.Ui._textWidthDiv.className="PPCropTextDiv"),PP.Ui._textWidthDiv.innerHTML=n.replace(/ /g,"&nbsp;"),t=PP.Ui._textWidthDiv.offsetWidth,document.body.removeChild(PP.Ui._textWidthDiv),t},PP.Ui.getOffsetWidthNoMargins=function(n){return n.offsetWidth-PP.Ui.getMarginsWidth(n)},PP.Ui.getMarginsWidth=function(n){var t=PP.Ui.getPixelSize(n,"padding-left"),i=PP.Ui.getPixelSize(n,"margin-left"),r=PP.Ui.getPixelSize(n,"border-left-width"),u=PP.Ui.getPixelSize(n,"padding-right"),f=PP.Ui.getPixelSize(n,"margin-right"),e=PP.Ui.getPixelSize(n,"border-right-width");return t+i+r+u+f+e},PP.Ui.getPixelSize=function(n,t){var i=PP.getStyle(n,t);return i=PP.widthToPixel(i),i?i:0},PP.Ui.cropText=function(n,t,i,r){for(var u=n,o=PP.Ui.getWidthOfElement(u),e=!1,f;o>t&&u!="";)u=u.substr(r?1:0,u.length-1),o=PP.Ui.getWidthOfElement(r?i+u:u+i),e=!0;return f=u,e&&(f=r?i+f:f+i),{Text:f,IsCroped:e}},PP.Ui.getComboCaption=function(n,t,i,r,u){var s="",c,f,o,h,e,a;if(n||t)if(c=u,f=i,t)if(o=c?r?"("+c+") ":" ("+c+")":"",h="",h=r?o+t+" .. "+n:n+" .. "+t+o,f<PP.Ui.getWidthOfElement(h)){var v=PP.Ui.getWidthOfElement(o),l=" ",y=PP.Ui.getWidthOfElement(l);f=Math.floor((f-y-v)/2),e=PP.Ui.cropText(n,f,"..."),a=PP.Ui.cropText(t,f,"..."),r?(e.IsCroped||(e=PP.Ui.cropText(".. "+e.Text,f,".. ",r)),s=o+a.Text+l+e.Text):(e.IsCroped||(e=PP.Ui.cropText(e.Text+" ..",f," ..",r)),s=e.Text+l+a.Text+o)}else s=h;else s=PP.Ui.cropText(n,f,"...",r).Text;else return"";return s},PP.Ui.ConfigClass=function(n){this._Chart={Animation:!0},PP.Ui.ConfigClass.base.constructor.call(this,n),PP.Ui.ConfigClass._initFields(this)},PP.initClass(PP.Ui.ConfigClass,PP.Object,"ConfigClass"),PP.Ui.ConfigClass._initFields=function(n){var i,t;for(i in n)t=i.replace("_",""),n["get"+t]||n["set"+t]||PP.isFunction(n[i])&&n[i]||(PP.isObject(n[i])&&PP.Ui.ConfigClass._initFields(n[i]),n["get"+t]=function(n){return function(){return PP.isDefined(this[n])?this[n]:this["_"+n]}}(t),n["set"+t]=function(n){return function(t){PP.isObject(t)&&PP.Ui.ConfigClass._initFields(t),PP.isDefined(this[n])?this[n]=t:this["_"+n]=t}}(t))},PP.Ui.getConfig=function(n){return(PP.Ui._Config||(PP.Ui._Config=new PP.Ui.ConfigClass),PP.isString(n))?PP.getProperty(PP.Ui._Config,n):PP.Ui._Config},PP.Ui.TextArea=function(n){n=n||{},n.Width||(n.Width=200),n.Height||(n.Height=120),this._defineEvents(["TextChanged"],"PP.Ui.TextArea"),PP.Ui.TextArea.base.constructor.apply(this,arguments),this._render()},PP.initClass(PP.Ui.TextArea,PP.Ui.Control,"PP.Ui.TextArea"),textAreaP=PP.Ui.TextArea.prototype,textAreaP._ReadOnly=!1,textAreaP._BorderWidth=1,textAreaP._render=function(){this._initFromHTML("<div></div>",!0),this.addClass("PPTextArea"),this._ScrollBox=new PP.Ui.ScrollBox({ParentNode:this._DomNode,Width:this._Width-this._BorderWidth*2,Height:this._Height-this._BorderWidth*2}),this._ContentNode=this._ScrollBox.getContentNode(),PP.addClass(this._ContentNode,"PPSelect"),this._ContentNode.tabIndex=0,this._Cover=PP.htmlToDOM("<div></div>"),PP.addClass(this._Cover,"PPCover"),PP.hide(this._Cover),this._DomNode.appendChild(this._Cover),this._Content&&this.setContent(this._Content,!0),this.setReadOnly(this._ReadOnly,!0),PP.Ui.TextArea.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode)},textAreaP._bindEvents=function(){PP.Ui.TextArea.base._bindEvents.apply(this,arguments),this._addEvent(this._ContentNode,"keypress",this._onContentKeyPress),this._addEvent(this._ContentNode,"focus",this._onContentFocus),this._addEvent(this._ContentNode,"blur",this._onContentBlur)},textAreaP._unBindEvents=function(){PP.Ui.TextArea.base._unBindEvents.apply(this,arguments),this._removeAllEvents(this._ContentNode)},textAreaP._onContentKeyPress=function(){this._ScrollBox.updateSize()},textAreaP._onContentFocus=function(){PP.isFunction(document.body.onselectstart)&&(this._bodyOnSelectStart=document.body.onselectstart,document.body.onselectstart=null),this._oldContent=this.getContent()},textAreaP._onContentBlur=function(){this._bodyOnSelectStart&&(document.body.onselectstart=this._bodyOnSelectStart,this._bodyOnSelectStart=null);var i=this.getContent();i!==this._oldContent&&this.TextChanged.fire(this,{Value:i}),this._oldContent=null},textAreaP.getReadOnly=function(){return this._ReadOnly},textAreaP.setReadOnly=function(n,t){if(n=!!n,n!==this._ReadOnly||t){this._ReadOnly=n;var i=this._ContentNode;n?i.removeAttribute("contenteditable"):i.setAttribute("contenteditable","true"),this._ScrollBox.updateSize()}},textAreaP.getContent=function(){return this._ContentNode.innerHTML},textAreaP.setContent=function(n,t){(n!==this.getContent()||t)&&(this._Content=n,this._ScrollBox.setContent(n,t),this._ScrollBox.updateSize())},textAreaP.setWidth=function(){PP.Ui.TextArea.base.setWidth.apply(this,arguments),this._ScrollBox.setWidth(this._Width-this._BorderWidth*2)},textAreaP.setHeight=function(){PP.Ui.TextArea.base.setHeight.apply(this,arguments),this._ScrollBox.setHeight(this._Height-this._BorderWidth*2)},textAreaP.setEnabled=function(n){PP.Ui.TextArea.base.setEnabled.apply(this,arguments),n=!!n,this._ScrollBox.setEnabled(n),n?PP.hide(this._Cover):PP.show(this._Cover)},textAreaP.setIsRTL=function(n){PP.Ui.TextArea.base.setIsRTL.apply(this,arguments),this._ScrollBox.setIsRTL(!!n)},textAreaP.scrollTo=function(n,t,i,r){this._ScrollBox.scrollTo(n,t,i,r)},textAreaP.updateSize=function(){PP.Ui.TextArea.base.updateSize.apply(this,arguments),this._ScrollBox.updateSize()},textAreaP=null,PP.Date={},PP.initNamespace(PP.Date,"Date"),PP.Date.add=function(n,t,i){var r=PP.Date.clone(n),u;if(!t||i===0)return r;switch(t){case PP.Date.Interval.Milli:r.setMilliseconds(r.getMilliseconds()+i);break;case PP.Date.Interval.Second:r.setSeconds(r.getSeconds()+i);break;case PP.Date.Interval.Minute:r.setMinutes(r.getMinutes()+i);break;case PP.Date.Interval.Hour:r.setHours(r.getHours()+i);break;case PP.Date.Interval.Day:r.setDate(r.getDate()+i);break;case PP.Date.Interval.Month:u=n.getDate(),u>28&&(u=Math.min(u,PP.Date.getLastDateOfMonth(PP.Date.add(PP.Date.getFirstDateOfMonth(n),PP.Date.Interval.Month,i)).getDate())),r.setDate(u),r.setMonth(n.getMonth()+i);break;case PP.Date.Interval.Year:u=n.getDate(),u>28&&(u=Math.min(u,PP.Date.getLastDateOfMonth(PP.Date.add(PP.Date.getFirstDateOfMonth(n),PP.Date.Interval.Year,i)).getDate())),r.setDate(u),r.setFullYear(n.getFullYear()+i)}return r},PP.Date.clone=function(n){return new Date(n.getTime())},PP.Date.getFirstDateOfMonth=function(n){return new Date(n.getFullYear(),n.getMonth(),1)},PP.Date.getLastDateOfMonth=function(n){return new Date(n.getFullYear(),n.getMonth(),PP.Date.getDaysInMonth(n))},PP.Date.getDaysInMonth=function(n){var t=[31,28,31,30,31,30,31,31,30,31,30,31],i=n.getMonth();return i==1&&PP.Date.isLeapYear(n)?29:t[n.getMonth()]},PP.Date.isLeapYear=function(n){var t=n.getFullYear();return t%4==0&&t%100!=0||t%400==0},PP.Date.getDayOfYear=function(n){var r=0,t=PP.Date.clone(n),u=n.getMonth(),i;for(t.setDate(1),t.setMonth(0),i=0;i<u;i++)t.setMonth(i),r+=PP.Date.getDaysInMonth(t);return r+n.getDate()-1},PP.Date.getWeekOfYear=function(n){var t=864e5,i=7*t,u=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()+3)/t,r=Math.floor(u/7),f=new Date(r*i).getUTCFullYear();return r-Math.floor(Date.UTC(f,0,7)/i)+1},PP.Date.getGMTOffset=function(n,t){var i=n.getTimezoneOffset();return(i>0?"-":"+")+PP.String.leftPad(Math.floor(Math.abs(i)/60),2,"0")+(t?":":"")+PP.String.leftPad(Math.abs(i%60),2,"0")},PP.Date.getTimezone=function(n){return n.toLocaleString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},PP.Date.format=function(n,t){var r,i,u,f;if(!PP.isDate(n))return"";for(t=t||PP.Date.Pattern.Default,i="",u=!1,f=0;f<t.length;f++){if(r=t.charAt(f),u){u=!1,i+=r;continue}switch(r){case"d":i+=PP.String.leftPad(n.getDate(),2,"0");break;case"D":i+=PP.getCurrentCulture().ShortDayNames[n.getDay()?n.getDay()-1:6];break;case"j":i+=n.getDate();break;case"l":i+=PP.getCurrentCulture().DayNames[n.getDay()?n.getDay()-1:6];break;case"N":i+=n.getDay()?n.getDay():7;break;case"S":throw PP.Exception("Unsupported symbol for date format: S");break;case"w":i+=n.getDay();break;case"z":i+=PP.Date.getDayOfYear(n);break;case"W":i+=PP.String.leftPad(PP.Date.getWeekOfYear(n),2,"0");break;case"F":i+=PP.getCurrentCulture().MonthNames[n.getMonth()];break;case"m":i+=PP.String.leftPad(n.getMonth()+1,2,"0");break;case"M":i+=PP.getCurrentCulture().ShortMonthNames[n.getMonth()];break;case"n":i+=n.getMonth()+1;break;case"t":i+=PP.Date.getDaysInMonth(n);break;case"L":i+=PP.Date.isLeapYear(n)?1:0;break;case"o":i+=n.getFullYear()+(PP.Date.getWeekOfYear(n)==1&&n.getMonth()>0?1:PP.Date.getWeekOfYear(n)>=52&&n.getMonth()<11?-1:0);break;case"Y":i+=PP.String.leftPad(n.getFullYear(),4,"0");break;case"y":i+=PP.String.leftPad(n.getFullYear(),4,"0").substring(2,4);break;case"a":i+=PP.getCurrentCulture().TimeAmPm[n.getHours()<12?1:0].toLowerCase();break;case"A":i+=PP.getCurrentCulture().TimeAmPm[n.getHours()<12?1:0].toUpperCase();break;case"g":i+=n.getHours()%12?n.getHours()%12:12;break;case"G":i+=n.getHours();break;case"h":i+=PP.String.leftPad(n.getHours()%12?n.getHours()%12:12,2,"0");break;case"H":i+=PP.String.leftPad(n.getHours(),2,"0");break;case"i":i+=PP.String.leftPad(n.getMinutes(),2,"0");break;case"s":i+=PP.String.leftPad(n.getSeconds(),2,"0");break;case"u":i+=PP.String.leftPad(n.getMilliseconds(),3,"0");break;case"O":i+=PP.Date.getGMTOffset(n);break;case"P":i+=PP.Date.getGMTOffset(n,!0);break;case"T":throw PP.Exception("Unsupported symbol for date format: T");break;case"Z":i+=n.getTimezoneOffset()*-60;break;case"c":i+=PP.Date.format(n,"Y-m-d")+"T"+PP.Date.format(n,"H:i:sP");break;case"U":i+=Math.round(n.getTime()/1e3);break;case"\\":u=!0;break;default:i+=r}}return i},PP.Date.parse=function(n,t,i){var nt,b,p,u,k,it,l,w,g,c,v,a,y,rt;if(n instanceof Date)return n;if(PP.isNumber(n))return new Date(n);if(PP.isString(n)){if(!t){nt=n.match(new RegExp("\\d+","g"))||[],b=n&&n.length?n.charAt(n.length-1).toUpperCase():"";switch(nt.length){case 3:t="Y-m-d";break;case 6:t="Y-m-d\\TH:i:s",b==="Z"&&(t+="P");break;case 7:t="Y-m-d\\TH:i:s.u",b==="Z"&&(t+="P");break;case 8:t="Y-m-d\\TH:i:sP";break;case 9:t="Y-m-d\\TH:i:s.uP";break;default:t=PP.Date.Pattern.Default}}var f={},o,s,d=!1,h="^",e={},tt={a:"("+PP.getCurrentCulture().TimeAmPm.join("|").toLowerCase()+")",A:"("+PP.getCurrentCulture().TimeAmPm.join("|").toUpperCase()+")",d:"(3[01]|[12][0-9]|0[1-9])",D:"("+PP.getCurrentCulture().ShortDayNames.join("|")+")",F:"("+PP.getCurrentCulture().MonthNames.join("|")+")",g:"(1[0-2]|[1-9])",G:"(2[0-3]|1[0-9]|[0-9])",h:"(1[0-2]|0[1-9])",H:"(2[0-3]|[01][0-9])",i:"([0-5][0-9])",j:"(3[01]|[12][0-9]|[1-9])",l:"("+PP.getCurrentCulture().DayNames.join("|")+")",L:"([01])",m:"(1[0-2]|0[1-9])",M:"("+PP.getCurrentCulture().ShortMonthNames.join("|")+")",n:"(1[0-2]|[1-9])",N:"([1-7])",o:"(\\d{4})",O:"([+-]\\d{4}|Z)",P:"([+-]\\d{2}:\\d{2}|Z)",s:"([0-5][0-9])",t:"(3[01]|2[89])",T:"([A-Z]{3})",u:"(\\d{3})",U:"([+-]?\\d+)",w:"([0-6])",W:"(5[0-3]|[1-4][0-9]|0[1-9])",y:"(\\d{2})",Y:"(\\d{4})",z:"(\\d{0,3})",Z:"([+-]?\\d+)"},r=1;for(p=0;p<t.length;p++){if(s=t.charAt(p),d){d=!1,h+="(.)",r++;continue}if(s=="\\"){d=!0;continue}if(tt[s]){h+=tt[s],e[s]=r,r++;continue}h+="(.)",r++}if(h+="$",u=new RegExp(h,"gi").exec(n),u){if(r=0,(r=e.Y)?f.Year=parseInt(u[r],10):(r=e.y)&&(f.Year=parseInt(u[r],10),f.Year=f.Year>50?f.Year+1900:f.Year+2e3),(r=e.m)||(r=e.n))f.Month=parseInt(u[r],10)-1;else if(r=e.M){for(k=PP.getCurrentCulture().ShortMonthNames,it=u[r].toUpperCase(),l=0;l<k.length;l++)if(k[l].toUpperCase()==it){f.Month=l;break}}else if(r=e.F)for(w=PP.getCurrentCulture().MonthNames,g=u[r].toUpperCase(),c=0;c<w.length;c++)if(w[c].toUpperCase()==g){f.Month=c;break}if(((r=e.d)||(r=e.j)||!PP.isDefined(f.Month)&&(r=e.z))&&(f.Day=parseInt(u[r],10)),(r=e.G)||(r=e.H)?f.Hour=parseInt(u[r],10):((r=e.g)||(r=e.h))&&(f.Hour=parseInt(u[r],10),((r=e.a)||(r=e.A))&&u[r].toUpperCase()==PP.getCurrentCulture().TimeAmPm[0]&&(f.Hour=(f.Hour+12)%24)),(r=e.i)&&(f.Minute=parseInt(u[r],10)),(r=e.s)&&(f.Seconds=parseInt(u[r],10)),(r=e.u)&&(f.Milli=parseInt(u[r],10)),o=new Date(Date.UTC(f.Year||0,f.Month||0,f.Day||1,f.Hour||0,f.Minute||0,f.Seconds||0,f.Milli||0)),(r=e.U)&&(o=new Date(parseInt(u[r],10)*1e3+(f.Milli||0))),(r=e.Z&&u[r])?(rt=parseInt(u[r])||0,o=PP.Date.add(o,PP.Date.Interval.Second,rt*-1)):(r=e.P)&&u[r]?u[r].toUpperCase()!=="Z"&&(a=parseInt(u[r].substr(1,2))||0,y=parseInt(u[r].substr(4,2))||0,v=(a*60+y)*(u[r].substr(0,1)==="+"?-1:1),o=PP.Date.add(o,PP.Date.Interval.Minute,v)):(r=e.O)&&u[r]?u[r].toUpperCase()!=="Z"&&(a=parseInt(u[r].substr(1,2))||0,y=parseInt(u[r].substr(3,2))||0,v=(a*60+y)*(u[r].substr(0,1)==="+"?-1:1),o=PP.Date.add(o,PP.Date.Interval.Minute,v)):o=PP.Date.add(o,PP.Date.Interval.Minute,o.getTimezoneOffset()),i&&PP.Date.format(o,t)!=n)return null}return o}},(PP.Date.Interval=function(){var n=PP.Date.Interval;n.Milli="Milli",n.Second="Second",n.Minute="Minute",n.Hour="Hour",n.Day="Day",n.Month="Month",n.Year="Year",PP.initEnum(n,"PP.Date.Interval")})(),(PP.Date.Pattern=function(){var n=PP.Date.Pattern;n.Default="Y-m-d\\TH:i:s.uP",n.ISO8601Long="Y-m-d H:i:s",n.ISO8601Short="Y-m-d",n.ShortDate="n/j/Y",n.LongDate="l, F d, Y",n.FullDateTime="l, F d, Y g:i:s A",n.MonthDay="F d",n.ShortTime="g:i A",n.LongTime="g:i:s A",n.SortableDateTime="Y-m-d\\TH:i:sP",n.UniversalSortableDateTime="Y-m-d H:i:sO",n.YearMonth="F, Y",PP.initEnum(n,"PP.Date.Pattern")})(),PP.String={},PP.initNamespace(PP.String,"String"),PP.String.SEPARATOR=new RegExp("([\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\f\\r\\n\\t]+)","gm"),PP.String.ellipsis=function(n,t,i){if(n&&n.length>t){if(i){for(var u=n.substr(0,t-2),r=0,f=0;(f=PP.String.SEPARATOR.exec(u))!==null;)r=PP.String.SEPARATOR.lastIndex-f[0].length;if(r>0)return u.substr(0,r)+"..."}return n.substr(0,t-3)+"..."}return n},PP.String.format=function(n){for(var t=1;t<arguments.length;t++)n=n.replace("{"+(t-1)+"}",arguments[t]);return n},PP.String.repeat=function(n,t,i){var u="",r;for(n=n||"",r=0;r<t;r++)u+=n,i&&r<t-1&&(u+=i);return u},PP.String.leftPad=function(n,t,i){var r=n+"";for(i=i||" ";r.length<t;)r=i+r;return r},PP.String.trim=function(n){var t=/^\s+/,i=/\s+$/;return n==null?"":n.toString().replace(t,"").replace(i,"")},PP.String.getRandom=function(n){for(var u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i="",r,t=0;t<n;t++)r=Math.round(Math.random()*51),i+=u.charAt(r);return i},PP.String.escapeRegExp=function(n){return n==null?"":n.toString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},PP.String.escapeHTML=function(n){var t=/>/g,i=/</g,r=/&/g;return n==null?"":n.toString().replace(r,"&amp;").replace(t,"&gt;").replace(i,"&lt;")},PP.String.unescapeHTML=function(n){var t=/&gt;/g,i=/&lt;/g,r=/&amp;/g;return n==null?"":n.toString().replace(r,"&").replace(t,">").replace(i,"<")},PP.trim=PP.String.trim,PP.getRandomString=PP.String.getRandom,PP.escapeHTML=PP.String.escapeHTML,PP.unescapeHTML=PP.String.unescapeHTML,PP.Version="7.0",PP.ScrollEventArgs=function(n,t){this.DeltaMove=n,this.Coef=t},PP.Ui.ScrollBar=function(){this._defineEvents(["MoveScroll","MovedScroll","StartScroll"]),this._IsVertical=!1,this._ScrollSpeed=1,PP.Ui.ScrollBar.base.constructor.apply(this,arguments),this._ScrollDirection=!1,this._dragger=null,this._draggerMinSize=15,this._MinWidth=15,this._moveStarted=!1,this._sW="width",this._sH="height",this._sL="left",this._sT="top",this._limit=100,this._step=1,this.posX=0,this._zoneSize=0,this._edgeReached=0,this._render()},PP.initClass(PP.Ui.ScrollBar,PP.Ui.Control,"ScrollBar"),ScrollBarP=PP.Ui.ScrollBar.prototype,ScrollBarP._render=function(){this._initFromHTML("<div class='PPSB'><div></div><div class='PPLS'><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='TopLine'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='TopUnderLine'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='Inside'><div class='ArrowCell Left'></div></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='BottomUnderLine'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='TopLine'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div></div><div class='PPRS'><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='TopLine'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='TopUnderLine'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='Inside'><div class='ArrowCell Right'></div></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='BottomUnderLine'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='TopLine'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div></div><div class='PPSel'></div></div>",!0),this._dragger=this._DomNode.childNodes[3],this._Zone=this._DomNode.childNodes[0],this._leftSide=this._DomNode.childNodes[1],this._leftArrow=this._leftSide.firstChild,this._rightSide=this._DomNode.childNodes[2],this._rightArrow=this._rightSide.firstChild,this._sizeSide=0,this._leftSideTopLine1=this._leftSide.childNodes[2],this._leftSideTopUnderLine=this._leftSide.childNodes[7],this._leftSideInside=this._leftSide.childNodes[10],this._leftSideArrow=this._leftSideInside.firstChild,this._leftSideBottomUnderLine=this._leftSide.childNodes[13],this._leftSideTopLine2=this._leftSide.childNodes[18],this._rightSideTopLine1=this._rightSide.childNodes[2],this._rightSideTopUnderLine=this._rightSide.childNodes[7],this._rightSideInside=this._rightSide.childNodes[10],this._rightSideArrow=this._rightSideInside.firstChild,this._rightSideBottomUnderLine=this._rightSide.childNodes[13],this._rightSideTopLine2=this._rightSide.childNodes[18],this._IsVertical?(this._Zone.className="PPVZone",this._DomNode.className="PPSB VMode",this._sW="height",this._sH="width",this._sL="top",this._sT="left",this._dragger.innerHTML="<table class='PPDT' cellspacing='0' cellpadding='0' border='0' ><tr><td class='PPDT Left'><div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='TopLine'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='Middle'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div></div></td></tr><tr><td class='PPDT Center'><div class='Grip'></div></td></tr><tr><td class='PPDT Right'><div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='Middle'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='TopLine'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div></div></td></tr></table>",this._verticalTD=this._dragger.firstChild.rows[1].cells[0],this._draggerLeft=this._dragger.firstChild.rows[0].cells[0].firstChild,this._draggerLeftTopLine=this._draggerLeft.childNodes[2],this._draggerLeftMiddleLine=this._draggerLeft.childNodes[7],this._draggerRight=this._dragger.firstChild.rows[2].cells[0].firstChild,this._draggerRightTopLine=this._draggerRight.childNodes[2],this._draggerRightMiddleLine=this._draggerRight.childNodes[7],PP.IsIE&&PP.IEVer<9&&(this._borders=PP.htmlToDOM("<div class='Borders'></div>"),this._verticalTD.appendChild(this._borders))):(this._verticalTD=null,this._Zone.className="PPHZone",this._DomNode.className="PPSB",this._sW="width",this._sH="height",this._sL="left",this._sT="top",this._dragger.innerHTML="<table class='PPDT' cellspacing='0' cellpadding='0' border='0' ><tr><td class='PPDT Left'><div><div class='TransparentCorner'></div><div class='GrayCorner'></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='Middle'></div><div class='GrayCorner'></div><div class='LightGrayCorner'></div><div class='TransparentCorner'></div><div class='GrayCorner'></div></div></td><td class='PPDT Center'><div class='Grip'></div></td><td class='PPDT Right'><div><div class='GrayCorner'></div><div class='TransparentCorner'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='Middle'></div><div class='LightGrayCorner'></div><div class='GrayCorner'></div><div class='GrayCorner'></div><div class='TransparentCorner'></div></div></td></tr></table>",this._draggerLeft=this._dragger.firstChild.rows[0].cells[0].firstChild,this._draggerLeftMiddleLine=this._draggerLeft.childNodes[4],this._draggerRight=this._dragger.firstChild.rows[0].cells[2].firstChild,this._draggerRightMiddleLine=this._draggerRight.childNodes[4],PP.IsIE&&PP.IEVer<9&&(this._borders=PP.htmlToDOM("<div class='Borders'></div>"),this._dragger.firstChild.rows[0].cells[1].appendChild(this._borders))),PP.Ui.ScrollBar.base._render.apply(this,arguments),this._turnOffDragger(!1),this._ParentNode&&(this.addToNode(this._ParentNode),this.updateSize()),this._Width===0&&this.setWidth(this._MinWidth),this._Height===0&&this.setHeight(this._MinWidth),this.setDraggerSize(this._draggerMinSize)},ScrollBarP._bindEvents=function(){PP.Ui.ScrollBar.base._bindEvents.apply(this,arguments),this._IsVertical&&this._addEvents(this._ParentNode,{mousewheel:this._OnMouseWheel,DOMMouseScroll:this._OnMouseWheel}),this._addEvent(this._DomNode,"click",this._OnDomNodeClick),this._turnOffDraggerStatus||(this._addEvent(this._dragger,"mousedown",this._OnDraggerMouseDown),this._addEvent(this._dragger,"mouseover",this._OnDraggerMouseOver),this._addEvent(this._dragger,"mouseout",this._OnDraggerMouseOut),this._addEvent(this._Zone,"mousedown",this._OnZoneMouseDown))},ScrollBarP._unBindEvents=function(){PP.Ui.ScrollBar.base._unBindEvents.call(this),this._ParentNode&&(this._removeEvent(this._ParentNode,"mousewheel",this._OnMouseWheel),this._removeEvent(this._ParentNode,"DOMMouseScroll",this._OnMouseWheel)),this._removeAllEvents(this._dragger),this._removeEvent(this._Zone,"mousedown",this._OnZoneMouseDown),this._removeEvent(this._dragger,"mousedown",this._OnDraggerMouseDown),this._removeEvent(this._DomNode,"click",this._OnDomNodeClick)},ScrollBarP._turnOffLeftButton=function(n){n?PP.addClass(this._leftSide,"Off"):PP.removeClass(this._leftSide,"Off"),PP.removeClass(this._leftSide,"Hover"),this._turnOffLeftButtonStatus!=n&&(n?(this._removeEvent(this._leftSide,"mousedown",this._OnLeftButtonMouseDown),this._removeEvent(this._leftSide,"mouseover",this._OnLeftButtonMouseOver),this._removeEvent(this._leftSide,"mouseout",this._OnLeftButtonMouseOut)):(this._addEvent(this._leftSide,"mousedown",this._OnLeftButtonMouseDown),this._addEvent(this._leftSide,"mouseover",this._OnLeftButtonMouseOver),this._addEvent(this._leftSide,"mouseout",this._OnLeftButtonMouseOut))),this._turnOffLeftButtonStatus=n},ScrollBarP._turnOffRightButton=function(n){n?PP.addClass(this._rightSide,"Off"):PP.removeClass(this._rightSide,"Off"),PP.removeClass(this._rightSide,"Hover"),this._turnOffRightButtonStatus!=n&&(n?(this._removeEvent(this._rightSide,"mousedown",this._OnRightButtonMouseDown),this._removeEvent(this._rightSide,"mouseover",this._OnRightButtonMouseOver),this._removeEvent(this._rightSide,"mouseout",this._OnRightButtonMouseOut)):(this._addEvent(this._rightSide,"mousedown",this._OnRightButtonMouseDown),this._addEvent(this._rightSide,"mouseover",this._OnRightButtonMouseOver),this._addEvent(this._rightSide,"mouseout",this._OnRightButtonMouseOut))),this._turnOffRightButtonStatus=n},ScrollBarP._turnOffDragger=function(n){n?PP.addClass(this._dragger,"Off"):PP.removeClass(this._dragger,"Off"),this._turnOffDraggerStatus!=n&&(n?(this._removeAllEvents(this._dragger),this._removeAllEvents(this._Zone)):(this._addEvent(this._dragger,"mousedown",this._OnDraggerMouseDown),this._addEvent(this._dragger,"mouseover",this._OnDraggerMouseOver),this._addEvent(this._dragger,"mouseout",this._OnDraggerMouseOut),this._addEvent(this._Zone,"mousedown",this._OnZoneMouseDown))),this._turnOffDraggerStatus=n},ScrollBarP._updateLimit=function(){var n=this._IsVertical?this._Height:this._Width;this._limit=this._checkValue(n-2*this._sizeSide-(PP.isVisible(this._dragger)?this._dragSize:0))},ScrollBarP._updateEnableButtons=function(){this._Enabled&&(this.posX<=0?(this.posX=0,this._turnOffLeftButton(!0),this._turnOffRightButton(!1),this._edgeReached=this._edgeReached===2?2:1):this.posX>=this._limit?(this.posX=this._limit,this._turnOffLeftButton(!1),this._turnOffRightButton(!0),this._edgeReached=this._edgeReached===2?2:1):(this._turnOffLeftButton(!1),this._turnOffRightButton(!1),this._edgeReached=0),this.posX<=0&&this.posX>=this._limit&&(this.posX=0,this._turnOffLeftButton(!0),this._turnOffRightButton(!0)))},ScrollBarP._applyPosition=function(n){n=PP.isDefined(n)?n:!0,this._updateLimit(),this._updateEnableButtons(),this._IsVertical?this._dragger.style.top=this._sizeSide+this.posX>0?this._sizeSide+this.posX+"px":"0":this._dragger.style.left=this._sizeSide+this.posX>0?this._sizeSide+this.posX+"px":"0",n&&this.MoveScroll.fire(this._DomNode,new PP.ScrollEventArgs(this._checkValue(this.getValue()),this._checkValue(this._limit)))},ScrollBarP._OnLeftButtonMouseDown=function(n,t){var i=t.Event;if(i.which!=1)return!1;PP.addClass(this._leftSide,"Pressed"),this._stoppedMoveFlag=!1,this._addEvent(document,"mouseup",this._OnLeftButtonMouseUp),this._ScrollDirection=!0,this.StartScroll.fire(this,new PP.EventArgs(t.Event)),this._OnMoveEvent(i,1)},ScrollBarP._OnLeftButtonMouseUp=function(n,t){PP.removeClass(this._leftSide,"Pressed"),this._stoppedMoveFlag=!0,this._removeEvent(document,"mouseup",this._OnLeftButtonMouseUp),this.MovedScroll.fire(this,new PP.EventArgs(t.Event))},ScrollBarP._OnLeftButtonMouseOver=function(){PP.addClass(this._leftSide,"Hover")},ScrollBarP._OnLeftButtonMouseOut=function(n,t){PP.removeClass(this._leftSide,"Hover"),PP.removeClass(this._leftSide,"Pressed"),this._stoppedMoveFlag=!0,this._removeEvent(document,"mouseup",this._OnLeftButtonMouseUp),this.MovedScroll.fire(this,new PP.EventArgs(t.Event))},ScrollBarP._OnRightButtonMouseDown=function(n,t){var i=t.Event;if(i.which!=1)return!1;PP.addClass(this._rightSide,"Pressed"),this._stoppedMoveFlag=!1,this._addEvent(document,"mouseup",this._OnRightButtonMouseUp),this._ScrollDirection=!1,this.StartScroll.fire(this,new PP.EventArgs(t.Event)),this._OnMoveEvent(i,1)},ScrollBarP._OnRightButtonMouseUp=function(n,t){PP.removeClass(this._rightSide,"Pressed"),this._stoppedMoveFlag=!0,this._removeEvent(document,"mouseup",this._OnRightButtonMouseUp),this.MovedScroll.fire(this,new PP.EventArgs(t.Event))},ScrollBarP._OnRightButtonMouseOver=function(){PP.addClass(this._rightSide,"Hover")},ScrollBarP._OnRightButtonMouseOut=function(n,t){PP.removeClass(this._rightSide,"Hover"),PP.removeClass(this._rightSide,"Pressed"),this._stoppedMoveFlag=!0,this._removeEvent(document,"mouseup",this._OnRightButtonMouseUp),this.MovedScroll.fire(this,new PP.EventArgs(t.Event))},ScrollBarP._OnMouseWheel=function(n,t){var i=t.Event,r;return(this._Enabled&&(this.StartScroll.fire(this,new PP.EventArgs(t.Event)),r=i.wheelDelta?i.wheelDelta:i.detail*-1,this.posX-=r>0?10*this._ScrollSpeed:-10*this._ScrollSpeed,this._applyPosition(),this.MovedScroll.fire(this,new PP.EventArgs(t.Event))),this._edgeReached===1)?(this._edgeReached=2,!1):this._edgeReached!==2?!1:void 0},ScrollBarP._OnMoveEvent=function(n,t){if(!this._stoppedMoveFlag&&n.which==1){this.posX=this._ScrollDirection?this.posX-t*this._ScrollSpeed:this.posX+t*this._ScrollSpeed,t+=1,this._applyPosition();var i=this;setTimeout(function(){i._OnMoveEvent(n,t)},30)}},ScrollBarP._OnDraggerMouseDown=function(n,t){var i=t.Event;if(i.which!=1)return!1;PP.addClass(this._dragger,"Pressed"),this._LastX=i.clientX,this._LastY=i.clientY,this._DeltaX=i.clientX,this.drag_cx=this.posX,this._removeEvent(this._dragger,"mousedown",this._OnDraggerMouseDown),this._addEvents(this._dragger,{mouseup:this._OnDraggerMouseUp,mousemove:this._OnDraggerMouseMove}),this._addEvent(document,"mouseup",this._OnDraggerMouseUp),PP.setCapture(this._dragger)},ScrollBarP._OnDraggerMouseUp=function(n,t){var i,r,u;this._removeEvent(this._dragger,"mouseup",this._OnDraggerMouseUp),this._removeEvent(document,"mouseup",this._OnDraggerMouseUp),this._removeEvent(this._dragger,"mousemove",this._OnDraggerMouseMove),this._addEvents(this._dragger,{mousedown:this._OnDraggerMouseDown}),PP.releaseCapture(this._dragger),i=PP.calculateOffset(this._dragger),i.Width=parseInt(this._dragger.style.width),i.Height=parseInt(this._dragger.offsetHeight),r=t.Event.clientX,u=t.Event.clientY,(r<i.X||r>i.X+i.Width||u<i.Y||u>i.Y+i.Height)&&PP.removeClass(this._dragger,"Hover"),PP.removeClass(this._dragger,"Pressed"),this._moveStarted&&this.MovedScroll.fire(this,new PP.EventArgs),this._moveStarted=!1},ScrollBarP._OnDraggerMouseOver=function(){PP.addClass(this._dragger,"Hover")},ScrollBarP._OnDraggerMouseOut=function(){PP.removeClass(this._dragger,"Hover")},ScrollBarP._OnDraggerMouseMove=function(n,t){this._moveStarted||this.StartScroll.fire(this,new PP.EventArgs(t.Event)),this._moveStarted=!0;var i=t.Event;this.posX=this.drag_cx+(this._IsVertical?i.clientY-this._LastY:i.clientX-this._LastX),this._applyPosition(),this._Value=Math.round(this.posX/this._limit*100),this._DeltaX=i.clientX},ScrollBarP._OnZoneMouseDown=function(n,t){var i=t.Event,u,r;if(i.which!=1)return!1;this.StartScroll.fire(this,new PP.EventArgs),u=(this._IsVertical?parseInt(this._dragger.style.height):parseInt(this._dragger.style.width))/2,r=typeof i.offsetY!="undefined"?this._IsVertical?i.offsetY:i.offsetX:this._IsVertical?i.layerY:i.layerX,r-=u,this.scrollTo(r),this.MovedScroll.fire(this,new PP.EventArgs)},ScrollBarP._OnDomNodeClick=function(n,t){t.Event.preventDefault(),t.Event.stopPropagation()},ScrollBarP.setTop=function(n){return this._top=parseInt(n),this._top=this._checkValue(this._top),this._DomNode.style.top=this._top+"px",this},ScrollBarP.setLeft=function(n){return this._left=parseInt(n),this._DomNode.style.left=this._left+"px",this},ScrollBarP.setDraggerSize=function(n){n=this._checkValue(n),this._dragger.style[this._sW]=this._draggerMinSize!=0?(this._draggerMinSize>n?this._draggerMinSize:n)+"px":n+"px",this.updateSize(!1)},ScrollBarP.getDraggerSize=function(){return parseInt(this._dragger.style[this._sW])},ScrollBarP.setToolTip=function(){return this},ScrollBarP.getTrackSize=function(){var n=this._DomNode;return this._checkValue(this._IsVertical?n.offsetHeight-this._rightSide.offsetHeight*2:n.offsetWidth-this._rightSide.offsetWidth*2)},ScrollBarP.setIsVisible=function(n){return this._DomNode.style.display=n?"":"none",this},ScrollBarP.getIsVisible=function(){return this._DomNode.style.display==""?!0:!1},ScrollBarP.getValue=function(){return this._Value=this.posX/this._limit*100,isNaN(this._Value)&&(this._Value=0),this._Value},ScrollBarP.setEnabled=function(n){return this._Enabled!=n&&(this._turnOffDragger(!n),this._turnOffLeftButton(!n),this._turnOffRightButton(!n),this._Enabled=n,this._updateEnableButtons()),this},ScrollBarP.getEnabled=function(){return this._Enabled},ScrollBarP.setDraggerMinSize=function(n){n=this._checkValue(n),n!==this._draggerMinSize&&(this._draggerMinSize=n)},ScrollBarP.getDraggerMinSize=function(){return this._draggerMinSize},ScrollBarP.setIsRTL=function(n){return this.posX=n?this._limit:0,this._applyPosition(),this},ScrollBarP.updateSize=function(n){var i,r;if(this._Width===0||this._Height===0)return!1;if(this._DomNode.style.width=this._Width,this._DomNode.style.height=this._Height,PP.show(this._dragger),this._IsVertical){this._leftSide.style.width=this._leftSide.style.height=this._Width+"px",this._rightSide.style.width=this._rightSide.style.height=this._Width+"px",this._leftSideTopLine1.style.width=this._leftSideTopUnderLine.style.width=this._leftSideBottomUnderLine.style.width=this._leftSideTopLine2.style.width=this._Width-4+"px",this._rightSideTopLine1.style.width=this._rightSideTopUnderLine.style.width=this._rightSideBottomUnderLine.style.width=this._rightSideTopLine2.style.width=this._Width-4+"px",this._leftSideInside.style.height=this._rightSideInside.style.height=this._Width-4+"px",this._leftSideInside.style.width=this._rightSideInside.style.width=this._Width-2+"px",this._draggerLeft.style.width=this._Width+"px",this._draggerRight.style.width=this._Width+"px",this._draggerLeftTopLine.style.width=this._Width-4+"px",this._draggerRightTopLine.style.width=this._Width-4+"px",this._draggerLeftMiddleLine.style.width=this._Width-4+"px",this._draggerRightMiddleLine.style.width=this._Width-4+"px";var u=this._DomNode.offsetHeight,t=this._rightSide.offsetHeight,f=parseInt(this._dragger.style.height);this._rightSide.style.top=u-t+"px",this._Zone.style.height=this._checkValue(u-2*t)+2+"px",this._Zone.style.width=this._Width-2+"px",this._Zone.style.top=this._Width-1+"px",this._dragOffset=t+this.posX,this._dragSize=f,this._sizeSide=t,PP.IsIE&&this._verticalTD&&this._dragSize>=4&&(this._verticalTD.style.height=this._dragSize-4+"px"),f>=parseInt(this._Zone.style.height)-2&&PP.hide(this._dragger)}else this._leftSide.style.width=this._leftSide.style.height=this._Height+"px",this._rightSide.style.width=this._rightSide.style.height=this._Height+"px",this._leftSideTopLine1.style.width=this._Height-4+"px",this._leftSideTopUnderLine.style.width=this._Height-4+"px",this._leftSideBottomUnderLine.style.width=this._Height-4+"px",this._leftSideTopLine2.style.width=this._Height-4+"px",this._rightSideTopLine1.style.width=this._rightSideTopUnderLine.style.width=this._rightSideBottomUnderLine.style.width=this._rightSideTopLine2.style.width=this._Height-4+"px",this._leftSideInside.style.height=this._rightSideInside.style.height=this._Height-4+"px",this._leftSideInside.style.width=this._rightSideInside.style.width=this._Height-2+"px",this._draggerLeft.style.height=this._Height+"px",this._draggerRight.style.height=this._Height+"px",this._dragger.style.height=this._Height+"px",this._draggerLeftMiddleLine.style.height=this._Height-4+"px",this._draggerRightMiddleLine.style.height=this._Height-4+"px",i=this._rightSide.offsetWidth,r=parseInt(this._dragger.style.width),this._rightSide.style.left=this._Width-this._Height+"px",this._dragOffset=i+this.posX,this._dragSize=r,this._Zone.style.width=this._checkValue(this._Width-2*i)+2+"px",this._Zone.style.height=this._Height-2+"px",this._Zone.style.left=this._Height-1+"px",this._sizeSide=i,r>=parseInt(this._Zone.style.width)-2&&PP.hide(this._dragger);return this._turnOffDragger(this._turnOffDraggerStatus),this._applyPosition(n),this},ScrollBarP.scrollTo=function(n,t,i){if(t&&(n<0&&(n=0),n>100&&(n=100),n/=100,n=this._limit*n),n||n===0||(n=0),typeof n!="number")throw new Error("ArgumentException");return this.posX=n,this._applyPosition(i),this},ScrollBarP.setScrollSpeed=function(n){n||(n=1),this._ScrollSpeed=n},ScrollBarP.getScrollSpeed=function(){return this._ScrollSpeed},ScrollBarP.dispose=function(){this.isLive()&&(this._DomNode.innerHTML="",PP.Ui.ScrollBar.base.dispose.call(this))},ScrollBarP=null,PP.Ui.ScrollBox=function(n){this._tabIndex=0,this._IsVisible=!0,this._ScrollsWidth=0,this._Content=null,this._Parent=null,PP.Ui.ScrollBox.base.constructor.apply(this,arguments),this._scrollsHidden=!1,this._draggerMinSize=15,this._ScrollsWidth||(this._ScrollsWidth=16),this._HScroll=new PP.Ui.ScrollBar({Height:this._ScrollsWidth}),this._HScroll.setDraggerMinSize(this._draggerMinSize),this._VScroll=new PP.Ui.ScrollBar({IsVertical:!0,Width:this._ScrollsWidth}),this._VScroll.setDraggerMinSize(this._draggerMinSize),this._HScroll.MoveScroll.add(this._OnMoveHorizontalScroll,this),this._VScroll.MoveScroll.add(this._OnMoveVerticalScroll,this),this._IsRTL=n?n.IsRTL:!1,this._BeginUpdate=0,this._render(),this.setIsRTL(this._IsRTL)},PP.initClass(PP.Ui.ScrollBox,PP.Ui.Control,"ScrollBox"),ScrollBoxP=PP.Ui.ScrollBox.prototype,ScrollBoxP._render=function(){var n="<div class='PPScrollBox'><div class='PPScrollContent'></div><div class='PPScrollV'></div><div class='PPScrollH'></div><div class='PPWhiteBox'></div></div>";this._initFromHTML(n),this._ScrollContentDomNode=PP.querySelector(this._DomNode,".PPScrollContent"),this._ScrollVDomNode=PP.querySelector(this._DomNode,".PPScrollV"),this._ScrollHDomNode=PP.querySelector(this._DomNode,".PPScrollH"),this._WhiteBoxDomNode=PP.querySelector(this._DomNode,".PPWhiteBox"),this._ScrollVDomNode.style.width=this._checkValue(this._ScrollsWidth)+"px",this._ScrollHDomNode.style.height=this._checkValue(this._ScrollsWidth)+"px",this._HScroll.addToNode(this._ScrollHDomNode),this._VScroll.addToNode(this._ScrollVDomNode),this._ParentNode&&(this._ParentNode.style.overflow="hidden",this.addToNode(this._ParentNode)),this.updateSize(),this.setContent(this._Content)},ScrollBoxP._bindEvents=function(){this._VScroll._removeEvent(this._VScroll._ParentNode,"mousewheel",this._VScroll._OnMouseWheel),this._VScroll._removeEvent(this._VScroll._ParentNode,"DOMMouseScroll",this._VScroll._OnMouseWheel),this._HScroll._removeEvent(this._HScroll._ParentNode,"mousewheel",this._HScroll._OnMouseWheel),this._HScroll._removeEvent(this._HScroll._ParentNode,"DOMMouseScroll",this._HScroll._OnMouseWheel),this._addEvents(this._DomNode,{mousewheel:this._OnMouseWheel,DOMMouseScroll:this._OnMouseWheel}),this._addEvents(this._VScroll._DomNode,{mousewheel:this._OnMouseWheel,DOMMouseScroll:this._OnMouseWheel}),this._addEvents(this._HScroll._DomNode,{mousewheel:this._OnHorizontalMouseWheel,DOMMouseScroll:this._OnHorizontalMouseWheel})},ScrollBoxP._OnMouseWheel=function(n,t){var u=t.Event,i,r,f;return(this._Enabled&&this._VScroll._Enabled&&(i=u.wheelDelta?u.wheelDelta:u.detail*-1,i=i>0?20:-20,r=Math.round(this._VScroll._limit/(this._ScrollContentDomNode.scrollHeight-this._ScrollContentDomNode.clientHeight)*(this._ScrollContentDomNode.scrollTop-i)),f=Math.round(this._VScroll._limit/(this._ScrollContentDomNode.scrollHeight-this._ScrollContentDomNode.clientHeight)*this._ScrollContentDomNode.scrollTop),r===f&&(r+=-(i/20)),this._VScroll.scrollTo(Math.round(r))),this._VScroll._edgeReached===1)?(this._VScroll._edgeReached=2,!1):this._VScroll._edgeReached!==2?!1:void 0},ScrollBoxP._OnHorizontalMouseWheel=function(n,t){var r=t.Event,i,u;return this._Enabled&&this._HScroll._Enabled&&(i=r.wheelDelta?r.wheelDelta:r.detail*-1,i=i>0?20:-20,u=this._HScroll._limit/(this._ScrollContentDomNode.scrollWidth-this._ScrollContentDomNode.clientWidth)*(this._ScrollContentDomNode.scrollLeft-i),this._HScroll.scrollTo(Math.ceil(u))),!1},ScrollBoxP._OnMoveHorizontalScroll=function(n,t){var i=t.DeltaMove/100*(this._ScrollContentDomNode.scrollWidth-parseInt(this._ScrollContentDomNode.style.width,10));isNaN(i)||i<0||(this._ScrollContentDomNode.scrollLeft=i)},ScrollBoxP._OnMoveVerticalScroll=function(n,t){var i=t.DeltaMove/100*(this._ScrollContentDomNode.scrollHeight-parseInt(this._ScrollContentDomNode.style.height,10));isNaN(i)||i<0||(this._ScrollContentDomNode.scrollTop=i)},ScrollBoxP.setWidth=function(n){if(!n&&this._ParentNode&&(n=this._ParentNode.offsetWidth),this._Width=n,!n)return!1;this._DomNode.style.width=this._checkValue(n)+"px",this._ScrollContentDomNode.style.width=this._checkValue(n-(this._ScrollVDomNode.style.display=="none"?0:this._ScrollsWidth))+"px";var t=this._checkValue(parseInt(this._ScrollContentDomNode.style.width,10));this._ScrollHDomNode.style.width=t+"px",this._HScroll.setWidth(t),this._HScroll.updateSize()},ScrollBoxP.setHeight=function(n){if(this._Height!=n){if(n?this._Height=n:n=this._ScrollContentDomNode.offsetHeight,!n)return!1;this._DomNode.style.height=n+"px",this._ScrollContentDomNode.style.height=this._checkValue(parseInt(this._DomNode.style.height,10)-(this._ScrollHDomNode.style.display=="none"?0:this._ScrollsWidth))+"px";var t=this._checkValue(parseInt(this._ScrollContentDomNode.style.height,10));this._ScrollVDomNode.style.height=t+"px",this._VScroll.setHeight(t),this._VScroll.updateSize()}},ScrollBoxP.setParent=function(n){n instanceof PP.Ui.Control&&(this._Parent=n)},ScrollBoxP.getParent=function(){return this._Parent},ScrollBoxP.setContent=function(n){this._setContentToNode(n,this._ScrollContentDomNode,"Content",!0),this.updateSize()},ScrollBoxP.getContent=function(){return this._Content},ScrollBoxP.setEnabled=function(n){PP.Ui.ScrollBox.base.setEnabled.call(this,n),this._HScroll.setEnabled(this._Enabled),this._VScroll.setEnabled(this._Enabled)},ScrollBoxP.setScrollsWidth=function(n){this._ScrollsWidth=n,this._HScroll.setHeight(this._ScrollsWidth),this._VScroll.setWidth(this._ScrollsWidth),this.updateSize()},ScrollBoxP.getScrollsWidth=function(){return this._ScrollsWidth},ScrollBoxP.setIsRTL=function(n){if(this._IsRTL===!!n)return!1;this._IsRTL=!!n,this._DomNode.setAttribute("dir",this._IsRTL?"rtl":"ltr"),this._ScrollHDomNode.style.direction="ltr",this._ScrollVDomNode.style.direction="ltr",this._HScroll.setIsRTL(this._IsRTL)},ScrollBoxP.getContentNode=function(){return this._ScrollContentDomNode},ScrollBoxP.getVerticalScroll=function(){return this._VScroll},ScrollBoxP.getHorizontalScroll=function(){return this._HScroll},ScrollBoxP._toggleHScroll=function(n){if(this._scrollsHidden)return!1;if(n){this._ScrollHDomNode.style.display="",this._HScroll.show(),this._WhiteBoxDomNode.style.display=this._ScrollVDomNode.style.display==="none"?"none":"";var t=this._checkValue(this._Height-this._ScrollsWidth);this._ScrollContentDomNode.style.height=t+"px",this.updateScrollSizes()}else this._ScrollHDomNode.style.display="none",this._HScroll.hide(),this._WhiteBoxDomNode.style.display="none",this._ScrollContentDomNode.style.height=this._Height>0?this._checkValue(this._Height)+"px":"",this.updateScrollSizes()},ScrollBoxP._toggleVScroll=function(n){if(this._scrollsHidden)return!1;if(n){this._ScrollVDomNode.style.display="",this._VScroll.show(),this._WhiteBoxDomNode.style.display=this._ScrollHDomNode.style.display==="none"?"none":"";var t=this._checkValue((this._checkValue(this._Width)||this._ParentNode.offsetWidth)-this._ScrollsWidth);this._ScrollContentDomNode.style.width=t+"px",this.updateScrollSizes()}else this._ScrollVDomNode.style.display="none",this._VScroll.hide(),this._WhiteBoxDomNode.style.display="none",this._ScrollContentDomNode.style.width=this._Width>0?this._checkValue(this._Width)+"px":"",this.updateScrollSizes()},ScrollBoxP.hideScrolls=function(){if(this._scrollsHidden||this._DomNode.childNodes.length===0)return!1;this._ScrollVDomNode.style.display="none",this._ScrollHDomNode.style.display="none",this._WhiteBoxDomNode.style.display="none",this._DomNode.removeChild(this._ScrollVDomNode),this._DomNode.removeChild(this._ScrollHDomNode),this._DomNode.removeChild(this._WhiteBoxDomNode),this._ScrollContentDomNode.style.width=this._Width+"px",this._ScrollContentDomNode.style.height=this._Height+"px",this._scrollsHidden=!0},ScrollBoxP.showScrolls=function(){if(!this._scrollsHidden)return!1;this._DomNode.appendChild(this._ScrollVDomNode),this._DomNode.appendChild(this._ScrollHDomNode),this._DomNode.appendChild(this._WhiteBoxDomNode),this._scrollsHidden=!1,this.updateSize()},ScrollBoxP.updateSize=function(n){if(this._BeginUpdate>0||(this.setWidth(this._Width),this.setHeight(this._Height),!this._ParentNode||this._scrollsHidden))return!1;this._WhiteBoxDomNode.style.width=this._checkValue(this._ScrollsWidth)+"px",this._WhiteBoxDomNode.style.height=this._checkValue(this._ScrollsWidth)+"px",this.updateScrollsVisibility(n),this.updateScrollSizes(),this.updateScrollPositions()},ScrollBoxP.updateScrollPositions=function(){this.scrollTo(this._ScrollContentDomNode.scrollTop,this._ScrollContentDomNode.scrollLeft,!1,!1)},ScrollBoxP.updateScrollSizes=function(){var n,t;if(this._scrollsHidden)return!1;var i=parseInt(this._ScrollContentDomNode.style.width,10),r=parseInt(this._ScrollContentDomNode.style.height,10),u=this._ScrollContentDomNode.scrollWidth,f=this._ScrollContentDomNode.scrollHeight;this._HScroll.setWidth(i),this._VScroll.setHeight(r),this._ScrollVDomNode.style.height=this._checkValue(r)+"px",this._ScrollHDomNode.style.width=this._checkValue(i)+"px",n=this._VScroll.getTrackSize(),t=Math.ceil(r/f*n),this._VScroll.setDraggerSize(t),n=this._HScroll.getTrackSize(),t=Math.ceil(i/u*n),this._HScroll.setDraggerSize(t),this._HScroll.updateSize(),this._VScroll.updateSize()},ScrollBoxP.updateScrollsVisibility=function(){if(this._scrollsHidden)return!1;var r,u,f,e,o=this._ScrollContentDomNode.scrollWidth,s=this._ScrollContentDomNode.scrollHeight,h=parseInt(this._ScrollContentDomNode.style.width,10)||0,c=parseInt(this._ScrollContentDomNode.style.height,10)||0,t=o-h,i=s-c;t<0&&(t=0),i<0&&(i=0),t<=this._ScrollsWidth&&this._ScrollVDomNode.style.display!=="none"&&(r=!0),i<=this._ScrollsWidth&&this._ScrollHDomNode.style.display!=="none"&&(u=!0),t===0&&(f=!0),i===0&&(e=!0),r&&u||f&&e?(this._toggleVScroll(!1),this._toggleHScroll(!1)):f?(this._toggleHScroll(!1),u?this._toggleVScroll(!1):this._toggleVScroll(!0)):e?(this._toggleVScroll(!1),r?this._toggleHScroll(!1):this._toggleHScroll(!0)):(this._toggleVScroll(!0),this._toggleHScroll(!0))},ScrollBoxP.scrollTo=function(n,t,i,r){if(i)n!==null&&n!==undefined&&this._VScroll.scrollTo(n,!0,r),t!==null&&t!==undefined&&this._HScroll.scrollTo(t,!0,r);else{var u,f;n!==null&&n!==undefined&&(f=(this._ScrollContentDomNode.scrollHeight-parseInt(this._ScrollContentDomNode.style.height,10))/100,u=n/f,this._VScroll.scrollTo(u,!0,r)),t!==null&&t!==undefined&&(f=(this._ScrollContentDomNode.scrollWidth-parseInt(this._ScrollContentDomNode.style.width,10))/100,u=t/f,this._HScroll.scrollTo(u,!0,r))}},ScrollBoxP.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},ScrollBoxP.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this.updateSize()):this._BeginUpdate--},ScrollBoxP.dispose=function(){this.isLive()&&(delete this._Content,delete this._Parent,this._HScroll.dispose(),this._VScroll.dispose(),PP.Ui.ScrollBox.base.dispose.apply(this,arguments))},PP.Ui.DropPanel=function(n){this._defineEvents(["Opening","Opened","Closing","Closed","FrameDown","OutOfPanelDown"],"DropPanel"),this._ParentNode=document.body,this._FocusOnOpen=!0,PP.Ui.DropPanel.base.constructor.apply(this,arguments),this._ScrollBox=null,this._render(),n&&n.Template&&(this._IsDefaultTemplate=!1)},PP.initClass(PP.Ui.DropPanel,PP.Ui.Control,"DropPanel"),PP.Ui.DropPanel.OpenedPanels=[],dropPanelP=PP.Ui.DropPanel.prototype,dropPanelP._EnableEscapeClose=!0,dropPanelP._EnableResizeBottom=!0,dropPanelP._EnableResizeTop=!0,dropPanelP._EnableResizeRight=!0,dropPanelP._EnableResizeLeft=!0,dropPanelP._EnableResize=!0,dropPanelP._UseScrollBox=!0,dropPanelP._CloseOnFrameMouseDown=!0,dropPanelP._MinDropDownWidth=100,dropPanelP._MinDropDownHeight=100,dropPanelP._MaxDropDownHeight=500,dropPanelP._MaxDropDownWidth=500,dropPanelP._Template=PP.Templates.DropPanel,dropPanelP._CloseOnDocumentMouseDown=!1,dropPanelP._ContentAutoFit=!1,dropPanelP._HeightDifference=-1,dropPanelP._WidthDifference=-1,dropPanelP._IsDefaultTemplate=!0,dropPanelP._ContentMouseDown=!1,dropPanelP._render=function(){var n=this._Template;n=n.replace("{Content}","<DIV class='ContentBody'></DIV>"),this._initFromHTML("<DIV class='PPDropPanel' tabIndex='0'>"+n+"</div>"),this._setStructure(),this._UseScrollBox&&PP.Ui.ScrollBox?this._ScrollBox=new PP.Ui.ScrollBox({ParentNode:this._ContentDomNode,Content:this._Content}):this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),this._initSize(),PP.Ui.DropPanel.base._render.call(this),this._IsInitialized=!0},dropPanelP._setStructure=function(){var n=this._DomNode.firstChild.getElementsByTagName("TD");if(n.length==9)this._ResizerTL=n[0],this._ResizerT=n[1],this._ResizerTR=n[2],this._ResizerL=n[3],this._ContentDomNode=n[4].firstChild,this._ResizerR=n[5],this._ResizerBL=n[6],this._ResizerB=n[7],this._ResizerBR=n[8],this.setEnableResize(this._EnableResize);else throw new Error("There must be 9 cells in template");},dropPanelP._updateResizerClass=function(n,t){n&&(t?PP.addClass(n,"Resizer"):PP.removeClass(n,"Resizer"))},dropPanelP._onResize=function(n,t){var c=PP.calculateMouseX(t.Event),h=PP.calculateMouseY(t.Event),y;if(c&&c<0||h&&h<0)return this._onEndResize(n,t),!1;var v=c-this._LastX,a=h-this._LastY,p=this.getWidth(),w=this.getHeight(),o=!0,e=!0,f=!1,u=!1;switch(this._resizeWay){case"L":f=!0,e=!1;break;case"R":f=!0;break;case"BR":f=!0,u=!0;break;case"BL":f=!0,u=!0,e=!1;break;case"B":u=!0;break;case"TR":f=!0,u=!0,o=!1;break;case"TL":f=!0,u=!0,o=!1,e=!1;break;case"T":o=!1,u=!0}var r=p+(e?v:-v),i=w+(o?a:-a),l=0,s=0;return r<this._MinDropDownWidth&&(l=this._MinDropDownWidth-r,r=this._MinDropDownWidth),i<this._MinDropDownHeight&&(s=this._MinDropDownHeight-i,i=this._MinDropDownHeight),r>this._MaxDropDownWidth&&(l=this._MaxDropDownWidth-r,r=this._MaxDropDownWidth),i>this._MaxDropDownHeight&&(s=this._MaxDropDownHeight-i,i=this._MaxDropDownHeight),y=PP.calculateOffset(this._DomNode),o||this.setPosition(null,y.Y+a-s),e||this.setPosition(y.X+v-l),f&&this.setWidth(r,!1),u&&this.setHeight(i,!1),l==0&&(this._LastX=c),s==0&&(this._LastY=h),PP.IsIE&&PP.IEVer===7&&(this._DomNode.className=this._DomNode.className),this.SizeChanging.fire(this,t),!1},dropPanelP._onDocumentMouseDown=function(n,t){var i=!1,r;this._Frame?(this.FrameDown.fire(this._Frame,t),i=t.Event.target.className!="PPDropFrame",this._DroppedDown&&!i&&this._CloseOnFrameMouseDown&&this.hide()):(i=!1,r=this._isOutOfPanelDown(t.Event),this._DroppedDown&&r&&this.OutOfPanelDown.fire(this,t),this._DroppedDown&&!i&&this._CloseOnDocumentMouseDown&&!this._ContentMouseDown&&r&&this.hide(),this._ContentMouseDown=!1)},dropPanelP._isOutOfPanelDown=function(n){for(var e=!0,r=PP.calculateMouseCoords(n),i=PP.Ui.DropPanel.OpenedPanels,o=i.length,t=0;t<o;t++){var u=parseInt(i[t].getDomNode().style.left),f=parseInt(i[t].getDomNode().style.top),s=i[t].getDomNode().offsetWidth,h=i[t].getDomNode().offsetHeight;if(r.X>=u&&r.X<=u+s&&r.Y>=f&&r.Y<=f+h)return!1}return e},dropPanelP._isMouseDownInLastOpenedPanel=function(n){var r=PP.calculateMouseCoords(n),i=PP.Ui.DropPanel.OpenedPanels,u=i.length,t;if(this!==i[u-1])return!1;for(t=0;t<u-1;t++){var f=parseInt(i[t].getDomNode().style.left),e=parseInt(i[t].getDomNode().style.top),o=i[t].getDomNode().offsetWidth,s=i[t].getDomNode().offsetHeight;if(r.X>=f&&r.X<=f+o&&r.Y>=e&&r.Y<=e+s)return!1}return!0},dropPanelP._onContentMouseDown=function(n,t){var i=PP.Ui.DropPanel.base._onContentMouseDown.apply(this,arguments);i&&(this._ContentMouseDown=!0),this._isMouseDownInLastOpenedPanel(t.Event)||(t.Break=!0)},dropPanelP._onMouseDown=function(){PP.Ui.DropPanel.base._onMouseDown.apply(this,arguments)},dropPanelP._onKeyDown=function(n,t){this._EnableEscapeClose&&t.Event.keyCode==PP.Key.Esc&&(this.hide(),t.Event.preventDefault(),t.Event.stopPropagation()),PP.Ui.DropPanel.base._onKeyDown.apply(this,arguments)},dropPanelP.getEnableEscapeClose=function(){return this._EnableEscapeClose},dropPanelP.setEnableEscapeClose=function(n){return n!=this._EnableEscapeClose&&(this._EnableEscapeClose=n),this},dropPanelP.getDroppedDown=function(){return this._DroppedDown},dropPanelP.setUseScrollBox=function(n){if(this._UseScrollBox!==!!n){var t;this._UseScrollBox=!!n,this._UseScrollBox?(t=this.getContent(),this.setContent(""),this._ScrollBox=new PP.Ui.ScrollBox({ParentNode:this._ContentDomNode,Content:t})):this._ScrollBox!=null&&(t=this._ScrollBox.getContent(),this._ScrollBox.dispose(),this._ScrollBox=null,this.setContent(t))}},dropPanelP.getUseScrollBox=function(){return this._UseScrollBox},dropPanelP.setSize=function(n,t,i){return i=typeof i=="undefined"?!0:i==!0,this.setWidth(n,i),this.setHeight(t,i),this},dropPanelP.setWidth=function(n,t){if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined")throw new Error("ArgumentNullException");if(t&&this._IsInitialized&&this.SizeChanging.fire(this,{}),n.toString().indexOf("%")>-1)this._DomNode.style.width=n.toString();else{if(n=parseInt(n,10),isNaN(n))return this;n>this._MaxDropDownWidth&&(n=this._MaxDropDownWidth),n<this._MinDropDownWidth&&(n=this._MinDropDownWidth),n!==this._Width&&(this._Width=this._checkValue(n),this._DomNode.style.width=this._Width+"px",this._WidthDifference>-1&&(this._Content instanceof PP.Ui.Control&&this._ContentAutoFit&&this._Content.setWidth(this._checkValue(this._Width-this._WidthDifference)),this._ScrollBox instanceof PP.Ui.ScrollBox&&this._ScrollBox.setWidth(this._checkValue(this._Width-this._WidthDifference))))}return t&&this._IsInitialized&&this.SizeChanged.fire(this,{}),this._ScrollBox&&this._ScrollBox.updateSize(),this},dropPanelP.setHeight=function(n,t){if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined")throw new Error("ArgumentNullException");if(t&&this._IsInitialized&&this.SizeChanging.fire(this,{}),n=parseInt(n,10),isNaN(n))return this;if(n>this._MaxDropDownHeight&&(n=this._MaxDropDownHeight),n<this._MinDropDownHeight&&(n=this._MinDropDownHeight),n!==this._Height){this._Height=this._checkValue(n),this._DomNode.style.height=this._Height+"px";var i=this._Height-this._HeightDifference;this._ContentDomNode.style.height=this._checkValue(i)+"px",this._Content instanceof PP.Ui.Control&&this._ContentAutoFit&&this._Content.setHeight(this._checkValue(i)),this._ScrollBox instanceof PP.Ui.ScrollBox&&this._ScrollBox.setHeight(this._checkValue(i))}return t&&this._IsInitialized&&this.SizeChanged.fire(this,{}),this._ScrollBox&&this._ScrollBox.updateSize(),this},dropPanelP.getContentHeight=function(){return this._ContentDomNode.offsetHeight},dropPanelP.getContentWidth=function(){return this._ContentDomNode.offsetWidth},dropPanelP.setMaxDropDownWidth=function(n){n!=this._MaxDropDownWidth&&(this._MaxDropDownWidth=n,this._MinDropDownWidth>this._MaxDropDownWidth&&(this._MinDropDownWidth=this._MaxDropDownWidth),this.getWidth()>this._MaxDropDownWidth&&this.setWidth(this._MaxDropDownWidth,!1))},dropPanelP.getMaxDropDownWidth=function(){return this._MaxDropDownWidth},dropPanelP.setMaxDropDownHeight=function(n){n!=this._MaxDropDownHeight&&(this._MaxDropDownHeight=n,this._MinDropDownHeight>this._MaxDropDownHeight&&(this._MinDropDownHeight=this._MaxDropDownHeight),this.getHeight()>this._MaxDropDownHeight&&this.setHeight(this._MaxDropDownHeight,!1))},dropPanelP.getMaxDropDownHeight=function(){return this._MaxDropDownHeight},dropPanelP.setMinDropDownWidth=function(n){n!=this._MinDropDownWidth&&(this._MinDropDownWidth=n,this._MaxDropDownWidth<this._MinDropDownWidth&&(this._MaxDropDownWidth=this._MinDropDownWidth),this.getWidth()<this._MinDropDownWidth&&this.setWidth(this._MinDropDownWidth,!1))},dropPanelP.getMinDropDownWidth=function(){return this._MinDropDownWidth},dropPanelP.setMinDropDownHeight=function(n){n!=this._MinDropDownHeight&&(this._MinDropDownHeight=n,this._MaxDropDownHeight<this._MinDropDownHeight&&(this._MaxDropDownHeight=this._MinDropDownHeight),this.getHeight()<this._MinDropDownHeight&&this.setHeight(this._MinDropDownHeight,!1))},dropPanelP.getMinDropDownHeight=function(){return this._MinDropDownHeight},dropPanelP.setContent=function(n){this._UseScrollBox&&this._ScrollBox?this._ScrollBox.setContent(n):this._setContentToNode(n,this._ContentDomNode,"Content",!0)},dropPanelP.getContent=function(){return this._UseScrollBox&&this._ScrollBox?this._ScrollBox.getContent():this._Content},dropPanelP.setEnableResize=function(n,t){this._EnableResize=!!n,this.setIsResizable(this._EnableResize,t),this._updateResizerClass(this._ResizerT,this._EnableResize&&this._EnableResizeTop),this._updateResizerClass(this._IsRTL?this._ResizerTR:this._ResizerTL,this._EnableResize&&this._EnableResizeTop&&this._EnableResizeLeft),this._updateResizerClass(this._IsRTL?this._ResizerTL:this._ResizerTR,this._EnableResize&&this._EnableResizeTop&&this._EnableResizeRight),this._updateResizerClass(this._IsRTL?this._ResizerR:this._ResizerL,this._EnableResize&&this._EnableResizeLeft),this._updateResizerClass(this._IsRTL?this._ResizerL:this._ResizerR,this._EnableResize&&this._EnableResizeRight),this._updateResizerClass(this._ResizerB,this._EnableResize&&this._EnableResizeBottom),this._updateResizerClass(this._IsRTL?this._ResizerBR:this._ResizerBL,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeLeft),this._updateResizerClass(this._IsRTL?this._ResizerBL:this._ResizerBR,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeRight)},dropPanelP.getEnableResize=function(){return this._EnableResize},dropPanelP.setEnableResizeLeft=function(n){n!=this._EnableResizeLeft&&(this._EnableResizeLeft=!!n,this._updateResizerClass(this._ResizerL,this._EnableResize&&this._EnableResizeLeft),this._EnableResizeTop&&this._updateResizerClass(this._ResizerTL,this._EnableResize&&this._EnableResizeLeft),this._EnableResizeBottom&&this._updateResizerClass(this._ResizerBL,this._EnableResize&&this._EnableResizeLeft))},dropPanelP.getEnableResizeLeft=function(){return this._EnableResizeLeft},dropPanelP.setEnableResizeRight=function(n){n!=this._EnableResizeRight&&(this._EnableResizeRight=!!n,this._updateResizerClass(this._ResizerR,this._EnableResize&&this._EnableResizeRight),this._EnableResizeTop&&this._updateResizerClass(this._ResizerTR,this._EnableResize&&this._EnableResizeRight),this._EnableResizeBottom&&this._updateResizerClass(this._ResizerBR,this._EnableResize&&this._EnableResizeRight))},dropPanelP.getEnableResizeRight=function(){return this._EnableResizeRight},dropPanelP.setEnableResizeTop=function(n){n!=this._EnableResizeTop&&(this._EnableResizeTop=!!n,this._updateResizerClass(this._ResizerT,this._EnableResize&&this._EnableResizeTop),this._EnableResizeLeft&&this._updateResizerClass(this._ResizerTL,this._EnableResize&&this._EnableResizeTop),this._EnableResizeRight&&this._updateResizerClass(this._ResizerTR,this._EnableResize&&this._EnableResizeTop))},dropPanelP.getEnableResizeTop=function(){return this._EnableResizeTop},dropPanelP.setEnableResizeBottom=function(n){n!=this._EnableResizeBottom&&(this._EnableResizeBottom=!!n,this._updateResizerClass(this._ResizerB,this._EnableResize&&this._EnableResizeBottom),this._EnableResizeLeft&&this._updateResizerClass(this._ResizerBL,this._EnableResize&&this._EnableResizeBottom),this._EnableResizeRight&&this._updateResizerClass(this._ResizerBR,this._EnableResize&&this._EnableResizeBottom))},dropPanelP.getEnableResizeBottom=function(){return this._EnableResizeBottom},dropPanelP.setIsRTL=function(n){PP.Ui.DropPanel.base.setIsRTL.call(this,n),this.setEnableResize(this._EnableResize,!0),this._ScrollBox&&this._ScrollBox.setIsRTL(n)},dropPanelP.setEnabled=function(n){PP.Ui.DropPanel.base.setEnabled.apply(this,arguments),this._ScrollBox&&this._ScrollBox.setEnabled(n)},dropPanelP.getCloseOnFrameMouseDown=function(){return this._CloseOnFrameMouseDown},dropPanelP.setCoords=function(n,t){this._Coords={X:n,Y:t},this._DroppedDown&&(this._DomNode.style.top=t+"px",this._DomNode.style.left=n+"px")},dropPanelP.getCoords=function(){return this._Coords},dropPanelP.show=function(n,t,i){var u,f,r,e,o,s,l,h,c,a,v;this._DroppedDown||(f={X:n,Y:t},this._Coords=f,this.Opening.fire(this,f),PP.Ui.DropPanel.Opening.fire(this,f),this._DroppedDown=!0,this._DomNode.style.visibility="hidden",this._ParentNode.appendChild(this._DomNode),this._HeightDifference<0?(PP.hide(this._ContentDomNode),e=this._ResizerTL,o=PP.getStyle(e,"height"),o=parseInt(o)?parseInt(o):e.offsetHeight,e=this._IsRTL?this._ResizerBR:this._ResizerBL,s=PP.getStyle(e,"height"),s=parseInt(s)?parseInt(s):e.offsetHeight,this._HeightDifference=o+s,r=parseInt(PP.getStyle(this._ContentDomNode,"paddingTop")),isNaN(r)||(this._HeightDifference+=r),r=parseInt(PP.getStyle(this._ContentDomNode,"paddingBottom")),isNaN(r)||(this._HeightDifference+=r),u=parseInt(PP.getStyle(this._ContentDomNode,"marginBottom")),isNaN(u)||(this._HeightDifference+=u),u=parseInt(PP.getStyle(this._ContentDomNode,"marginTop")),isNaN(u)||(this._HeightDifference+=u),PP.show(this._ContentDomNode),this._Height>0&&(this._DomNode.style.height=this._Height+"px",l=this._checkValue(this._Height-this._HeightDifference),this._ContentDomNode.style.height=l+"px",this._Content instanceof PP.Ui.Control&&this._ContentAutoFit&&this._Content.setHeight(l),this._ScrollBox instanceof PP.Ui.ScrollBox&&this._ScrollBox.setHeight(l))):this._Content instanceof PP.Ui.Control&&this._ContentAutoFit&&this._Content.setHeight(this._checkValue(this._Height-this._HeightDifference)),this._WidthDifference<0?(PP.hide(this._ContentDomNode),h=PP.getStyle(this._ResizerTL,"width"),h=parseInt(h)?parseInt(h):this._ResizerTL.offsetWidth,c=PP.getStyle(this._ResizerBL,"width"),c=parseInt(c)?parseInt(c):this._ResizerBL.offsetWidth,this._WidthDifference=h+c,r=parseInt(PP.getStyle(this._ContentDomNode,"paddingLeft")),isNaN(r)||(this._WidthDifference+=r),r=parseInt(PP.getStyle(this._ContentDomNode,"paddingRight")),isNaN(r)||(this._WidthDifference+=r),PP.show(this._ContentDomNode),this._Width>0&&(a=this._checkValue(this._Width-this._WidthDifference),this._Content instanceof PP.Ui.Control&&this._ContentAutoFit&&this._Content.setWidth(a),this._ScrollBox instanceof PP.Ui.ScrollBox&&this._ScrollBox.setWidth(a))):this._Content instanceof PP.Ui.Control&&this._ContentAutoFit&&this._Content.setWidth(this._checkValue(this._Width-this._WidthDifference)),this.getHeight()>this._MaxDropDownHeight&&this.setHeight(this._Height,!1),this.getHeight()<this._MinDropDownHeight&&this.setHeight(this._Height,!1),this.getWidth()>this._MaxDropDownWidth&&this.setWidth(this._Width,!1),this.getWidth()<this._MinDropDownWidth&&this.setWidth(this._Width,!1),v=this._getNextZIndex(),this._CloseOnFrameMouseDown&&(this._DomNode.style.zIndex=v,PP.Ui.DropPanel.OpenedPanels.push(this)),i?this._CloseOnFrameMouseDown&&this._addEvent(document.documentElement,"mousedown",this._onDocumentMouseDown):(this._Frame=PP.htmlToDOM("<div class='PPDropFrame'></div>"),this._Frame.id=this.getId()+"_frame",this._Frame.style.zIndex=v-1,document.body.appendChild(this._Frame),this._addEvent(this._Frame,"mousedown",this._onDocumentMouseDown)),this._DomNode.style.left=f.X+"px",this._DomNode.style.top=f.Y+"px",this._DomNode.style.visibility="",PP.Ui.DropPanel.base.show.apply(this,arguments),this._bindEvents(),this._FocusOnOpen&&this.setFocus(),this.Opened.fire(this,{}),this._ScrollBox&&this._ScrollBox.updateSize())},dropPanelP._getNextZIndex=function(){var n=PP.Ui.DropPanel.OpenedPanels,t=n.length;return t?parseInt(n[t-1].getDomNode().style.zIndex)+1:PP.getStyle(this._DomNode,"zIndex")},dropPanelP.setIsVisible=function(n){this._IsVisible=!!n},dropPanelP.hide=function(){var u;if(this._DroppedDown){if(u={},this.Closing.fire(this,u),u.IsCancelClose)return this;this._DroppedDown=!1,this._Frame?(this._removeAllEvents(this._Frame),this._Frame.parentNode&&this._Frame.parentNode.removeChild(this._Frame),this._Frame=null):this._removeEvent(document.documentElement,"mousedown",this._onDocumentMouseDown);var f=0,t,n,i=PP.Ui.DropPanel.OpenedPanels,r=i.length;if(this._CloseOnFrameMouseDown)for(t=0;t<r;t++)n=i[t],n==this?f=-1:(n._DomNode.style.zIndex=parseInt(n._DomNode.style.zIndex)+f,n._Frame&&(n._Frame.style.zIndex=parseInt(n._DomNode.style.zIndex)-1));for(PP.rmvFrmArr(PP.Ui.DropPanel.OpenedPanels,this),r=i.length,t=r-1;t>-1;t--)n=i[t],n instanceof PP.Ui.ToolTip&&n.hide();PP.Ui.DropPanel.base.hide.apply(this,arguments),this._DomNode.parentNode&&this._DomNode.parentNode.removeChild(this._DomNode),r=i.length,this._FocusOnOpen&&r>0&&i[r-1]._FocusOnOpen&&i[r-1].setFocus(),this.Closed.fire(this,{}),PP.Ui.DropPanel.Closed.fire(this,{})}},dropPanelP.addToNode=function(n){this._ParentNode=n},dropPanelP.isVisibleArea=function(n,t,i){var h=document.documentElement.clientHeight,c=document.documentElement.clientWidth,p;this._DomNode.style.visibility="hidden",this._ParentNode.appendChild(this._DomNode);var r=this._DomNode.getBoundingClientRect(),e=this._ContentDomNode.getBoundingClientRect(),l=!1,a=!1,u=r.bottom-r.top,f=r.right-r.left;i||(u>this._MaxDropDownHeight&&(u=this._MaxDropDownHeight,this.setHeight(u,!1)),u<this._MinDropDownHeight&&(u=this._MinDropDownHeight,this.setHeight(u,!1)),f>this._MaxDropDownWidth&&(f=this._MaxDropDownWidth,this.setWidth(f,!1)),f<this._MinDropDownWidth&&(f=this._MinDropDownWidth,this.setWidth(f,!1))),r=this._DomNode.getBoundingClientRect(),e=this._ContentDomNode.getBoundingClientRect(),u=r.bottom-r.top,f=r.right-r.left;var v=e.bottom-e.top,y=e.right-e.left,o=t+e.left-r.left,s=n+e.top-r.top;return a=s>-1&&s<h&&s+v>=0&&s+v<=h?!0:!1,l=o>-1&&o<c&&o+y>=0&&o+y<=c?!0:!1,p={VisibleByWidth:l,VisibleByHeight:a,Width:f,Height:u},this._ParentNode.removeChild(this._DomNode),this._DomNode.style.visibility="",p},dropPanelP.setPosition=function(n,t){this._DomNode.style.left=n!=null?n+"px":this._DomNode.style.left,this._DomNode.style.top=t!=null?t+"px":this._DomNode.style.top},dropPanelP.dispose=function(){this.isLive()&&(this.hide(),PP.Ui.DropPanel.base.dispose.apply(this,arguments))},dropPanelP=null,PP.Ui.DropPanel.Opening=new PP.Delegate,PP.Ui.DropPanel.Closed=new PP.Delegate,PP.Ui.TextBox=function(){this._defineEvents(["BeforeChange","AfterChange","AfterTimeout","TextChanged","Enter","Blur","Focus","ImageClick"]),this._EnableEdit=!0,this._IsPassword=!1,this._IsWatermark=!1,this._WatermarkText="",this._ImageList=null,this._RowImgIndex=-1,this._ColImgIndex=-1,this._ImageUrl="",this._ImageAlign=PP.LTRB.Right,this._ImageEnabledAlways=!1,this._ImageWidth=16,this._ImageHeight=16,this._MaxLength=-1,this._ImageMargin=2,PP.Ui.TextBox.base.constructor.apply(this,arguments),(typeof this._Content=="undefined"||this._Content===null)&&(this._Content=""),this._Content+="",this._denyBlur=!1,this._restrictedSymbols=[],this._allowedSymbols=[],this._isRegExp=!1,this._cssInput="PPTextBoxInput",this._cssInputTd="PPTextBoxTd",this._cssInputNotValid="PPTextBoxNotValid",this._cssInputTdNotValid="PPTextBoxTdNotValid",this._cssDomNode="PPTextTable",this._focused=!1,this._caretPos=0,this._focusFromMouse=!1,this._selectionLocked=!1,this._focusFromOut=!0,this._textBeforeFocus=null,this._inputInterval=null,this._render(),this.setContent(this._Content,!1),this._ParentNode&&this.addToNode(this._ParentNode)},PP.initClass(PP.Ui.TextBox,PP.Ui.Control,"TextBox"),TextEdtP=PP.Ui.TextBox.prototype,TextEdtP._render=function(){if(this._isRendered)return!0;var n="";n="<div class='PPTextBox'><table cellspacing='0' cellpadding='0' border='0' class='{DomNodeCssClass}' tmplid='table'><tbody><tr><td class='Custom'></td><td><input type='"+(this._IsPassword?"password":"text")+"' value=''/></td><td class='Custom'></td></tr></tbody></table></div>",n=n.replace("{DomNodeCssClass}",this._cssDomNode),this._initFromHTML(n,!0),this._input=this._DomNode.getElementsByTagName("input")[0],this._inputTd=this._input.parentNode,this._input.className=this._cssInput,this._inputTd.className=this._cssInputTd,this._leftCustomNode=this._inputTd.previousSibling,this._rightCustomNode=this._inputTd.nextSibling,PP.addClass(this._leftCustomNode,"PPTextBoxImageContainer"),PP.addClass(this._rightCustomNode,"PPTextBoxImageContainer"),PP.Ui.TextBox.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),this._updateImageRender(),this._isRendered=!0},TextEdtP._bindEvents=function(){this._isBind||(PP.Ui.TextBox.base._bindEvents.call(this),this._addEvent(this._inputTd,"selectstart",this._onSelectStart),this._addEvents(this._input,{keyup:this._onKeyUpInput,keydown:this._onKeyDownInput,keypress:this._onKeyPressInput,blur:this._onBlurInput,focus:this._onFocusInput,mouseover:this._onMouseOverInput,mouseout:this._onMouseOutInput,mouseup:this._onMouseUpInput,mousedown:this._onMouseDownInput}))},TextEdtP._unBindEvents=function(){PP.Ui.TextBox.base._unBindEvents.call(this),this._removeEvent(this._inputTd,"selectstart",this._onSelectStart),this._removeAllEvents(this._input)},TextEdtP._onImageClick=function(){(this.getEnabled()||this._ImageEnabledAlways)&&this.ImageClick.fire(this,{})},TextEdtP._onMouseOverInput=function(){PP.IsIE&&PP.isFunction(document.body.onselectstart)&&(this._bodyOnSelectStart=document.body.onselectstart,document.body.onselectstart=null)},TextEdtP._onMouseOutInput=function(){PP.IsIE&&this._bodyOnSelectStart&&(document.body.onselectstart=this._bodyOnSelectStart,this._bodyOnSelectStart=null)},TextEdtP._onBlurInput=function(n,t){var r,i;if(this._denyBlur==!0||!this._focused)return t.Event.preventDefault(),!1;if(this._focused=!1,this._raiseBlur(t),!this.isLive())return!1;r=this.getContent(),(this._textBeforeFocus==null||this._textBeforeFocus!=r)&&(i=new PP.EventArgs,i.OldText=this._textBeforeFocus,i.NewText=r,this._raiseTextChangedEvent(i)),this._textBeforeFocus=null,this._IsWatermark&&this._input.value.length==0&&(this._input.value=this._WatermarkText,PP.addClass(this._input,"PPWatermark"))},TextEdtP._onFocusInput=function(n,t){if(!this._EnableEdit)return!1;this._focused=!0,this._focusFromMouse||this._setCaretPos(this._caretPos),this._focusFromMouse=!1,this._focusFromOut=!0,this._raiseFocus(t),this._textBeforeFocus=this.getContent(),this._IsWatermark&&this._input.value.length>0&&this._input.value==this._WatermarkText&&(this._input.value="",PP.removeClass(this._input,"PPWatermark"),this._removeEvent(this._input,"focus",this._onFocusInput),PP.setTimeout(this._deferredFocus,100,this))},TextEdtP._deferredFocus=function(n){n._input.focus(),n._addEvent(n._input,"focus",n._onFocusInput)},TextEdtP._onKeyDownInput=function(n,t){var r,f,o,s,h;if(!this._EnableEdit)return!1;var i=t.Event,c=i.keyCode?i.keyCode:i.which,u=new PP.EventArgs(i),e=this.getContent();u.OldValue=e,u.Cancel=!1,r=this._getSelection();switch(c){case 8:if(r.Start==r.End&&r.Start==0)break;f="",i.ctrlKey||(f=e.substring(0,r.Start),r.Start==r.End&&(f=f.substring(0,f.length-1))),o=e.substring(r.End),u.NewValue=f+o,this._raiseBeforeChangeEvent(u),u.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i);break;case 88:if(!i.ctrlKey||r.Start==r.End)break;case 46:if(i.shiftKey&&r.Start==r.End)break;if(r.Start==r.End&&r.End==e.length)break;f=e.substring(0,r.Start),o=e.substring(r.End),r.Start==r.End&&(o=o.substring(1)),u.NewValue=f+o,this._raiseBeforeChangeEvent(u),u.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i);break;case 45:i.shiftKey&&(this._raiseBeforeChangeEvent(u),u.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i));break;case 86:i.ctrlKey&&(this._raiseBeforeChangeEvent(u),u.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i));break;case 90:i.ctrlKey&&(this._raiseBeforeChangeEvent(u),u.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i));break;case 13:if(!this.isLive())return!1;s=this.getContent(),(this._textBeforeFocus==null||this._textBeforeFocus!=s)&&(h=new PP.EventArgs,h.OldText=this._textBeforeFocus,h.NewText=s,this._raiseTextChangedEvent(h)),this._textBeforeFocus=s,this.Enter.fire(this,{Value:PP.isNumber(this._Value)?this._Value:this.getContent()})}},TextEdtP._onKeyPressInput=function(n,t){var i=t.Event,f=i.keyCode?i.keyCode:i.which,r=new PP.EventArgs(i),e=this.getContent(),o,u,s,h,c;r.OldValue=e,r.Cancel=!1,o=this._getSelection(),u=!0;switch(f){case 9:case 8:case 13:u=!1;break;default:if(i.charCode===0||i.which===0||i.ctrlKey){u=!1;break}s=e.substring(0,o.Start),h=e.substring(o.End),r.NewValue=s+String.fromCharCode(f)+h}return(c=this._checkRestriction(f),!c)?!1:this._input.value.length>=this._MaxLength&&this._MaxLength>-1?!1:(u&&(this._raiseBeforeChangeEvent(r),r.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i)),!0)},TextEdtP._onKeyUpInput=function(){this._caretPos=this._getCaretPos()},TextEdtP._onMouseDownInput=function(){this._focusFromMouse=!0,this._caretPos=this._getCaretPos(),this._setCaretPos(this._caretPos)},TextEdtP._onMouseUpInput=function(n,t){var i=t.Event.sourceElement;return i.disabled?!1:(this._caretPos=this._getCaretPos(),!0)},TextEdtP._onSelectStart=function(){},TextEdtP._checkRestriction=function(n){var i=String.fromCharCode(n),t;if(this._isRegExp)return this._restrictedSymbols===""&&this._allowedSymbols===""?!0:this._restrictedSymbols===""?this._allowedSymbols.test(i):!this._restrictedSymbols.test(i);if(this._restrictedSymbols.length===0&&this._allowedSymbols.length===0)return!0;if(this._restrictedSymbols.length===0){for(t=0;t<this._allowedSymbols.length;t++)if(i===this._allowedSymbols[t])return!0;return!1}for(t=0;t<this._restrictedSymbols.length;t++)if(i===this._restrictedSymbols[t])return!1;return!0},TextEdtP._updateImageRender=function(){var r,t,n,i;PP.hide(this._leftCustomNode),PP.hide(this._rightCustomNode),this._imageContainer&&this._imageContainer.parentNode&&(this._removeEvent(this._imageContainer,"click",this._onImageClick),this._imageContainer.parentNode.removeChild(this._imageContainer)),this._imageContainer=PP.htmlToDOM("<div class='PPTextBoxImage'></div>"),this._addEvent(this._imageContainer,"click",this._onImageClick),r=this._ImageAlign,t=r===PP.LTRB.Left?this._leftCustomNode:this._rightCustomNode,(this._ImageUrl||this._ImageList)&&(n=0,i=0,this._ImageUrl?(n=this._ImageHeight,i=this._ImageWidth,this._imageContainer.style.backgroundImage="url('"+this._ImageUrl+"')"):(n=this._ImageList.getIconHeight(),i=this._ImageList.getIconWidth(),(this._RowImgIndex>-1||this._ColImgIndex>-1)&&(this._imageContainer.style.background="url('"+this._ImageList.getSource()+"') "+this._ImageList.getIcon(this._RowImgIndex,this._ColImgIndex))),t.appendChild(this._imageContainer),t.style.width=i+this._ImageMargin*2+"px",this._imageContainer.style.width=i+"px",this._imageContainer.style.margin=this._ImageMargin-1+"px",n=this._inputContainerHeight<n?this._inputContainerHeight:n,this._imageContainer.style.height=n+"px",PP.show(t))},TextEdtP._getCaretPos=function(){if(document.selection){var n=document.selection.createRange();return n.moveStart("character",-this._input.value.length),(n.text+"").length}try{return this._input.selectionEnd}catch(t){if(t.name=="NS_ERROR_FAILURE")return 0;throw t;}return 0},TextEdtP._getSelection=function(){var n=null,t=null;if(document.selection){var i=document.selection.createRange(),u=(i.text+"").length,r=this.getContent().length,f=i.moveStart("character",r);n=r-f,t=n+u}else n=this._input.selectionStart,t=this._input.selectionEnd;return{Start:n,End:t}},TextEdtP._setCaretPos=function(){},TextEdtP._validateInput=function(){for(var t=this.getContent().split(""),i=[],n=0;n<t.length;n++)this._checkRestriction(t[n].charCodeAt(0))&&i.push(t[n]);if(i.length===t.length)return!0;this.setContent(i.join(""))},TextEdtP.applyValidCSS=function(){this._input.className!=this._cssInput&&PP.removeClass(this._input,this._cssInputNotValid),this._inputTd.className!=this._cssInputTd&&PP.removeClass(this._inputTd,this._cssInputTdNotValid)},TextEdtP.applyNotValidCSS=function(){this._input.className.indexOf(this._cssInputNotValid)===-1&&PP.addClass(this._input,this._cssInputNotValid),this._inputTd.className.indexOf(this._cssInputTdNotValid)===-1&&PP.addClass(this._inputTd,this._cssInputTdNotValid)},TextEdtP._raiseTimeoutEvent=function(n){n.isLive()&&n.AfterTimeout.fire(n,{Value:PP.isNumber(n._Value)?n._Value:n.getContent()})},TextEdtP._setTimeoutAfterChange=function(n){var i=new PP.EventArgs(n),t;i.OldValue=this.getContent(),i.Cancel=!1,t=this,setTimeout(function(){t.isLive()&&(t._MaxLength>-1&&(t._input.value=t._input.value.substr(0,t._MaxLength)),i.NewValue=t.getContent(),t._raiseAfterChangeEvent(i))},10)},TextEdtP._raiseBeforeChangeEvent=function(n,t){t!==!1&&this.BeforeChange.fire(this,n)},TextEdtP._raiseAfterChangeEvent=function(n,t){t!==!1&&(this.AfterChange.fire(this,n),this._inputInterval&&PP.clearTimeout(this._inputInterval),this._inputInterval=PP.setTimeout(this._raiseTimeoutEvent,1e3,this))},TextEdtP._raiseBlur=function(n){this.Blur.fire(this,n)},TextEdtP._raiseFocus=function(n){this.Focus.fire(this,n)},TextEdtP._raiseTextChangedEvent=function(n,t){t!==!1&&this.TextChanged.fire(this,n)},TextEdtP.getIsPassword=function(){return this._IsPassword},TextEdtP.setIsPassword=function(n){if(this._IsPassword===!!n)return!1;this._IsPassword=!!n,PP.IsIE?(n=this.getContent(),this._removeAllEvents(this._input),this._inputTd.removeChild(this._input),this._input=PP.htmlToDOM("<input type='"+(this._IsPassword?"password":"text")+"' value='"+n+"'/>"),PP.addClass(this._input,this._cssInput),this._inputTd.appendChild(this._input),this._addEvents(this._input,{keyup:this._onKeyUpInput,keydown:this._onKeyDownInput,keypress:this._onKeyPressInput,blur:this._onBlurInput,focus:this._onFocusInput,mouseover:this._onMouseOverInput,mouseout:this._onMouseOutInput,mouseup:this._onMouseUpInput,mousedown:this._onMouseDownInput})):this._input.setAttribute("type",this._IsPassword?"password":"text")},TextEdtP.setMaxLength=function(n){if(isFinite(n)){this._MaxLength=n;var t=this.getContent();t.length>this._MaxLength&&this._MaxLength>-1&&(t=t.substr(0,this._MaxLength),this.setContent(t))}},TextEdtP.getMaxLength=function(){return this._MaxLength},TextEdtP.setValidState=function(n){n?this.applyValidCSS():this.applyNotValidCSS()},TextEdtP.setFocus=function(){this._input&&this._input.focus()},TextEdtP.setTabIndex=function(n){return this._input||(this._input=this._DomNode.getElementsByTagName("input")[0]),isNaN(parseInt(n))?this._input.removeAttribute("tabindex"):this._input.setAttribute("tabindex",n),this},TextEdtP.getTabIndex=function(){return this._input?this._input.getAttribute("tabindex"):null},TextEdtP.setEnabled=function(n,t){return(PP.isBoolean(n)&&n!=this._Enabled||t)&&(PP.Ui.TextBox.base.setEnabled.apply(this,arguments),this._input&&(n?(this._input.setAttribute("enabled","enabled"),this._input.removeAttribute("disabled")):(this._input.setAttribute("disabled","disabled"),this._input.removeAttribute("enabled")),this._EnableEdit||(this._input.removeAttribute("enabled"),this._input.setAttribute("disabled","noedit")))),this},TextEdtP.getContent=TextEdtP.getValue=function(){var n=this._input.value,t=this._IsWatermark;return!t||t&&n!==this._WatermarkText?n:""},TextEdtP.setContent=TextEdtP.setValue=function(n,t,i){(typeof n=="undefined"||n===null)&&(n=""),n+="",this._MaxLength>-1&&n.length>this._MaxLength&&this._MaxLength>-1&&(n=n.substr(0,this._MaxLength)),t=typeof t=="undefined"?!0:t==!0;var r=new PP.EventArgs,u=this.getContent();return r.OldValue=u,r.NewValue=n,r.Cancel=!1,this._raiseBeforeChangeEvent(r,t),r.Cancel||(this._input.value=n,this._IsWatermark&&(this._focused||this._input.value.length!=0&&this._input.value!=this._WatermarkText?PP.removeClass(this._input,"PPWatermark"):(this._input.value=this._WatermarkText,PP.addClass(this._input,"PPWatermark"))),r=new PP.EventArgs,r.OldValue=u,r.NewValue=n,u!==n&&this._raiseTextChangedEvent(r,t,i),this._raiseAfterChangeEvent(r,t,i)),this},TextEdtP.setRestrictedSymbols=function(n){if(this._isRegExp=n instanceof RegExp?!0:!1,!n)return this._restrictedSymbols=[],!0;typeof n=="string"&&(n=n.split("")),this._restrictedSymbols=n,this._allowedSymbols=this._isRegExp?"":[]},TextEdtP.setAllowedSymbols=function(n){var t,r,i;if(this._isRegExp=n instanceof RegExp?!0:!1,!n)return this._allowedSymbols=[],!0;for(typeof n=="string"&&(n=n.split("")),this._allowedSymbols=n,this._restrictedSymbols=this._isRegExp?"":[],t=this.getContent().split(""),r=[],i=0;i<t.length;i++)this._checkRestriction(t[i].charCodeAt(0))&&r.push(t[i]);if(r.length===t.length)return!0;this.setContent(r.join(""))},TextEdtP.getEnableEdit=function(){return this._EnableEdit},TextEdtP.setEnableEdit=function(n){this._EnableEdit=!!n,this._input.style.cursor=this._EnableEdit?"":"default",this._EnableEdit?this._Enabled&&(this._input.removeAttribute("disabled"),this._input.setAttribute("enabled","enabled")):this._input.setAttribute("disabled",this._Enabled?"noedit":"disabled")},TextEdtP.setIsWatermark=function(n){return PP.isBoolean(n)&&n!=this._IsWatermark&&(this._IsWatermark=n,n?this._focused||this._input.value.length!=0||(this._input.value=this._WatermarkText,PP.addClass(this._input,"PPWatermark")):this._input.value==this._WatermarkText&&(this._input.value="",PP.removeClass(this._input,"PPWatermark"))),this},TextEdtP.getIsWatermark=function(){return this._IsWatermark},TextEdtP.setWatermarkText=function(n){return PP.isString(n)&&n!=this._WatermarkText&&(this._IsWatermark&&this._input.value==this._WatermarkText&&(this._input.value=n),this._WatermarkText=n),this},TextEdtP.getWatermarkText=function(){return this._WatermarkText},TextEdtP.getImageWidth=function(){return this._ImageWidth},TextEdtP.getImageHeight=function(){return this._ImageHeight},TextEdtP.getImageMargin=function(){return this._ImageMargin},TextEdtP.getImageEnabledAlways=function(){return this._ImageEnabledAlways},TextEdtP.setImageEnabledAlways=function(n){return PP.removeClass(this._leftCustomNode,"PPAlwaysEnabled"),PP.removeClass(this._rightCustomNode,"PPAlwaysEnabled"),n&&(PP.addClass(this._leftCustomNode,"PPAlwaysEnabled"),PP.addClass(this._rightCustomNode,"PPAlwaysEnabled")),this._ImageEnabledAlways=n,this},TextEdtP.getImageList=function(){return this._ImageList},TextEdtP.setImageList=function(n){return n!=this._ImageList&&(this._ImageList=n,this.setImageUrl(),this._updateImageRender()),this},TextEdtP.getRowImgIndex=function(){return this._RowImgIndex},TextEdtP.setRowImgIndex=function(n){return n!=this._RowImgIndex&&(this._RowImgIndex=n,this._ImageList&&this.setImageUrl(),this._updateImageRender()),this},TextEdtP.getColImgIndex=function(){return this._ColImgIndex},TextEdtP.setColImgIndex=function(n){return n!=this._ColImgIndex&&(this._ColImgIndex=n,this._ImageList&&this.setImageUrl(),this._updateImageRender()),this},TextEdtP.getImageUrl=function(){return this._ImageUrl},TextEdtP.setImageUrl=function(n){return n!=this._ImageUrl&&(this._ImageUrl=n,this._updateImageRender()),this},TextEdtP.getImageAlign=function(){return this._ImageAlign},TextEdtP.setImageAlign=function(n){return n!=this._ImageAlign&&(n==PP.LTRB.Left||n==PP.LTRB.Right)&&(this._ImageAlign=n,this._updateImageRender()),this},TextEdtP.selectAll=function(){if(!(this._IsWatermark&&this._input.value===this._WatermarkText&&PP.hasClass(this._input,"PPWatermark"))){this._denyBlur=!0;var n=this._input;n.focus(),PP.setTimeout(this._setSelection,0,{Context:this,Target:n})}},TextEdtP._setSelection=function(n){n.Target.select(),PP.IsFF&&n.Target.setSelectionRange(0,n.Target.value.length),n.Context._denyBlur=!1},TextEdtP.dispose=function(){delete this._ImageList,PP.Ui.TextBox.base.dispose.apply(this,arguments)},PP.Ui.MaskEdit=function(){this._defineEvents(["Change"]),this._Mask="_*",this._RegExpContent=".*",PP.Ui.MaskEdit.base.constructor.apply(this,arguments),this._cssInput="PPMaskEditInput",this._cssInputNotValid="PPMaskEditInputNotValid",this._cssInputTd="PPMaskEditInputTd",this._cssInputTdNotValid="PPMaskEditInputTdNotValid",this._render(),this._lastValidValue=null},PP.initClass(PP.Ui.MaskEdit,PP.Ui.Control,"MaskEdit"),PP.Ui.MaskEdit.prototype._render=function(){var n="<table cellspacing='0' cellpadding='0' border='0' class='PPMaskEditTable'><tbody><tr><td><input type='text' value='_' /></td></tr></tbody></table>";this._initFromHTML(n),this._input=this._DomNode.getElementsByTagName("input")[0],this._inputTd=this._input.parentNode,this._input.className=this._cssInput,this._inputTd.className=this._cssInputTd,this._input.disabled=!this.getEnabled(),PP.Ui.MaskEdit.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},PP.Ui.MaskEdit.prototype._bindEvents=function(){this._isBind||(PP.Ui.MaskEdit.base._bindEvents.call(this),this._addEvents(this._input,{selectstart:this._onSelectStartInput,select:this._onSelectInput,paste:this._onPasteInput,dragstart:this._onDragStartInput,keyup:this._onKeyUpInput,keydown:this._onKeyDownInput,keypress:this._onKeyPressInput,blur:this._onBlurInput,focus:this._onFocusInput,mouseup:this._onMouseUpInput,mousedown:this._onMouseDownInput,contextmenu:this._onContextMenuInput,mousemove:this._onMouseMoveInput}))},PP.Ui.MaskEdit.prototype._unBindEvents=function(){PP.Ui.MaskEdit.base._unBindEvents.call(this),this._removeAllEvents(this._input)},PP.Ui.MaskEdit.prototype.getData=function(){var n=this._input;return n.Data||(n.Data={Focused:!1,CaretPosItem:"0",RenderCounter:0,EditorValue:this.getEditorValue()}),n.Data},PP.Ui.MaskEdit.prototype._checkObject=function(n){var t=this._input,h,c,e,r,o,s;if(!t.DataObject){if(n&&t.value=="")return!1;if(t.DataObject=new PP.Ui.MaskEditObject,t.DataObject.EditorNode=t,this._lastValidValue=t.value,this.getRegExpContent()==null)return;if(t.DataObject.RegExpContent=this.getRegExpContent(),this.getMask()==null)return;t.DataObject.Mask=this.getMask(),t.value&&t.value!=""||(t.value=t.DataObject.Mask.replace(/\*/g,"")),t.DataObject.Step=this.getStep(),h=t.DataObject.Mask,c=h.length,t.DataObject.SplittersArr=new Array(0),t.DataObject.MaskArr=new Array(0),t.DataObject.MaskFlex=new Array(0);var i="",u="",f=!1;for(e=0;e<c;e++)r=h.charAt(e),r=="_"||r=="*"?(u.length>0&&(t.DataObject.SplittersArr[t.DataObject.SplittersArr.length]=u,u=""),o=!1,r=="*"&&i.length>0&&i.charAt(i.length-1)=="_"?(o=!0,f=!0):r=="_"&&(i.length==0||i.charAt(i.length-1)=="_")&&(o=!0),o&&(i+=r)):((i.length>0||t.DataObject.MaskArr.length==0)&&(t.DataObject.MaskArr[t.DataObject.MaskArr.length]=i,t.DataObject.MaskFlex[t.DataObject.MaskFlex.length]=f,i="",f=!1),u+=r);u.length>0&&(t.DataObject.SplittersArr[t.DataObject.SplittersArr.length]=u,t.DataObject.MaskArr[t.DataObject.MaskArr.length]="",t.DataObject.MaskFlex[t.DataObject.MaskFlex.length]=!1),i.length>0&&(t.DataObject.MaskArr[t.DataObject.MaskArr.length]=i,t.DataObject.MaskFlex[t.DataObject.MaskFlex.length]=f),s=this.getData(),t.DataObject.getPartsValue(),s.EditorValue||(s.EditorValue=this.getEditorValue()),s.RenderCounter=0}return!0},PP.Ui.MaskEdit.prototype._beginRender=function(){var n=this.getData();n.RenderCounter==0&&(n.CaretPosItem=this._getCaretPosItem()),n.RenderCounter++,n.EditorValue||(n.EditorValue=this.getEditorValue())},PP.Ui.MaskEdit.prototype._endRender=function(n,t,i){var r=this.getData(),u,f;r.RenderCounter--,typeof n=="string"&&(r.EditorValue=n),r.RenderCounter<=0&&(r.RenderCounter=0,u=this.getEditorValue(),f=r.EditorValue+"",(u!=f||i)&&this._setEditorValue(r.EditorValue,i),this._setCaretPosItem(r.CaretPosItem))},PP.Ui.MaskEdit.prototype._movePageUp=function(n){for(var u=this.getData(),r=this._getCaretPos(),i=u.CaretPosItem,h=u.EditorValue,f=-1,c=0,l=h.length-1,e=-1,o=n.DataObject.SplittersArr,a=o.length,s,t=0;t<a;t++){if(e=h.indexOf(o[t],f+1),t==i)break;c=f+1,l=e-1,f=e+o[t].length-1}s=!0,r<=0?s=!1:(i>0&&i--,r=c),s&&(u.CaretPosItem=i,this._validate(!1),n.LastSelected=i,n.CaretPos=r,this._setCaretPos(r))},PP.Ui.MaskEdit.prototype._movePageDown=function(n){for(var h=this.getData(),r=this._getCaretPos(),t=h.CaretPosItem,u=h.EditorValue,c=0,l=u.length-1,f=n.DataObject.SplittersArr,e=f.length,o=-1,s=u.indexOf(f[0],o+1),a,i=0;i<e-1;i++)if(o=s+f[i].length-1,s=u.indexOf(f[i+1],o+1),i==t){c=o+1,l=s;break}e!=0&&t>=e-1&&(c=s+f[e-1].length,l=u.length-1),a=!0,r>=u.length?a=!1:t<e?(t++,r=c):r=l,a&&(h.CaretPosItem=t,this._validate(!1),n.LastSelected=t,n.CaretPos=r,this._setCaretPos(r))},PP.Ui.MaskEdit.prototype._moveLeft=function(n){for(var f=this.getData(),l=this._getCaretPos(),t=f.CaretPosItem,a=f.EditorValue,r=-1,e=0,o=-1,u=n.DataObject.SplittersArr,v=u.length,s,h,c,i=0;i<v;i++){if(s=a.indexOf(u[i],r+1),i==t){e=r+1,o=s-1;break}r=s+u[i].length-1}(v==0||r!=-1&&o==-1)&&(e=r+1,o=a.length-1),h=!0,c=1,this._beginRender(),l<=0?h=!1:l==e&&t>0&&(t--,c=u[t].length),h&&(f.CaretPosItem=t,this._validate(!1),n.LastSelected=t),this._endRender(!1,!1,-c)},PP.Ui.MaskEdit.prototype._moveRight=function(n){for(var e=this.getData(),l=this._getCaretPos(),t=e.CaretPosItem,o=e.EditorValue,r=-1,a=-1,u=-1,f=n.DataObject.SplittersArr,v=f.length,s,h,c,i=0;i<v;i++){if(s=o.indexOf(f[i],r+1),i==t){a=r+1,u=s-1;break}r=s+f[i].length-1}(v==0||r!=-1&&u==-1)&&(a=r+1,u=o.length-1),h=!0,c=1,this._beginRender(),l>=o.length?h=!1:l>u&&t<n.DataObject.SplittersArr.length&&(t++,c=f[t-1].length),h&&(e.CaretPosItem=t,this._validate(!1),n.LastSelected=t),this._endRender(!1,!1,c)},PP.Ui.MaskEdit.prototype._processDefaultKey=function(n,t){var l=this.getData(),y=n.keyCode?n.keyCode:n.which,u=this._getCaretPos(),s=l.CaretPosItem,f=l.EditorValue,i,c,v;if(u>=f.length&&!t.DataObject.MaskFlex[t.DataObject.MaskFlex.length-1])return!1;var r=-1,a=-1,e=-1,o=t.DataObject.SplittersArr,h=o.length;for(i=0;i<h;i++){if(c=f.indexOf(o[i],r+1),i==s){a=r+1,e=c-1;break}r=c+o[i].length-1}(h==0||r!=-1&&e==-1)&&(a=r+1,e=f.length-1),u>e&&(v=s<h?o[s].length:1,f.charCodeAt(u)==y&&this._setCaretPos(u+v))},PP.Ui.MaskEdit.prototype._onContextMenuInput=function(){return!1},PP.Ui.MaskEdit.prototype._onBlurInput=function(n,t){var i=t.Event.sourceElement,r=this.getData();return r.Focused=!1,this._checkObject(),i.FocusFromMouse=!1,this._validate(!0),!1},PP.Ui.MaskEdit.prototype._onDragStartInput=function(){return!1},PP.Ui.MaskEdit.prototype._onFocusInput=function(n,t){var r=t.Event,i=r.sourceElement,u;return this._checkObject(!1),u=this.getData(),u.Focused=!0,this._beginRender(),isNaN(i.LastSelected)||(u.CaretPosItem=i.LastSelected),i.FocusFromMouse||(isNaN(i.CaretPos)&&(i.CaretPos=0),this._setCaretPos(i.CaretPos)),this._endRender(),r.preventDefault?r.preventDefault():r.returnValue=!1,!1},PP.Ui.MaskEdit.prototype._onKeyDownInput=function(n,t){var f=!1,i=t.Event,r=i.sourceElement,e,u;if(this._checkObject(!1),e=this.getData(),u=i.keyCode?i.keyCode:i.which,!i.altKey)switch(u){case 9:f=!0;break;case 13:this._validate(!0);break;case 8:this._swapCharacter(r,null,!0,!0);break;case 46:this._delete();break;case 16:break;case 33:this._movePageUp(r);break;case 34:this._movePageDown(r);break;case 35:if(i.shiftKey)return;this._setCaretPos(e.EditorValue.length);break;case 36:if(i.shiftKey)return;this._setCaretPos(0);break;case 37:if(i.shiftKey)return;this._moveLeft(r);break;case 39:if(i.shiftKey)return;this._moveRight(r);break;default:if(i.shiftKey&&u==45||i.ctrlKey&&u==86){var o=this,s=this._input.value,h=this._getSelection();setTimeout(function(){o._paste(s,h)},10)}this._processDefaultKey(i,r),f=!0}f||i.preventDefault()},PP.Ui.MaskEdit.prototype._onKeyPressInput=function(n,t){var i=t.Event,u=i.keyCode?i.keyCode:i.which,f,r;switch(u){case 9:case 8:case 13:break;default:if(i.charCode===0||i.which===0||i.ctrlKey||i.shiftKey)return;f=String.fromCharCode(u),r=this._getSelection(),r.Start!=r.End&&this._setCaretPos(r.Start),this._swapCharacter(this._input,f)}i.preventDefault()},PP.Ui.MaskEdit.prototype._onKeyUpInput=function(n,t){var i=t.Event,r=i.keyCode?i.keyCode:i.which;return r!=9?!1:!0},PP.Ui.MaskEdit.prototype._onMouseDownInput=function(n,t){var i=t.Event.sourceElement;return this._checkObject(),i.FocusFromMouse=!0,document.all||(this._selectionLocked=!1,i.selectionEnd=i.selectionStart,this._selectionLocked=!0),!0},PP.Ui.MaskEdit.prototype._onMouseMoveInput=function(){return!0},PP.Ui.MaskEdit.prototype._onMouseUpInput=function(n,t){var i=t.Event.sourceElement,r;return i.disabled?!1:this._checkObject(!0)?(i.CaretPos=this._getCaretPos(),r=this._getCaretPosItem(),this.getData().CaretPosItem=r,this._checkObject(),!0):!1},PP.Ui.MaskEdit.prototype._onSelectInput=function(){return},PP.Ui.MaskEdit.prototype._onSelectStartInput=function(){return},PP.Ui.MaskEdit.prototype._onPasteInput=function(){return},PP.Ui.MaskEdit.prototype._paste=function(n,t){for(var a=this._input.value,f=this._input.DataObject,i=0,e="",y=a.length-n.length,o=a.substring(t.Start,t.End+y),s=0,r=0,v=0,l,h,c,u,i=0;i<f.DatePartValues.length;i++){for(l=f.DatePartValues[i],h=i<f.SplittersArr.length?f.SplittersArr[i]:"",c=0;c<l.length;c++)s>=t.Start&&r<o.length?(e+=o[r],r++):e+=l[c],s++;for(u=0;u<h.length;u++)e+=h[u],s>=t.Start&&r<o.length&&o[r]==h[u]&&r++,s++,v++}this._beginRender(),this._endRender(e,!1,v)},PP.Ui.MaskEdit.prototype._delete=function(){var n=this._getSelection(),t=this._input.value,i=0,u;n.Start==n.End&&(n.End=n.Start+1,n.End>t.length&&(n.End=t.length),i=1);var f=t.substring(0,n.Start),e=t.substring(n.End),o=this._input.DataObject,r=o.Mask.substring(n.Start,n.End);r.replace("*",""),u=[f,r,e].join(""),this._beginRender(),this._endRender(u,!1,i)},PP.Ui.MaskEdit.prototype._swapCharacter=function(n,t,i,r){var c,v,p;if(n.disabled)return!1;var l=this.getData(),u=this._getCaretPos(),f=this._getCaretPosItem();l.CaretPosItem=f;var s=n.DataObject.DatePartValues[f],h=l.EditorValue,a=-1,o=-1,e=-1,y=n.DataObject.SplittersArr,w=y.length;for(c=0;c<w;c++){if(v=h.indexOf(y[c],a+1),c==f){o=a+1,e=v-1;break}a=v+y[c].length-1}if((w==0||a!=-1&&e==-1)&&(o=a+1,e=h.length-1),i)u==o?r?f>0&&(this._beginRender(),f--,l.CaretPosItem=f,this._endRender(),this._setCaretPos(u-n.DataObject.SplittersArr[f].length),this._swapCharacter(n,t,i,r)):n.DataObject.MaskFlex[f]&&(this._beginRender(),s=e-o==0?"_":h.substr(o+1,e-o),this._setEditorSymbols(f,s),this._endRender()):(this._beginRender(),r?u-o==1?s=e-o==0?"_":(n.DataObject.MaskFlex[f]?"":"_")+h.substr(u,e-o):u-e>=1?s=e-o<0?"":e-o==0?"_":h.substr(o,e-o)+(n.DataObject.MaskFlex[f]?"":"_"):(s=h.substr(o,u-o-1)+(n.DataObject.MaskFlex[f]?"":"_"),u<=e&&(s+=h.substr(u,e-u+1))):n.DataObject.MaskFlex[f]&&e-u>=0&&(s=h.substr(o,u-o),u<e&&(s+=h.substr(u+1,e-u))),this._setEditorSymbols(f,s),this._endRender(),this._setCaretPos(u+(r?u-e>1?e-u:-1:0)));else if(u>e)if(n.DataObject.MaskFlex[f]&&u-e==1)this._beginRender(),s+=t,this._setEditorSymbols(f,s),this._endRender(),this._setCaretPos(u+1);else return f<n.DataObject.SplittersArr.length&&n.DataObject.MaskArr[f+1].length>0?(this._beginRender(),f++,l.CaretPosItem=f,this._endRender(),this._setCaretPos(e+1+n.DataObject.SplittersArr[f-1].length),this._swapCharacter(n,t)):!1;else u==o?s=n.DataObject.MaskFlex[f]&&h.charAt(o)!="_"?t+s:t+(e-o>=1?h.substr(o+1,e-o):""):n.DataObject.MaskFlex[f]&&h.charAt(u)!="_"?s=h.substr(o,u-o)+t+h.substr(u,e-u+1):(s=h.substr(o,u-o)+t,u<e&&(s+=h.substr(u+1,e-u))),p=1,this._beginRender(),this._setEditorSymbols(f,s),u==e&&f<n.DataObject.SplittersArr.length&&!n.DataObject.MaskFlex[f]&&(f++,l.CaretPosItem=f,p+=n.DataObject.SplittersArr[f-1].length),this._endRender(),this._setCaretPos(u+p);return!0},PP.Ui.MaskEdit.prototype._getCaretPos=function(){if(document.selection){var n=document.selection.createRange();return n.moveStart("character",-this.getData().EditorValue.length),(n.text+"").length}try{return this._input.selectionEnd}catch(t){if(t.name=="NS_ERROR_FAILURE")return 0;throw t;}return 0},PP.Ui.MaskEdit.prototype._setCaretPos=function(n){var t=this._input,f=this.getData(),u=f.EditorValue.length,i,r;t.setSelectionRange&&navigator.userAgent.indexOf("Opera/")>-1?t.setSelectionRange(n,n):t.createTextRange?(i=t.createTextRange(),i.moveStart("character",-u),i.moveEnd("character",-u),i.moveEnd("character",n),i.collapse(!1),i.select()):(this._selectionLocked=!1,t.selectionStart=n,t.selectionEnd=t.selectionStart,this._selectionLocked=!0),r=this._getCaretPosItem(),this.getData().CaretPosItem=r,this._setCaretPosItem(r)},PP.Ui.MaskEdit.prototype._getSelection=function(){var n=null,t=null;if(document.selection){var i=document.selection.createRange(),u=(i.text+"").length,r=this._input.value.length,f=i.moveStart("character",r);n=r-f,t=n+u}else try{n=this._input.selectionStart,t=this._input.selectionEnd}catch(e){if(e.name=="NS_ERROR_FAILURE")n=0,t=0;else throw e;}return{Start:n,End:t}},PP.Ui.MaskEdit.prototype._getCaretPosItem=function(){for(var t=this._input,f=this._getCaretPos(),e=this.getData().EditorValue,u=-1,i=0,r,n=0;n<t.DataObject.SplittersArr.length;n++){if(r=e.indexOf(t.DataObject.SplittersArr[n],u+1),f<=r+t.DataObject.SplittersArr[n].length-1){i=n;break}i=n+1,u=r+t.DataObject.SplittersArr[n].length-1}return i},PP.Ui.MaskEdit.prototype._setCaretPosItem=function(n){var f=this._input,e,r,c=this.getData(),t,i,u,s,o,h;if(c.Focused){if(document.selection){for(f.focus(),u=c.EditorValue,o=-u.length,r=-u.length,i=-1,h=f.DataObject.SplittersArr,s=h.length,t=0;t<s;t++){if(e=u.indexOf(h[t],i+1),t==n){t>0?(o=i+1,r=e-o):r=e;break}i=e+h[t].length-1}(s==0||i!=-1&&r==-u.length)&&(o=i+1,r=u.length-o)}else{for(f.focus(),u=c.EditorValue,o=0,r=0,i=-1,t=0;t<f.DataObject.SplittersArr.length;t++){if(e=u.indexOf(f.DataObject.SplittersArr[t],i+1),t==n){t>0?(o=i+1,r=e):r=e;break}i=e+f.DataObject.SplittersArr[t].length-1}(s==0||i!=-1&&r==0)&&(o=i+1,r=u.length)}f.LastSelected=n,f.CaretPos=this._getCaretPos()}},PP.Ui.MaskEdit.prototype._selectNumber=function(){this._beginRender();var n=this.getData().CaretPosItem;return this._endRender(),n},PP.Ui.MaskEdit.prototype._setStartPos=function(){this._beginRender();var t=this.getData(),n="0";return t.CaretPosItem=n,this._endRender(),n},PP.Ui.MaskEdit.prototype._setEditorSymbols=function(n,t,i){var r=this._input.DataObject,u,f,e;this._beginRender(),u=this.getData(),f=0,i||(f=u.CaretPosItem),r.getPartsValue(),r.DatePartValues[n]=t,r.DatePartLengths[n]=t.length,e=r.getValue(),i||(u.CaretPosItem=f),this._endRender(e)},PP.Ui.MaskEdit.prototype._validate=function(n){var i,s,h;n=n==!0,n&&this._beginRender();var u=this.getData(),c=u.CaretPosItem,r=this._input.DataObject,f=!1;r.getPartsValue();var e=r.DatePartValues,o=e.length,l=r.SplittersArr,t="";for(i=0;i<o;i++)s=e[i]+"",t=t+s,i<o-1&&(t=t+l[i]);return h=new RegExp(r.RegExpContent),h.test(t)?(this.applyValidCSS(),this._lastValidValue=t,f=!0):this._lastValidValue&&n?t=this._lastValidValue:this.applyNotValidCSS(),n&&(u.RenderCounter==0&&(u.CaretPosItem=c),this._endRender(t),f=!0),f},PP.Ui.MaskEdit.prototype.applyValidCSS=function(){this._input.className!=this._cssInput&&(this._input.className=this._cssInput),this._inputTd.className!=this._cssInputTd&&(this._inputTd.className=this._cssInputTd)},PP.Ui.MaskEdit.prototype.applyNotValidCSS=function(){var n=this._cssInput+" "+this._cssInputNotValid,t=this._cssInputTd+" "+this._cssInputTdNotValid;this._input.className!=n&&(this._input.className=n),this._inputTd.className!=t&&(this._inputTd.className=t)},PP.Ui.MaskEdit.prototype._raiseChangeEvent=function(n){this.Change.fire(this,n)},PP.Ui.MaskEdit.prototype.setFocus=function(){this._input.focus()},PP.Ui.MaskEdit.prototype._checkReg=function(n){var t=new RegExp(this.RegExpContent);return t.test(n)},PP.Ui.MaskEdit.prototype.setEnabled=function(n){PP.Ui.MaskEdit.base.setEnabled.call(this,n),this._input&&(this._input.disabled=n!=!0)},PP.Ui.MaskEdit.prototype.getValue=function(){return this.getLastValidValue()},PP.Ui.MaskEdit.prototype.setValue=function(n,t){if(t=t==!0,this._checkReg(n)&&(this._input.Data=null,this._lastValidValue=n,this._input.value=n,this._checkObject(),this._validate(!1),!t)){var i=new PP.EventArgs;i.OldValue=this._lastValidValue,i.NewValue=n,i.OldValue!=i.NewValue&&this._raiseChangeEvent(i)}},PP.Ui.MaskEdit.prototype.getEditorValue=function(){var t=this._input,n;return n=t.value+"",n==""&&(n=this.getMask().replace(/\*/g,"")+"",t.value=n),n},PP.Ui.MaskEdit.prototype._setEditorValue=function(n,t){var r=this._input,u=this._getCaretPos(),i=new PP.EventArgs;i.OldValue=this._lastValidValue,r.value=n,this._setCaretPos(u+(t?t:0)),this._validate(!1)&&(i.NewValue=n,i.OldValue!=i.NewValue&&this._raiseChangeEvent(i))},PP.Ui.MaskEdit.prototype.getLastValidValue=function(){return this._lastValidValue},PP.Ui.MaskEdit.prototype.getRegExpContent=function(){return this._RegExpContent},PP.Ui.MaskEdit.prototype.setRegExpContent=function(n){this._RegExpContent!=n&&(this._RegExpContent=n,this._input.DataObject=null,this._input.Data=null,this._checkObject(),this._validate(!1))},PP.Ui.MaskEdit.prototype.getMask=function(){return this._Mask},PP.Ui.MaskEdit.prototype.setMask=function(n){this._Mask!=n&&(this._Mask=n,this._input.value=this._Mask.replace(/\*/g,"")+"",this._input.DataObject=null,this._input.Data=null,this._checkObject(),this._validate(!1))},PP.Ui.MaskEdit.prototype.getStep=function(){var n=parseInt(this._input.getAttribute("step"));return isNaN(n)&&(n=1),n},PP.Ui.MaskEdit.prototype.setStep=function(n){this._input.setAttribute("step",n.toString())},PP.Ui.MaskEdit.prototype.dispose=function(){this.isLive()&&(this._input.DataObject=null,this._input.Data=null,PP.Ui.MaskEdit.base.dispose.call(this))},PP.Ui.MaskEditObject=function(){this._changeCounter=0},PP.Ui.MaskEditObject.prototype._beginChange=function(){this._changeCounter++},PP.Ui.MaskEditObject.prototype._endChange=function(){this._changeCounter--,this._changeCounter<0&&(this._changeCounter=0)},PP.Ui.MaskEditObject.prototype.getValue=function(){for(var t="",i=this.DatePartValues.length,r,n=0;n<i;n++)r=this.DatePartValues[n],t=t+r,n<i-1&&(t=t+this.SplittersArr[n]);return t},PP.Ui.MaskEditObject.prototype.getStringValue=function(n,t){var r=this.DatePartLengths[n],i=t+"";if(!this.MaskFlex[n])while(i.length<r)i="0"+i;return i.length>r&&(this.DatePartLengths[n]=i.length),i},PP.Ui.MaskEditObject.prototype.getCurrentPart=function(n){for(var e=this.EditorNode.value,i=0,r=0,u=-1,f,o,t=0;t<this.SplittersArr.length;t++){if(f=e.indexOf(this.SplittersArr[t],u+1),t==n){t>0?(i=u+1,r=f-i):r=f;break}u=f+this.SplittersArr[t].length-1}return(this.SplittersArr.length==0||u!=-1&&r==0)&&(i=u+1,r=e.length-i),o=e.substr(i,r)},PP.Ui.MaskEditObject.prototype.getPartsValue=function(){var t,f;this.DatePartValues=new Array(this.SplittersArr.length+1),this.DatePartLengths=new Array(this.SplittersArr.length+1);var r=this.EditorNode.value,i=0,n=0,u=-1,e=this.SplittersArr.length;for(t=0;t<e;t++)f=r.indexOf(this.SplittersArr[t],u+1),t>0?(i=u+1,n=f-i):n=f,this.DatePartValues[t]=r.substr(i,n),this.DatePartLengths[t]=n,u=f+this.SplittersArr[t].length-1;this.SplittersArr.length==0?n=r.length:(i=u+1,n=r.length-i),this.DatePartValues[e]=r.substr(i,n),this.DatePartLengths[e]=n},PP.Ui.Combo=function(n){var i=!0,t;n&&n.DropPanel&&(n.DropPanel.Template?i=!1:n.DropPanel.Template=PP.Templates.DropPanel),t=n&&n.DropPanel?n.DropPanel:{MinDropDownHeight:0,Template:PP.Templates.DropPanel},t.FocusOnOpen=!1,t.CloseOnDocumentMouseDown=!0,this._DropPanel=new PP.Ui.DropPanel(t),n&&delete n.DropPanel,this._DropPanel.addClass("PPComboDropPanel"),this._IconImageList=null,this._defineEvents(["TextChanged","IconClick"]),PP.Ui.Combo.base.constructor.apply(this,arguments),this._IsDefaultTemplate=i,this._render(),this._Height&&this.setHeight(this._Height),this.setWidth(this.getWidth()),this._dropPanelSizeSetted=!1},PP.initClass(PP.Ui.Combo,PP.Ui.Control,"Combo"),comboP=PP.Ui.Combo.prototype,comboP._EnableEdit=!1,comboP._OpenOnKeyDown=!0,comboP._Template=PP.Templates.Radius2,comboP._UseMask=!1,comboP._IsDropHasCombosWidth=!0,PP.Object.defineProps(PP.Ui.Combo,["IsDropHasCombosWidth"],!0),comboP._render=function(){var t=this._Template,i=this._Template,n,r;t=t.replace("{Content}","<div><div class='PPArrow'></div></div>"),i=i.replace("{Content}","<div><div class='PPIcon'></div></div>"),this._initFromHTML("<div class='PPCombo'><table class='PPComboTable' cellspacing='0' cellpadding='0' border='0'><tbody><tr><td class='PPContentCell' tabIndex='0'><div class='PPControl'></div><div class='PPContent'></div></td><td class='PPIconCell'>"+i+"</td><td class='PPButtonCell'>"+t+"</td></tr></tbody></table></div>",!0),PP.IsIE&&this.addClass("IE"),PP.IsOpera&&this.addClass("O"),n=this._DomNode,this._ControlDomNode=PP.querySelector(n,".PPControl"),this._ContentCell=PP.querySelector(n,".PPContentCell"),this._ButtonCell=PP.querySelector(n,".PPButtonCell"),this._ContentDomNode=PP.querySelector(n,".PPContent"),this._IconCell=PP.querySelector(n,".PPIconCell"),this._Icon=PP.querySelector(n,".PPIcon"),r={Content:this._Content,ParentNode:this._ControlDomNode},this._MaskEditControl=new PP.Ui.MaskEdit(r),this._EditControl=new PP.Ui.TextBox(r),this._Content&&(this._ContentDomNode.innerHTML=this._Content),this._EnableEdit?(this._UseMask?this._EditControl.hide():this._MaskEditControl.hide(),PP.hide(this._ContentDomNode)):(this._EditControl.hide(),this._MaskEditControl.hide()),PP.Ui.Combo.base._render.call(this),this._iconUpdate(),this._ParentNode&&this.addToNode(this._ParentNode)},comboP._bindEvents=function(){this._isBind||(PP.Ui.Combo.base._bindEvents.apply(this,arguments),this._addEvent(this._ContentCell,"mousedown",this._onContentCellMouseDown),this._addEvent(this._ButtonCell,"mousedown",this._onButtonMouseDown),this._addEvent(this._IconCell,"mouseup",this._onIconMouseUp),this._addEvent(this._IconCell,"mousedown",this._onIconMouseDown),this._DropPanel.Closed.add(this._onDropPanelClosed,this))},comboP._unBindEvents=function(){PP.Ui.Combo.base._unBindEvents.apply(this,arguments),this._removeAllEvents(this._ContentCell),this._removeAllEvents(this._ButtonCell),this._removeAllEvents(this._IconCell),this._DropPanel.Closed.remove(this._onDropPanelClosed,this)},comboP._onContentCellMouseDown=function(n,t){this._EnableEdit||t.Event.which!==PP.MouseButton.Left||PP.setTimeout(this._showDropPanelTimeout,0,{Self:this,DoNotOpen:this._DropPanel.getDroppedDown()})},comboP._onButtonMouseDown=function(n,t){t.Event.which===PP.MouseButton.Left&&PP.setTimeout(this._showDropPanelTimeout,0,{Self:this,DoNotOpen:this._DropPanel.getDroppedDown()})},comboP._showDropPanelTimeout=function(n){n.DoNotOpen||n.Self.showDropPanel()},comboP._onDocumentMouseDown=function(n,t){var i=this._DropPanel.getDomNode(),r=PP.calculateMouseCoords(t.Event),u=parseInt(i.style.left),f=parseInt(i.style.top),e=i.offsetWidth,o=i.offsetHeight;r.X>=u&&r.X<=u+e&&r.Y>=f&&r.Y<=f+o||this._DropPanel.hide()},comboP._onDropPanelClosed=function(){this._setButtonPressed(!1),this._removeEvent(document.documentElement,"mousedown",this._onDocumentMouseDown)},comboP._setButtonPressed=function(n){this._ButtonCell.className=n?"PPButtonCellPressed":"PPButtonCell"},comboP._iconUpdate=function(){this._IconImageList?(this._IconCell.style.width=this._checkValue(this._IconImageList.getIconWidth()+2)+"px",this._IconCell.style.display="",this._Icon.style.backgroundImage="url("+this._IconImageList.getSource()+")"):this._IconCell.style.display="none"},comboP._onIconMouseUp=function(){this.IconClick.fire(this,{})},comboP._onIconMouseDown=function(n,t){var i=this._DropPanel.getDroppedDown();return this._EnableEdit||t.Event.which!==PP.MouseButton.Left||PP.setTimeout(this._showDropPanelTimeout,0,{Self:this,DoNotOpen:i}),i?!1:void 0},comboP.setOpenOnKeyDown=function(n){return PP.isBoolean(n)&&n!=this._OpenOnKeyDown&&(this._OpenOnKeyDown=n),this},comboP.getOpenOnKeyDown=function(){return this._OpenOnKeyDown},comboP.getContent=function(){return this._EnableEdit?this._UseMask?this._MaskEditControl.getContent():this._EditControl.getContent():this._Content},comboP.setContent=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n!=this._Content&&(PP.Ui.Combo.base.setContent.apply(this,arguments),this._ContentDomNode.innerHTML=this._Content,this._EditControl.setContent(this._Content,t),this._MaskEditControl.setContent(this._Content),t&&this.TextChanged.fire(this,{})),this},comboP.getValue=function(){return this._EnableEdit?this._UseMask?this._MaskEditControl.getContent():this._EditControl.getContent():PP.isDefined(this._ContentDomNode.innerText)?this._ContentDomNode.innerText:this._ContentDomNode.textContent},comboP.setValue=function(n,t){return this.setContent(n,t)},comboP.getDropPanel=function(){return this._DropPanel},comboP.setHeight=function(){if(PP.Ui.Combo.base.setHeight.apply(this,arguments),this._ButtonCell&&this._ButtonCell.firstChild){var i=this._checkValue(parseInt(this.getCssStyle(this._ButtonCell,"padding-top")))+this._checkValue(parseInt(this.getCssStyle(this._ButtonCell,"padding-bottom"))),t=this._checkValue(parseInt(this.getCssStyle(this._DomNode.firstChild,"border-top-width")))+this._checkValue(parseInt(this.getCssStyle(this._DomNode.firstChild,"border-bottom-width")));i+t!==0&&(PP.IsIE&&PP.IEVer<9&&t===0&&(t+=2),this._ButtonCell.firstChild.style.height=this._checkValue(this._Height-i-t)+"px")}},comboP.setWidth=function(n){PP.Ui.Combo.base.setWidth.apply(this,arguments),this._IsDropHasCombosWidth&&(n=="auto"||n.toString().indexOf("%")>-1?this._DropPanel.setWidth(n):this._DropPanel.setWidth(this._IsDefaultTemplate?parseInt(n)+2:parseInt(n))),this._dropPanelSizeSetted=!0},comboP.setEnabled=function(n,t){return PP.Ui.Combo.base.setEnabled.call(this,n,t),this._EditControl.setEnabled(n),this._MaskEditControl.setEnabled(n),this},comboP.setEnableEdit=function(n){return n!=this._EnableEdit&&(this._EnableEdit=n,this._EnableEdit?this._UseMask?(this._MaskEditControl.show(),this._EditControl.hide(),PP.hide(this._ContentDomNode)):(this._MaskEditControl.hide(),this._EditControl.show(),PP.hide(this._ContentDomNode)):(this._MaskEditControl.hide(),this._EditControl.hide(),PP.show(this._ContentDomNode))),this},comboP.getEnableEdit=function(){return this._EnableEdit},comboP.setUseMask=function(n){return n!=this._UseMask&&(this._UseMask=n,this._EnableEdit?this._UseMask?(this._MaskEditControl.show(),this._EditControl.hide(),PP.hide(this._ContentDomNode)):(this._MaskEditControl.hide(),this._EditControl.show(),PP.hide(this._ContentDomNode)):(this._MaskEditControl.hide(),this._EditControl.hide(),PP.show(this._ContentDomNode))),this},comboP.getUseMask=function(){return this._UseMask},comboP.getMaskEditControl=function(){return this._MaskEditControl},comboP.getEditControl=function(){return this._EditControl},comboP.setIsRTL=function(n){return PP.Ui.Combo.base.setIsRTL.apply(this,arguments),this._DropPanel.setIsRTL(n),this._MaskEditControl.setIsRTL(n),this._EditControl.setIsRTL(n),this},comboP.showDropPanel=function(){var o,n,r,i,t,u,e,f;if(this._Enabled){if(this._Width=this._DomNode.offsetWidth,this._DomNode.style.width.indexOf("%")>-1?(this._IsDropHasCombosWidth&&(o=Math.round(this._Width/100*parseInt(this._DomNode.style.width)),this._DropPanel.setWidth(this._IsDefaultTemplate?o+2:o)),this._dropPanelSizeSetted=!0):this._DomNode.style.width!=""||this._dropPanelSizeSetted||(this._IsDropHasCombosWidth&&this._DropPanel.setWidth(this._IsDefaultTemplate?this._Width+2:this._Width),this._dropPanelSizeSetted=!0),this._setButtonPressed(!0),this._DropPanel.getDroppedDown())return this._DropPanel.hide(),!1;this._DropPanel.setEnableResizeTop(!1),this._DropPanel.setEnableResizeBottom(!0),this.getIsRTL()?(this._DropPanel.setEnableResizeRight(!1),this._DropPanel.setEnableResizeLeft(!0)):(this._DropPanel.setEnableResizeLeft(!1),this._DropPanel.setEnableResizeRight(!0)),n=this._DropPanel.isVisibleArea(0,0),r=PP.calculateOffset(this._DomNode),this._Height=this._DomNode.offsetHeight,i=r.Y+this._Height+1,t=0,t=this._IsRTL?this._IsDefaultTemplate?r.X+this._Width-n.Width+1:r.X+this._Width-n.Width:this._IsDefaultTemplate?r.X-1:r.X,n=this._DropPanel.isVisibleArea(i,t),u=null,n.VisibleByHeight||(e=r.Y-n.Height,e>-1?(u=this._DropPanel.isVisibleArea(e,t),u.VisibleByHeight&&(i=e,this._DropPanel.setEnableResizeTop(!0),this._DropPanel.setEnableResizeBottom(!1))):document.documentElement.clientHeight-n.Height>-1?(i=document.documentElement.clientHeight-n.Height,this._DropPanel.setEnableResizeTop(!0),this._DropPanel.setEnableResizeBottom(!1)):i=0),n.VisibleByWidth||(this._IsRTL?(f=this._IsDefaultTemplate?t+n.Width-this._Width-2:t+n.Width-this._Width,u=this._DropPanel.isVisibleArea(i,f),u.VisibleByWidth&&(t=f,this._DropPanel.setEnableResizeLeft(!1),this._DropPanel.setEnableResizeRight(!0))):(f=this._IsDefaultTemplate?t+this._Width-n.Width+2:t+this._Width-n.Width,u=this._DropPanel.isVisibleArea(i,f),u.VisibleByWidth&&(t=f,this._DropPanel.setEnableResizeLeft(!0),this._DropPanel.setEnableResizeRight(!1)))),this._DropPanel.show(t,i,!0),this._DropPanel.getCloseOnFrameMouseDown()&&this._addEvent(document.documentElement,"mousedown",this._onDocumentMouseDown)}return this},comboP.getIconImageList=function(){return this._IconImageList},comboP.setIconImageList=function(n){this._IconImageList=n,this._iconUpdate()},comboP.dispose=function(){this._removeEvent(document.documentElement,"mousedown",this._onDocumentMouseDown),PP.Ui.Combo.base.dispose.apply(this,arguments)},comboP.applyValidCSS=function(){this._MaskEditControl.applyValidCSS(),this._EditControl.applyValidCSS()},comboP.applyNotValidCSS=function(){this._MaskEditControl.applyNotValidCSS(),this._EditControl.applyNotValidCSS()},comboP=null,PP.Ui.SpinEdit=function(){this._defineEvents(["SpinUp","SpinDown"]),this._ShowButtons=!0,this._Items=[],this._AllowSpin=!0,PP.Ui.SpinEdit.base.constructor.apply(this,arguments),this._cssInput="PPTextBox PP.SpinEdit",this._cssInputTd="PPTextBoxTd",this._cssInputNotValid="PPTextBoxNotValid",this._cssInputTdNotValid="PPTextBoxTdNotValid",this._cssDomNode="PPSpinTable",this._cssButtonUp="PPSpinEditButtonUp",this._cssButtonUpPressed="PPSpinEditButtonUpPressed",this._cssButtonUpDisabled="PPSpinEditButtonUpDisabled",this._cssButtonDown="PPSpinEditButtonDown",this._cssButtonDownPressed="PPSpinEditButtonDownPressed",this._cssButtonDownDisabled="PPSpinEditButtonDownDisabled",this._cssArrowUp="PPSpinEditArrowUp",this._cssArrowUpIE8="PPSpinEditArrowUpIE8",this._xTimer=null,this._upDownPressed=!1,this._currentIndex=-1,this._render()},PP.initClass(PP.Ui.SpinEdit,PP.Ui.TextBox,"SpinEdit"),SpinEdtP=PP.Ui.SpinEdit.prototype,SpinEdtP._render=function(){var n,t;PP.Ui.SpinEdit.base._render.call(this),n="<table><tbody><tr><td class='PPSpinEditButtonTd PPSpinEditButtonUpTd'><span class='{ButtonUpCssClass}' tmplid='buttonUp'><div class='{ArrowUpCssClass}'></div></span></td></tr><tr><td class='PPSpinEditButtonTdSplitter'></td></tr><tr><td class='PPSpinEditButtonTd PPSpinEditButtonDownTd'><span class='{ButtonDownCssClass}' tmplid='buttonDown'><div class='PPSpinEditArrowDown'></div></span></td></tr></tbody></table>",PP.removeClass(this._DomNode,"PPTextTable"),PP.addClass(this._DomNode,"PPSpinEdit"),PP.addClass(this._DomNode.firstChild,this._cssDomNode),n=n.replace("{ButtonUpCssClass}",this._cssButtonUp),n=n.replace("{ButtonDownCssClass}",this._cssButtonDown),t=this._cssArrowUp+(PP.IEVer==8?" "+this._cssArrowUpIE8:""),n=n.replace("{ArrowUpCssClass}",t),this._rightCustomNode.innerHTML=n,this._rightCustomNode.className="Custom SpinButtons",this.setShowButtons(this._ShowButtons,!0),this._buttonUp=PP.querySelector(this._rightCustomNode,"."+this._cssButtonUp),this._buttonDown=PP.querySelector(this._rightCustomNode,"."+this._cssButtonDown),this._buttonUp&&this._addEvents(this._buttonUp,{mousedown:this._upButtonMouseDown,mouseup:this._upButtonMouseUp,mouseout:this._upButtonMouseOut}),this._buttonDown&&this._addEvents(this._buttonDown,{mousedown:this._downButtonMouseDown,mouseup:this._downButtonMouseUp,mouseout:this._downButtonMouseOut})},SpinEdtP._bindEvents=function(){PP.Ui.SpinEdit.base._bindEvents.call(this),this._input.addEventListener&&this._addEvents(this._input,{DOMMouseScroll:this._onMouseWheelInput,mousewheel:this._onMouseWheelInput})},SpinEdtP._onKeyDownInput=function(n,t){var r,u,i;if(PP.Ui.SpinEdit.base._onKeyDownInput.apply(this,arguments),!this._EnableEdit)return!1;if(r=t.Event,u=r.keyCode?r.keyCode:r.which,this._AllowSpin){i=new PP.SpinEventArgs;switch(u){case 38:i.IsSpinUp=!0,this._raiseSpinEvent(i),t.Event.preventDefault();break;case 40:i.IsSpinUp=!1,this._raiseSpinEvent(i),t.Event.preventDefault()}}},SpinEdtP._onMouseWheelInput=function(n,t){var i,r,u;return this._EnableEdit?(i=t.Event,r=i.sourceElement,r.nodeType==3&&(r=r.parentNode),r.disabled)?!1:this._focused?(u=i.wheelDelta?i.wheelDelta<0:i.detail>0,this._xCrease(!u),!1):!0:!1},SpinEdtP._upButtonMouseDown=function(n,t){var i=t.Event;if(this._Enabled&&this._EnableEdit&&i.which==1)return this._addEvent(document,"mouseup",this._upButtonMouseUp),this._buttonUp.className+=" "+this._cssButtonUpPressed,this._upDown(i,this._buttonUp,!0)},SpinEdtP._upButtonMouseUp=function(n,t){return this._removeEvent(document,"mouseup",this._upButtonMouseUp),this._Enabled&&this._EnableEdit?(this._buttonUp.className=this._cssButtonUp,this._upDownRelease(t.Event,this._buttonUp)):void 0},SpinEdtP._upButtonMouseOut=function(n,t){this._upButtonMouseUp(n,t)},SpinEdtP._downButtonMouseDown=function(n,t){var i=t.Event;if(this._Enabled&&this._EnableEdit&&i.which==1)return this._addEvent(document,"mouseup",this._downButtonMouseUp),this._buttonDown.className+=" "+this._cssButtonDownPressed,this._upDown(i,this._buttonDown,!1)},SpinEdtP._downButtonMouseUp=function(n,t){return this._removeEvent(document,"mouseup",this._downButtonMouseUp),this._Enabled&&this._EnableEdit?(this._buttonDown.className=this._cssButtonDown,this._upDownRelease(t.Event,this._buttonDown)):void 0},SpinEdtP._downButtonMouseOut=function(n,t){this._downButtonMouseUp(n,t)},SpinEdtP._xCrease=function(n){var t=new PP.SpinEventArgs,i;t.IsSpinUp=n,this._raiseSpinEvent(t),this._setCaretPos(this._caretPos),i=this,setTimeout(function(){i.setFocus()},10)},SpinEdtP._raiseSpinEvent=function(n){if(!(n instanceof PP.SpinEventArgs))throw new Error("incorrect EventArgs type");this._Items.length!==0&&(n.IsSpinUp?this._currentIndex!==this._Items.length-1?this._currentIndex+=1:this._currentIndex=0:this._currentIndex>0?this._currentIndex-=1:this._currentIndex=this._Items.length-1,this.setContent(this._Items[this._currentIndex])),n.IsSpinUp?this.SpinUp.fire(this,n):this.SpinDown.fire(this,n)},SpinEdtP._upDown=function(n,t,i){if(this._input.disabled)return!1;var r=this;return this._focused||(this._focusFromOut=!0,setTimeout(function(){r.setFocus()},10)),this._focusFromOut=!1,this._upDownPressed=!0,this._xCrease(i),this._xTimer=setTimeout(function(){r._checkXCrease(i?!0:!1)},500),!1},SpinEdtP._upDownRelease=function(){return clearTimeout(this._xTimer),this._upDownPressed=!1,!0},SpinEdtP._checkXCrease=function(n){clearTimeout(this._xTimer),this._xCrease(n);var t=this;this._xTimer=setTimeout(function(){t._checkXCrease(n?!0:!1)},100)},SpinEdtP.setIsWatermark=SpinEdtP.getIsWatermark=SpinEdtP.setWatermarkText=SpinEdtP.getWatermarkText=SpinEdtP.getImageWidth=SpinEdtP.getImageHeight=SpinEdtP.getImageMargin=SpinEdtP.setImageEnabledAlways=SpinEdtP.getImageEnabledAlways=SpinEdtP.setImageList=SpinEdtP.getImageList=SpinEdtP.setRowImgIndex=SpinEdtP.getRowImgIndex=SpinEdtP.setColImgIndex=SpinEdtP.getColImgIndex=SpinEdtP.setImageUrl=SpinEdtP.getImageUrl=SpinEdtP.setImageUrl=SpinEdtP.getImageAlign=null,SpinEdtP.setItems=function(n){if(!Array.isArray(n))return!1;this._Items=[];for(var t=0;t<n.length;t++)this._Items.push(n[t].toString())},SpinEdtP.addItem=function(n,t){t===undefined&&(t=-1),PP.insertToArr(this._Items,n.toString(),t)},SpinEdtP.removeItem=function(n){n!==undefined?n>-1&&n<this._Items.length?this._Items.splice(n,1):this._Items.splice(this._Items.length-1,1):this._Items.splice(this._Items.length-1,1)},SpinEdtP.getItems=function(n){return n===undefined?this._Items:this._Items[n]},SpinEdtP.setShowButtons=function(n,t){n=!!n,(this._ShowButtons!==n||t)&&(this._ShowButtons=n,n?PP.show(this._rightCustomNode):PP.hide(this._rightCustomNode))},SpinEdtP.getShowButtons=function(){return this._ShowButtons},PP.SpinEventArgs=function(){this.IsSpinUp=!1,this.Cancel=!1,this.OldValue="",this.NewValue="",PP.SpinEventArgs.base.constructor.apply(this,arguments)},PP.initClass(PP.SpinEventArgs,PP.EventArgs,"SpinEventArgs"),SpinEdtP=null,(PP.Ui.SpinEdit.SpinDirection=function(){var n=PP.Ui.SpinEdit.SpinDirection;n.Up="Up",n.Down="Down",PP.initEnum(n,"PP.Ui.SpinEdit.SpinDirection")})(),PP.Ui.MonthCalendar=function(){if(this._MinDate=new Date(1e3,0,1,0,0,0,0),this._MaxDate=new Date(9999,11,31,23,59,0,0),this._PreviousMonthName="Previous month",this._NextMonthName="Next month",this._PreviousYearName="Previous year",this._NextYearName="Next year",this._NextHalfYearName="Next half-year",this._PreviousHalfYearName="Previous half-year",this._Mode=PP.Ui.MonthCalendar.Mode.Days,this._ShowDaysButton=!0,this._ShowWeeksButton=!0,this._ShowMonthsButton=!0,this._ShowQuartersButton=!0,this._ShowHalfYearsButton=!0,this._ShowNowButton=!0,this._ShowTime=!0,this._Culture=null,this._CurrentDate=null,this._NeedRenderOnCreate=!0,this._defineEvents(["Change","AfterModeChanged","SelectDay","SelectWeek","SelectMonth","SelectQuarter","SelectHalfYear","ClickNow","AfterRender","ModeChanged","MaxDateChanged","MinDateChanged","CurrentDateChanged","ShowTimeChanged","ShowNowButtonChanged","ShowHalfYearsButtonChanged","ShowQuartersButtonChanged","ShowMonthsButtonChanged","ShowWeeksButtonChanged","ShowDaysButtonChanged"]),PP.Ui.MonthCalendar.base.constructor.apply(this,arguments),this._monthButtons=[],this._quarterButtons=[],this._hyButtons=[],this._isBlockRender=!1,this._prevMonthButton=null,this._prevYearButton=null,this._nextYearButton=null,this._nextMonthButton=null,this._daysTable=null,this._toolBarsBlock=null,this._modeToolBars=[],this._modeContainer=null,this._daysModeContainer=null,this._weeksModeContainer=null,this._weeksTable=null,this._nextHalfYearButton=null,this._prevHalfYearButton=null,this._monthsModeContainer=null,this._monthsPrevButton=null,this._monthsNextButton=null,this._monthsLists=[null,null],this._lastPressedMonthRibbon=null,this._lastPressedQuarterRibbon=null,this._lastPressedHalfYearRibbon=null,this._quartersList=null,this._halfYearsList=null,this._changeCounter=0,this._daysButton=null,this._weeksButton=null,this._monthsButton=null,this._quartersButton=null,this._halfYearsButton=null,this._yearsButton=null,this._selectedModeButton=null,this._separator=null,this._separatorLine=null,this._nowButtonBlock=null,this._nowButton=null,this._timeBlock=null,this._hoursLabel=null,this._hoursEdit=null,this._minutesLabel=null,this._minutesEdit=null,this._btnsArr=[],this._daysCellArr=[],this._weeksCellArr=[],this._ribbonsArr=[],this._isBind=!1,this._activeDayCell=null,this._activeWeekCell=null,this._cssMainDiv="PPMonthCalendarDiv",this._cssMainDivDisabled="PPMonthCalendarDivDisabled",this._cssTitleCell="PPMCTitleCell",this._cssDaysTable="PPMCDaysTable",this._cssMainTitleDiv="PPMCMainTitleDiv",this._cssTitleDiv="PPMCTitleDiv",this._cssTitleButton="PPMCTitleButton",this._cssDaysPrevMonth="prevmonth",this._cssDaysPrevYear="prevyear",this._cssDaysTitleCaption="PPDaysTitleCaption",this._cssDaysNextYear="nextyear",this._cssDaysNextMonth="nextmonth",this._cssArrow="Arrow",this._cssArrowLeft="Left",this._cssArrowRight="Right",this._cssArrowLLeft="LLeft",this._cssArrowRRight="RRight",this._cssDayHeader="dayheader",this._cssHeaderSeparator="headersep",this._cssHoliday="holiday",this._cssDay="day",this._cssPrev="prev",this._cssCurrent="current",this._cssNext="next",this._cssToday="today",this._cssActive="active",this._cssOutOfRange="outofrangeday",this._cssWeeksTable="PPMCWeeksTable",this._cssWeekHeader="PPWeekHeader",this._cssWeeksTitleCaption="PPWeeksTitleCaption",this._cssWeeksNextBtn="PPWeeksNextBtn",this._cssWeeksPrevBtn="PPWeeksPrevBtn",this._cssWeek="PPWeek",this._cssOutOfRangeWeek="PPOutOfRangeWeek",this._cssActiveWeek="PPActiveWeek",this._cssModeButtonsToolBar="",this._cssModeContainer="PPMCModeContainer",this._cssDaysModeContainer="PPMCDaysModeContainer",this._cssWeeksModeContainer="PPMCWeeksModeContainer",this._cssMonthsModeContainer="PPMCMonthsModeContainer",this._cssMonthsPrevBtn="PPMonthsPrevBtn",this._cssMonthsNextBtn="PPMonthsNextBtn",this._cssMonthsMainTitle="PPMonthsMainTitle",this._cssMonthsTitleCaption="PPMonthsTitleCaption",this._cssMonthsTable="PPMonthsTable",this._cssMonthsCellLeft="PPMonthsCellLeft",this._cssMonthsCellRight="PPMonthsCellRight",this._cssRibbonsBlock="PPRibbonsBlock",this._cssSeparator="PPMCSeparator",this._cssSeparatorLine="PPMCSeparatorLine",this._cssNowButtonBlock="PPMCNowButtonBlock",this._cssToolBarsBlock="PPMCToolBars",this._cssToolBarsSeparator="PPMCToolBarsSeparator",this._cssTimeBlock="PPMCTimeBlock",this._cssTimeTable="PPMCTimeTable",this._cssHoursLabel="PPMCHoursLabel",this._cssMinutesLabel="PPMCMinutesLabel",this._cssEl="elem",this._cssElActive="act",this._cssElHover="hover",this._cssElOutOfRange="out",this._CurrentDate||(this._CurrentDate=new Date),PP.getCurrentCulture){var t=PP.getCurrentCulture();t&&(this._Culture=t)}this._Culture||(this._Culture=new PP.CultureInfo),this._NeedRenderOnCreate&&this._render()},PP.initClass(PP.Ui.MonthCalendar,PP.Ui.Control,"MonthCalendar"),MonCalP=PP.Ui.MonthCalendar.prototype,MonCalP._render=function(){this._isBind=!1,this._DomNode||this._initFromHTML("<div></div>",!0);var n=this._cssMainDiv+(this._Enabled?"":" "+this._cssMainDivDisabled);this._DomNode.className!=n&&(this._DomNode.className=n),PP.Ui.MonthCalendar.base.setIsRTL.call(this,this._IsRTL),this._toolBarsBlock||(this._toolBarsBlock=document.createElement("DIV"),this._toolBarsBlock.className=this._cssToolBarsBlock,this._DomNode.appendChild(this._toolBarsBlock)),this._refreshToolBarsBlock(),this._refreshModeBlock(),this._separator||(this._separator=document.createElement("DIV"),this._separator.className=this._cssSeparator,this._DomNode.appendChild(this._separator),this._separatorLine=document.createElement("DIV"),this._separatorLine.className=this._cssSeparatorLine,this._separator.appendChild(this._separatorLine)),this._ShowTime||this._ShowNowButton?PP.show(this._separator):PP.hide(this._separator),this._timeBlock||(this._timeBlock=document.createElement("DIV"),this._timeBlock.className=this._cssTimeBlock,this._DomNode.appendChild(this._timeBlock),this._timeTable=document.createElement("TABLE"),this._timeTable.className=this._cssTimeTable,this._timeBlock.appendChild(this._timeTable),this._timeTable.cellPadding=0,this._timeTable.cellSpacing=0,this._timeTable.border=0,this._timeRow=this._timeTable.insertRow(-1),this._hoursCell=this._timeRow.insertCell(-1),this._hoursLabel=new PP.Ui.Label({Class:this._cssHoursLabel,ResourceKey:"mcHours",ParentNode:this._hoursCell}),this._hoursNECell=this._timeRow.insertCell(-1),this._hoursEdit=new PP.Ui.NumberEdit({ParentNode:this._hoursNECell,MinValue:0,MaxValue:23,Walkthrough:!0}),this._hoursEdit.Validate.add(this._onHoursEditValidate,this),this._hoursEdit.SpinUp.add(this._onHoursEditSpin,this),this._hoursEdit.SpinDown.add(this._onHoursEditSpin,this),this._hoursEdit.AfterValueChange.add(this._onHoursEditChange,this),this._minutesCell=this._timeRow.insertCell(-1),this._minutesLabel=new PP.Ui.Label({Class:this._cssMinutesLabel,ResourceKey:"mcMinutes",ParentNode:this._minutesCell}),this._minutesNECell=this._timeRow.insertCell(-1),this._minutesEdit=new PP.Ui.NumberEdit({ParentNode:this._minutesNECell,MinValue:0,MaxValue:59,Walkthrough:!0}),this._minutesEdit.Validate.add(this._onMinutesEditValidate,this),this._minutesEdit.SpinUp.add(this._onMinutesEditSpin,this),this._minutesEdit.SpinDown.add(this._onMinutesEditSpin,this),this._minutesEdit.AfterValueChange.add(this._onMinutesEditChange,this)),this._ShowTime?(this._hoursEdit.setEnabled(this._Enabled),this._hoursEdit.setValue(this.getCurrentHour()),this._minutesEdit.setEnabled(this._Enabled),this._minutesEdit.setValue(this.getCurrentMinute()),this._hoursEdit.setIsRTL(this._IsRTL),this._minutesEdit.setIsRTL(this._IsRTL),PP.show(this._timeBlock)):PP.hide(this._timeBlock),this._nowButtonBlock||(this._nowButtonBlock=document.createElement("DIV"),this._nowButtonBlock.className=this._cssNowButtonBlock,this._DomNode.appendChild(this._nowButtonBlock),this._nowButton=new PP.Ui.Button({Id:this._Id+"_NowButton",ParentNode:this._nowButtonBlock,ResourceKey:"monthCalendarNow"}),this._nowButton.Click.add(this._onNowClick,this)),this._ShowNowButton?PP.show(this._nowButtonBlock):PP.hide(this._nowButtonBlock),this._ParentNode&&this._ParentNode!=this._DomNode.parentNode&&this.addToNode(this._ParentNode),this._setFromResources(),this._raiseAfterRender(new PP.EventArgs)},MonCalP._refreshModeBlock=function(){var u,o,s,p,t,l,g,w,y,b,h,ft,r,i,n,c,e,a,ct,v,st,d,rt,tt,dt,bt,ut,k,it,et,f,nt,ot,gt,at,vt;this._isBind=!1,this._modeContainer||(this._modeContainer=document.createElement("DIV"),this._modeContainer.className=this._cssModeContainer,this._DomNode.appendChild(this._modeContainer)),this._modeContainer.innerHTML="",this._daysCellArr=[],this._weeksCellArr=[],this._ribbonsArr=[];switch(this._Mode){case PP.Ui.MonthCalendar.Mode.Days:for(this._daysModeContainer=document.createElement("DIV"),this._daysModeContainer.className=this._cssDaysModeContainer,this._modeContainer.appendChild(this._daysModeContainer),e=document.createElement("TABLE"),this._daysModeContainer.appendChild(e),e.className=this._cssMainTitleDiv+" "+this._cssDaysMainTitle,e.cellPadding=0,e.cellSpacing=0,e.border=0,c=e.insertRow(-1),n=c.insertCell(-1),this._prevYearButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowLLeft+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssDaysPrevYear,this._cssEl].join(" "),this._Enabled&&(n.title=this._PreviousYearName),n=c.insertCell(-1),this._prevMonthButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowLeft+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssDaysPrevMonth,this._cssEl].join(" "),this._Enabled&&(n.title=this._PreviousMonthName),n=c.insertCell(-1),n.className=this._cssTitleDiv+" "+this._cssDaysTitleCaption,n.innerHTML="",n.appendChild(document.createTextNode(this._getCurrentMonthName()+" "+this.getCurrentYear())),n=c.insertCell(-1),this._nextMonthButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowRight+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssDaysNextMonth,this._cssEl].join(" "),this._Enabled&&(n.title=this._NextMonthName),n=c.insertCell(-1),this._nextYearButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowRRight+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssDaysNextYear,this._cssEl].join(" "),this._Enabled&&(n.title=this._NextYearName),r=document.createElement("TABLE"),r.className=this._cssDaysTable,r.cellPadding=0,r.cellSpacing=0,r.border=0,this._daysModeContainer.appendChild(r),this._daysTable&&this._removeEvent(this._daysTable,"selectstart",this._onTableSelectStart),this._daysTable=r,ft=r.style.visibility,r.style.visibility="hidden",h=r.insertRow(-1),ct=this._Culture.ShortDayNames.length,t=0;t<ct;t++)u=h.insertCell(-1),u.innerHTML=this._Culture.ShortDayNames[t],u.className=this._Culture.IsSundayFirst?t>5||t==0?this._cssDayHeader+" "+this._cssHoliday:this._cssDayHeader:t>4?this._cssDayHeader+" "+this._cssHoliday:this._cssDayHeader;for(h=r.insertRow(-1),t=0;t<ct;t++)u=h.insertCell(-1),u.className=this._cssHeaderSeparator;var lt=new Date,ii=lt.getFullYear()==this.getCurrentYear()&&lt.getMonth()==this.getCurrentMonth(),kt=this._getMonthWeeks();for(t=0;t<kt.length;t++)for(h=r.insertRow(-1),l=kt[t],w=0;w<l.length;w++)v=l[w],u=h.insertCell(-1),u.Day=v,o=[this._cssDay,this._cssEl],v.IsPrevMonth&&o.push(this._cssPrev),v.IsCurrentMonth&&(o.push(this._cssCurrent),ii&&lt.getDate()==v.No&&o.push(this._cssToday)),v.IsNextMonth&&o.push(this._cssNext),this._Culture.IsSundayFirst?(v.Index>5||v.Index==0)&&o.push(this._cssHoliday):v.Index>4&&o.push(this._cssHoliday),v.IsActive&&(o.push(this._cssActive),o.push(this._cssElActive),this._activeDayCell=u),v.IsOutOfRange&&(o.push(this._cssOutOfRange),o.push(this._cssElOutOfRange)),u.className=o.join(" "),i=PP.Templates.Radius2,i=i.replace("{Content}",v.No),u.innerHTML=i,this._daysCellArr.push(u);r.style.visibility=ft;break;case PP.Ui.MonthCalendar.Mode.Weeks:this._weeksModeContainer=document.createElement("DIV"),this._weeksModeContainer.className=this._cssWeeksModeContainer,this._modeContainer.appendChild(this._weeksModeContainer),st=this.getCurrentWeek(),d=st<26,e=document.createElement("TABLE"),this._weeksModeContainer.appendChild(e),e.className=this._cssMainTitleDiv+" "+this._cssWeeksMainTitle,e.cellPadding=0,e.cellSpacing=0,e.border=0,c=e.insertRow(-1),n=c.insertCell(-1),this._prevHalfYearButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowLeft+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssWeeksPrevBtn,this._cssEl].join(" "),this._Enabled&&(n.title=this._PreviousHalfYearName),n=c.insertCell(-1),n.className=this._cssTitleDiv+" "+this._cssWeeksTitleCaption,rt=[],rt[0]=d?this._Culture.MonthNames[0].toLowerCase():this._Culture.MonthNames[6].toLowerCase(),rt[1]=d?this._Culture.MonthNames[5].toLowerCase():this._Culture.MonthNames[11].toLowerCase(),n.innerHTML="",n.appendChild(document.createTextNode(rt.join(" - ")+" "+this.getCurrentYear())),n=c.insertCell(-1),this._nextHalfYearButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowRight+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssWeeksNextBtn,this._cssEl].join(" "),this._Enabled&&(n.title=this._NextHalfYearName),r=document.createElement("TABLE"),r.className=this._cssWeeksTable,r.cellPadding=0,r.cellSpacing=0,r.border=0,this._weeksModeContainer.appendChild(r),this._weeksTable=r,ft=r.style.visibility,r.style.visibility="hidden",h=r.insertRow(-1);var ht=d?0:6,ni=d?5:11,ri=d?25:52,ti=5,ui=6;for(t=ht;t<=ni;t++)u=h.insertCell(-1),tt=this._Culture.ShortMonthNames,dt=t<tt.length?tt[t]:tt[tt.length-1],u.innerHTML=dt,u.className=this._cssWeekHeader;for(h=r.insertRow(-1),t=ht;t<=ni;t++)u=h.insertCell(-1),u.className=this._cssHeaderSeparator;for(bt=this._getMonthsWeeks(this.getCurrentYear()),t=0;t<ti;t++)for(h=r.insertRow(-1),w=0;w<ui;w++)if(l={No:-1,IsActive:!1,IsOutOfRange:!1},u=h.insertCell(-1),o=[this._cssWeek,this._cssEl],ut=bt[w+ht],typeof ut!="undefined"&&typeof ut[t]!="undefined"){l.No=ut[t],l.No==st&&(l.IsActive=!0,o.push(this._cssActiveWeek),o.push(this._cssElActive),this._activeWeekCell=u);var yt=this.getCurrentYear(),pt=this._Culture.getFirstWeekDate(l.No,yt),wt=this._Culture.getLastWeekDate(l.No,yt);l.IsOutOfRange=pt.getTime()>this._MaxDate.getTime()&&wt.getTime()>this._MaxDate.getTime()||pt.getTime()<this._MinDate.getTime()&&wt.getTime()<this._MinDate.getTime(),l.IsOutOfRange&&(o.push(this._cssOutOfRangeWeek),o.push(this._cssElOutOfRange)),u.className=o.join(" "),l.No<=ri?(u.Week=l,i=PP.Templates.Radius2,i=i.replace("{Content}",l.No+1),u.innerHTML=i,this._weeksCellArr.push(u)):u.style.visibility="hidden"}r.style.visibility=ft;break;case PP.Ui.MonthCalendar.Mode.Months:case PP.Ui.MonthCalendar.Mode.Quarters:case PP.Ui.MonthCalendar.Mode.HalfYears:if(this._monthsModeContainer=document.createElement("DIV"),this._monthsModeContainer.className=this._cssMonthsModeContainer,this._modeContainer.appendChild(this._monthsModeContainer),e=document.createElement("TABLE"),this._monthsModeContainer.appendChild(e),e.className=this._cssMainTitleDiv+" "+this._cssMonthsMainTitle,e.cellPadding=0,e.cellSpacing=0,e.border=0,c=e.insertRow(-1),n=c.insertCell(-1),this._monthsPrevButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowLeft+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssMonthsPrevBtn,this._cssEl].join(" "),this._Enabled&&(n.title=this._PreviousYearName),n=c.insertCell(-1),n.className=this._cssTitleDiv+" "+this._cssMonthsTitleCaption,n.innerHTML=this.getCurrentYear()+"",n=c.insertCell(-1),this._monthsNextButton=n,i=PP.Templates.Radius2,s="<div class='"+this._cssArrow+" "+this._cssArrowRight+"'></div>",i=i.replace("{Content}",s),n.innerHTML=i,n.className=[this._cssTitleDiv,this._cssTitleButton,this._cssMonthsNextBtn,this._cssEl].join(" "),this._Enabled&&(n.title=this._NextYearName),it=document.createElement("DIV"),it.className=this._cssSeparator,this._monthsModeContainer.appendChild(it),et=document.createElement("DIV"),et.className=this._cssSeparatorLine,it.appendChild(et),this._Mode==PP.Ui.MonthCalendar.Mode.Months)for(r=document.createElement("TABLE"),r.className=this._cssMonthsTable,r.cellPadding=0,r.cellSpacing=0,r.border=0,this._monthsModeContainer.appendChild(r),this._monthTable=r,h=r.insertRow(-1),u=h.insertCell(-1),u.className=this._cssMonthsCellLeft,this._monthsLists[0]=document.createElement("DIV"),u.appendChild(this._monthsLists[0]),this._monthsLists[0].className=this._cssRibbonsBlock,u=h.insertCell(-1),u.className=this._cssMonthsCellRight,this._monthsLists[1]=document.createElement("DIV"),u.appendChild(this._monthsLists[1]),this._monthsLists[1].className=this._cssRibbonsBlock,ot=this._Culture.MonthNames,a=this.getCurrentYear(),t=0;t<ot.length;t++)b=this._Culture.getDaysInMonth(t,a),p=new Date(a,t,1,0,0,0,0),y=new Date(a,t,b,23,59,0,0),g=p.getTime()>this._MaxDate.getTime()&&y.getTime()>this._MaxDate.getTime()||p.getTime()<this._MinDate.getTime()&&y.getTime()<this._MinDate.getTime(),gt=t%2,f=new PP.Ui.RibbonButton({ParentNode:this._monthsLists[gt],Content:ot[t],UseWrapping:!1,ImagePosition:PP.LTRB.Left}),f.setData(t),f.setEnabled(!g&&this._Enabled),this._monthButtons.push(f),this.getCurrentMonth()==t?(f.setIsPressed(!0),this._lastPressedMonthRibbon=f):f.setIsPressed(!1),this._ribbonsArr.push(f),f.Click.add(this._onMonthClick,this);else if(this._Mode==PP.Ui.MonthCalendar.Mode.Quarters)for(this._quartersList=document.createElement("DIV"),this._quartersList.className=this._cssRibbonsBlock,this._monthsModeContainer.appendChild(this._quartersList),at=this._Culture.QuarterNames,a=this.getCurrentYear(),t=0;t<at.length;t++)k=t*3,nt=k+2,b=this._Culture.getDaysInMonth(nt,a),p=new Date(a,k,1,0,0,0,0),y=new Date(a,nt,b,23,59,0,0),g=p.getTime()>this._MaxDate.getTime()&&y.getTime()>this._MaxDate.getTime()||p.getTime()<this._MinDate.getTime()&&y.getTime()<this._MinDate.getTime(),f=new PP.Ui.RibbonButton({ParentNode:this._quartersList,Content:at[t],UseWrapping:!1,ImagePosition:PP.LTRB.Left}),f.setData(t),f.setEnabled(!g&&this._Enabled),this._quarterButtons.push(f),this.getCurrentQuarter()==t?(f.setIsPressed(!0),this._lastPressedQuarterRibbon=f):f.setIsPressed(!1),this._ribbonsArr.push(f),f.Click.add(this._onQuarterClick,this);else if(this._Mode==PP.Ui.MonthCalendar.Mode.HalfYears)for(this._halfYearsList=document.createElement("DIV"),this._halfYearsList.className=this._cssRibbonsBlock,this._monthsModeContainer.appendChild(this._halfYearsList),vt=this._Culture.HalfYearNames,a=this.getCurrentYear(),t=0;t<vt.length;t++)k=t*6,nt=k+5,b=this._Culture.getDaysInMonth(nt,a),p=new Date(a,k,1,0,0,0,0),y=new Date(a,nt,b,23,59,0,0),g=p.getTime()>this._MaxDate.getTime()&&y.getTime()>this._MaxDate.getTime()||p.getTime()<this._MinDate.getTime()&&y.getTime()<this._MinDate.getTime(),f=new PP.Ui.RibbonButton({ParentNode:this._halfYearsList,Content:vt[t],UseWrapping:!1,ImagePosition:PP.LTRB.Left}),f.setData(t),f.setEnabled(!g&&this._Enabled),this._hyButtons.push(f),this.getCurrentHalfYear()==t?(f.setIsPressed(!0),this._lastPressedHalfYearRibbon=f):f.setIsPressed(!1),this._ribbonsArr.push(f),f.Click.add(this._onHalfYearClick,this)}this._bindEvents(),this._raiseAfterRender(new PP.EventArgs)},MonCalP._refreshToolBarsBlock=function(){var t=[],r,i,u,e,f,n;this._ShowDaysButton&&t.push("d"),this._ShowWeeksButton&&t.push("w"),this._ShowMonthsButton&&t.push("m"),this._ShowQuartersButton&&t.push("q"),this._ShowHalfYearsButton&&t.push("h"),r=t.length==0||t.join("")!=this._btnsArr.join(""),r&&(this._toolBarsBlock.innerHTML="",this._btnsArr=t,i=this._btnsArr.length,i>1?(u=i==2||i==4?2:3,e=i>3?i==4||i==5?2:3:0,this._modeToolBars[0]=this._addToolBar(this._Id+"_TBFirst",0,u),e>0&&(f=document.createElement("DIV"),f.className=this._cssToolBarsSeparator,this._toolBarsBlock.appendChild(f),this._modeToolBars[1]=this._addToolBar(this._Id+"_TBSecond",u,i)),PP.show(this._toolBarsBlock)):PP.hide(this._toolBarsBlock)),this._selectedModeButton&&this._selectedModeButton.setIsChecked(!1,!1),n=null;switch(this._Mode){case PP.Ui.MonthCalendar.Mode.Days:n=this._daysButton;break;case PP.Ui.MonthCalendar.Mode.Weeks:n=this._weeksButton;break;case PP.Ui.MonthCalendar.Mode.Months:n=this._monthsButton;break;case PP.Ui.MonthCalendar.Mode.Quarters:n=this._quartersButton;break;case PP.Ui.MonthCalendar.Mode.HalfYears:n=this._halfYearsButton;break;case PP.Ui.MonthCalendar.Mode.Years:n=this._yearsButton}return n&&n.setIsChecked(!0,!1),this._selectedModeButton=n,this._modeToolBars[0]&&this._modeToolBars[0].setIsRTL(this._IsRTL),this._modeToolBars[1]&&this._modeToolBars[1].setIsRTL(this._IsRTL),r&&this.updateSize(),r},MonCalP._refreshTimeEditors=function(){var n=this.getCurrentHour(),t=this.getCurrentMinute();n!=this._hoursEdit.getValue()&&this._hoursEdit.setValue(n),t!=this._minutesEdit.getValue()&&this._minutesEdit.setValue(t)},MonCalP._beginChange=function(){this._changeCounter++},MonCalP._endChange=function(n,t){if(this._changeCounter--,this._changeCounter<0&&(this._changeCounter=0),this._changeCounter==0){var i=new PP.Ui.MonthCalendarEventArgs;i.NewDate=this.getCurrentDate(),i.SkipRefresh=t,this._raiseChangeEvent(i),i.SkipRefresh||this._render()}},MonCalP._setFromResources=function(){if(PP.resourceManager){var n=PP.resourceManager.getString("monthCalendarPreviousMonth");n&&this.setPreviousMonthName(n),n=PP.resourceManager.getString("monthCalendarNextMonth"),n&&this.setNextMonthName(n),n=PP.resourceManager.getString("monthCalendarPreviousYear"),n&&this.setPreviousYearName(n),n=PP.resourceManager.getString("monthCalendarNextYear"),n&&this.setNextYearName(n),n=PP.resourceManager.getString("monthCalendarNextHalfYear"),n&&this.setNextHalfYearName(n),n=PP.resourceManager.getString("monthCalendarPreviousHalfYear"),n&&this.setPreviousHalfYearName(n)}},MonCalP._onCultureChanged=function(){var i=PP.getCurrentCulture();this._setFromResources(),this._Culture.CultureName!=i.CultureName&&(this._Culture=i,this._isBlockRender||this._render()),this.updateSize()},MonCalP._onPrevMonthClick=function(){this._Enabled&&this._setPMD()},MonCalP._onPrevYearClick=function(){this._Enabled&&this._setPY()},MonCalP._onNextMonthClick=function(){this._Enabled&&this._setNMD()},MonCalP._onNextYearClick=function(){this._Enabled&&this._setNY()},MonCalP._onDayClick=function(n,t){if(this._Enabled){var u=t.Event.sourceElement,i=u.Day,r=new PP.Ui.MonthCalendarSelectDayArgs(t.Event);r.Day=i,this._raiseSelectDay(r),i.IsPrevMonth?this._setPMD(i.No,r.SkipRefresh==!0):i.IsCurrentMonth?this._setCMD(i.No,r.SkipRefresh==!0,u):i.IsNextMonth&&this._setNMD(i.No,r.SkipRefresh==!0)}},MonCalP._onDayOrWeekMouseDown=function(n,t){var i=t.Event.sourceElement;(i.Day&&i!=this._activeDayCell||i.Week&&i!=this._activeWeekCell)&&PP.addClass(i,this._cssElActive)},MonCalP._onDayOrWeekMouseUp=function(n,t){var i=t.Event.sourceElement;(i.Day&&i!=this._activeDayCell||i.Week&&i!=this._activeWeekCell)&&PP.removeClass(i,this._cssElActive),PP.removeClass(t.Event.sourceElement,this._cssElHover)},MonCalP._onDayOrWeekMouseOut=function(n,t){this._onDayOrWeekMouseUp(n,t),PP.removeClass(t.Event.sourceElement,this._cssElHover)},MonCalP._onDayOrWeekMouseOver=function(n,t){PP.addClass(t.Event.sourceElement,this._cssElHover)},MonCalP._onTableSelectStart=function(){return!1},MonCalP._onNextHalfYearClick=function(){this._Enabled&&this._setNHY()},MonCalP._onPrevHalfYearClick=function(){this._Enabled&&this._setPHY()},MonCalP._onWeekClick=function(n,t){if(this._Enabled){var u=t.Event.sourceElement,i=u.Week,r=new PP.Ui.MonthCalendarSelectWeekArgs(t.Event);(r.Week=i,this._raiseSelectWeek(r),r.Cancel||i.IsOutOfRange)||i.IsActive||this._setCHYW(i.No,u)}},MonCalP._onMonthsPrevClick=function(){if(this._Enabled){this._setPY();return}},MonCalP._onMonthsNextClick=function(){this._Enabled&&this._setNY()},MonCalP._onMonthClick=function(n,t){if(this._Enabled){var i=new PP.Ui.MonthCalendarSelectArgs(t.Event),r=n.getData();(i.Index=r,this._raiseSelectMonth(i),i.Cancel)||(n.setIsPressed(!0),this._lastPressedMonthRibbon!=n&&(this._lastPressedMonthRibbon.setIsPressed(!1),this._lastPressedMonthRibbon=n,this._setCM(r)))}},MonCalP._onQuarterClick=function(n,t){if(this._Enabled){var i=new PP.Ui.MonthCalendarSelectArgs(t.Event),r=n.getData();(i.Index=r,this._raiseSelectQuarter(i),i.Cancel)||(n.setIsPressed(!0),this._lastPressedQuarterRibbon!=n&&(this._lastPressedQuarterRibbon.setIsPressed(!1),this._lastPressedQuarterRibbon=n,this._setCM(r*3)))}},MonCalP._onHalfYearClick=function(n,t){if(this._Enabled){var i=new PP.Ui.MonthCalendarSelectArgs(t.Event),r=n.getData();(i.Index=r,this._raiseSelectHalfYear(i),i.Cancel)||(n.setIsPressed(!0),this._lastPressedHalfYearRibbon!=n&&(this._lastPressedHalfYearRibbon.setIsPressed(!1),this._lastPressedHalfYearRibbon=n,this._setCM(r*6)))}},MonCalP._onNowClick=function(n,t){if(this._Enabled){this._raiseClickNow(t);var i=new Date;this.setCurrentDate(i)}},MonCalP._onHoursEditChange=function(n,t){this._beginChange(),this._setCurrentHour(t.NewValue),this._endChange("h",!0)},MonCalP._onMinutesEditChange=function(n,t){this._beginChange(),this._setCurrentMinute(t.NewValue),this._endChange("n",!0)},MonCalP._onHoursEditValidate=function(n,t){if(t.IsValid){var i=this.getCurrentDate();i.setHours(t.NumberValue),t.IsValid=!this._isDateTimeOutOfRange(i)}},MonCalP._onMinutesEditValidate=function(n,t){if(t.IsValid){var i=this.getCurrentDate();i.setMinutes(t.NumberValue),t.IsValid=!this._isDateTimeOutOfRange(i)}},MonCalP._onHoursEditSpin=function(n,t){var i=this.getCurrentDate();i.setHours(t.NewValue),t.Cancel=this._isDateTimeOutOfRange(i)},MonCalP._onMinutesEditSpin=function(n,t){var i=this.getCurrentDate();i.setMinutes(t.NewValue),t.Cancel=this._isDateTimeOutOfRange(i)},MonCalP._onTitleButtonMouseDown=function(n,t){PP.addClass(t.Event.sourceElement,this._cssElActive)},MonCalP._onTitleButtonMouseUp=function(n,t){PP.removeClass(t.Event.sourceElement,this._cssElActive)},MonCalP._onTitleButtonMouseOver=function(n,t){PP.addClass(t.Event.sourceElement,this._cssElHover)},MonCalP._onTitleButtonMouseOut=function(n,t){this._onTitleButtonMouseUp(n,t),PP.removeClass(t.Event.sourceElement,this._cssElHover)},MonCalP._setPMD=function(n,t){var w=this.getCurrentYear(),p=this.getCurrentMonth(),b=this.getCurrentDay(),e=this.getCurrentHour(),h=this.getCurrentMinute(),r=w,u=p-1,a="d",v=!0,i=parseInt(n,10),l;isNaN(i)&&(a="m",i=b,v=!1),u<0&&(u=11,r--),l=this._Culture.getDaysInMonth(u,r),i>l&&(i=l);var f=this._MinDate.getFullYear(),o=this._MinDate.getMonth(),s=this._MinDate.getDate(),c=this._MinDate.getHours(),y=this._MinDate.getMinutes();if(!(r<f)&&(r!=f||!(u<o))){if(r==f&&u==o&&i<s){if(v)return;i=s}r==f&&u==o&&i==s&&e<c&&(e=c),r==f&&u==o&&i==s&&e==c&&h<y&&(h=y),this._beginChange(),this._setCurrentHour(e),this._setCurrentMinute(h),this._setCurrentDay(1),this._setCurrentMonth("-1"),this._setCurrentDay(i),this._endChange(a,t)}},MonCalP._setPY=function(){var r=this._MinDate.getFullYear(),u=this._MinDate.getMonth(),f=this._MinDate.getDate(),o=this._MinDate.getHours(),h=this._MinDate.getMinutes(),n=this.getCurrentMonth(),t=this.getCurrentDay(),l=this.getCurrentYear(),e=this.getCurrentHour(),s=this.getCurrentMinute(),i=l-1,c=this._Culture.getDaysInMonth(n,i);(t>c&&(t=c),i<r)||(i==r&&n<u&&(n=u),i==r&&n==u&&t<f&&(t=f),i==r&&n==u&&t==f&&e<o&&(e=o),i==r&&n==u&&t==f&&e==o&&s<h&&(s=h),this._beginChange(),this._setCurrentHour(e),this._setCurrentMinute(s),this._setCurrentDay(1),this._setCurrentDay(t),n!=this.getCurrentMonth()&&this._setCurrentMonth(n),this._setCurrentYear("-1"),this._endChange("y"))},MonCalP._setCMD=function(n,t,i){var r=this.getCurrentYear(),u=this.getCurrentMonth(),f=this._MinDate.getFullYear(),l=this._MinDate.getMonth(),v=this._MinDate.getDate(),e=this._MaxDate.getFullYear(),a=this._MaxDate.getMonth(),y=this._MaxDate.getDate(),o=this.getMaxDate(),s=this.getMinDate(),h=parseInt(n,10),c;r<f||r==f&&u<l||r==f&&u==l&&h<v||r>e||r==e&&u>a||r==e&&u==a&&h>y||(this._beginChange(),this._setCurrentDay(h),c=this.getCurrentDate(),c.getTime()>o.getTime()&&(this._setCurrentHour(o.getHours()),this._setCurrentMinute(o.getMinutes())),c.getTime()<s.getTime()&&(this._setCurrentHour(s.getHours()),this._setCurrentMinute(s.getMinutes())),this._setAciveDayCell(i),this._endChange("d",!0))},MonCalP._setAciveDayCell=function(n){var i,t;if(this._activeDayCell!=n){if(this._activeDayCell){for(i=this._activeDayCell.className.split(" "),t=0;t<i.length;t++)(i[t]==this._cssActive||i[t]==this._cssElActive)&&(i.splice(t,1),t--);this._activeDayCell.className=i.join(" "),this._activeDayCell.Day&&(this._activeDayCell.Day.IsActive=!1)}n.className+=" "+this._cssElActive+" "+this._cssActive,n.Day&&(n.Day.IsActive=!0),this._activeDayCell=n}},MonCalP._setNMD=function(n,t){var b=this.getCurrentMonth(),p=this.getCurrentDay(),w=this.getCurrentYear(),e=this.getCurrentHour(),h=this.getCurrentMinute(),a="d",i=parseInt(n,10),r=w,u=b+1,v=!0,l;isNaN(i)&&(a="m",i=p,v=!1),u>11&&(u=0,r++),l=this._Culture.getDaysInMonth(u,r),i>l&&(i=l);var f=this._MaxDate.getFullYear(),o=this._MaxDate.getMonth(),s=this._MaxDate.getDate(),c=this._MaxDate.getHours(),y=this._MaxDate.getMinutes();if(!(r>f)&&(r!=f||!(u>o))){if(r==f&&u==o&&i>s){if(v)return;i=s}r==f&&u==o&&i==s&&e>c&&(e=c),r==f&&u==o&&i==s&&e==c&&h>y&&(h=y),this._beginChange(),this._setCurrentHour(e),this._setCurrentMinute(h),this._setCurrentDay(1),this._setCurrentMonth("+1"),this._setCurrentDay(i),this._endChange(a,t)}},MonCalP._setNY=function(){var l=this.getCurrentYear(),i=l+1,t=this.getCurrentDay(),n=this.getCurrentMonth(),h=this._Culture.getDaysInMonth(n,i);t>h&&(t=h);var f=this.getCurrentHour(),o=this.getCurrentMinute(),r=this._MaxDate.getFullYear(),u=this._MaxDate.getMonth(),e=this._MaxDate.getDate(),s=this._MaxDate.getHours(),c=this._MaxDate.getMinutes();i>r||(i==r&&n>u&&(n=u),i==r&&n==u&&t>e&&(t=e),i==r&&n==u&&t==e&&f>s&&(f=s),i==r&&n==u&&t==e&&f==s&&o>c&&(o=c),this._beginChange(),this._setCurrentHour(f),this._setCurrentMinute(o),this._setCurrentDay(1),this._setCurrentDay(t),n!=this.getCurrentMonth()&&this._setCurrentMonth(n),this._setCurrentYear("+1"),this._endChange("y"))},MonCalP._setPHY=function(){var s=this.getCurrentYear(),i=this.getCurrentWeek(),t=26,u=27,r=i<t,h=r?i>u-1?u-1:i:i-t,c=r?s-1:s,f=null;f=i==t+u-1?t-1:r?t+h:h;var n=this._Culture.getFirstWeekDate(f,c),e=this._MinDate.getFullYear(),o=n.getFullYear();o<e||(n.setHours(this.getCurrentHour()),n.setMinutes(this.getCurrentMinute()),o==e&&!r&&n.getTime()<this._MinDate.getTime()&&this._Culture.getWeekNumber(this._MinDate)>=t)||(this._beginChange(),this._setCurrentDay(1),n.getTime()<this._MinDate.getTime()?(this._setCurrentYear(e),this._setCurrentMonth(this._MinDate.getMonth()),this._setCurrentDay(this._MinDate.getDate()),this._setCurrentHour(this._MinDate.getHours()),this._setCurrentMinute(this._MinDate.getMinutes())):(this._setCurrentYear(o),this._setCurrentMonth(n.getMonth()),this._setCurrentDay(n.getDate())),this._endChange())},MonCalP._setNHY=function(){var s=this.getCurrentYear(),u,i=this.getCurrentWeek(),t=26,f=27,r=i<t,h=r?i>f-1?f-1:i:i-t,c=r?s:s+1;u=i==t+f-1?t-1:r?t+h:h;var n=this._Culture.getFirstWeekDate(u,c),e=this._MaxDate.getFullYear(),o=n.getFullYear();o>e||(n.setHours(this.getCurrentHour()),n.setMinutes(this.getCurrentMinute()),o==e&&r&&n.getTime()>this._MaxDate.getTime()&&this._Culture.getWeekNumber(this._MaxDate)<t)||(this._beginChange(),this._setCurrentDay(1),n.getTime()>this._MaxDate.getTime()?(this._setCurrentYear(e),this._setCurrentMonth(this._MaxDate.getMonth()),this._setCurrentDay(this._MaxDate.getDate()),this._setCurrentHour(this._MaxDate.getHours()),this._setCurrentMinute(this._MaxDate.getMinutes())):(this._setCurrentYear(o),this._setCurrentMonth(n.getMonth()),this._setCurrentDay(n.getDate())),this._endChange())},MonCalP._setCHYW=function(n,t){var f=this.getCurrentYear(),u=this._Culture.getFirstWeekDate(n,f),i=this.getMaxDate(),r=this.getMinDate();this._beginChange(),this._setCurrentDay(1),u.getTime()>i.getTime()?(this._setCurrentMonth(i.getMonth()),this._setCurrentHour(i.getHours()),this._setCurrentMinute(i.getMinutes()),this._setCurrentDay(i.getDate())):u.getTime()<r.getTime()?(this._setCurrentMonth(r.getMonth()),this._setCurrentHour(r.getHours()),this._setCurrentMinute(r.getMinutes()),this._setCurrentDay(r.getDate())):(this._setCurrentMonth(u.getMonth()),this._setCurrentDay(u.getDate())),this._setAciveWeekCell(t),this._endChange("w",!0)},MonCalP._setAciveWeekCell=function(n){var i,t;if(this._activeWeekCell!=n){if(this._activeWeekCell){for(i=this._activeWeekCell.className.split(" "),t=0;t<i.length;t++)(i[t]==this._cssActiveWeek||i[t]==this._cssElActive)&&(i.splice(t,1),t--);this._activeWeekCell.className=i.join(" "),this._activeWeekCell.Week&&(this._activeWeekCell.Week.IsActive=!1)}n.className+=" "+this._cssActiveWeek+" "+this._cssElActive,n.Week&&(n.Week.IsActive=!0),this._activeWeekCell=n}},MonCalP._setCM=function(n){var u=this.getCurrentYear(),r=new Date(u,n,1,this.getCurrentHour(),this.getCurrentMinute(),0,0),t=this.getMaxDate(),i=this.getMinDate();this._beginChange(),this._setCurrentDay(1),r.getTime()>t.getTime()?(this._setCurrentMonth(t.getMonth()),this._setCurrentHour(t.getHours()),this._setCurrentMinute(t.getMinutes()),this._setCurrentDay(t.getDate())):r.getTime()<i.getTime()?(this._setCurrentMonth(i.getMonth()),this._setCurrentHour(i.getHours()),this._setCurrentMinute(i.getMinutes()),this._setCurrentDay(i.getDate())):(this._setCurrentMonth(r.getMonth()),this._setCurrentDay(r.getDate())),this._endChange("m",!0)},MonCalP._getMonthWeeks=function(){var f=this.getCurrentMonth(),e=this.getCurrentYear(),h=e,c=e,o=f-1,s;o<0&&(o=11,h--),s=f+1,s>11&&(s=0,c++);for(var v=this._Culture.getDaysInMonth(f,e),y=this._Culture.getDaysInMonth(o,h),u=[],a=new Date(e,f,1),t=this._Culture.IsSundayFirst?a.getDay()%7:(a.getDay()+6)%7,p=t==0,l=0,r,i,n=1;n<=v;n++)i=u[l],typeof i=="undefined"&&(i=[],u[l]=i),r=this._isOutOfRange(e,f,n),i[t]={Index:t,No:n,IsPrevMonth:!1,IsCurrentMonth:!0,IsNextMonth:!1,IsActive:n==this.getCurrentDay(),IsOutOfRange:r},t++,t>6&&(t=0,l++);if(t=y,p)for(i=[],u.unshift(i),n=6;n>=0;n--)r=this._isOutOfRange(h,o,t),i[n]={Index:n,No:t,IsPrevMonth:!0,IsCurrentMonth:!1,IsNextMonth:!1,IsActive:!1,IsOutOfRange:r},t--;else for(i=u[0],n=6;n>=0;n--)typeof i[n]=="undefined"&&(r=this._isOutOfRange(h,o,t),i[n]={Index:n,No:t,IsPrevMonth:!0,IsCurrentMonth:!1,IsNextMonth:!1,IsActive:!1,IsOutOfRange:r},t--);for(i=u[u.length-1],t=1,n=0;n<7;n++)typeof i[n]=="undefined"&&(r=this._isOutOfRange(c,s,t),i[n]={Index:n,No:t,IsPrevMonth:!1,IsCurrentMonth:!1,IsNextMonth:!0,IsActive:!1,IsOutOfRange:r},t++);if(u.length==5)for(i=[],u[5]=i,n=0;n<7;n++)r=this._isOutOfRange(c,s,t),i[n]={Index:n,No:t,IsPrevMonth:!1,IsCurrentMonth:!1,IsNextMonth:!0,IsActive:!1,IsOutOfRange:r},t++;return u},MonCalP._raiseChangeEvent=function(n){this.Change.fire(this,n)},MonCalP._raiseSelectDay=function(n){this.SelectDay.fire(this,n)},MonCalP._raiseSelectWeek=function(n){this.SelectWeek.fire(this,n)},MonCalP._raiseSelectMonth=function(n){this.SelectMonth.fire(this,n)},MonCalP._raiseSelectQuarter=function(n){this.SelectQuarter.fire(this,n)},MonCalP._raiseSelectHalfYear=function(n){this.SelectHalfYear.fire(this,n)},MonCalP._raiseClickNow=function(n){this.ClickNow.fire(this,n)},MonCalP._raiseModeChanged=function(n){this.ModeChanged.fire(this,n)},MonCalP._raiseAfterModeChanged=function(n){this.AfterModeChanged.fire(this,n)},MonCalP._raiseAfterRender=function(n){this.AfterRender.fire(this,n)},MonCalP._getCurrentMonthName=function(){return this._Culture.MonthNames[this.getCurrentMonth()]},MonCalP._getCurrentHalfYearCaption=function(){},MonCalP._isOutOfRange=function(n,t,i){var r=this._MaxDate.getFullYear(),f=this._MaxDate.getMonth(),o=this._MaxDate.getDate(),u=this._MinDate.getFullYear(),e=this._MinDate.getMonth(),s=this._MinDate.getDate();return n>r||n==r&&t>f||n==r&&t==f&&i>o||n<u||n==u&&t<e||n==u&&t==e&&i<s},MonCalP._isDateTimeOutOfRange=function(n){return n.getTime()>this.getMaxDate()||n.getTime()<this.getMinDate()},MonCalP._modeButtonClick=function(n,t){this._selectedModeButton!=n&&(this._selectedModeButton&&this._selectedModeButton.setIsChecked(!1,!1),this._selectedModeButton=n,this._changeMode(t),this._raiseAfterModeChanged(new PP.EventArgs))},MonCalP._daysButtonClick=function(){this._modeButtonClick(this._daysButton,PP.Ui.MonthCalendar.Mode.Days)},MonCalP._weeksButtonClick=function(){this._modeButtonClick(this._weeksButton,PP.Ui.MonthCalendar.Mode.Weeks)},MonCalP._monthsButtonClick=function(){this._modeButtonClick(this._monthsButton,PP.Ui.MonthCalendar.Mode.Months)},MonCalP._quartersButtonClick=function(){this._modeButtonClick(this._quartersButton,PP.Ui.MonthCalendar.Mode.Quarters)},MonCalP._halfYearsButtonClick=function(){this._modeButtonClick(this._halfYearsButton,PP.Ui.MonthCalendar.Mode.HalfYears)},MonCalP._yearsButtonClick=function(){this._modeButtonClick(this._yearsButton,PP.Ui.MonthCalendar.Mode.Years)},MonCalP._changeMode=function(n){if(n!=PP.Ui.MonthCalendar.Mode.Days&&n!=PP.Ui.MonthCalendar.Mode.Weeks&&n!=PP.Ui.MonthCalendar.Mode.Months&&n!=PP.Ui.MonthCalendar.Mode.Quarters&&n!=PP.Ui.MonthCalendar.Mode.HalfYears&&n!=PP.Ui.MonthCalendar.Mode.Years)throw new Error("Wrong mode of MonthCaledar");if(n!=this._Mode){this._Mode=n;var t=new PP.EventArgs;t.NewValue=this._Mode,this._raiseModeChanged(t),this._isBlockRender||this._render()}},MonCalP._getPixelSize=function(n,t){var i=PP.getStyle(n,t);return i=PP.widthToPixel(i),i=i?i:0},MonCalP._getMarginsWidth=function(n){var t=this._getPixelSize(n,"padding-left"),i=this._getPixelSize(n,"margin-left"),r=this._getPixelSize(n,"border-left-width"),u=this._getPixelSize(n,"padding-right"),f=this._getPixelSize(n,"margin-right"),e=this._getPixelSize(n,"border-right-width");return t+i+r+u+f+e},MonCalP._getOffsetWidthNoMargins=function(n){return n.offsetWidth-this._getMarginsWidth(n)},MonCalP._addToolBar=function(n,t,i){for(var r=new PP.Ui.ToolBar({Id:n,ParentNode:this._toolBarsBlock}),u=t;u<i;u++)switch(this._btnsArr[u]){case"d":this._daysButton=new PP.Ui.ToolBarButton({Id:this._Id+"_DaysButton",GroupName:n+"_radioSet",Parent:r,ResourceKey:"mcDays",StateChanged:PP.Delegate(this._daysButtonClick,this)}),r.addItem(this._daysButton);break;case"w":this._weeksButton=new PP.Ui.ToolBarButton({Id:this._Id+"_WeeksButton",GroupName:n+"_radioSet",Parent:r,ResourceKey:"mcWeeks",StateChanged:PP.Delegate(this._weeksButtonClick,this)}),r.addItem(this._weeksButton);break;case"m":this._monthsButton=new PP.Ui.ToolBarButton({Id:this._Id+"_MonthsButton",GroupName:n+"_radioSet",Parent:r,ResourceKey:"mcMonths",StateChanged:PP.Delegate(this._monthsButtonClick,this)}),r.addItem(this._monthsButton);break;case"q":this._quartersButton=new PP.Ui.ToolBarButton({Id:this._Id+"_QuartersButton",GroupName:n+"_radioSet",Parent:r,ResourceKey:"mcQuarters",StateChanged:PP.Delegate(this._quartersButtonClick,this)}),r.addItem(this._quartersButton);break;case"h":this._halfYearsButton=new PP.Ui.ToolBarButton({Id:this._Id+"_HalfYearsButton",GroupName:n+"_radioSet",Parent:r,ResourceKey:"mcHalfYears",StateChanged:PP.Delegate(this._halfYearsButtonClick,this)}),r.addItem(this._halfYearsButton);break;case"y":this._yearsButton=new PP.Ui.ToolBarButton({Id:this._Id+"_YearsButton",GroupName:n+"_radioSet",Parent:r,ResourceKey:"mcYears",StateChanged:PP.Delegate(this._yearsButtonClick,this)}),r.addItem(this._yearsButton)}return r},MonCalP._getMonthsWeeks=function(n){var o,c;if(typeof n!="number")throw new Error("incorrect type");for(var t=new Date(n,0,1,0,0,0,0),s=this._Culture.WEEKMS,a=864e5,f=[[],[],[],[],[],[],[],[],[],[],[],[]],e=0,h,i;t.getFullYear()==n;){if(o=t.getMonth(),h=new Date(t.getTime()+s-1),c=h.getMonth(),o==c)i=f[o],i.push(e);else{for(var r=new Date(t.getTime()),u=r.getMonth(),l=0;u==r.getMonth();)l++,r=new Date(r.getTime()+a);l<=3&&u<11&&u++,i=f[u],i.push(e)}t=new Date(t.getTime()+s),e++}return f},MonCalP._bindEventsTitleButton=function(n,t){this._addEvents(n,{mousedown:this._onTitleButtonMouseDown,mouseup:this._onTitleButtonMouseUp,mouseout:this._onTitleButtonMouseOut,mouseover:this._onTitleButtonMouseOver,click:t})},MonCalP._bindEvents=function(){if(!this._isBind){PP.cultureChanged.add(this._onCultureChanged,this),this._daysTable&&this._addEvent(this._daysTable,"selectstart",this._onTableSelectStart),this._weeksTable&&this._addEvent(this._weeksTable,"selectstart",this._onTableSelectStart),this._prevMonthButton&&this._bindEventsTitleButton(this._prevMonthButton,this._onPrevMonthClick),this._prevYearButton&&this._bindEventsTitleButton(this._prevYearButton,this._onPrevYearClick),this._nextYearButton&&this._bindEventsTitleButton(this._nextYearButton,this._onNextYearClick),this._nextMonthButton&&this._bindEventsTitleButton(this._nextMonthButton,this._onNextMonthClick),this._nextHalfYearButton&&this._bindEventsTitleButton(this._nextHalfYearButton,this._onNextHalfYearClick),this._prevHalfYearButton&&this._bindEventsTitleButton(this._prevHalfYearButton,this._onPrevHalfYearClick);for(var i=this._weeksCellArr.length,t,n=0;n<i;n++)t=this._weeksCellArr[n],t.Week&&this._addEvents(t,{click:this._onWeekClick,mousedown:this._onDayOrWeekMouseDown,mouseup:this._onDayOrWeekMouseUp,mouseout:this._onDayOrWeekMouseOut,mouseover:this._onDayOrWeekMouseOver});for(i=this._daysCellArr.length,n=0;n<i;n++)t=this._daysCellArr[n],t.Day&&this._addEvents(t,{click:this._onDayClick,mousedown:this._onDayOrWeekMouseDown,mouseup:this._onDayOrWeekMouseUp,mouseout:this._onDayOrWeekMouseOut,mouseover:this._onDayOrWeekMouseOver});this._monthsNextButton&&this._bindEventsTitleButton(this._monthsNextButton,this._onMonthsNextClick),this._monthsPrevButton&&this._bindEventsTitleButton(this._monthsPrevButton,this._onMonthsPrevClick),this._isBind=!0}},MonCalP._unBindEvents=function(){if(this._isBind){PP.cultureChanged.remove(this._onCultureChanged,this),this._daysTable&&this._removeEvent(this._daysTable,"selectstart",this._onTableSelectStart),this._weeksTable&&this._removeEvent(this._weeksTable,"selectstart",this._onTableSelectStart),this._prevMonthButton&&this._removeAllEvents(this._prevMonthButton),this._prevYearButton&&this._removeAllEvents(this._prevYearButton),this._nextYearButton&&this._removeAllEvents(this._nextYearButton),this._nextMonthButton&&this._removeAllEvents(this._nextMonthButton),this._nextHalfYearButton&&this._removeAllEvents(this._nextHalfYearButton),this._prevHalfYearButton&&this._removeAllEvents(this._prevHalfYearButton);for(var i=this._weeksCellArr.length,t,n=0;n<i;n++)t=this._weeksCellArr[n],t.Week&&this._removeAllEvents(t);for(i=this._daysCellArr.length,n=0;n<i;n++)t=this._daysCellArr[n],t.Day&&this._removeAllEvents(t);this._monthsNextButton&&this._removeAllEvents(this._monthsNextButton),this._monthsPrevButton&&this._removeAllEvents(this._monthsPrevButton),this._isBind=!1}},MonCalP.setEnabled=function(n){return PP.Ui.MonthCalendar.base.setEnabled.call(this,n),this._DomNode.className=this._cssMainDiv+(this._Enabled?"":" "+this._cssMainDivDisabled),this._prevMonthButton&&(this._prevMonthButton.title=n?this._PreviousMonthName:""),this._prevYearButton&&(this._prevYearButton.title=n?this._PreviousYearName:""),this._nextYearButton&&(this._nextYearButton.title=n?this._NextYearName:""),this._nextMonthButton&&(this._nextMonthButton.title=n?this._NextMonthName:""),this._modeToolBars[0]&&this._modeToolBars[0].setEnabled(n),this._modeToolBars[1]&&this._modeToolBars[1].setEnabled(n),this._daysButton&&this._daysButton.setEnabled(n),this._weeksButton&&this._weeksButton.setEnabled(n),this._monthsButton&&this._monthsButton.setEnabled(n),this._hoursEdit&&this._hoursEdit.setEnabled(n),this._minutesEdit&&this._minutesEdit.setEnabled(n),this._nowButton&&this._nowButton.setEnabled(n),this._monthsPrevButton&&(this._monthsPrevButton.title=n?this._PreviousYearName:""),this._monthsNextButton&&(this._monthsNextButton.title=n?this._NextYearName:""),this},MonCalP.setIsRTL=function(n){if(n=n==!0,this._IsRTL!=n){PP.Ui.MonthCalendar.base.setIsRTL.call(this,n);for(var t=0;t<this._modeToolBars.length;t++)this._modeToolBars[t]&&this._modeToolBars[t].setIsRTL(n);this._hoursEdit&&this._hoursEdit.setIsRTL(n),this._minutesEdit&&this._minutesEdit.setIsRTL(n)}return this},MonCalP.setPreviousMonthName=function(n){return this._PreviousMonthName=n+"",this._Enabled&&this._prevMonthButton&&(this._prevMonthButton.title=this._PreviousMonthName),this},MonCalP.getPreviousMonthName=function(){return this._PreviousMonthName},MonCalP.setNextMonthName=function(n){return this._NextMonthName=n+"",this._Enabled&&this._nextMonthButton&&(this._nextMonthButton.title=this._NextMonthName),this},MonCalP.getNextMonthName=function(){return this._NextMonthName},MonCalP.setPreviousYearName=function(n){return this._PreviousYearName=n+"",this._Enabled&&(this._prevYearButton&&(this._prevYearButton.title=this._PreviousYearName),this._monthsPrevButton&&(this._monthsPrevButton.title=this._PreviousYearName)),this},MonCalP.getPreviousYearName=function(){return this._PreviousYearName},MonCalP.setNextYearName=function(n){return this._NextYearName=n+"",this._Enabled&&(this._nextYearButton&&(this._nextYearButton.title=this._NextYearName),this._monthsNextButton&&(this._monthsNextButton.title=this._NextYearName)),this},MonCalP.getNextYearName=function(){return this._NextYearName},MonCalP.getNextHalfYearName=function(){return this._NextHalfYearName},MonCalP.setNextHalfYearName=function(n){return this._NextHalfYearName=n+"",this._Enabled&&this._nextHalfYearButton&&(this._nextHalfYearButton.title=this._NextHalfYearName),this},MonCalP.getPreviousHalfYearName=function(){return this._PreviousHalfYearName},MonCalP.setPreviousHalfYearName=function(n){return this._PreviousHalfYearName=n+"",this._Enabled&&this._prevHalfYearButton&&(this._prevHalfYearButton.title=this._PreviousHalfYearName),this},MonCalP.getShowDaysButton=function(){return this._ShowDaysButton},MonCalP.setShowDaysButton=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowDaysButton!=n&&(this._ShowDaysButton=n,this._isBlockRender||this._refreshToolBarsBlock(),t&&this.ShowDaysButtonChanged.fire(this,new PP.EventArgs)),this},MonCalP.getShowWeeksButton=function(){return this._ShowWeeksButton},MonCalP.setShowWeeksButton=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowWeeksButton!=n&&(this._ShowWeeksButton=n,this._isBlockRender||this._refreshToolBarsBlock(),t&&this.ShowWeeksButtonChanged.fire(this,new PP.EventArgs)),this},MonCalP.getShowMonthsButton=function(){return this._ShowMonthsButton},MonCalP.setShowMonthsButton=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowMonthsButton!=n&&(this._ShowMonthsButton=n,this._isBlockRender||this._refreshToolBarsBlock(),t&&this.ShowMonthsButtonChanged.fire(this,new PP.EventArgs)),this},MonCalP.getShowQuartersButton=function(){return this._ShowQuartersButton},MonCalP.setShowQuartersButton=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowQuartersButton!=n&&(this._ShowQuartersButton=n,this._isBlockRender||this._refreshToolBarsBlock(),t&&this.ShowQuartersButtonChanged.fire(this,new PP.EventArgs)),this},MonCalP.getShowHalfYearsButton=function(){return this._ShowHalfYearsButton},MonCalP.setShowHalfYearsButton=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowHalfYearsButton!=n&&(this._ShowHalfYearsButton=n,this._isBlockRender||this._refreshToolBarsBlock(),t&&this.ShowHalfYearsButtonChanged.fire(this,new PP.EventArgs)),this},MonCalP.getShowNowButton=function(){return this._ShowNowButton},MonCalP.setShowNowButton=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowNowButton!=n&&(this._ShowNowButton=n,t&&this.ShowNowButtonChanged.fire(this,new PP.EventArgs),this._isBlockRender||this._render()),this},MonCalP.getShowTime=function(){return this._ShowTime},MonCalP.setShowTime=function(n,t){return t=typeof t=="undefined"?!0:t==!0,n=n==!0,this._ShowTime!=n&&(this._ShowTime=n,t&&this.ShowTimeChanged.fire(this,new PP.EventArgs),this._isBlockRender||this._render()),this},MonCalP.getCurrentDate=function(){return new Date(this.getCurrentYear(),this.getCurrentMonth(),this.getCurrentDay(),this.getCurrentHour(),this.getCurrentMinute(),0)},MonCalP.setCurrentDate=function(n,t){if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined"||n==null)n=new Date;else if(!(n instanceof Date))throw new Error("DateValue must be type of Date");if(this._isOutOfRange(n.getFullYear(),n.getMonth(),n.getDate()))throw new Error("DateValue must be between MinDate and MaxDate");var i=new PP.Ui.MonthCalendarEventArgs;return i.OldDate=this.getCurrentDate(),this._CurrentDate.setFullYear(n.getFullYear()),this._CurrentDate.setMonth(n.getMonth()),this._CurrentDate.setDate(n.getDate()),this._CurrentDate.setMonth(n.getMonth()),this._CurrentDate.setHours(n.getHours()),this._CurrentDate.setMinutes(n.getMinutes()),this._CurrentDate.setSeconds(0),this._CurrentDate.setMilliseconds(0),i.NewDate=this.getCurrentDate(),i.SkipRefresh=!1,t&&(this._raiseChangeEvent(i),this.CurrentDateChanged.fire(new PP.EventArgs)),i.SkipRefresh||this._isBlockRender||this._refreshOnSetDate(i.OldDate),this},MonCalP._refreshOnSetDate=function(n){var i=this.getCurrentYear(),f=this.getCurrentMonth(),v=this.getCurrentDay(),r=n.getFullYear(),h=n.getMonth(),y=n.getDate(),t,u,e,c,o,l;switch(this._Mode){case PP.Ui.MonthCalendar.Mode.Months:i==r?f!=h&&(t=this._ribbonsArr[f],t.setIsPressed(!0),t!=this._lastPressedMonthRibbon&&(this._lastPressedMonthRibbon.setIsPressed(!1),this._lastPressedMonthRibbon=t)):this._refreshModeBlock();break;case PP.Ui.MonthCalendar.Mode.Quarters:i==r?(e=this.getCurrentQuarter(),c=Math.floor(n.getMonth()/3),e!=c&&(t=this._ribbonsArr[e],t.setIsPressed(!0),t!=this._lastPressedQuarterRibbon&&(this._lastPressedQuarterRibbon.setIsPressed(!1),this._lastPressedQuarterRibbon=t))):this._refreshModeBlock();break;case PP.Ui.MonthCalendar.Mode.HalfYears:i==r?(o=this.getCurrentHalfYear(),l=Math.floor(n.getMonth()/6),o!=l&&(t=this._ribbonsArr[o],t.setIsPressed(!0),t!=this._lastPressedHalfYearRibbon&&(this._lastPressedHalfYearRibbon.setIsPressed(!1),this._lastPressedHalfYearRibbon=t))):this._refreshModeBlock();break;case PP.Ui.MonthCalendar.Mode.Days:i==r&&f==h?v!=y&&(u=this._getDayCellByNo(v),this._setAciveDayCell(u)):this._refreshModeBlock();break;case PP.Ui.MonthCalendar.Mode.Weeks:var s=this.getCurrentWeek(),a=this._Culture.getWeekNumber(n),p=s<26,w=a<26;i==r&&p==w?s!=a&&(u=this._getWeekCellByNo(s),this._setAciveWeekCell(u)):this._refreshModeBlock()}this._refreshTimeEditors()},MonCalP._getDayCellByNo=function(n){for(var r=this._daysCellArr.length,t,i=0;i<r;i++)if(t=this._daysCellArr[i],t.Day&&t.Day.IsCurrentMonth&&t.Day.No==n)return t;return null},MonCalP._getWeekCellByNo=function(n){for(var r=this._weeksCellArr.length,i,t=0;t<r;t++)if(i=this._weeksCellArr[t],i.Week&&i.Week.No==n)return i;return null},MonCalP.getCurrentYear=function(){return this._CurrentDate.getFullYear()},MonCalP._setCurrentYear=function(n){var t,i;typeof n=="string"?(t=0,n.indexOf("+")==0&&(t=1),n.indexOf("-")==0&&(t=-1),0!=t&&(i=parseInt(n.substring(1,n.length),10),this._CurrentDate.setFullYear(this.getCurrentYear()+t*i))):this._CurrentDate.setFullYear(n)},MonCalP.getCurrentMonth=function(){return this._CurrentDate.getMonth()},MonCalP._setCurrentMonth=function(n){var r,t,u,i;if(typeof n=="string"){if(r=0,n.indexOf("+")==0&&(r=1),n.indexOf("-")==0&&(r=-1),0!=r){for(u=parseInt(n.substring(1,n.length),10),i=this.getCurrentMonth()+r*u;i<0;)i+=12,t=this.getCurrentYear(),t--,this._CurrentDate.setFullYear(t);while(i>=12)i-=12,t=this.getCurrentYear(),t++,this._CurrentDate.setFullYear(t);this._CurrentDate.setMonth(i)}}else this._CurrentDate.setMonth(n)},MonCalP.getCurrentWeek=function(){return this._Culture.getWeekNumber(this._CurrentDate)},MonCalP.getCurrentQuarter=function(){return Math.floor(this.getCurrentMonth()/3)},MonCalP.getCurrentHalfYear=function(){return Math.floor(this.getCurrentMonth()/6)},MonCalP.getCurrentDay=function(){return this._CurrentDate.getDate()},MonCalP._setCurrentDay=function(n){var t,i,r;typeof n=="string"?(t=0,n.indexOf("+")==0&&(t=1),n.indexOf("-")==0&&(t=-1),0!=t&&(i=parseInt(n.substring(1,n.length),10),r=this.getCurrentDay()+t*i,this._CurrentDate.setDate(r))):this._CurrentDate.setDate(n)},MonCalP.getCurrentHour=function(){return this._CurrentDate.getHours()},MonCalP._setCurrentHour=function(n){if(typeof n!="number")throw new Error("incorrect type of hours");if(n>23||n<0)throw new Error("incorrect value of hours");this._CurrentDate.setHours(n)},MonCalP.getCurrentMinute=function(){return this._CurrentDate.getMinutes()},MonCalP._setCurrentMinute=function(n){if(typeof n!="number")throw new Error("incorrect type of minutes");if(n>59||n<0)throw new Error("incorrect value of minutes");this._CurrentDate.setMinutes(n)},MonCalP.getMinDate=function(){var n=this._MinDate.getFullYear(),t=this._MinDate.getMonth(),i=this._MinDate.getDate(),r=this._MinDate.getHours(),u=this._MinDate.getMinutes();return new Date(n,t,i,r,u)},MonCalP.setMinDate=function(n,t){var i;if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined"||n==null)throw new Error("Param of property setMinDate can't be null");if(!(n instanceof Date))throw new Error("param of property setMinDate must be type of Date");var u=n.getFullYear(),f=n.getMonth(),e=n.getDate(),o=n.getHours(),s=n.getMinutes(),r=new Date(u,f,e,o,s,0);if(r.getTime()>this._MaxDate.getTime())throw new Error("New value of MinDate can't be more then MaxDate");return r.getTime()>this.getCurrentDate().getTime()&&(this._CurrentDate=new Date(r.getTime())),i=new Date,i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),this._nowButton&&(r.getTime()>i.getTime()?this._nowButton.setEnabled(!1):this._MaxDate.getTime()>=i.getTime()&&this._nowButton.setEnabled(!0)),this._MinDate=r,t&&this.MinDateChanged.fire(this,new PP.EventArgs),this._isBlockRender||this._render(),this},MonCalP.getMaxDate=function(){var n=this._MaxDate.getFullYear(),t=this._MaxDate.getMonth(),i=this._MaxDate.getDate(),r=this._MaxDate.getHours(),u=this._MaxDate.getMinutes();return new Date(n,t,i,r,u)},MonCalP.setMaxDate=function(n,t){var i;if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined"||n==null)throw new Error("Param of property setMaxDate can't be null");if(!(n instanceof Date))throw new Error("param of property setMaxDate must be type of Date");var u=n.getFullYear(),f=n.getMonth(),e=n.getDate(),o=n.getHours(),s=n.getMinutes(),r=new Date(u,f,e,o,s,0);if(r.getTime()<this._MinDate.getTime())throw new Error("New value of MaxDate can't be less then MinDate");return r.getTime()<this.getCurrentDate().getTime()&&(this._CurrentDate=new Date(r.getTime())),i=new Date,i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),this._nowButton&&(r.getTime()<i.getTime()?this._nowButton.setEnabled(!1):this._MinDate.getTime()<=i.getTime()&&this._nowButton.setEnabled(!0)),this._MaxDate=r,t&&this.MaxDateChanged.fire(this,new PP.EventArgs),this._isBlockRender||this._render(),this},MonCalP.getMode=function(){return this._Mode},MonCalP.setMode=function(n,t){if(t=typeof t=="undefined"?!0:t==!0,typeof n!="number"||n!=PP.Ui.MonthCalendar.Mode.Days&&n!=PP.Ui.MonthCalendar.Mode.Weeks&&n!=PP.Ui.MonthCalendar.Mode.Months&&n!=PP.Ui.MonthCalendar.Mode.Quarters&&n!=PP.Ui.MonthCalendar.Mode.HalfYears)throw new Error("Wrong mode of MonthCaledar");if(n!=this._Mode){if(this._Mode=n,t){var i=new PP.EventArgs;i.NewValue=this._Mode,this._raiseModeChanged(i)}this._isBlockRender||this._render()}},MonCalP.updateSize=function(){var e,l,v;PP.Ui.MonthCalendar.base.updateSize.apply(this,arguments);for(var o=this._modeToolBars,s=o.length,u,a=[],h,c=[],r,f,t,i,n=0;n<s;n++){for(h=0,u=0,r=o[n].getItems(),f=r.length,i=0;i<f;i++)t=r[i],t.getIsVisible()&&(h++,t.setWidth(null),t.getWidth()>u&&(u=t.getWidth()),t.setWidth(null));a.push(u),c.push(h)}for(e=0,n=0;n<s;n++)l=a[n]*c[n],l>e&&(e=l);for(n=0;n<s;n++)for(r=o[n].getItems(),f=r.length,v=e/c[n],i=0;i<f;i++)t=r[i],t.getIsVisible()&&t.setWidth(v)},MonCalP.addToNode=function(){PP.Ui.MonthCalendar.base.addToNode.apply(this,arguments),this.updateSize()},MonCalP.dispose=function(){this.isLive()&&(this._DomNode.innerHTML="",PP.Ui.MonthCalendar.base.dispose.call(this))},MonCalP=null,PP.Ui.MonthCalendarEventArgs=function(){PP.Ui.MonthCalendarEventArgs.base.constructor.apply(this,arguments),this.OldDate=null,this.NewDate=null,this.SkipRefresh=!1},PP.initClass(PP.Ui.MonthCalendarEventArgs,PP.EventArgs,"MonthCalendarEventArgs"),PP.Ui.MonthCalendarSelectArgs=function(){PP.Ui.MonthCalendarSelectArgs.base.constructor.apply(this,arguments),this.Index=0,this.Cancel=!1},PP.initClass(PP.Ui.MonthCalendarSelectArgs,PP.EventArgs,"MonthCalendarSelectArgs"),PP.Ui.MonthCalendarSelectDayArgs=function(){PP.Ui.MonthCalendarSelectDayArgs.base.constructor.apply(this,arguments),this.Day=null},PP.initClass(PP.Ui.MonthCalendarSelectDayArgs,PP.Ui.MonthCalendarSelectArgs,"MonthCalendarSelectDayArgs"),PP.Ui.MonthCalendarSelectWeekArgs=function(){PP.Ui.MonthCalendarSelectWeekArgs.base.constructor.apply(this,arguments),this.Week=null,this.Cancel=!1},PP.initClass(PP.Ui.MonthCalendarSelectWeekArgs,PP.Ui.MonthCalendarSelectArgs,"MonthCalendarSelectWeekArgs"),PP.Ui.MonthCalendar.Mode={Days:0,Weeks:1,Months:2,Quarters:3,HalfYears:4,Years:5},PP.Ui.DateTimeEdit=function(n){var i,t;if(this._ShowTime=this._ShowDate=!0,this._CurrentDate=this._lastSelected=this._Culture=null,this._Mode=PP.Ui.DateTimeEdit.Mode.Days,this._RevertToPrevious=!1,this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear"),this._TextAfterMonth=PP.resourceManager.getString("dateTimeEditTextAfterMonth"),this._TextAfterWeek=PP.resourceManager.getString("dateTimeEditTextAfterWeek"),this._TextAfterQuarter=PP.resourceManager.getString("dateTimeEditTextAfterQuarter"),this._TextAfterHalfYear=PP.resourceManager.getString("dateTimeEditTextAfterHalfYear"),this._MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December",],this._caretPosItem=this._Mode==PP.Ui.DateTimeEdit.Mode.Days?!this._ShowDate&&this._ShowTime?"d":"h":this._Mode==PP.Ui.DateTimeEdit.Mode.Years?"y":"v",this._renderCounter=0,this._valueBeforeFocus="",this._MinDate=new Date(1e3,0,1,0,0,0,0),this._MaxDate=new Date(9999,11,31,23,59,0,0),this._defineEvents(["DateTimeChange","DateTimeChanged"]),PP.Ui.DateTimeEdit.base.constructor.apply(this,arguments),!this._ShowTime&&!this._ShowDate)throw new Error("ShowDate and ShowTime can not be false at the same time");if(n&&n.CurrentDate&&(this._CurrentDate=new Date(n.CurrentDate.getFullYear(),n.CurrentDate.getMonth(),n.CurrentDate.getDate(),n.CurrentDate.getHours(),n.CurrentDate.getMinutes())),this._CurrentDate||(this._CurrentDate=new Date),PP.getCurrentCulture&&(i=PP.getCurrentCulture(),i&&(this._Culture=i)),this._Culture&&this._Culture instanceof PP.CultureInfo||(this._Culture=new PP.CultureInfo),this._MonthNames==null||this._MonthNames.length==0)for(this._MonthNames=[],t=0;t<this._Culture.MonthNames.length;t++)this._MonthNames.push(this._Culture.MonthNames[t]+"");this.setContent(this._getCurrDateAsText()),this._EditorValue=this.getContent(),this._inserted={d:null,m:null,y:null,h:null,n:null,v:null},this._dateBeforeFocus=null},PP.initClass(PP.Ui.DateTimeEdit,PP.Ui.SpinEdit,"DateTimeEdit"),DTEditP=PP.Ui.DateTimeEdit.prototype,DTEditP._bindEvents=function(){this._isBind||(PP.Ui.DateTimeEdit.base._bindEvents.call(this),this._addEvents(this._input,{dragstart:this._onDragStartInput,select:this._onSelectInput,selectstart:this._onSelectStartInput,paste:this._onPasteInput}))},DTEditP._unBindEvents=function(){PP.Ui.DateTimeEdit.base._unBindEvents.call(this),this._removeAllEvents(this._input)},DTEditP._beginRender=function(){this._renderCounter==0&&(this._caretPosItem=this._getCaretPosItem(),this._oldValue=this.getContent(),this._oldDate=this.getCurrentDate()),this._renderCounter++},DTEditP._endRender=function(n,t){var i,r,u;this._renderCounter--,typeof n=="string"&&(this._EditorValue=n),this._renderCounter<=0&&(this._renderCounter=0,i=this._oldValue,r=this._EditorValue,i!=r&&(this.setContent(this._EditorValue,t),this._renderCounter++,u=this._checkDateTimeValid(!0,t),this._renderCounter--,u?this.applyValidCSS():this.applyNotValidCSS()),this._setCaretPosItem(this._caretPosItem))},DTEditP._setFromResources=function(){var i,n,r,t;if(PP.resourceManager){for(i=this.getMonthNames(),n=0;n<=11;n++)r="dateTimeEditMonthNames"+(n+1).toString(),t=PP.resourceManager.getString(r),t!=null&&typeof t=="string"&&(i[n]=t);this.setMonthNames(i)}},DTEditP._onCultureChanged=function(){PP.Ui.DateTimeEdit.base._onCultureChanged.apply(this,arguments);var i=PP.getCurrentCulture();this._Culture=i,this._setFromResources(),this.refresh()},DTEditP._onDragStartInput=function(){return!1},DTEditP._onFocusInput=function(){return this._EnableEdit?(this._valueBeforeFocus=this.getContent(),this._focused=!0,this._beginRender(),this._lastSelected&&!this._focusFromOut?this._caretPosItem=this._lastSelected:this._focusFromMouse?this._caretPosItem=this._getCaretPosItem():this._setStartPos(),this._focusFromMouse=!1,this._endRender(),this._focusFromOut=!0,this._dateBeforeFocus=this.getCurrentDate(),this._raiseFocus(new PP.EventArgs),!1):!1},DTEditP._onBlurInput=function(n,t){var r,i;this._EnableEdit&&this._focused&&(this._focused=!1,this._validate(this._RevertToPrevious?this._dateBeforeFocus:null),this._raiseBlur(t),r=this.getCurrentDate(),(this._dateBeforeFocus==null||this._dateBeforeFocus.getTime()!=r.getTime())&&(i=new PP.DateTimeChangeEventArgs,i.OldDate=this._dateBeforeFocus,i.NewDate=this.getCurrentDate(),this._raiseDateTimeChangedEvent(i)),this._dateBeforeFocus=null)},DTEditP._onKeyDownInput=function(n,t){var u,s,r,i,f,o,e,h,c;if(this._EnableEdit&&(u=t.Event,o=u.keyCode?u.keyCode:u.which,this._ShowDate!=!0||!u.altKey||u.keyCode!=40)){if(u.shiftKey)return o===9?(this._renderCounter=0,this._focusFromOut=!0,navigator.userAgent.indexOf(" Firefox/")>-1&&this._input.blur(),!0):!1;switch(o){case 9:return this._renderCounter=0,this._focusFromOut=!0,navigator.userAgent.indexOf(" Firefox/")>-1&&this._input.blur(),!0;case 13:case 27:return this._validate(this._RevertToPrevious?this._dateBeforeFocus:null),!0;case 8:return this._beginRender(),i=this._caretPosItem,e=this._getEditorSymbols(i),e="0"+e,h=2,i=="y"&&(h=4),e.length>h&&(e=e.substr(0,h)),this._setEditorSymbols(i,e),this._endRender(),!1;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return(this._caretPosItem=="y"||this._Mode==PP.Ui.DateTimeEdit.Mode.Days||this._Mode==PP.Ui.DateTimeEdit.Mode.Weeks)&&(s=o-48,this._addCharacter(s)),!1;case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:return(this._caretPosItem=="y"||this._Mode==PP.Ui.DateTimeEdit.Mode.Days||this._Mode==PP.Ui.DateTimeEdit.Mode.Weeks)&&(s=o-96,this._addCharacter(s)),!1;case 37:return this._beginRender(),f=!0,this._Mode==PP.Ui.DateTimeEdit.Mode.Days?(r=this._Culture.DateOrder,this._ShowTime&&(r+="hn",this._Culture.Hour24Mode||(r+="a")),i=r.indexOf(this._caretPosItem),i>0?i--:i=r.length-1,f&&(this._caretPosItem=r.substr(i,1),this._validate(this._RevertToPrevious?this._dateBeforeFocus:null))):this._caretPosItem=="y"&&this._Mode!=PP.Ui.DateTimeEdit.Mode.Years?(this._caretPosItem="v",this._validate(this._RevertToPrevious?this._dateBeforeFocus:null)):f=!1,this._endRender(),f;case 39:case 109:case 110:case 111:case 189:case 190:case 191:return this._beginRender(),f=!0,this._Mode==PP.Ui.DateTimeEdit.Mode.Days?(c=this._caretPosItem,r=this._Culture.DateOrder,this._ShowTime&&(r+="hn",this._Culture.Hour24Mode||(r+="a")),i=r.indexOf(c),i<r.length-1?i++:i=0,f&&(this._caretPosItem=r.substr(i,1),this._validate(this._RevertToPrevious?this._dateBeforeFocus:null))):this._caretPosItem=="v"?(this._caretPosItem="y",this._validate(this._RevertToPrevious?this._dateBeforeFocus:null)):f=!1,this._endRender(),f;case 38:return this._raiseSpinEvent(!0),!1;case 40:if(!u.altKey)return this._raiseSpinEvent(!1),!1}return!1}},DTEditP._onKeyPressInput=function(){return!1},DTEditP._onKeyUpInput=function(n,t){if(!this._EnableEdit){t.Event.preventDefault();return}return this._selectNumber(),!1},DTEditP._onMouseDownInput=function(n,t){if(!this._EnableEdit){t.Event.preventDefault();return}return this._focusFromMouse=!0,t.Event.which!=1&&(document.selection&&this._input.blur(),this._addEvent(document.documentElement,"mouseup",this._onMouseUpInput),this._input.setAttribute("readonly","readonly")),document.selection||(this.SelectionLocked=!1,this._input.selectionEnd=this._input.selectionStart,this.SelectionLocked=!0),!0},DTEditP._onMouseUpInput=function(n,t){return this._EnableEdit?this._input.disabled?!1:(t.Event.which!=1&&(document.selection&&this._input.focus(),this._removeEvent(document.documentElement,"mouseup",this._onMouseUpInput),this._input.removeAttribute("readonly")),this._selectNumber(),!0):!1},DTEditP._onSelectInput=function(){return!1},DTEditP._onSelectStartInput=function(){return this._EnableEdit?!this.SelectionLocked:!1},DTEditP._onPasteInput=function(){return!1},DTEditP._onMouseWheelInput=function(n,t){var i,r,u,f;if(!this._EnableEdit)return!1;if(i=t.Event,i.detail){if(typeof window.lockWheel=="undefined"&&(window.lockWheel=!1),window.lockWheel==!0)return;window.lockWheel=!0,PP.setTimeout(this._lockWheel,50)}return(r=t.Event.sourceElement,r.disabled)?!1:this._focused?(u=i.detail?i.detail*-120:i.wheelDelta,f=u<0,this._xCrease(!f),!1):!0},DTEditP._lockWheel=function(){window.lockWheel=!1},DTEditP._addCharacter=function(n){var r,t,i,u;this._beginRender(),r=this._caretPosItem,t=this._getEditorSymbols(r),t+=n,i=parseInt(t,10);switch(r){case"h":if(this._Culture.Hour24Mode){while(i>23)t=t.substring(1,t.length),i=parseInt(t,10);while(t.indexOf("0")==0&&t.length>1)t=t.substring(1,t.length)}else while(i>12)t=t.substring(1,t.length),i=parseInt(t,10);break;case"n":while(i>60)t=t.substring(1,t.length),i=parseInt(t,10);t.length<2&&(t="0"+t)}u=this._getItemMaxLength(r),t.length>u&&(t=t.substr(t.length-u,u)),this._setEditorSymbols(r,t),this._endRender()},DTEditP._getItemMaxLength=function(n){switch(n){case"d":case"m":case"h":case"n":return 2;case"y":return 4;case"v":if(this._Mode==PP.Ui.DateTimeEdit.Mode.Weeks)return 2}return 0},DTEditP._getCaretPosItem=function(){var n=this._getCaretPos(),f,i=this._EditorValue,e,o,r,s,h,c,l,t,u,a;if(this._Mode==PP.Ui.DateTimeEdit.Mode.Days){if(e=!this._ShowTime,o=!this._ShowDate,o)return!this._Culture.Hour24Mode&&(r=i.lastIndexOf(" "),r!=f&&n>r)?"a":(l=i.indexOf(this._Culture.TimeSeparator),n<=l?"h":"n");if(!e&&(f=i.indexOf(" "),n<=f&&(e=!0),!e))return!this._Culture.Hour24Mode&&(r=i.lastIndexOf(" "),r!=f&&n>r)?"a":(s=i.indexOf(this._Culture.TimeSeparator,f),n<=s)?"h":"n";if(e)return(h=i.indexOf(this._Culture.DateSeparator),c=i.lastIndexOf(this._Culture.DateSeparator),n<=h)?this._Culture.DateOrder.substr(0,1):n<=c?this._Culture.DateOrder.substr(1,1):this._Culture.DateOrder.substr(2,1)}else{t=0,u=0;switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Months:t=this._getCurrentMonthName().length,this._TextAfterMonth||(this._TextAfterMonth=PP.resourceManager.getString("dateTimeEditTextAfterMonth")),u=this._TextAfterMonth.length;break;case PP.Ui.DateTimeEdit.Mode.Weeks:t=this._inserted.v!=null?this._inserted.v.length:this._getItemMaxLength("v"),this._TextAfterWeek||(this._TextAfterWeek=PP.resourceManager.getString("dateTimeEditTextAfterWeek")),u=this._TextAfterWeek.length;break;case PP.Ui.DateTimeEdit.Mode.Quarters:t=this._getCurrentQuarterName().length,this._TextAfterQuarter||(this._TextAfterQuarter=PP.resourceManager.getString("dateTimeEditTextAfterQuarter")),u=this._TextAfterQuarter.length;break;case PP.Ui.DateTimeEdit.Mode.HalfYears:t=this._getCurrentHalfYearName().length,this._TextAfterHalfYear||(this._TextAfterHalfYear=PP.resourceManager.getString("dateTimeEditTextAfterHalfYear")),u=this._TextAfterHalfYear.length;break;case PP.Ui.DateTimeEdit.Mode.Years:return"y"}return this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),a=n<t||n>=t&&n<t+u?"v":"y"}},DTEditP._setCaretPosItem=function(n){var h,l,u,t,i,r,f,e,o,s,c,a;if(this._focused){if(this._Mode==PP.Ui.DateTimeEdit.Mode.Days)if(document.selection){if(this._input.focus(),t=this._EditorValue,i=this._input.createTextRange(),i.moveStart("character",-t.length),i.moveEnd("character",-t.length),this._ShowDate&&(r=t.indexOf(" "),r<0&&(r=t.length)),this._ShowTime&&"hna".indexOf(n)>=0){f=t.indexOf(this._Culture.TimeSeparator,r),u=t.length,this._Culture.Hour24Mode||(u=t.lastIndexOf(" "));switch(n){case"h":i.moveStart("character",r+1),i.moveEnd("character",f-r-1);break;case"n":i.moveStart("character",f+1),i.moveEnd("character",u-f-1);break;case"a":i.moveStart("character",u+1),i.moveEnd("character",t.length)}this.SelectionLocked=!1,i.select(),this.SelectionLocked=!0,this._lastSelected=n;return}if(this._ShowDate){e=t.indexOf(this._Culture.DateSeparator),o=t.lastIndexOf(this._Culture.DateSeparator);switch(this._Culture.DateOrder.indexOf(n)){case 0:i.moveEnd("character",e);break;case 1:i.moveStart("character",e+1),i.moveEnd("character",o-e-1);break;default:i.moveStart("character",o+1),i.moveEnd("character",r-o-1)}this.SelectionLocked=!1,i.select(),this.SelectionLocked=!0}}else{if(this._input.focus(),t=this._EditorValue,this._ShowDate&&(r=t.indexOf(" "),r<0&&(r=t.length)),this._ShowTime&&"hna".indexOf(n)>=0){f=t.indexOf(this._Culture.TimeSeparator,r),u=t.length,this._Culture.Hour24Mode||(u=t.lastIndexOf(" ")),this.SelectionLocked=!1;switch(n){case"h":this._input.selectionStart=r+1,this._input.selectionEnd=f;break;case"n":this._input.selectionStart=f+1,this._input.selectionEnd=u;break;case"a":this._input.selectionStart=u+1,this._input.selectionEnd=t.length}this.SelectionLocked=!0,this._lastSelected=n;return}if(this._ShowDate){e=t.indexOf(this._Culture.DateSeparator),o=t.lastIndexOf(this._Culture.DateSeparator),this.SelectionLocked=!1;switch(this._Culture.DateOrder.indexOf(n)){case 0:this._input.selectionStart=0,this._input.selectionEnd=e;break;case 1:this._input.selectionStart=e+1,this._input.selectionEnd=o;break;default:this._input.selectionStart=o+1,this._input.selectionEnd=r}this.SelectionLocked=!0}}else{this._input.focus(),t=this._EditorValue;switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Months:s=this._getCurrentMonthName().length,this._TextAfterMonth||(this._TextAfterMonth=PP.resourceManager.getString("dateTimeEditTextAfterMonth")),c=this._TextAfterMonth.length;break;case PP.Ui.DateTimeEdit.Mode.Weeks:s=this._inserted.v!=null?this._inserted.v.length:(this.getCurrentWeek()+1).toString().length,this._TextAfterWeek||(this._TextAfterWeek=PP.resourceManager.getString("dateTimeEditTextAfterWeek")),c=this._TextAfterWeek.length;break;case PP.Ui.DateTimeEdit.Mode.Quarters:s=this._getCurrentQuarterName().length,this._TextAfterQuarter||(this._TextAfterQuarter=PP.resourceManager.getString("dateTimeEditTextAfterQuarter")),c=this._TextAfterQuarter.length;break;case PP.Ui.DateTimeEdit.Mode.HalfYears:s=this._getCurrentHalfYearName().length,this._TextAfterHalfYear||(this._TextAfterHalfYear=PP.resourceManager.getString("dateTimeEditTextAfterHalfYear")),c=this._TextAfterHalfYear.length;break;case PP.Ui.DateTimeEdit.Mode.Years:s=0,c=0}a=this._inserted.y!=null?this._inserted.y.length:this._getItemMaxLength("y"),this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear"));switch(n){case"v":case null:h=0,l=s;break;case"y":h=s+c,l=h+a}document.selection?(i=this._input.createTextRange(),i.moveStart("character",-t.length),i.moveEnd("character",-t.length),i.moveStart("character",h),i.moveEnd("character",l-h),this.SelectionLocked=!1,i.select(),this.SelectionLocked=!0):(this._input.selectionStart=h,this._input.selectionEnd=l)}this._lastSelected=n}},DTEditP._setStartPos=function(){var n="";return this._Mode==PP.Ui.DateTimeEdit.Mode.Days?(this._beginRender(),n=this._ShowDate?this._Culture.DateOrder.substring(0,1):this._ShowTime?"h":this._selectNumber(),this._caretPosItem=n,this._endRender()):this._Mode==PP.Ui.DateTimeEdit.Mode.Years?(n="y",this._caretPosItem=n):(n="v",this._caretPosItem=n),this._upDownPressed=!1,n},DTEditP._selectNumber=function(){if(this._Mode==PP.Ui.DateTimeEdit.Mode.Days){this._beginRender();var n=this._caretPosItem;return this._endRender(),n}this._caretPosItem=this._getCaretPosItem(),this._setCaretPosItem(this._caretPosItem)},DTEditP._getEditorSymbols=function(n){var r,t,i,f,e,u,c;if(this._renderCounter==0)throw"Method _GetEditorSymbols() must be called between _BeginRender() and _EndRender() methods";r=this._inserted.y!=null?this._inserted.y.length:this._getItemMaxLength("y");switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Days:if("dmy".indexOf(n)>=0){t=this._EditorValue;var o=t.indexOf(this._Culture.DateSeparator),s=t.lastIndexOf(this._Culture.DateSeparator),h=t.length;this._ShowTime&&(h=t.indexOf(" "));switch(this._Culture.DateOrder.indexOf(n)){case 0:return t.substring(0,o);case 1:return t.substring(o+1,s);default:return t.substring(s+1,h)}}if("hna".indexOf(n)>=0){if(t=this._EditorValue,i=t.split(" "),this._ShowDate){if(i.length<2)return"";t=i[1]}else t=i[0];f=t.split(this._Culture.TimeSeparator);switch(n){case"h":return f[0];case"n":return f[1];case"a":return this._ShowDate?i[2]:i[1]}}break;case PP.Ui.DateTimeEdit.Mode.Weeks:case PP.Ui.DateTimeEdit.Mode.Months:case PP.Ui.DateTimeEdit.Mode.Quarters:case PP.Ui.DateTimeEdit.Mode.HalfYears:case PP.Ui.DateTimeEdit.Mode.Years:e=0,u=0;switch(n){case"v":this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),u=this._EditorValue.length-this._TextAfterYear.length-r-this._getTextAfterValue().length;break;case"y":this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),e=this._EditorValue.length-this._TextAfterYear.length-r,u=r}return c=this._EditorValue.substr(e,u)}return""},DTEditP._setEditorSymbols=function(n,t,i){var o,u,r,e,f;this._beginRender(),i||(o=this._caretPosItem),u="";switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Days:for(r={d:this._getEditorSymbols("d"),m:this._getEditorSymbols("m"),y:this._getEditorSymbols("y")},this._ShowTime&&(r.h=this._getEditorSymbols("h"),r.n=this._getEditorSymbols("n"),this._Culture.Hour24Mode||(r.a=this._getEditorSymbols("a"))),r[n]=t,e=[],f=0;f<3;f++)e[f]=r[this._Culture.DateOrder.substr(f,1)];u=e.join(this._Culture.DateSeparator),this._ShowDate?this._ShowTime&&(u+=" "+r.h+this._Culture.TimeSeparator+r.n,this._Culture.Hour24Mode||(u+=" "+r.a)):(u=r.h+this._Culture.TimeSeparator+r.n,this._Culture.Hour24Mode||(u+=" "+r.a));break;case PP.Ui.DateTimeEdit.Mode.Weeks:case PP.Ui.DateTimeEdit.Mode.Months:case PP.Ui.DateTimeEdit.Mode.Quarters:case PP.Ui.DateTimeEdit.Mode.HalfYears:r={v:this._getEditorSymbols("v"),y:this._getEditorSymbols("y")},r[n]=t,this._inserted[n]=t,this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),u=[r.v,this._getTextAfterValue(),r.y,this._TextAfterYear].join("");break;case PP.Ui.DateTimeEdit.Mode.Years:this._inserted[n]=t,this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),u=t+this._TextAfterYear}i||(this._caretPosItem=o),this._endRender(u)},DTEditP._setCurrentItem=function(n,t){if(this._beginRender(),this._Mode==PP.Ui.DateTimeEdit.Mode.Days)switch(n){case"d":this._setCurrentDay(t);break;case"m":this._setCurrentMonth(t);break;case"y":this._setCurrentYear(t);break;case"h":this._setCurrentHour(t);break;case"n":this._setCurrentMinute(t);break;case"a":this._invertAmFlag();break;default:return}else switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Weeks:if(n=="v")this._setCurrentWeek(t);else if(n=="y"){var i=this.getCurrentWeek();this._setCurrentYear(t),i!=this.getCurrentWeek()&&this._setCurrentWeek(i)}break;case PP.Ui.DateTimeEdit.Mode.Months:n=="v"?this._setCurrentMonth(t):n=="y"&&this._setCurrentYear(t);break;case PP.Ui.DateTimeEdit.Mode.Quarters:n=="v"?this._setCurrentQuarter(t):n=="y"&&this._setCurrentYear(t);break;case PP.Ui.DateTimeEdit.Mode.HalfYears:n=="v"?this._setCurrentHalfYear(t):n=="y"&&this._setCurrentYear(t);break;case PP.Ui.DateTimeEdit.Mode.Years:n=="y"&&this._setCurrentYear(t)}this._caretPosItem=n,this._endRender(this._getCurrDateAsText())},DTEditP._validate=function(n){var g,k,b,y,d,p,c,v,w;this._beginRender();var nt=this._caretPosItem,t=this.getCurrentYear(),i=this.getCurrentMonth()+1,r=this.getCurrentDay(),f=this.getCurrentHour(),u=this.getCurrentMinute(),a="",s=n&&n instanceof Date;if(this._Mode==PP.Ui.DateTimeEdit.Mode.Days){if(this._ShowDate){for(r=this._getEditorSymbols("d")+"";r.indexOf("0")==0;)r=r.substr(1,r.length-1);for(r=parseInt(r,10),isNaN(r)&&(r=1),i=this._getEditorSymbols("m")+"";i.indexOf("0")==0;)i=i.substr(1,i.length-1);for(i=parseInt(i,10),isNaN(i)&&(i=1),t=this._getEditorSymbols("y")+"";t.indexOf("0")==0;)t=t.substr(1,t.length-1);t=parseInt(t,10),isNaN(t)&&(t=(new Date).getFullYear())}if(this._ShowTime){for(f=this._getEditorSymbols("h")+"",u=this._getEditorSymbols("n")+"";u.indexOf("0")==0&&u.length>1;)u=u.substring(1,u.length);u=parseInt(u,10),u=u%60,this._Culture.Hour24Mode?(f=parseInt(f,10),f=f%24):(g=this._getEditorSymbols("a")+"",f=parseInt(f,10),f=f%12,f==0&&(f=12),f=this._Culture.to24hMode(f,g.toLowerCase()!=this._Culture.TimeAmPm[1].toLowerCase()))}if(r<1&&(r=1),i<1&&(i=1),i>12&&(i=12),t<100&&(t=t>=50?1900+t:2e3+t),k=new Date(t,i-1,r,f,u,0),k.getTime()<this._MinDate.getTime()&&(t=s?n.getFullYear():this._MinDate.getFullYear(),i=s?n.getMonth()+1:this._MinDate.getMonth()+1,r=s?n.getDate():this._MinDate.getDate(),f=s?n.getHours():this._MinDate.getHours(),u=s?n.getMinutes():this._MinDate.getMinutes()),k.getTime()>this._MaxDate.getTime()&&(t=s?n.getFullYear():this._MaxDate.getFullYear(),i=s?n.getMonth()+1:this._MaxDate.getMonth()+1,r=s?n.getDate():this._MaxDate.getDate(),f=s?n.getHours():this._MaxDate.getHours(),u=s?n.getMinutes():this._MaxDate.getMinutes()),b=this._Culture.getDaysInMonth(i-1,t),r>b&&(r=b),this._setCurrentDay(r),this._setCurrentMonth(i-1),this._setCurrentYear(t),this._setCurrentMinute(parseInt(u,10)),this._setCurrentHour(parseInt(f,10)),this._ShowDate){for(r=r+"",i=i+"",r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),d={d:r,m:i,y:t},p=[],c=0;c<3;c++)p[c]=d[this._Culture.DateOrder.substr(c,1)];y=p.join(this._Culture.DateSeparator)}this._ShowTime?(u=u+"",u.length==1&&(u="0"+u),this._Culture.Hour24Mode?v=f+this._Culture.TimeSeparator+u:(w=this._Culture.to12hMode(f),v=w[0]+this._Culture.TimeSeparator+u+" "+this._Culture.TimeAmPm[w[1]?0:1]),a=this._ShowDate?y+" "+v:v):a=y}else{for(var e=null,o=null,h=this._inserted.y!=null?this._inserted.y:this._getEditorSymbols("y"),l=this._inserted.v!=null?this._inserted.v:this._getEditorSymbols("v");h.indexOf("0")==0;)h=h.substr(1,h.length-1);for(h=parseInt(h),isNaN(h)||(t=h);l.indexOf("0")==0;)l=l.substr(1,l.length-1);switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Weeks:e=parseInt(l),isNaN(e)||(e--,e>=0&&e<=52&&(o=this._Culture.getFirstWeekDate(e,t)));break;case PP.Ui.DateTimeEdit.Mode.Months:e=i-1,o=this._getFirstDateMonth(e,t);break;case PP.Ui.DateTimeEdit.Mode.Quarters:e=this.getCurrentQuarter(),o=this._getFirstDateQuarter(e,t);break;case PP.Ui.DateTimeEdit.Mode.HalfYears:e=this.getCurrentHalfYear(),o=this._getFirstDateHalfYear(e,t);break;case PP.Ui.DateTimeEdit.Mode.Years:e=t,o=new Date(e,0,1,0,0,0,0)}e==null||isNaN(e)||o==null||(this._isValueOutRange(e,t,!0)?(t=this._MaxDate.getFullYear(),i=this._MaxDate.getMonth()+1,r=this._MaxDate.getDate(),f=this._MaxDate.getHours(),u=this._MaxDate.getMinutes()):this._isValueOutRange(e,t,!1)?(t=this._MinDate.getFullYear(),i=this._MinDate.getMonth()+1,r=this._MinDate.getDate(),f=this._MinDate.getHours(),u=this._MinDate.getMinutes()):o.getTime()>=this._MinDate.getTime()?(t=o.getFullYear(),i=o.getMonth()+1,r=o.getDate(),f=o.getHours(),u=o.getMinutes()):(t=this._MinDate.getFullYear(),i=this._MinDate.getMonth()+1,r=this._MinDate.getDate(),f=this._MinDate.getHours(),u=this._MinDate.getMinutes()),this._setCurrentDay(1),this._setCurrentYear(t),this._setCurrentMonth(i-1),this._setCurrentDay(r),this._setCurrentHour(f),this._setCurrentMinute(u)),a=this._getCurrDateAsText(),this._inserted={d:null,m:null,y:null,h:null,n:null,v:null}}this._renderCounter==0&&(this._caretPosItem=nt),this._endRender(a)},DTEditP._checkDateTimeValid=function(n,t){var p=this._oldDate,i=this.getCurrentYear(),u=this.getCurrentMonth()+1,e=this.getCurrentDay(),r=this.getCurrentHour(),o=this.getCurrentMinute(),v,a,y,h,f,s,c,l;if(this._Mode==PP.Ui.DateTimeEdit.Mode.Days){if(this._ShowDate){for(e=this._getEditorSymbols("d")+"";e.indexOf("0")==0;)e=e.substr(1,e.length-1);if(e=parseInt(e,10),isNaN(e))return!1;for(u=this._getEditorSymbols("m")+"";u.indexOf("0")==0;)u=u.substr(1,u.length-1);if(u=parseInt(u,10),isNaN(u))return!1;for(i=this._getEditorSymbols("y")+"";i.indexOf("0")==0;)i=i.substr(1,i.length-1);if(i=parseInt(i,10),isNaN(i))return!1}if(this._ShowTime){for(r=this._getEditorSymbols("h")+"",o=this._getEditorSymbols("n")+"";o.indexOf("0")==0&&o.length>1;)o=o.substring(1,o.length);if(o=parseInt(o,10),isNaN(o)||o>59)return!1;if(this._Culture.Hour24Mode){if(r=parseInt(r,10),isNaN(r)||r>23)return!1}else{if(v=this._getEditorSymbols("a")+"",r=parseInt(r,10),isNaN(r)||r>12)return!1;r==0&&(r=12),r=this._Culture.to24hMode(r,v.toLowerCase()!=this._Culture.TimeAmPm[1].toLowerCase())}}if(this._ShowDate){if(e<1||u<1||u>12||(a=new Date(i,u-1,e,r,o,0),a.getTime()<this._MinDate.getTime()||a.getTime()>this._MaxDate.getTime())||(y=this._Culture.getDaysInMonth(u-1,i),e>y))return!1;n&&(this._setCurrentDay(e),this._setCurrentMonth(u-1),this._setCurrentYear(i))}this._ShowTime&&n&&(this._setCurrentMinute(parseInt(o,10)),this._setCurrentHour(parseInt(r,10)))}else{for(h=this._inserted.y!=null?this._inserted.y:this._getEditorSymbols("y");h.indexOf("0")==0;)h=h.substr(1,h.length-1);if(i=parseInt(h),isNaN(i))return!1;f=null,s=null;switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Weeks:for(c=this._inserted.v!=null?this._inserted.v:this._getEditorSymbols("v");c.indexOf("0")==0;)c=c.substr(1,c.length-1);if((f=parseInt(c),isNaN(f))||(f--,f<0||f>52))return!1;s=this._Culture.getFirstWeekDate(f,i);break;case PP.Ui.DateTimeEdit.Mode.Months:f=u-1,s=this._getFirstDateMonth(f,i);break;case PP.Ui.DateTimeEdit.Mode.Quarters:f=this.getCurrentQuarter(),s=this._getFirstDateQuarter(f,i);break;case PP.Ui.DateTimeEdit.Mode.HalfYears:f=this.getCurrentHalfYear(),s=this._getFirstDateHalfYear(f,i);break;case PP.Ui.DateTimeEdit.Mode.Years:f=i,s=new Date(f,0,1,0,0,0,0)}if(this._isValueOutRange(f,i))return!1;n&&(s.getTime()>=this._MinDate.getTime()?(i=s.getFullYear(),u=s.getMonth()+1,e=s.getDate(),r=s.getHours(),o=s.getMinutes()):(i=this._MinDate.getFullYear(),u=this._MinDate.getMonth()+1,e=this._MinDate.getDate(),r=this._MinDate.getHours(),o=this._MinDate.getMinutes()),this._setCurrentDay(1),this._setCurrentYear(i),this._setCurrentMonth(u-1),this._setCurrentDay(e),this._setCurrentHour(r),this._setCurrentMinute(o))}return n&&(t=typeof t=="undefined"?!0:t==!0,l=new PP.DateTimeChangeEventArgs,l.OldDate=p,l.NewDate=this.getCurrentDate(),l.OldDate.getTime()!=l.NewDate.getTime()&&t&&this._raiseDateTimeChangeEvent(l)),!0},DTEditP._xCrease=function(n){this._raiseSpinEvent(n),PP.setTimeout(this._setFocus,10,{Self:this})},DTEditP._setFocus=function(n){n.Self.setFocus()},DTEditP._raiseSpinEvent=function(n){var t,i;this._beginRender(),t="",this._lastSelected?t=this._lastSelected:this._focus?t=this._caretPosItem:this._Mode==PP.Ui.DateTimeEdit.Mode.Days?this._ShowDate?t=this._Culture.DateOrder.substring(0,1):this._ShowTime&&(t="h"):t=this._Mode==PP.Ui.DateTimeEdit.Mode.Years?"y":"v",i=new PP.DateTimeChangeEventArgs,i.OldDate=this.getCurrentDate(),this._setCurrentItem(t,n?"+1":"-1"),this._validate(),i.NewDate=this.getCurrentDate(),this._dateBeforeFocus=i.NewDate,this._raiseDateTimeChangedEvent(i),this._endRender()},DTEditP._raiseDateTimeChangeEvent=function(n){this.DateTimeChange.fire(this,n)},DTEditP._raiseDateTimeChangedEvent=function(n){this.DateTimeChanged.fire(this,n)},DTEditP._getCurrDateAsText=function(){var i,n,f,r,e,u,t,o,s;switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Days:for(i={},n=this.getCurrentDay()+"",n.length<2&&(n="0"+n),i.d=n,n=this.getCurrentMonth()+1+"",n.length<2&&(n="0"+n),i.m=n,i.y=this.getCurrentYear(),f=[],r=0;r<3;r++)f[r]=i[this._Culture.DateOrder.substr(r,1)];return(e=f.join(this._Culture.DateSeparator),!this._ShowTime)?e:(u="",t=this.getCurrentMinute()+"",t.length<2&&(t="0"+t),this._Culture.Hour24Mode?u=this.getCurrentHour()+this._Culture.TimeSeparator+t:(o=this._Culture.to12hMode(this.getCurrentHour()),u=o[0]+this._Culture.TimeSeparator+t+" "+this._Culture.TimeAmPm[o[1]?0:1]),this._ShowDate?e+" "+u:u);case PP.Ui.DateTimeEdit.Mode.Weeks:return s=this.getCurrentWeek()+1,this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),this._TextAfterWeek||(this._TextAfterWeek=PP.resourceManager.getString("dateTimeEditTextAfterWeek")),[s,this._TextAfterWeek,this.getCurrentYear(),this._TextAfterYear].join("");case PP.Ui.DateTimeEdit.Mode.Months:return this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),this._TextAfterMonth||(this._TextAfterMonth=PP.resourceManager.getString("dateTimeEditTextAfterMonth")),[this._getCurrentMonthName(),this._TextAfterMonth,this.getCurrentYear(),this._TextAfterYear].join("");case PP.Ui.DateTimeEdit.Mode.Quarters:return this._TextAfterQuarter||(this._TextAfterQuarter=PP.resourceManager.getString("dateTimeEditTextAfterQuarter")),this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),[this._getCurrentQuarterName(),this._TextAfterQuarter,this.getCurrentYear(),this._TextAfterYear].join("");case PP.Ui.DateTimeEdit.Mode.HalfYears:return this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),this._TextAfterHalfYear||(this._TextAfterHalfYear=PP.resourceManager.getString("dateTimeEditTextAfterHalfYear")),[this._getCurrentHalfYearName(),this._TextAfterHalfYear,this.getCurrentYear(),this._TextAfterYear].join("");case PP.Ui.DateTimeEdit.Mode.Years:return this._TextAfterYear||(this._TextAfterYear=PP.resourceManager.getString("dateTimeEditTextAfterYear")),[this.getCurrentYear(),this._TextAfterYear].join("")}},DTEditP._invertAmFlag=function(){this.getCurrentHour()<12?this._setCurrentHour("+12"):this._setCurrentHour("-12")},DTEditP.refresh=function(){var r="",l,p,t,i,o,e,f,c,u,a,v,y,s;switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Days:i=this._Culture.DateOrder,(i.length!=3||i.indexOf("d")<0||i.indexOf("m")<0||i.indexOf("y")<0)&&(i="dmy");var n="",h=[],w=[];if(this._ShowDate)for(t=0;t<i.length;t++){l=i.charAt(t);switch(l){case"d":o=this.getCurrentDay().toString(),o.length==1&&(o="0"+o),h.push(o);break;case"m":e=(this.getCurrentMonth()+1).toString(),e.length==1&&(e="0"+e),h.push(e);break;case"y":for(f=this.getCurrentYear().toString();f.length<4;)f="0"+f;h.push(f)}}if(r=h.join(this._Culture.DateSeparator),this._ShowTime){for(this._ShowDate&&(r+=" "),(n.indexOf("h")<0||n.indexOf("n")<0)&&(n+="hn"),c=n.indexOf("a"),u=!0,this._Culture.Hour24Mode||(c>-1?c!=0?u=!1:c!=n.charAt(n.length-1)?u=!0:(n=n.replace("a"),n+="a",u=!0):(n+="a",u=!0)),a="",t=0;t<n.length;t++){l=n.charAt(t);switch(l){case"h":v=this.getCurrentHour(),this._Culture.Hour24Mode||(y=this._Culture.to12hMode(v),v=y[0],a=this._Culture.TimeAmPm[y[1]?0:1]),w.push(v.toString());break;case"n":s=this.getCurrentMinute().toString(),s.length==1&&(s="0"+s),w.push(s)}}r+=w.join(this._Culture.TimeSeparator),this._Culture.Hour24Mode||(u?r+=" "+a:r=a+" "+r)}p=i+n,t=p.indexOf(this._caretPosItem),t<0&&(this._caretPosItem=this._ShowDate?p.charAt(0):"h");break;case PP.Ui.DateTimeEdit.Mode.Weeks:case PP.Ui.DateTimeEdit.Mode.Months:case PP.Ui.DateTimeEdit.Mode.Quarters:case PP.Ui.DateTimeEdit.Mode.HalfYears:case PP.Ui.DateTimeEdit.Mode.Years:r=this._getCurrDateAsText()}this._EditorValue=this._input.value=r,this.applyValidCSS(),this._inserted={d:null,m:null,y:null,h:null,n:null,v:null}},DTEditP._getCurrentMonthName=function(){return this._MonthNames[this.getCurrentDate().getMonth()]},DTEditP._getCurrentQuarterName=function(){return this._arabNumberToRoman(this.getCurrentQuarter()+1)},DTEditP._getCurrentHalfYearName=function(){return this._arabNumberToRoman(this.getCurrentHalfYear()+1)},DTEditP._arabNumberToRoman=function(n){switch(n){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV";case 5:return"V";case 6:return"VI";case 7:return"VII";case 8:return"VIII";case 9:return"IX";case 10:return"X";default:return""}},DTEditP._getTextAfterValue=function(){switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Days:throw new Error("нельзя использовать метод _getTextAfterValue при текущем значении режима PP.Ui.DateTimeEdit.Mode.Days");case PP.Ui.DateTimeEdit.Mode.Weeks:return this._TextAfterWeek||(this._TextAfterWeek=PP.resourceManager.getString("dateTimeEditTextAfterWeek")),this._TextAfterWeek;case PP.Ui.DateTimeEdit.Mode.Months:return this._TextAfterMonth||(this._TextAfterMonth=PP.resourceManager.getString("dateTimeEditTextAfterMonth")),this._TextAfterMonth;case PP.Ui.DateTimeEdit.Mode.Quarters:return this._TextAfterQuarter||(this._TextAfterQuarter=PP.resourceManager.getString("dateTimeEditTextAfterQuarter")),this._TextAfterQuarter;case PP.Ui.DateTimeEdit.Mode.HalfYears:return this._TextAfterHalfYear||(this._TextAfterHalfYear=PP.resourceManager.getString("dateTimeEditTextAfterHalfYear")),this._TextAfterHalfYear;case PP.Ui.DateTimeEdit.Mode.Years:return"";default:throw new Error("Не известное значение режима PP.Ui.DateTimeEdit.Mode");}},DTEditP._isValueOutRange=function(n,t,i){var r,u,f;switch(this._Mode){case PP.Ui.DateTimeEdit.Mode.Days:throw new Error("Этот метод не работает для режима 'дни'");case PP.Ui.DateTimeEdit.Mode.Weeks:r=this._Culture.getFirstWeekDate(n,t),u=this._Culture.getLastWeekDate(n,t);break;case PP.Ui.DateTimeEdit.Mode.Months:r=this._getFirstDateMonth(n,t),u=this._getLastDateMonth(n,t);break;case PP.Ui.DateTimeEdit.Mode.Quarters:r=this._getFirstDateQuarter(n,t),u=this._getLastDateQuarter(n,t);break;case PP.Ui.DateTimeEdit.Mode.HalfYears:r=this._getFirstDateHalfYear(n,t),u=this._getLastDateHalfYear(n,t);break;case PP.Ui.DateTimeEdit.Mode.Years:r=new Date(n,0,1,0,0,0,0),u=new Date(n,11,31,23,59,0,0)}return f=typeof i=="undefined"?r.getTime()<this._MinDate.getTime()&&u.getTime()<this._MinDate.getTime()||r.getTime()>this._MaxDate.getTime():i?r.getTime()>this._MaxDate.getTime():r.getTime()<this._MinDate.getTime()&&u.getTime()<this._MinDate.getTime()},DTEditP._getFirstDateMonth=function(n,t){return new Date(t,n,1,0,0,0,0)},DTEditP._getLastDateMonth=function(n,t){var i=this._Culture.getDaysInMonth(n,t);return new Date(t,n,i,23,59,0,0)},DTEditP._getFirstDateQuarter=function(n,t){return new Date(t,n*3,1,0,0,0,0)},DTEditP._getLastDateQuarter=function(n,t){var i=n*3+2,r=this._Culture.getDaysInMonth(i,t);return new Date(t,i,r,23,59,0,0)},DTEditP._getFirstDateHalfYear=function(n,t){return new Date(t,n*6,1,0,0,0,0)},DTEditP._getLastDateHalfYear=function(n,t){var i=n*6+5,r=this._Culture.getDaysInMonth(i,t);return new Date(t,i,r,23,59,0,0)},DTEditP._setCurrentWQH=function(n,t){var u,r,f,o,e,i;if(this._renderCounter==0)throw"Method _setCurrentWQH() must be called between _beginRender() and _endRender() methods";u=this.getCurrentYear(),r=0;switch(t){case"w":r=53;break;case"q":r=4;break;case"hy":r=2;break;default:throw"Item value must be 'w', 'q' or 'hy'";}if(typeof n=="string"&&(f=0,n.indexOf("+")==0&&(f=1),n.indexOf("-")==0&&(f=-1),f!=0)){for(o=parseInt(n.substring(1,n.length),10),e=null,t=="w"?e=this.getCurrentWeek():t=="q"?e=this.getCurrentQuarter():t=="hy"&&(e=this.getCurrentHalfYear()),n=e+f*o;n<0;)n+=r,u--;while(n>=r)n-=r,u++}if(typeof n!="number")throw new Error("NewVal type is not Number");if(n>=r||n<0)throw new Error("Incorrect NewVal value");i=null;switch(t){case"w":i=this._Culture.getFirstWeekDate(n,u);break;case"q":i=this._getFirstDateQuarter(n,u);break;case"hy":i=this._getFirstDateHalfYear(n,u)}this._setCurrentDay(1),this._setCurrentYear(i.getFullYear()),this._setCurrentMonth(i.getMonth()),this._setCurrentDay(i.getDate()),this._setCurrentMinute(i.getMinutes()),this._setCurrentHour(i.getHours())},DTEditP.setRevertToPrevious=function(n){this._RevertToPrevious=!!n},DTEditP.getRevertToPrevious=function(){return this._RevertToPrevious},DTEditP.getMode=function(){return this._Mode},DTEditP.setMode=function(n){if(typeof n=="undefined"||n==null)throw new Error("Can't set empty value of Date");if(typeof n!="number"||n<PP.Ui.DateTimeEdit.Mode.Days&&n>PP.Ui.DateTimeEdit.Mode.Years)throw new Error("value must be element of enum PP.Ui.DateTimeEdit.Mode");return this._Mode!=n&&(this._Mode=n,this.refresh()),this},DTEditP.getCurrentDate=function(){return new Date(this.getCurrentYear(),this.getCurrentMonth(),this.getCurrentDay(),this.getCurrentHour(),this.getCurrentMinute(),0,0)},DTEditP.setCurrentDate=function(n,t){if(n instanceof Date)this._MaxDate&&n.getTime()>this._MaxDate.getTime()&&(n=this._MaxDate),this._MinDate&&n.getTime()<this._MinDate.getTime()&&(n=this._MinDate),this._beginRender(),this._setCurrentYear(n.getFullYear()),this._setCurrentMonth(n.getMonth()),this._setCurrentDay(n.getDate()),this._setCurrentMonth(n.getMonth()),this._setCurrentHour(n.getHours()),this._setCurrentMinute(n.getMinutes()),this._EditorValue=this._getCurrDateAsText(),this._inserted={d:null,m:null,y:null,h:null,n:null,v:null},this._endRender(undefined,t);else if(n)throw PP.ArgumentException(this);else this.setContent("",t);return this},DTEditP.getCurrentYear=function(){return this._CurrentDate.getFullYear()},DTEditP._setCurrentYear=function(n){var t,i;typeof n=="string"?(t=0,n.indexOf("+")==0&&(t=1),n.indexOf("-")==0&&(t=-1),0!=t&&(i=parseInt(n.substring(1,n.length),10),this._CurrentDate.setFullYear(this.getCurrentYear()+t*i))):this._CurrentDate.setFullYear(n)},DTEditP.getCurrentHalfYear=function(){return Math.floor(this.getCurrentMonth()/6)},DTEditP._setCurrentHalfYear=function(n){this._setCurrentWQH(n,"hy")},DTEditP.getCurrentQuarter=function(){return Math.floor(this.getCurrentMonth()/3)},DTEditP._setCurrentQuarter=function(n){this._setCurrentWQH(n,"q")},DTEditP.getCurrentMonth=function(){return this._CurrentDate.getMonth()},DTEditP._setCurrentMonth=function(n){var r,u,t,i;if(typeof n=="string"){if(r=0,n.indexOf("+")==0&&(r=1),n.indexOf("-")==0&&(r=-1),0!=r){for(u=parseInt(n.substring(1,n.length),10),t=this.getCurrentMonth()+r*u;t<0;)t+=12,i=this.getCurrentYear(),i--,this._CurrentDate.setFullYear(i);while(t>=12)t-=12,i=this.getCurrentYear(),i++,this._CurrentDate.setFullYear(i);this._CurrentDate.setMonth(t)}}else this._CurrentDate.setMonth(n)},DTEditP.getCurrentWeek=function(){return this._Culture.getWeekNumber(this._CurrentDate)},DTEditP._setCurrentWeek=function(n){this._setCurrentWQH(n,"w")},DTEditP.getCurrentDay=function(){return this._CurrentDate.getDate()},DTEditP._setCurrentDay=function(n){var t,i,r;typeof n=="string"?(t=0,n.indexOf("+")==0&&(t=1),n.indexOf("-")==0&&(t=-1),0!=t&&(i=parseInt(n.substring(1,n.length),10),r=this.getCurrentDay()+t*i,this._CurrentDate.setDate(r))):this._CurrentDate.setDate(n)},DTEditP.getCurrentHour=function(){return this._CurrentDate.getHours()},DTEditP._setCurrentHour=function(n){var t,i,r;for(typeof n=="string"?(i=0,n.indexOf("+")==0&&(i=1),n.indexOf("-")==0&&(i=-1),0!=i&&(r=parseInt(n.substring(1,n.length),10),t=this.getCurrentHour(),this._CurrentDate.setHours(t+i*r))):this._CurrentDate.setHours(n);this.getCurrentHour()<0;)t=this.getCurrentHour(),this._CurrentDate.setHours(t+24);t=this.getCurrentHour(),t=t%24,this._CurrentDate.setHours(t)},DTEditP.getCurrentMinute=function(){return this._CurrentDate.getMinutes()},DTEditP._setCurrentMinute=function(n){var t,i,r;for(typeof n=="string"?(i=0,n.indexOf("+")==0&&(i=1),n.indexOf("-")==0&&(i=-1),0!=i&&(r=parseInt(n.substring(1,n.length),10),t=this.getCurrentMinute(),this._CurrentDate.setMinutes(t+i*r))):this._CurrentDate.setMinutes(n);this.getCurrentMinute()<0;)t=this.getCurrentMinute(),t+=60,this._CurrentDate.setMinutes(t);t=this.getCurrentMinute(),t=t%60,this._CurrentDate.setMinutes(t)},DTEditP.getMinDate=function(){var n=this._MinDate.getFullYear(),t=this._MinDate.getMonth(),i=this._MinDate.getDate(),r=this._MinDate.getHours(),u=this._MinDate.getMinutes();return new Date(n,t,i,r,u)},DTEditP.setMinDate=function(n){var t;if(typeof n=="undefined"||n==null)throw new Error("Param of property setMinDate can't be null");if(!(n instanceof Date))throw new Error("param of property setMinDate must be type of Date");var u=n.getFullYear(),f=n.getMonth(),e=n.getDate(),i=0,r=0;if(this._ShowTime&&(i=n.getHours(),r=n.getMinutes()),t=new Date(u,f,e,i,r,0),t.getTime()>this._MaxDate.getTime())throw new Error("New value of MinDate can't be more then MaxDate");return t.getTime()>this.getCurrentDate().getTime()&&(this._CurrentDate=new Date(t.getTime())),this._MinDate=t,this},DTEditP.getMaxDate=function(){var n=this._MaxDate.getFullYear(),t=this._MaxDate.getMonth(),i=this._MaxDate.getDate(),r=this._MaxDate.getHours(),u=this._MaxDate.getMinutes();return new Date(n,t,i,r,u)},DTEditP.setMaxDate=function(n){var t;if(typeof n=="undefined"||n==null)throw new Error("Param of property setMaxDate can't be null");if(!(n instanceof Date))throw new Error("param of property setMaxDate must be type of Date");var u=n.getFullYear(),f=n.getMonth(),e=n.getDate(),i=23,r=59;if(this._ShowTime&&(i=n.getHours(),r=n.getMinutes()),t=new Date(u,f,e,i,r),t.getTime()<this._MinDate.getTime())throw new Error("New value of MaxDate can't be less then MinDate");return t.getTime()<this.getCurrentDate().getTime()&&(this._CurrentDate=new Date(t.getTime())),this._MaxDate=t,this},DTEditP.setShowDate=function(n){if(n!=!0&&!this._ShowTime)throw new Error("ShowDate and ShowTime can not be false at the same time");return this._ShowDate=n==!0,this.refresh(),this},DTEditP.getShowDate=function(){return this._ShowDate},DTEditP.setShowTime=function(n){if(n!=!0&&!this._ShowDate)throw new Error("ShowDate and ShowTime can not be false at the same time");return this._ShowTime=n==!0,this.refresh(),this},DTEditP.getShowTime=function(){return this._ShowTime},DTEditP.getMonthNames=function(){for(var t=[],n=0;n<this._MonthNames.length;n++)t.push(this._MonthNames[n]+"");return t},DTEditP.setMonthNames=function(n){if(!Array.isArray(n))throw new Error("value must be type of Array");if(n.length<12)throw new Error("array length must be 12");this._MonthNames=[];for(var t=0;t<n.length;t++)this._MonthNames.push(n[t]+"");return this.refresh(),this},DTEditP=null,PP.DateTimeChangeEventArgs=function(){PP.DateTimeChangeEventArgs.base.constructor.apply(this,arguments),this.OldDate=null,this.NewDate=null},PP.initClass(PP.DateTimeChangeEventArgs,PP.EventArgs,"DateTimeChangeEventArgs"),PP.Ui.DateTimeEdit.Mode={Days:0,Weeks:1,Months:2,Quarters:3,HalfYears:4,Years:5},PP.Ui.DateTimePicker=function(n){var t,i,r;n=n?n:{},this._cssDateTimePicker="PPDateTimePicker",this._cssDateTimeDrop="PPDateTimeDrop",this._Culture=null,this._CurrentDate=null,this._ShowButtons=!1,this._MinDate=new Date(1e3,0,1,0,0,0,0),this._MinDateConst=new Date(1e3,0,1,0,0,0,0),this._MaxDate=new Date(9999,11,31,23,59,0,0),this._MaxDateConst=new Date(9999,11,31,23,59,0,0),this._ShowCheckBox=!1,this._ShowTime=!1,this._ShowDate=!0,this._DateTimeEdit=null,this._Mode=PP.Ui.MonthCalendar.Mode.Days,t=n&&n.DateTimeEdit?n.DateTimeEdit:{},i=n&&n.Calendar?n.Calendar:{},PP.getCurrentCulture&&(r=PP.getCurrentCulture(),r&&(this._Culture=r)),this._Culture||(this._Culture=new PP.CultureInfo),i.Culture=t.Culture=this._Culture,i.CurrentDate=t.CurrentDate=this._CurrentDate,i.MaxDate=t.MaxDate=this._MaxDate,i.MinDate=t.MinDate=this._MinDate,i.ShowTime=t.ShowTime=this._ShowTime,i.Id=n.Id+"_Calendar",t.Id=n.Id+"_DateTimeEdit",t.ShowButtons=!1,this._DateTimeEdit=new PP.Ui.DateTimeEdit(t),PP.Ui.DateTimePicker._GlobalCalendar&&PP.Ui.DateTimePicker._GlobalCalendar instanceof PP.Ui.Control&&PP.Ui.DateTimePicker._GlobalCalendar.isLive()||(PP.Ui.DateTimePicker._GlobalCalendar=new PP.Ui.MonthCalendar,PP.Ui.DateTimePicker._GlobalCalendar._Context=null,PP.Ui.DateTimePicker._GlobalCalendar._DTPCollection=[]),PP.Ui.DateTimePicker._GlobalCalendar._DTPCollection.push(this),PP.Ui.DateTimePicker._GlobalCalendar.setSettings(i),this._CalendarSettings=i,this._EnableEdit=n.EnableEdit=!0,n||(n={}),delete n.Calendar,delete n.DateTimeEdit,n.DropPanel={Template:PP.Templates.DropPanel,UseScrollBox:!1},this._defineEvents(["DateTimeChange","DateTimeChanged","TextChange","SelectDay"]),this._NullCheckBox=new PP.Ui.CheckBox({}),PP.Ui.DateTimePicker.base.constructor.call(this,n),this._DateTimeEdit.addToNode(this._ControlDomNode),this._EditControl.dispose(),this._EditControl=this._DateTimeEdit,this._IsDefaultTemplate=!0,this._needRenderOnShow=!1,this._isFirstOpen=!0,this._DropPanel.setEnableResize(!1),this._DropPanel.setMinDropDownHeight(0),this._DropPanel.setMinDropDownWidth(0),this._DropPanel.removeClass("PPComboDropPanel"),PP.Ui.DateTimePicker._GlobalCalendar._isBlockRender=!0,this._CurrentDate||this.setValue(this._ShowCheckBox?null:new Date,!1),this._Culture||(this._Culture=new PP.CultureInfo),this._CurrentDate&&(PP.Ui.DateTimePicker._GlobalCalendar.getCurrentDate().getTime()!=this._CurrentDate.getTime()&&(PP.Ui.DateTimePicker._GlobalCalendar.setCurrentDate(this._CurrentDate),this._CalendarSettings.CurrentDate=this._CurrentDate),this._DateTimeEdit.getCurrentDate().getTime()!=this._CurrentDate.getTime()&&this._DateTimeEdit.setCurrentDate(this._CurrentDate)),PP.Ui.DateTimePicker._GlobalCalendar.getMaxDate().getTime()!=this._MaxDate.getTime()&&(PP.Ui.DateTimePicker._GlobalCalendar.setMaxDate(this._MaxDate),this._CalendarSettings.MaxDate=this._MaxDate),PP.Ui.DateTimePicker._GlobalCalendar.getMinDate()!=this._MinDate.getTime()&&(PP.Ui.DateTimePicker._GlobalCalendar.setMinDate(this._MinDate),this._CalendarSettings.MinDate=this._MinDate),PP.Ui.DateTimePicker._GlobalCalendar._Culture=this._Culture,this._CalendarSettings.Culture=this._Culture,PP.Ui.DateTimePicker._GlobalCalendar.getShowTime()!=this._ShowTime&&(PP.Ui.DateTimePicker._GlobalCalendar.setShowTime(this._ShowTime),this._CalendarSettings.ShowTime=this._ShowTime),this._DateTimeEdit.getMaxDate().getTime()!=this._MaxDate.getTime()&&this._DateTimeEdit.setMaxDate(this._MaxDate),this._DateTimeEdit.getMinDate()!=this._MinDate.getTime()&&this._DateTimeEdit.setMinDate(this._MinDate),this._DateTimeEdit.getShowTime()!=this._ShowTime&&this._DateTimeEdit.setShowTime(this._ShowTime),this._DateTimeEdit.getShowDate()!=this._ShowDate&&this._DateTimeEdit.setShowDate(this._ShowDate),this.setIsRTL(this._IsRTL),this._DomNode.className+=" "+this._cssDateTimePicker,this._DropPanel._DomNode.className+=" "+this._cssDateTimeDrop,this.setEnabled(this._Enabled),this._dropPanelSizeSetted=!0,this._dateBeforeChanged=null},PP.initClass(PP.Ui.DateTimePicker,PP.Ui.Combo,"DateTimePicker"),DTPickerP=PP.Ui.DateTimePicker.prototype,DTPickerP._bindEvents=function(){PP.Ui.DateTimePicker.base._bindEvents.call(this),this._DropPanel.Closed.add(this._onDropClosed,this),this._DateTimeEdit.DateTimeChange.add(this._onEditDateTimeChange,this),this._DateTimeEdit.DateTimeChanged.add(this._onEditDateTimeChanged,this),this._DateTimeEdit.AfterChange.add(this._onEditTextChange,this),this._DateTimeEdit.Focus.add(this._onEditFocus,this),this._DateTimeEdit.Blur.add(this._onEditBlur,this),PP.Ui.DateTimePicker._GlobalCalendar.Change.add(this._onCalendarDateChange,this),PP.Ui.DateTimePicker._GlobalCalendar.SelectDay.add(this._onCalendarSelectDay,this),PP.Ui.DateTimePicker._GlobalCalendar.SelectWeek.add(this._onCalendarSelectWeek,this),PP.Ui.DateTimePicker._GlobalCalendar.SelectMonth.add(this._onCalendarSelectMonth,this),PP.Ui.DateTimePicker._GlobalCalendar.SelectQuarter.add(this._onCalendarSelectQuarter,this),PP.Ui.DateTimePicker._GlobalCalendar.SelectHalfYear.add(this._onCalendarSelectHalfYear,this),PP.Ui.DateTimePicker._GlobalCalendar.ClickNow.add(this._onCalendarClickNow,this),PP.Ui.DateTimePicker._GlobalCalendar.ModeChanged.add(this._onCalendarModeChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.AfterRender.add(this._onCalendarAfterRender,this),PP.Ui.DateTimePicker._GlobalCalendar.AfterModeChanged.add(this._onCalendarAfterRender,this),PP.Ui.DateTimePicker._GlobalCalendar.ModeChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.MaxDateChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.MinDateChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.CurrentDateChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowTimeChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowNowButtonChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowHalfYearsButtonChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowQuartersButtonChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowMonthsButtonChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowWeeksButtonChanged.add(this._onRenderPropertyChanged,this),PP.Ui.DateTimePicker._GlobalCalendar.ShowDaysButtonChanged.add(this._onRenderPropertyChanged,this)},DTPickerP._unBindEvents=function(){PP.Ui.DateTimePicker.base._unBindEvents.call(this),this._DropPanel.Closed.clear(this),this._DateTimeEdit.DateTimeChange.clear(this),this._DateTimeEdit.AfterChange.clear(this),this._DateTimeEdit.Focus.clear(this),this._DateTimeEdit.Blur.clear(this),this._DateTimeEdit.MouseDown.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.Change.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.SelectDay.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.SelectWeek.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.SelectMonth.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.SelectQuarter.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.SelectHalfYear.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ClickNow.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ModeChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.AfterRender.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.AfterModeChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ModeChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.MaxDateChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.MinDateChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.CurrentDateChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowTimeChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowNowButtonChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowHalfYearsButtonChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowQuartersButtonChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowMonthsButtonChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowWeeksButtonChanged.clear(this),PP.Ui.DateTimePicker._GlobalCalendar.ShowDaysButtonChanged.clear(this)},DTPickerP.setValue=function(n,t){var i;if(n)this.setCurrentDate(n,t),this._NullCheckBox.setChecked(!0,!1),this.setEnabled(this._Enabled,!0);else{if(!this._ShowCheckBox)return!1;this._CurrentDate=null,this._NullCheckBox.setChecked(!1,!1),this._isOpened()&&this._DropPanel.hide(),i=this._Enabled,this.setEnabled(!1),this._Enabled=i,this._NullCheckBox.setEnabled(!0)}},DTPickerP._render=function(){var t,i,n;PP.Ui.DateTimePicker.base._render.call(this),this._ShowCheckBox&&this._NullCheckBox.addToNode(this._DomNode,this._DomNode.firstChild),this._NullCheckBox.setEnabled(this._Enabled),this._NullCheckBox.CheckedChanged.add(this._onNullCheckBoxChange,this),this._NullCheckBoxConstantWidth=17,this._ComboTable=PP.querySelector(this._DomNode,".PPComboTable"),t=this._NullCheckBox.getDomNode(),this._NullCheckBoxDomNodeWidth=t.offsetWidth,i=this._NullCheckBoxDomNodeWidth+this._checkValue(PP.getStyle(t,"margin-left",!0))+this._checkValue(PP.getStyle(t,"margin-right",!0)),n=this._checkValue(this._Width-(this._ShowCheckBox?i||this._NullCheckBoxConstantWidth:0))||"",n!==""&&(n=n+"px"),this._ComboTable.style.width=n,this._CurrentDate&&this._NullCheckBox.setChecked(!0,!1),this.setShowButtons(this._ShowButtons)},DTPickerP.getValue=function(){return this.getCurrentDate()},DTPickerP.showDropPanel=function(){var i,r,t;if(this.getEnabled()&&(i="",this._isFirstOpen&&(this._DropPanel.show(0,0),i=this._DropPanel._DomNode.style.visibility,this._DropPanel._DomNode.style.visibility="hidden",PP.Ui.DateTimePicker._GlobalCalendar._render(),this._DropPanel.hide(),this._isFirstOpen=!1,this._needRenderOnShow=!1,this._modeBeforeClosed=this._Mode),this._DropPanel.Opened.add(this._onDropOpened,this),PP.Ui.DateTimePicker.base.showDropPanel.call(this),this._DropPanel.Opened.remove(this._onDropOpened,this),this._Width=0,this._isFirstOpen&&(this._DropPanel._DomNode.style.visibility=i),this._isOpened())){this._modeBeforeClosed!=this._Mode?PP.Ui.DateTimePicker._GlobalCalendar._render():this._needRenderOnShow?(PP.Ui.DateTimePicker._GlobalCalendar._render(),this._needRenderOnShow=!1):this._dateBeforeClosed&&this._dateBeforeClosed.getTime()!=this.getCurrentDate().getTime()&&PP.Ui.DateTimePicker._GlobalCalendar._refreshOnSetDate(this._dateBeforeClosed),r=this._DropPanel._DomNode,r.className=r.className,PP.Ui.DateTimePicker._GlobalCalendar.updateSize();var u=document.documentElement.clientHeight,o=PP.calculateOffset(this._DropPanel.getDomNode()),e=this._DropPanel.getDomNode(),n=e.offsetHeight,s=e.offsetWidth,f=PP.calculateOffset(this._DomNode);this._IsRTL&&this._DropPanel.setCoords(f.X-s+this.getWidth(),this._DropPanel.getCoords().Y),t=this._DropPanel.getCoords().X,o.Y+n>u&&(n>u?this._DropPanel.setCoords(t,0):f.Y-n>0?this._DropPanel.setCoords(t,f.Y-n):this._DropPanel.setCoords(t,u-n))}},DTPickerP._isOpened=function(){return this._DropPanel&&this._DropPanel.getDroppedDown()},DTPickerP.setEnableEdit=function(n){return this._EnableEdit=n==!0,this._DateTimeEdit.setEnableEdit(this._EnableEdit),this},DTPickerP._onButtonMouseDown=function(n,t){if(this._CurrentDate&&this._Enabled)PP.Ui.DateTimePicker.base._onButtonMouseDown.call(this,n,t);else return!1},DTPickerP._onCultureChanged=function(){PP.Ui.DateTimePicker.base._onCultureChanged.apply(this,arguments);var i=PP.getCurrentCulture();this._Culture&&this._Culture.CultureName==i.CultureName||(this._Culture=i,this._isOpened()||(this._needRenderOnShow=!0))},DTPickerP._onEditDateTimeChange=function(n,t){var r=!1,i;r=this._CurrentDate.getTime()!=t.NewDate.getTime(),r&&(this._CurrentDate=new Date(t.NewDate.getTime()),PP.Ui.DateTimePicker._GlobalCalendar&&(PP.Ui.DateTimePicker._GlobalCalendar._CurrentDate=new Date(t.NewDate.getTime()),this._isOpened()&&PP.Ui.DateTimePicker._GlobalCalendar._refreshOnSetDate(t.OldDate))),i=new PP.DateTimeChangeEventArgs(t.Event),i.OldDate=t.OldDate,i.NewDate=t.NewDate,i.OldDate.getTime()!=i.NewDate.getTime()&&this._raiseDateTimeChangeEvent(i)},DTPickerP._onEditDateTimeChanged=function(n,t){var r=!1,i;r=this._CurrentDate.getTime()!=t.NewDate.getTime(),r&&(this._CurrentDate=new Date(t.NewDate.getTime()),PP.Ui.DateTimePicker._GlobalCalendar&&(PP.Ui.DateTimePicker._GlobalCalendar._CurrentDate=new Date(t.NewDate.getTime()),this._isOpened()&&PP.Ui.DateTimePicker._GlobalCalendar._refreshOnSetDate(t.OldDate))),i=new PP.DateTimeChangeEventArgs(t.Event),i.OldDate=t.OldDate,i.NewDate=t.NewDate,this._dateBeforeChanged=t.NewDate,i.OldDate.getTime()!=i.NewDate.getTime()&&this._raiseDateTimeChangedEvent(i)},DTPickerP._onNullCheckBoxChange=function(){var i=new PP.DateTimeChangeEventArgs;this._NullCheckBox.getChecked()?(i.OldDate=null,this.setValue(PP.Ui.DateTimePicker._GlobalCalendar.getCurrentDate(),!0),i.NewDate=PP.Ui.DateTimePicker._GlobalCalendar.getCurrentDate()):(i.OldDate=PP.Ui.DateTimePicker._GlobalCalendar.getCurrentDate(),this.setValue(null,!0),i.NewDate=null),this._raiseDateTimeChangedEvent(i)},DTPickerP._onCalendarDateChange=function(n,t){var r,i;this._DateTimeEdit&&n._Context==this&&(r=this._CurrentDate?this._CurrentDate.getTime():null,r!=t.NewDate.getTime()&&(this._CurrentDate=new Date(t.NewDate.getTime()),this._DateTimeEdit.setCurrentDate(this._CurrentDate),this._dateBeforeClosed=this.getCurrentDate(),this._justHide&&(i=new PP.EventArgs,i.OldDate=this._dateBeforeChanged,i.NewDate=this.getCurrentDate(),i.OldDate&&i.OldDate.getTime()==i.NewDate.getTime()||this._raiseDateTimeChangedEvent(i),this._isInChanging=!1)),this._justHide=!1)},DTPickerP._onCalendarSelectDay=function(n,t){if(n._Context==this){var i=new PP.Ui.MonthCalendarSelectDayArgs(t.Event);i.Day=t.Day,this._raiseSelectDayEvent(i),!this._isOpened()||t.Day.IsOutOfRange||t.Day.IsActive||(this._justHide=!0,this._DropPanel.hide())}},DTPickerP._onCalendarSelectWeek=function(n,t){n._Context==this&&this._isOpened()&&!t.Week.IsOutOfRange&&(this._justHide=!0,this._DropPanel.hide())},DTPickerP._onCalendarSelectMonth=function(n){n._Context==this&&this._isOpened()&&(this._justHide=!0,this._DropPanel.hide())},DTPickerP._onCalendarSelectQuarter=function(n){n._Context==this&&this._isOpened()&&(this._justHide=!0,this._DropPanel.hide())},DTPickerP._onCalendarSelectHalfYear=function(n){n._Context==this&&this._isOpened()&&(this._justHide=!0,this._DropPanel.hide())},DTPickerP._onCalendarClickNow=function(n){if(n._Context==this){var i=new Date,r=this.getCurrentDate();(i.getYear()!=r.getYear()||i.getMonth()!=r.getMonth()||i.getDate()!=r.getDate())&&(this._needRenderOnShow=!0),this._isOpened()&&(this._justHide=!0,this._DropPanel.hide())}},DTPickerP._onCalendarModeChanged=function(n){n._Context==this&&this._DateTimeEdit.setMode(PP.Ui.DateTimePicker._GlobalCalendar.getMode())},DTPickerP._onRenderPropertyChanged=function(n){n._Context==this&&(this._isOpened()||(this._needRenderOnShow=!0))},DTPickerP._onCalendarAfterRender=function(n){if(n._Context==this&&PP.IsIE){var i=this._DropPanel._DomNode;i.className=i.className}},DTPickerP._onEditTextChange=function(n,t){var i=new PP.EventArgs(t.Event);i.OldValue=t.OldValue,i.NewValue=t.NewValue,this._raiseTextChangeEvent(i)},DTPickerP._onEditFocus=function(){this._isInChanging||(this._dateBeforeChanged=this.getCurrentDate()),this._isInChanging=!0},DTPickerP._onEditBlur=function(){if(!this._isOpened()){var i=new PP.EventArgs;i.OldDate=this._dateBeforeChanged,i.NewDate=this.getCurrentDate(),i.OldDate&&i.OldDate.getTime()==i.NewDate.getTime()||this._raiseDateTimeChangedEvent(i),this._isInChanging=!1}},DTPickerP._onDropOpened=function(){PP.Ui.DateTimePicker._GlobalCalendar._isBlockRender=!1,PP.Ui.DateTimePicker._GlobalCalendar._Context=this,PP.Ui.DateTimePicker._GlobalCalendar.setSettings(this._getCalendarSettings()),this._DropPanel.setContent(PP.Ui.DateTimePicker._GlobalCalendar),PP.Ui.DateTimePicker._GlobalCalendar.show(),this._EnableEdit&&PP.addClass(this._DomNode,"OpenedEnableEdit"),this._isInChanging||(this._isInChanging=!0,this._dateBeforeChanged=this.getCurrentDate())},DTPickerP._onDropClosed=function(){if(PP.Ui.DateTimePicker._GlobalCalendar._isBlockRender=!0,this._setCalendarSettings(),this._DropPanel.setContent(null),this._modeBeforeClosed=this._Mode,this._dateBeforeClosed=this.getCurrentDate(),PP.removeClass(this._DomNode,"OpenedEnableEdit"),!this._justHide){var i=new PP.EventArgs;i.OldDate=this._dateBeforeChanged,i.NewDate=this.getCurrentDate(),(i.OldDate||i.NewDate)&&(i.OldDate&&i.OldDate.getTime()==i.NewDate.getTime()||this._isFirstOpen||this._raiseDateTimeChangedEvent(i)),this._isInChanging=!1}},DTPickerP._raiseDateTimeChangeEvent=function(n){this.DateTimeChange.fire(this,n)},DTPickerP._raiseDateTimeChangedEvent=function(n){this.DateTimeChanged.fire(this,n)},DTPickerP._raiseTextChangeEvent=function(n){this.TextChange.fire(this,n)},DTPickerP._raiseSelectDayEvent=function(n){this.SelectDay.fire(this,n)},DTPickerP._setCalendarSettings=function(){this._CalendarSettings=this._getCalendarSettings()},DTPickerP._getCalendarSettings=function(){var n={};return n.MaxDate=this._MaxDate,n.MinDate=this._MinDate,n.CurrentDate=this._CurrentDate,n.Mode=this._DateTimeEdit.getMode(),n.ShowTime=this._ShowTime,n.Culture=this._Culture,n.PreviousMonthName=this.getPreviousMonthName(),n.NextMonthName=this.getNextMonthName(),n.PreviousYearName=this.getPreviousYearName(),n.NextYearName=this.getNextYearName(),n},DTPickerP.setRevertToPrevious=function(n){this._RevertToPrevious=!!n,this._DateTimeEdit.setRevertToPrevious(this._RevertToPrevious)},DTPickerP.getRevertToPrevious=function(){return this._RevertToPrevious},DTPickerP.getCalendar=function(){return PP.Ui.DateTimePicker._GlobalCalendar},DTPickerP.getDateTimeEdit=function(){return this._DateTimeEdit},DTPickerP.setEnabled=function(n,t){return!this._CurrentDate&&n?this._NullCheckBox.setEnabled(n):(PP.Ui.DateTimePicker.base.setEnabled.call(this,n,t),this._DateTimeEdit.setEnabled(n),this._NullCheckBox.setEnabled(n),!n&&this._isOpened()&&this._DropPanel.hide()),this},DTPickerP.setIsRTL=function(n){return n=n==!0,PP.Ui.DateTimePicker.base.setIsRTL.call(this,n),this._DateTimeEdit.setIsRTL(n),PP.Ui.DateTimePicker._GlobalCalendar._Context==this&&this._DropPanel.getDroppedDown()&&PP.Ui.DateTimePicker._GlobalCalendar.setIsRTL(n),this},DTPickerP.setShowCheckBox=function(n){this._ShowCheckBox=!!n,this._ShowCheckBox?this._NullCheckBox.addToNode(this._DomNode,this._DomNode.firstChild):this._NullCheckBox.removeFromDOM(),this._CurrentDate||this.setValue(new Date),this.setWidth(this._Width||this._DomNode.offsetWidth)},DTPickerP.getShowCheckBox=function(){return this._ShowCheckBox},DTPickerP.setDropHeight=function(n){return this._DropPanel.setHeight(n),this},DTPickerP.getDropHeight=function(){return this._DropPanel.getHeight()},DTPickerP.setDropWidth=function(n){return this._DropPanel.setWidth(n),this},DTPickerP.getDropWidth=function(){return this._DropPanel.getWidth()},DTPickerP.setShowTime=function(n){return n=n==!0,this._ShowTime!=n&&(this._ShowTime=n,this._DateTimeEdit.setShowTime(n),PP.Ui.DateTimePicker._GlobalCalendar._Context==this&&this._DropPanel.getDroppedDown()&&PP.Ui.DateTimePicker._GlobalCalendar.setShowTime(n),this._needRenderOnShow=!0),this},DTPickerP.getShowTime=function(){return this._ShowTime},DTPickerP.getCurrentDate=function(){var n=this._CurrentDate;return n?new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0,0):null},DTPickerP.setCurrentDate=function(n,t){if(this._CurrentDate=n,n)this._NullCheckBox.setChecked(!0,!1),this.setEnabled(!0&&this._Enabled,!0);else return this.setValue(null),!1;return this._DateTimeEdit.setCurrentDate(n,t),PP.Ui.DateTimePicker._GlobalCalendar._Context==this&&this._DropPanel.getDroppedDown()&&PP.Ui.DateTimePicker._GlobalCalendar.setCurrentDate(n,t),this._needRenderOnShow=!0,this},DTPickerP.getMinDate=function(){var n=this._MinDate;return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0,0)},DTPickerP.setMinDate=function(n){if(!(n instanceof Date)&&n!==null)throw new Error("incorrect type");return n===null&&(n=new Date(this._MinDateConst.getTime())),this._CurrentDate.getTime()<n.getTime()&&this.setCurrentDate(n),this._DateTimeEdit.setMinDate(n),this._MinDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0,0),PP.Ui.DateTimePicker._GlobalCalendar._Context==this&&this._DropPanel.getDroppedDown()&&PP.Ui.DateTimePicker._GlobalCalendar.setMinDate(n),this._needRenderOnShow=!0,this},DTPickerP.getMaxDate=function(){var n=this._MaxDate;return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0,0)},DTPickerP.setMaxDate=function(n){if(!(n instanceof Date)&&n!==null)throw new Error("incorrect type");return n===null&&(n=new Date(this._MaxDateConst.getTime())),this._CurrentDate.getTime()>n.getTime()&&this.setCurrentDate(n),this._DateTimeEdit.setMaxDate(n),this._MaxDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0,0),PP.Ui.DateTimePicker._GlobalCalendar._Context==this&&this._DropPanel.getDroppedDown()&&PP.Ui.DateTimePicker._GlobalCalendar.setMaxDate(n),this._needRenderOnShow=!0,this},DTPickerP.setPreviousMonthName=function(n){return PP.Ui.DateTimePicker._GlobalCalendar.setPreviousMonthName(n),this},DTPickerP.getPreviousMonthName=function(){return PP.Ui.DateTimePicker._GlobalCalendar.getPreviousMonthName()},DTPickerP.setNextMonthName=function(n){return PP.Ui.DateTimePicker._GlobalCalendar.setNextMonthName(n),this},DTPickerP.getNextMonthName=function(){return PP.Ui.DateTimePicker._GlobalCalendar.getNextMonthName()},DTPickerP.setPreviousYearName=function(n){return PP.Ui.DateTimePicker._GlobalCalendar.setPreviousYearName(n),this},DTPickerP.getPreviousYearName=function(){return PP.Ui.DateTimePicker._GlobalCalendar.getPreviousYearName()},DTPickerP.setNextYearName=function(n){return PP.Ui.DateTimePicker._GlobalCalendar.setNextYearName(n),this},DTPickerP.getNextYearName=function(){return PP.Ui.DateTimePicker._GlobalCalendar.getNextYearName()},DTPickerP.getMode=function(){return this._Mode},DTPickerP.setMode=function(n){if(typeof n!="number"||n!=PP.Ui.MonthCalendar.Mode.Days&&n!=PP.Ui.MonthCalendar.Mode.Weeks&&n!=PP.Ui.MonthCalendar.Mode.Months&&n!=PP.Ui.MonthCalendar.Mode.Quarters&&n!=PP.Ui.MonthCalendar.Mode.HalfYears)throw new Error("Wrong mode of DateTimePicker");n!=this._Mode&&(this._Mode=n,PP.Ui.DateTimePicker._GlobalCalendar._Context==this&&this._DropPanel.getDroppedDown()&&PP.Ui.DateTimePicker._GlobalCalendar.setMode(n),this._DateTimeEdit.setMode(n))},DTPickerP.getMonthNames=function(){return this._DateTimeEdit.getMonthNames()},DTPickerP.setMonthNames=function(n){return this._DateTimeEdit.setMonthNames(n),this},DTPickerP.setShowButtons=function(n){this._DateTimeEdit.setShowButtons(n),this._ShowButtons=!!n},DTPickerP.getShowButtons=function(){return this._ShowButtons},DTPickerP.addToNode=function(){PP.Ui.DateTimePicker.base.addToNode.apply(this,arguments),this.setWidth(this._Width)},DTPickerP.setWidth=function(n){var i,r,t;PP.Ui.Combo.base.setWidth.call(this,n),this._DomNode.style.width!==n+"px"&&n&&(this._DomNode.style.width=n+"px"),this._NullCheckBox&&this._ComboTable&&(i=this._NullCheckBox.getDomNode(),this._NullCheckBoxDomNodeWidth||(this._NullCheckBoxDomNodeWidth=i.offsetWidth),r=this._NullCheckBoxDomNodeWidth+this._checkValue(PP.getStyle(i,"margin-left",!0))+this._checkValue(PP.getStyle(i,"margin-right",!0)),t=this._checkValue(this._Width-(this._ShowCheckBox?r||this._NullCheckBoxConstantWidth:0))||"",t!==""&&(t=t+"px"),this._ComboTable.style.width=t)},DTPickerP.applyValidCSS=function(){this._DateTimeEdit.applyValidCSS()},DTPickerP.applyNotValidCSS=function(){this._DateTimeEdit.applyNotValidCSS()},DTPickerP.dispose=function(){if(this.isLive()){this._DropPanel.Closed.clear(this);var n=PP.Ui.DateTimePicker._GlobalCalendar._DTPCollection.indexOf(this);PP.Ui.DateTimePicker._GlobalCalendar._DTPCollection.splice(n,1),this._DropPanel.getContent()&&this._DropPanel.setContent(null),PP.Ui.DateTimePicker.base.dispose.call(this),PP.Ui.DateTimePicker._GlobalCalendar._DTPCollection.length===0&&(delete PP.Ui.DateTimePicker._GlobalCalendar._Context,PP.Ui.DateTimePicker._GlobalCalendar.dispose())}},DTPickerP=null,PP.Ui.Button=function(n){PP.Ui.Control.call(this,n),this._render()},PP.initClass(PP.Ui.Button,PP.Ui.Control,"Button"),buttonP=PP.Ui.Button.prototype,buttonP._Template=PP.Templates.Button,buttonP._IsDefaultTemplate=!0,buttonP._ImageUrl=null,buttonP._ImageList=null,buttonP._RowIndex=-1,buttonP._ColumnIndex=-1,buttonP._Menu=null,buttonP._ImagePosition=PP.LTRB.Top,buttonP._MenuDropPosition=PP.LTRB.Bottom,buttonP._MenuArrowPosition=PP.LTRB.Bottom,buttonP._IsPressed=!1,buttonP._IsToggleButton=!1,buttonP._UseWrapping=!1,buttonP._menuOpened=!1,buttonP._render=function(){this._initFromHTML("<div class='PPButton'>"+this._Template.replace("{Content}","<div class='PPImage'></div><div class='PPContent'></div><div class='PPArrow'></div>")+"</div>",!0),this.addClass("Released"),this.addClass("PPNoSelect"),PP.IsOpera&&this.addClass("PPOperaFix");var n=this._DomNode;this._ImageDomNode=PP.querySelector(n,".PPImage"),this._ContentDomNode=PP.querySelector(n,".PPContent"),this._ArrowDomNode=PP.querySelector(n,".PPArrow"),this.setImageUrl(this._ImageUrl,!0),this.setImagePosition(this._ImagePosition,!0),this.setMenu(this._Menu,!0),this.setMenuArrowPosition(this._MenuArrowPosition,!0),this.setMenuDropPosition(this._MenuDropPosition,!0),!this._Menu&&this._IsPressed&&this.setIsPressed(!0,!0),this._FakeIsPressed=!1,this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),PP.IsIE&&PP.IEVer===7&&this._Height&&this.setHeight(this._Height),PP.Ui.Button.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode),PP.IsIE&&PP.IEVer===7&&this._Width?this.setWidth(this._Width):this._updateMultiLine()},buttonP._onClicked=function(){if(this._Enabled){if(this._Menu){this._IsRTL&&this._Menu instanceof PP.Ui.Menu&&this._Menu.getItems();var i=this._getMenuDropCoords();this._Menu.getDroppedDown()?(this._Menu.hide(),this._menuOpened=!1,this._setFakePressed(!1)):(this._Menu.show(i[1],i[0],!0),this._menuOpened=!0,this._setFakePressed(!0))}else this.setIsPressed(!this._IsPressed);return PP.Ui.Button.base._onClicked.apply(this,arguments)}},buttonP._getMenuDropCoords=function(){var n=[],i=this._Menu.isVisibleArea(0,0,!0),t=PP.calculateOffset(this._DomNode),f,r,u;switch(this._MenuDropPosition){case PP.LTRB.Left:n.push(t.Y),this._IsRTL?n.push(t.X+this._DomNode.offsetWidth):n.push(t.X-i.Width);break;case PP.LTRB.Top:n.push(t.Y-i.Height-1),this._IsRTL?this._IsDefaultTemplate?n.push(t.X+this._DomNode.offsetWidth-i.Width+1):n.push(t.X+this._DomNode.offsetWidth-i.Width):this._IsDefaultTemplate?n.push(t.X-1):n.push(t.X),this._Menu._IsDefaultTemplate&&(n[0]=n[0]+5);break;case PP.LTRB.Right:n.push(t.Y),this._IsRTL?n.push(t.X-i.Width):n.push(t.X+this._DomNode.offsetWidth);break;case PP.LTRB.Bottom:n.push(t.Y+this._DomNode.offsetHeight+1),this._IsRTL?this._IsDefaultTemplate?n.push(t.X+this._DomNode.offsetWidth-i.Width+1):n.push(t.X+this._DomNode.offsetWidth-i.Width):this._IsDefaultTemplate?n.push(t.X-1):n.push(t.X);break;case null:n.push(t.Y-i.Height+this._DomNode.offsetHeight),this._IsRTL?n.push(t.X-i.Width-1):n.push(t.X+this._DomNode.offsetWidth+1),this._Menu._IsDefaultTemplate&&(n[0]=n[0]+5,n[1]=n[1]-1)}if(i=this._Menu.isVisibleArea(n[0],n[1],!0),f=null,!i.VisibleByHeight){u=0;switch(this._MenuDropPosition){case PP.LTRB.Left:case PP.LTRB.Right:case null:u=t.Y+this._DomNode.offsetHeight-i.Height;break;case PP.LTRB.Top:u=t.Y+this._DomNode.offsetHeight+1;break;case PP.LTRB.Bottom:u=t.Y-i.Height-1,this._Menu._IsDefaultTemplate&&(u+=5)}u>-1&&(f=this._Menu.isVisibleArea(u,n[1],!0),f.VisibleByHeight&&(n[0]=u))}if(!i.VisibleByWidth)if(this._IsRTL){r=0;switch(this._MenuDropPosition){case PP.LTRB.Left:r=t.X-i.Width;break;case PP.LTRB.Right:case null:r=t.X+this._DomNode.offsetWidth;break;case PP.LTRB.Top:case PP.LTRB.Bottom:r=this._IsDefaultTemplate?t.X-1:t.X}f=this._Menu.isVisibleArea(n[0],r,!0),f.VisibleByWidth&&(n[1]=r)}else{r=0;switch(this._MenuDropPosition){case PP.LTRB.Left:r=t.X+this._DomNode.offsetWidth;break;case PP.LTRB.Right:case null:r=t.X-i.Width;break;case PP.LTRB.Top:case PP.LTRB.Bottom:r=this._IsDefaultTemplate?t.X+this._DomNode.offsetWidth-i.Width+1:t.X+this._DomNode.offsetWidth-i.Width}f=this._Menu.isVisibleArea(n[0],r,!0),f.VisibleByWidth&&(n[1]=r)}return n},buttonP._onMouseDown=function(n,t){if(this._Enabled)return t.Event.which==1&&this._setFakePressed(!0),this._isMouseDown=!0,t.Event.which==1?this._Menu&&PP.Ui.Menu&&PP.Ui.Menu.RootMenu&&this._Menu==PP.Ui.Menu.RootMenu&&(t.Event.stopPropagation(),PP.IsOpera&&t.Event.preventDefault()):this._Menu&&this._Menu.getDroppedDown()&&(this._Menu.hide(),this._menuOpened=!1,this._setFakePressed(!1)),PP.Ui.Button.base._onMouseDown.apply(this,arguments)},buttonP._onMouseOver=function(){return this.setIsHovered(!0),PP.Ui.Button.base._onMouseOver.apply(this,arguments)},buttonP._onMouseOut=function(n,t){if(PP.reallyOut(this._DomNode,t.Event))return this.setIsHovered(!1),this._isMouseDown&&(this._setFakePressed(!1),this._isMouseDown=!1),PP.Ui.Button.base._onMouseOut.apply(this,arguments)},buttonP._onMouseUp=function(n,t){if(this._Enabled)return t.Event.which==1&&this._setFakePressed(!1),this._isMouseDown=!1,PP.Ui.Button.base._onMouseUp.apply(this,arguments)},buttonP._onKeyDown=function(n,t){return PP.Ui.Button.base._onKeyDown.call(this,n,t),t.Event.keyCode===13||t.Event.keyCode===32?(this._onClicked(n,t),!1):void 0},buttonP._onMenuClosed=function(){this._menuOpened&&(this._menuOpened=!1),this._setFakePressed(!1),this._isMouseDown=!1},buttonP._updateMultiLine=function(){var n,t,e,f,r,o,u,i;if(this._ArrowDomNode)if(n=this._Content,this._ImagePosition!==PP.LTRB.Left&&this._ImagePosition!==PP.LTRB.Right&&this._UseWrapping){if(PP.isString(n)||PP.isNumber(n)||PP.isDate(n))if(n=this._Content=n.replace("<br />"," "),n.indexOf(" ")>-1){if(t=n.split(" "),t.length==2)this.setContent(t[0]+"<br />"+t[1],!0);else{for(e=0,f=0;f<t.length;f++)e+=t[f].length;for(r=1,o=t[0].length;o<Math.floor(e/2)&&r<t.length;)o+=t[r].length,r++;for(u="",i=0;i<t.length;i++)u+=t[i],i==r-1?u+="<br />":i!=t.length-1&&(u+=" ");this.setContent(u,!0)}this._IsMultiLine=!0,this._MenuDropPosition===PP.LTRB.Bottom&&(this._MenuArrowPosition===PP.LTRB.Bottom||this._MenuArrowPosition===PP.LTRB.Right)?(PP.addClass(this._ArrowDomNode,"BR"),this._ContentDomNode.appendChild(this._ArrowDomNode)):PP.removeClass(this._ArrowDomNode,"BR")}else this._IsMultiLine=!1,PP.removeClass(this._ArrowDomNode,"BR"),this._MenuDropPosition===PP.LTRB.Bottom&&(this._MenuArrowPosition===PP.LTRB.Bottom||this._MenuArrowPosition===PP.LTRB.Right)&&this._ContentDomNode.parentNode.appendChild(this._ArrowDomNode)}else{(PP.isString(n)||PP.isNumber(n)||PP.isDate(n))&&this.setContent(n.replace("<br />"," "),!0),this._IsMultiLine=!1,PP.removeClass(this._ArrowDomNode,"BR"),this._MenuDropPosition===PP.LTRB.Bottom&&(this._MenuArrowPosition===PP.LTRB.Bottom||this._MenuArrowPosition===PP.LTRB.Right)&&this._ContentDomNode.parentNode.appendChild(this._ArrowDomNode);return}},buttonP._setFakePressed=function(n){if(PP.isBoolean(n)&&n!==this._FakeIsPressed){if(!n&&this._Menu&&this._menuOpened)return this;this._FakeIsPressed=n,this._setCssClass(n?"Pressed":this._IsPressed?"Selected":"Released")}},buttonP._onImageLoaded=function(n,t){if(this.isLive()){if(this._removeAllEvents(t.Element),this._DesaturationElement&&(this._DesaturationElement.parentNode&&this._DesaturationElement.parentNode.removeChild(this._DesaturationElement),delete this._DesaturationElement),this._imageLoaded=!0,this._Enabled){this._needToDesaturate=!0;return}PP.setTimeout(this._desaturate,0,{Self:this})}},buttonP._desaturate=function(n){var t=n.Self,i,s,u,f,o,r,h,c,e;if(t._needToDesaturate&&t._imageLoaded&&(i=t._ImageDomNode.getElementsByTagName("IMG")[0],i)){if(PP.IsIE&&PP.IEVer<9&&(s=PP.htmlToDOM("<div class='IEImageContainer'></div>"),document.body.appendChild(s),s.appendChild(i)),u=i.height,f=i.width,t._ImageList&&t._RowIndex>-1&&t._ColumnIndex>-1&&(!PP.IsIE||PP.IsIE&&PP.IEVer>8)&&(f=t._ImageList.getIconWidth(),u=t._ImageList.getIconHeight()),PP.IsIE&&PP.IEVer<9&&(document.body.removeChild(s),t._ImageDomNode.appendChild(i)),!PP.IsIE||PP.IsIE&&PP.IEVer>8?(t._DesaturationElement=PP.htmlToDOM("<canvas class='PPDesaturationElement'></canvas>"),t._DesaturationElement.height=u,t._DesaturationElement.width=f):(t._DesaturationElement=PP.htmlToDOM("<div class='PPDesaturationElement' style='filter: progid:DXImageTransform.Microsoft.BasicImage(grayScale=1); padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; background: none transparent scroll repeat 0% 0%; padding-top: 0px'><div style='padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; background: none transparent scroll repeat 0% 0%; padding-top: 0px'></div></div>"),t._DesaturationElement.style.height=u+"px",t._DesaturationElement.style.width=f+"px",t._DesaturationElement.firstChild.style.height=u+"px",t._DesaturationElement.firstChild.style.width=f+"px",t._DesaturationElement.firstChild.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+i.src+'", sizingMethod="crop")'),t._ImageList&&t._RowIndex>-1&&t._ColumnIndex>-1&&PP.IsIE&&PP.IEVer<9&&(t._DesaturationElement.style.left=t._ImageList.getLeft(t._ColumnIndex)+"px",t._DesaturationElement.style.top=t._ImageList.getTop(t._RowIndex)+"px"),t._ImageDomNode.appendChild(t._DesaturationElement),t._Enabled?(PP.show(i),PP.hide(t._DesaturationElement)):(PP.hide(i),PP.show(t._DesaturationElement)),(!PP.IsIE||PP.IsIE&&PP.IEVer>8)&&t._DesaturationElement&&t._DesaturationElement.getContext&&(o=t._DesaturationElement.getContext("2d"),o)){if(t._ImageList&&t._ColumnIndex>-1&&t._RowIndex>-1?o.drawImage(i,t._ColumnIndex*f,t._RowIndex*u,f,u,0,0,f,u):o.drawImage(i,0,0),(f==0||u==0)&&(f=i.width,u=i.height,f==0||u==0))return;for(r=o.getImageData(0,0,f,u),h=0;h<r.height;h++)for(c=0;c<r.width;c++)e=h*4*r.width+c*4,r.data[e]=r.data[e+1]=r.data[e+2]=r.data[e]*.33+r.data[e+1]*.33+r.data[e+2]*.33;o.putImageData(r,0,0,0,0,r.width,r.height)}t._needToDesaturate=!1}},buttonP._setCssClass=function(n){this.removeClass("Released"),this.removeClass("Hovered"),this.removeClass("Pressed"),this.removeClass("Selected"),this.addClass(n)},buttonP._clearArrowClass=function(){PP.removeClass(this._ArrowDomNode,"L"),PP.removeClass(this._ArrowDomNode,"T"),PP.removeClass(this._ArrowDomNode,"R"),PP.removeClass(this._ArrowDomNode,"B")},buttonP._setArrowClass=function(n){this._clearArrowClass(),PP.addClass(this._ArrowDomNode,n)},buttonP._setContentToNode=function(){var n=!1;return this._ArrowDomNode.parentNode===this._ContentDomNode&&(n=!0),PP.Ui.Button.base._setContentToNode.apply(this,arguments),this._Content?PP.show(this._ContentDomNode):PP.hide(this._ContentDomNode),n&&this._ContentDomNode.appendChild(this._ArrowDomNode),this},buttonP._refreshOrientation=function(){var n=PP.LTRB;this.hasImage()&&(this._ImagePosition===n.Left||this._ImagePosition===n.Right)||!this.hasImage()&&(this._MenuArrowPosition===n.Left||this._MenuArrowPosition===n.Right)?this.addClass("H"):this.removeClass("H")},buttonP.getImageList=function(){return this._ImageList},buttonP.setImageList=function(n){return n instanceof PP.ImageList&&n!=this._ImageList&&(this._ImageList=n,this.setImageUrl(this._ImageUrl,!0)),this},buttonP.getRowIndex=function(){return this._RowIndex},buttonP.setRowIndex=function(n){return PP.isNumber(n)&&n!==this._RowIndex&&(this._RowIndex=n,this.setImageUrl(this._ImageUrl,!0)),this},buttonP.getColumnIndex=function(){return this._ColumnIndex},buttonP.setColumnIndex=function(n){return PP.isNumber(n)&&n!==this._ColumnIndex&&(this._ColumnIndex=n,this.setImageUrl(this._ImageUrl,!0)),this},buttonP.getIsToggleButton=function(){return this._IsToggleButton},buttonP.setIsToggleButton=function(n){return n!=this._IsToggleButton&&(this._IsToggleButton=n,!this._IsToggleButton&&this._IsPressed&&this.setIsPressed(!1)),this},buttonP.getUseWrapping=function(){return this._UseWrapping},buttonP.setUseWrapping=function(n){return PP.isBoolean(n)&&n!=this._UseWrapping&&(this._UseWrapping=n,this._updateMultiLine()),this},buttonP.getImageUrl=function(){return this._ImageUrl},buttonP.setImageUrl=function(n,t){var i,r;if(n!=this._ImageUrl||t){this._ImageUrl=n,i=this._ImageDomNode,PP.removeChildren(i),this._needToDesaturate=!0;var u=this._ImageList,f=u&&this._RowIndex>-1&&this._ColumnIndex>-1,e=!!n;if(f||e)i.style.height="",i.style.width="",PP.show(i);else{PP.hide(i);return}f?(r=PP.htmlToDOM("<img class='PPImageElement' />"),this._addEvent(r,"load",this._onImageLoaded),r.setAttribute("src",u.getSource()),i.appendChild(r),i.style.height=u.getIconHeight()+"px",i.style.width=u.getIconWidth()+"px",r.style.left=u.getLeft(this._ColumnIndex)+"px",r.style.top=u.getTop(this._RowIndex)+"px"):e&&(r=PP.htmlToDOM("<img class='PPImageElement' />"),this._addEvent(r,"load",this._onImageLoaded),r.setAttribute("src",n),i.appendChild(r))}return this},buttonP.getImagePosition=function(){return this._ImagePosition},buttonP.setImagePosition=function(n,t){if(n!=this._ImagePosition||t){var i=PP.LTRB;this._ImagePosition=n;switch(this._ImagePosition){case i.Left:case i.Top:this._ImageDomNode.parentNode.insertBefore(this._ImageDomNode,this._ContentDomNode),this._refreshOrientation();break;case i.Right:case i.Bottom:switch(this._ImagePosition){case i.Left:case i.Top:this._ImageDomNode.parentNode.appendChild(this._ImageDomNode);break;case i.Right:case i.Bottom:this._IsMultiLine?this._ImageDomNode.parentNode.appendChild(this._ImageDomNode):this._ImageDomNode.parentNode.insertBefore(this._ImageDomNode,this._ArrowDomNode)}this._refreshOrientation()}t||this._updateMultiLine()}},buttonP.setContent=function(n,t){return this._setContentToNode(n,this._ContentDomNode),t||this._updateMultiLine(),this},buttonP.getMenu=function(){return this._Menu},buttonP.setMenu=function(n,t){return(n!=this._Menu||t)&&(n?(this._Menu=n instanceof PP.Ui.DropPanel?n:new PP.Ui.Menu(n),this._Menu.Closed.add(this._onMenuClosed,this),PP.show(this._ArrowDomNode)):(this._Menu&&this._Menu.Closed.remove(this._onMenuClosed,this),this._Menu=null,PP.hide(this._ArrowDomNode)),t||this._updateMultiLine()),this},buttonP.getMenuDropPosition=function(){return this._MenuDropPosition},buttonP.setMenuDropPosition=function(n,t){if(t||n!=this._MenuDropPosition){this._MenuDropPosition=n;switch(n){case PP.LTRB.Left:this._setArrowClass("L");break;case PP.LTRB.Top:this._setArrowClass("T");break;case PP.LTRB.Right:this._setArrowClass("R");break;case PP.LTRB.Bottom:this._setArrowClass("B")}}return this},buttonP.getMenuArrowPosition=function(){return this._MenuArrowPosition},buttonP.setMenuArrowPosition=function(n,t){if(t||n!=this._MenuArrowPosition){this._MenuArrowPosition=n;switch(n){case PP.LTRB.Left:case PP.LTRB.Top:switch(this._ImagePosition){case PP.LTRB.Left:case PP.LTRB.Top:this._ContentDomNode.parentNode.insertBefore(this._ArrowDomNode,this._ImageDomNode);break;case PP.LTRB.Right:case PP.LTRB.Bottom:this._ContentDomNode.parentNode.insertBefore(this._ArrowDomNode,this._ContentDomNode)}this._refreshOrientation();break;case PP.LTRB.Right:case PP.LTRB.Bottom:this._IsMultiLine?this._ContentDomNode.appendChild(this._ArrowDomNode):this._ContentDomNode.parentNode.appendChild(this._ArrowDomNode),this._refreshOrientation()}t||this._updateMultiLine()}},buttonP.getIsPressed=function(){return this._IsPressed},buttonP.setIsPressed=function(n,t){n=!!n,this._IsToggleButton&&(t||n!=this._IsPressed)&&(this._IsPressed=n,this._setCssClass(n?"Selected":"Released"))},buttonP.setIsHovered=function(n){if(this._Menu&&this._menuOpened)return this;this._setCssClass(n&&this._Enabled?"Hovered":this._IsPressed?"Selected":"Released")},buttonP.setHeight=function(n){var i,t;if(PP.Ui.Button.base.setHeight.call(this,n),PP.IsIE&&PP.IEVer===7){var r=PP.querySelector(this._DomNode,".PPRoundedMiddle"),u=PP.querySelector(this._DomNode,".PPRoundedTopLeft"),f=PP.querySelector(this._DomNode,".PPRoundedBottomLeft");r&&u&&f&&(i=0,t=parseInt(PP.getStyle(u,"height")),isNaN(t)||(i+=t),t=parseInt(PP.getStyle(f,"height")),isNaN(t)||(i+=t),r.style.height=this._checkValue(this.getHeight()-(i||6))+"px")}return this},buttonP.setWidth=function(n){if(PP.Ui.Button.base.setWidth.call(this,n),PP.IsIE&&PP.IEVer===7){var t=PP.querySelector(this._DomNode,".PPRoundedTable");t&&(n&&n.toString().indexOf("%")<0?(t.style.width=this._checkValue(n)+"px",t.style.tableLayout="fixed"):(t.style.width="",t.style.tableLayout=""))}this._updateMultiLine()},buttonP.setIsRTL=function(n){var t,i;return PP.Ui.Button.base.setIsRTL.apply(this,arguments),this._ContentDomNode.parentNode.dir=this._IsRTL?"rtl":"ltr",this._ImageList&&this._RowIndex>-1&&this._ColumnIndex>-1&&(t=this._ImageDomNode.getElementsByTagName("img")[0],t&&(i=this._ImageList.getLeft(this._ColumnIndex),t.style.left=i+"px",this._DesaturationElement&&PP.IsIE&&PP.IEVer<9&&(this._DesaturationElement.style.left=i+"px"))),this._Menu&&this._Menu.setIsRTL(n),this},buttonP.setEnabled=function(n,t){if(PP.isBoolean(n)&&n!=this._Enabled||t){PP.Ui.Button.base.setEnabled.apply(this,arguments),this.getEnabled()||this.setIsHovered(!1);var i;this._Enabled?(this._DesaturationElement&&PP.hide(this._DesaturationElement),i=this._ImageDomNode.getElementsByTagName("img")[0],i&&PP.show(i)):(this._DesaturationElement&&PP.show(this._DesaturationElement),i=this._ImageDomNode.getElementsByTagName("img")[0],i&&(this._needToDesaturate?PP.setTimeout(this._desaturate,0,{Self:this}):PP.hide(i))),this._Menu&&this._Menu.hide(),this._IsRTL&&this.setIsRTL(this._IsRTL)}return this},buttonP.hasImage=function(){return this._ImageUrl||this._ImageList&&this._RowIndex>-1&&this._ColumnIndex>-1},buttonP.addToNode=function(){PP.Ui.Button.base.addToNode.apply(this,arguments),this._updateMultiLine()},buttonP.dispose=function(){delete this._ImageList,delete this._Menu,PP.Ui.Button.base.dispose.apply(this,arguments)},buttonP=null,PP.Ui.RibbonButton=function(n){PP.Ui.RibbonButton.base.constructor.call(this,n)},PP.initClass(PP.Ui.RibbonButton,PP.Ui.Button,"RibbonButton"),ribbonButtonP=PP.Ui.RibbonButton.prototype,ribbonButtonP._Template=PP.Templates.RibbonButton,ribbonButtonP._UseWrapping=!0,ribbonButtonP._render=function(){PP.Ui.RibbonButton.base._render.apply(this,arguments),this.addClass("PPRibbonButton")},ribbonButtonP.setImageUrl=function(n,t){var r,i;if(n!=this._ImageUrl||t){this._ImageUrl=n,r=this._ImageDomNode,PP.removeChildren(r),this._needToDesaturate=!0;var u=this._ImageList,f=u&&this._RowIndex>-1&&this._ColumnIndex>-1,e=!!n;if(f||e)r.style.height="",r.style.width="",PP.show(r);else{PP.hide(r);return}f?(i=PP.htmlToDOM("<img class='PPImageElement' />"),this._addEvent(i,"load",this._onImageLoaded),i.setAttribute("src",u.getSource()),r.appendChild(i),i.style.left=u.getLeft(this._ColumnIndex)+"px",i.style.top=u.getTop(this._RowIndex)+"px"):e&&(i=PP.htmlToDOM("<img class='PPImageElement' />"),this._addEvent(i,"load",this._onImageLoaded),i.setAttribute("src",n),r.appendChild(i))}return this},ribbonButtonP=null,PP.Ui.Menu=function(n){n=n||{},n.FocusOnOpen=!1,this._Items=[],this._ImageList=null,this._ScrollHeight=100,this._ShowIcons=!0,this._defineEvents(["ItemSelected"]),n.EnableResize=n.UseScrollBox=!1,this._Groups={},PP.Ui.Menu.base.constructor.call(this,n),this._ScrollingMouseDown=!1,this._OpenedChildMenu=null,this.FrameDown.add(this._onFrameDown,this),this.OutOfPanelDown.add(this._onFrameDown,this),this.Opened.add(this._onOpened,this),this.Closed.add(this._onClosed,this),this.setEnableResize(!1),this.setMinDropDownHeight(0),this.setMinDropDownWidth(0),this.setMaxDropDownHeight(1e4),this.setMaxDropDownWidth(1e4),this._itemsInitialized=!1,this._IsInitialized=!0},PP.initClass(PP.Ui.Menu,PP.Ui.DropPanel,"Menu"),menuP=PP.Ui.Menu.prototype,PP.Ui.Menu.RootMenu=null,menuP._render=function(){PP.Ui.Menu.base._render.apply(this,arguments),PP.addClass(this._DomNode,"PPDropMenu"),this._MenuDomNode=PP.htmlToDOM("<ul class='PPMenu'></ul>"),this._UpArrow=PP.htmlToDOM("<li class='PPMenuUpArrow'><div></div></li>"),PP.IEVer==8&&(this._UpArrow.firstChild.className="PPMenuUpArrowIE8"),this._MenuDomNode.appendChild(this._UpArrow),this._ItemsLi=PP.htmlToDOM("<li class='PPItemsContainer'></li>"),this._MenuDomNode.appendChild(this._ItemsLi),this._DownArrow=PP.htmlToDOM("<li class='PPMenuDownArrow'><div></div></li>"),this._MenuDomNode.appendChild(this._DownArrow),this._ContentDomNode.appendChild(this._MenuDomNode),this._Animation||this.setAnimation(new PP.AnimationSettings),this._UpArrowHeight=this._UpArrow.offsetHeight,this._DownArrowHeight=this._DownArrow.offsetHeight},menuP._bindEvents=function(){PP.Ui.Menu.base._bindEvents.apply(this,arguments),this._addEvents(this._UpArrow,{mousedown:this._scrollUp,mouseup:this._scrollUp}),this._addEvents(this._DownArrow,{mousedown:this._scrollDown,mouseup:this._scrollDown})},menuP._unBindEvents=function(){this._removeAllEvents(this._UpArrow,"mousedown",this._scrollUp),this._removeAllEvents(this._DownArrow,"mousedown",this._scrollUp),PP.Ui.Menu.base._unBindEvents.apply(this,arguments)},menuP._initItems=function(){var i,n,u,r,t;if(!this._itemsInitialized){if(i=this._Items,this._Items=[],i)for(u=i.length,r=0;r<u;r++)t=i[r],t.MenuItem?(n=t.MenuItem,n.Parent||(n.Parent=this),this.addItem(new PP.Ui.MenuItem(n))):t.MenuHeader?(n=t.MenuHeader,n.Parent||(n.Parent=this),this.addItem(new PP.Ui.MenuHeader(n))):t.Separator?(n=t.Separator,n.Parent||(n.Parent=this),this.addItem(new PP.Ui.Separator(n))):t.SimpleSeparator?(n=t.SimpleSeparator,n.Parent||(n.Parent=this),this.addItem(new PP.Ui.SimpleSeparator(n))):t.ContentMenuItem?(n=t.ContentMenuItem,n.Parent||(n.Parent=this),this.addItem(new PP.Ui.ContentMenuItem(n))):t.ActiveMenuItem?(n=t.ActiveMenuItem,n.Parent||(n.Parent=this),this.addItem(new PP.Ui.ActiveMenuItem(n))):i[r]instanceof PP.Ui.MenuItem?this.addItem(i[r]):i[r].PPType&&(i[r].Parent||(i[r].Parent=this),this.addItem(PP.create(i[r])));this._itemsInitialized=!0}},menuP._onOpened=function(){PP.Ui.Menu.RootMenu==null&&(PP.Ui.Menu.RootMenu=this),this._initItems(),this._ContextOpening?delete this._ContextOpening:this._fixSizes()},menuP._fixSizes=function(){for(var i=0,n=-1,t=0;t<this._ItemsLi.childNodes.length;t++)i+=this._ItemsLi.childNodes[t].offsetHeight;this._ItemsLi.style.height="",this._UpArrowHeight||(this._UpArrowHeight=this._UpArrow.offsetHeight),this._DownArrowHeight||(this._DownArrowHeight=this._DownArrow.offsetHeight),i+this._UpArrowHeight+this._DownArrowHeight+this._DomNode.offsetTop+(this._DomNode.offsetHeight-this._ItemsLi.parentNode.offsetHeight)>document.documentElement.clientHeight?(this._UpArrow.style.display="block",this._DownArrow.style.display="block",n=document.documentElement.clientHeight-this._DomNode.offsetTop-(this._DomNode.offsetHeight-this._ItemsLi.parentNode.offsetHeight)-this._UpArrowHeight-this._DownArrowHeight,this._ItemsLi.style.height=n>-1?n+"px":"0px",this._setArrowsAvailability()):i>this._MenuDomNode.parentNode.offsetHeight?(this._UpArrow.style.display="block",this._DownArrow.style.display="block",n=this._MenuDomNode.parentNode.offsetHeight-this._UpArrowHeight-this._DownArrowHeight,this._ItemsLi.style.height=n>-1?n+"px":"0px",this._setArrowsAvailability()):(this._UpArrow.style.display="none",this._DownArrow.style.display="none",this._ItemsLi.style.height="")},menuP._setArrowsAvailability=function(){for(var t=0,n=0;n<this._ItemsLi.childNodes.length;n++)t+=this._ItemsLi.childNodes[n].offsetHeight;this._UpArrow.className=this._ItemsLi.scrollTop>0?"PPMenuUpArrow":"PPMenuUpArrowDisabled",this._UpArrowHeight||(this._UpArrowHeight=this._UpArrow.offsetHeight),this._DownArrow.className=t-this._ItemsLi.scrollTop-this._ItemsLi.offsetHeight-this._UpArrowHeight<=0?"PPMenuDownArrowDisabled":"PPMenuDownArrow"},menuP._onClosed=function(){PP.Ui.Menu.RootMenu==this&&(PP.Ui.Menu.RootMenu=null)},menuP._scrollUp=function(n,t){if(this._Enabled)if(t.Event.type=="mousedown"){this._ScrollingMouseDown=!0;var i=this;setTimeout(function(){i._scroll(!0)},20)}else t.Event.type=="mouseup"&&(this._ScrollingMouseDown=!1)},menuP._scrollDown=function(n,t){if(this._Enabled)if(t.Event.type=="mousedown"){PP.setCapture(t.Event.sourceElement),this._ScrollingMouseDown=!0;var i=this;setTimeout(function(){i._scroll(!1)},20)}else t.Event.type=="mouseup"&&(PP.releaseCapture(t.Event.sourceElement),this._ScrollingMouseDown=!1)},menuP._scroll=function(n){if(this._ScrollingMouseDown){var t=this._ItemsLi,r=this,i;n?this.getAnimation().UseAnimation?(i=new PP.Ui.Animation(this.getAnimation().AnimationTime,t.scrollTop,t.scrollTop-this._ScrollHeight),i.animateDomNodeProp(t,"scrollTop",PP.Delegate(this._animationCallback,this))):(t.scrollTop-=this._ScrollHeight,this._fixSizes()):this.getAnimation().UseAnimation?(i=new PP.Ui.Animation(this.getAnimation().AnimationTime,t.scrollTop,t.scrollTop+this._ScrollHeight),i.animateDomNodeProp(t,"scrollTop",PP.Delegate(this._animationCallback,this))):(t.scrollTop+=this._ScrollHeight,this._fixSizes()),setTimeout(function(){r._scroll(n)},this.getAnimation().AnimationTime)}},menuP._animationCallback=function(n,t){this._setArrowsAvailability(),t.IsEnd&&n.dispose()},menuP._onFrameDown=function(){PP.Ui.DropPanel.OpenedPanels[PP.Ui.DropPanel.OpenedPanels.length-1]instanceof PP.Ui.Menu&&(PP.Ui.Menu.RootMenu||(PP.Ui.Menu.RootMenu=this),PP.Ui.Menu.RootMenu.hide())},menuP._hideChildMenu=function(n){var i,r,t;if(n._OpenedChildMenu!=null){for(i=n._OpenedChildMenu.getItems(),r=i.length,t=0;t<r;t++)i[t].setIsHovered(!1);n._OpenedChildMenu.hide(),n._OpenedChildMenu=null}},menuP._isOutOfPanelDown=function(n){for(var e=!0,r=PP.calculateMouseCoords(n),i=PP.Ui.DropPanel.OpenedPanels,o=i.length,t=0;t<o;t++)if(i[t]instanceof PP.Ui.Menu){var u=parseInt(i[t].getDomNode().style.left),f=parseInt(i[t].getDomNode().style.top),s=i[t].getDomNode().offsetWidth,h=i[t].getDomNode().offsetHeight;if(r.X>=u&&r.X<=u+s&&r.Y>=f&&r.Y<=f+h)return!1}return e},menuP._getContextMenuCoords=function(n,t){var i={X:n,Y:t},r=this._DomNode.getBoundingClientRect(),u=r.right-r.left,f=r.bottom-r.top,e=document.documentElement.clientWidth,o=document.documentElement.clientHeight,s,h,c;return this._IsRTL&&(i.X-=u),s=i.X>-1&&i.X<e&&i.X+u>=0&&i.X+u<=e?!0:!1,h=i.Y>-1&&i.Y<o&&i.Y+f>=0&&i.Y+f<=o?!0:!1,h||(i.Y-=f,i.Y<0&&(i.Y+=f)),s||(this._IsRTL?i.X=0:(c=i.X,i.X=e-u,i.X<0&&(i.X=c))),i},menuP._onContextMenu=function(n,t){t.Event.preventDefault()},menuP.getItems=function(){return this._initItems(),this._Items},menuP.setImageList=function(n){var i,t;if(n!=this._ImageList&&(this._ImageList=n,this._ImageList))for(i=this._Items.length,t=0;t<i;t++)this._Items[t]instanceof PP.Ui.MenuItem&&(this._Items[t]instanceof PP.Ui.Separator||this._Items[t].setColumnIndex(this._Items[t].getColumnIndex()))},menuP.getImageList=function(){return this._ImageList},menuP.setIsRTL=function(n){var i,t;for(PP.Ui.Menu.base.setIsRTL.call(this,n),i=this._Items.length,t=0;t<i;t++)this._Items[t]instanceof PP.Ui.MenuItem?this._Items[t].setIsRTL(n):this._Items[t].IsRTL=this._IsRTL},menuP.setEnabled=function(n,t,i){var u,r;if(i=typeof i=="undefined"?!1:i==!0,PP.Ui.Menu.base.setEnabled.apply(this,arguments),i&&this._Items)for(u=this._Items.length,r=0;r<u;r++)this._Items[r]instanceof PP.Ui.MenuItem?this._Items[r].setEnabled(this._Enabled,t):this._Items[r].Enabled=this._Enabled;return this},menuP.getShowIcons=function(){return this._ShowIcons},menuP.setShowIcons=function(n){var i,t;if(PP.isBoolean(n)&&n!=this._ShowIcons)for(this._ShowIcons=n,i=this._Items.length,t=0;t<i;t++)this._Items[t]instanceof PP.Ui.MenuItem&&this._Items[t].setShowIcon(this._ShowIcons)},menuP.setHeight=function(){return PP.Ui.Menu.base.setHeight.apply(this,arguments),this._IsInitialized&&this._fixSizes(),this},menuP.getScrollHeight=function(){return this._ScrollHeight},menuP.setScrollHeight=function(n){return PP.isNumber(n)&&n!=this._ScrollHeight&&(this._ScrollHeight=n),this},menuP.isVisibleArea=function(){return this._initItems(),PP.Ui.Menu.base.isVisibleArea.apply(this,arguments)},menuP.addItem=function(n){return this.insertItem(n)},menuP.insertItem=function(n,t){var u=typeof n,r,i;if(t>this._Items.length-1&&(t=null),r=typeof t=="undefined"||t==null,!r&&typeof t!="number")throw new Error("incorrect type of index");if(!r&&t<0)throw new Error("incorrect value of index");return u=="string"||u=="number"||u=="date"||u!="undefined"&&n!=null?(i=n instanceof PP.Ui.MenuItem?n:new PP.Ui.MenuItem({Parent:this,Content:n}),i._Parent||(i._Parent=this),i.getGroupName()&&i.setGroupName(i.getGroupName(),!0),PP.isBoolean(i.getChecked())&&i.setChecked(i.getChecked(),!1,!0),n instanceof PP.Ui.MenuItem||i.setEnabled(this._Enabled,!1,!0),i.setIsRTL(this._IsRTL),i.setShowIcon(this._ShowIcons),this._ImageList&&i.getColumnIndex()>-1&&i.getRowIndex()>-1&&i.setColumnIndex(i.getColumnIndex()),r||this._Items.length==0?this._Items.push(i):this._Items.splice(t,0,i),i.addToNode(this._ItemsLi),r||this._ItemsLi.childNodes.length==0||this._ItemsLi.insertBefore(i._DomNode,this._ItemsLi.childNodes[t]),i):null},menuP.insertItemBefore=function(n,t){var i=this._Items.indexOf(t);i>-1&&this.insertItem(n,i)},menuP.insertItemAfter=function(n,t){var i=this._Items.indexOf(t);i>-1&&this.insertItem(n,i+1)},menuP.removeItem=function(n){this.removeItemByIndex(this._Items.indexOf(n))},menuP.removeItemByIndex=function(n,t){if(t=typeof t=="undefined"?!0:t==!0,parseInt(n)>-1&&n<this._Items.length){var i=this._Items[n];i instanceof PP.Ui.MenuItem&&(t?i.dispose():i.removeFromDOM()),this._Items.splice(n,1)}},menuP.clearItems=function(){for(var t=this._Items.length,n=0;n<t;n++)this._Items[n]instanceof PP.Ui.MenuItem&&(this._Items[n]._Menu=null,this._Items[n].dispose());this._Items=[]},menuP.showContext=function(n,t,i){this._ContextOpening=!0,this.show(0,0,i),this._DomNode.style.visibility="hidden";var r=this._getContextMenuCoords(n,t);this.setCoords(r.X,r.Y),this._fixSizes(),this._DomNode.style.visibility=""},menuP.hide=function(){for(var t=this._Items.length,n=0;n<t;n++)this._Items[n]instanceof PP.Ui.MenuItem?this._Items[n].setIsHovered(!1):this._Items[n].IsHovered=!1;this._hideChildMenu(this),PP.Ui.Menu.base.hide.apply(this,arguments)},menuP.getMenuItemById=function(n,t){var u=null,i=null,f,o,r,e;for(t=t==!0,f=this.getItems(),o=f.length,r=0;r<o;r++){if(i=f[r],i.getId()==n)return i;if(!t&&(u=i.getMenu(),u&&(e=u.getMenuItemById(n),e)))return e}return null},menuP.clearCheckedByGroupName=function(n){for(var i=this.getItems(),t=0;t<i.length;t++)i[t].getGroupName()==n&&i[t].setChecked(!1,!1)},menuP.dispose=function(){delete this._ImageList,this._disposeArray(this._Items,!0),this.removeAllEvents(this),PP.Ui.Menu.base.dispose.apply(this,arguments)},menuP=null,PP.Ui.MainMenu=function(){this._Items=[],PP.Ui.MainMenu.base.constructor.apply(this,arguments),this._lastOpenedBtn=null,this._render()},PP.initClass(PP.Ui.MainMenu,PP.Ui.Control,"MainMenu"),mainMenuP=PP.Ui.MainMenu.prototype,mainMenuP._render=function(){var t,n;if(this._initFromHTML("<div class='PPMainMenu'></div>"),Array.isArray(this._Items))for(t=this._Items,this._Items=[],n=0;n<t.length;n++)t[n]instanceof PP.Ui.MainMenuButton?this.addItem(t[n]):this.addItem(new PP.Ui.MainMenuButton(t[n]));this._ParentNode&&this.addToNode(this._ParentNode),PP.Ui.MainMenu.base._render.call(this)},mainMenuP._onMenuButtonOver=function(n,t){if(this._Enabled){var i=n.getMenu();this._lastOpenedBtn&&i&&n._Parent==this&&PP.Ui.Menu.RootMenu&&n._Menu!=PP.Ui.Menu.RootMenu&&(PP.Ui.Menu.RootMenu.hide(),n._onClicked(n,t))}},mainMenuP._onButtonMenuOpened=function(n,t){this._lastOpenedBtn=t.Args.MainMenuButton},mainMenuP._onButtonMenuClosed=function(n,t){this._lastOpenedBtn=null,t.Args.MainMenuButton.setIsPressed(!1)},mainMenuP.setEnabled=function(n,t){if(n=!!n,n!=this._Enabled||t){PP.Ui.MainMenu.base.setEnabled.call(this,n,t);for(var i=0;i<this._Items.length;i++)this._Items[i].setEnabled(n)}return this},mainMenuP.setIsRTL=function(n){n=!!n,PP.Ui.MainMenu.base.setIsRTL.call(this,n);for(var t=0;t<this._Items.length;t++)this._Items[t].setIsRTL(n);return this},mainMenuP.addItem=function(n){if(n instanceof PP.Ui.MainMenuButton){this._Items.push(n);var t=n.getMenu();t&&(t.Opened.add(this._onButtonMenuOpened,this,{MainMenuButton:n}),t.Closed.add(this._onButtonMenuClosed,this,{MainMenuButton:n})),n._Parent=this,n.MouseOver.add(this._onMenuButtonOver,this),n.addToNode(this._DomNode)}return this},mainMenuP.removeItem=function(n,t){var r,i,u;return t=typeof t=="undefined"?!0:t==!0,n instanceof PP.Ui.MainMenuButton&&(r=this._Items.indexOf(n),r>-1&&(i=this._Items[r],u=i.getMenu(),u&&(u.Opened.remove(this._onButtonMenuOpened,this),u.Closed.remove(this._onButtonMenuClosed,this)),i.MouseOver.remove(this._onMenuButtonOver,this),this._Items.splice(r,1),t?i.dispose():i.removeFromDOM())),this},mainMenuP.dispose=function(){var t,n;if(this.isLive()){for(t=this._Items.length,n=t-1;n>-1;n--)this.removeItem(n);PP.Ui.MainMenu.base.dispose.apply(this,arguments)}},mainMenuP=null,PP.Ui.TabItem=function(n){this._Parent=this._Content=null,this._Caption="",this._Position=PP.LTRB.Left,this._CSSName||(this._CSSName="PPTabControlItem"),this._ImageUrl="",this._IsAddItem=!1,PP.Ui.TabItem.base.constructor.apply(this,arguments),n&&typeof n.IsRTL!="undefined"&&(this._IsRTL=n.IsRTL),this._HeaderContentDomNode=null,this._ContentDomNode=null,this._MoveIcon=null,this._InsertIcon=null,this._InsertIndex=null,this._IsHiddenActive=!1,this._imgCell=null,this._cssItemImg="PPTabControlItemImg",this._cssItemCaption="PPTabControlItemCaption",this._divForHeight=null,this._addItemAttr="additem",this._mouseMoveTimer=null,this._isInMoving=!1,this._captionTextBox=null,this._DelButtonDomNode=null,this._render()},PP.initClass(PP.Ui.TabItem,PP.Ui.Control,"TabItem"),tabItemP=PP.Ui.TabItem.prototype,tabItemP._bindEvents=function(){PP.Ui.TabItem.base._bindEvents.apply(this,arguments),this._HeaderContentDomNode&&this._addEvent(this._HeaderContentDomNode,"dblclick",this._onCaptionDblClick),this._DelButtonDomNode&&this._addEvent(this._DelButtonDomNode,"click",this._onDelButtonClick)},tabItemP._unBindEvents=function(){PP.Ui.TabItem.base._unBindEvents.apply(this,arguments),this._HeaderContentDomNode&&this._removeEvent(this._HeaderContentDomNode,"dblclick",this._onCaptionDblClick),this._DelButtonDomNod&&this._removeEvent(this._DelButtonDomNode,"click",this._onDelButtonClick)},tabItemP._render=function(){var i=this._CSSName+"HeaderCenter",u=this._IsAddItem?" Add":"",r,t,n;this._initFromHTML("<div class='"+this._CSSName+"Header"+u+"'></div>"),this._IsAddItem?this._DomNode.setAttribute(this._addItemAttr,this._addItemAttr):this._DomNode.removeAttribute(this._addItemAttr),r=document.createElement("TABLE"),this._DomNode.appendChild(r),r.cellPadding=0,r.cellSpacing=0,r.border=0,t=r.insertRow(-1),n=null,this._IsRTL?(n=t.insertCell(-1),n.className=this._CSSName+"HeaderRight",n.innerHTML="&nbsp;",this._captionCell=t.insertCell(-1),this._captionCell.className=i,this._imgCell=t.insertCell(-1),this._imgCell.className=i+" Img",this._imgDiv=document.createElement("DIV"),this._imgCell.appendChild(this._imgDiv),this._imgDiv.className=this._cssItemImg,this.setImageUrl(this._ImageUrl),n=t.insertCell(-1),n.className=i+" Left",n.innerHTML="&nbsp;",n=t.insertCell(-1),n.className=this._CSSName+"HeaderLeft",n.innerHTML="&nbsp;"):(n=t.insertCell(-1),n.className=this._CSSName+"HeaderLeft",n.innerHTML="&nbsp;",n=t.insertCell(-1),n.className=i+" Left",n.innerHTML="&nbsp;",this._imgCell=t.insertCell(-1),this._imgCell.className=i+" Img",this._imgDiv=document.createElement("DIV"),this._imgCell.appendChild(this._imgDiv),this._imgDiv.className=this._cssItemImg,this.setImageUrl(this._ImageUrl),this._captionCell=t.insertCell(-1),this._captionCell.className=i,n=t.insertCell(-1),n.className=this._CSSName+"HeaderRight",n.innerHTML="&nbsp;"),this._captionConteiner=PP.htmlToDOM("<table><tbody><tr><td><div class='"+this._cssItemCaption+"'>"+this._Caption+"</div></td><td><div class='"+this._CSSName+"DelButton' style='display: none'>&nbsp;</div></td></tr></tbody></table>"),this._HeaderContentDomNode=this._captionConteiner.getElementsByTagName("div")[0],this._DelButtonDomNode=this._captionConteiner.getElementsByTagName("div")[1],this._captionCell.appendChild(this._captionConteiner),this._IsVisible?PP.show(this._DomNode,!0):PP.hide(this._DomNode),this._ContentDomNode=PP.htmlToDOM("<div class='"+this._CSSName+"Content'></div>"),this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),this._bindEvents(),PP.Ui.TabItem.base._render.call(this)},tabItemP._displayDelButton=function(){this._Parent&&this._DelButtonDomNode&&(this._DelButtonDomNode.style.display=this._Parent.getEnableDelete()?"block":"none")},tabItemP.refreshSize=function(){var n,t,i,r;this._displayDelButton(),this._Position||(PP.IsIE?(n=this._HeaderContentDomNode.offsetWidth,t=this._HeaderContentDomNode.offsetHeight,this._divForHeight.style.width=0,this._divForHeight.style.width=n+"px",this._divForHeight.style.height=0,this._divForHeight.style.height=t+"px"):(n=this._HeaderContentDomNode.offsetHeight,t=this._HeaderContentDomNode.offsetWidth,this._divForHeight.style.width=0,this._divForHeight.style.width=n+"px",this._divForHeight.style.height=0,this._divForHeight.style.height=t+"px",i=PP.calculateOffset(this._divForHeight),r=PP.calculateOffset(this._captionCell),this._Position==PP.LTRB.Left?(this._HeaderContentDomNode.style.top=i.Y-r.Y+t+"px",this._HeaderContentDomNode.style.left=i.X-r.X+"px"):this._Position==PP.LTRB.Right&&(this._HeaderContentDomNode.style.top=i.Y-r.Y+"px",this._HeaderContentDomNode.style.left=i.X-r.X+n+"px")))},tabItemP._onClicked=function(){var r,i,u;if(this._Enabled&&this._Parent&&this._Parent._Enabled){if(this._IsAddItem){var f=this._Parent?this._Parent._IsRTL:!1,e=this._Parent._NewTabCaption||"",o=new PP.Ui.TabItem({Parent:this._Parent,Caption:e,Position:this._Position,IsRTL:f}),s=this._Parent._addItem(o,!1,!1,!0);s&&(u=this._Parent.getItems().length-1,this._Parent.setSelectedIndex(u),this._Parent._scrollToItem(this))}else for(r=this._Parent.getItems(),i=0;i<r.length;i++)r[i]==this&&this._Parent.setSelectedIndex(i);PP.Ui.TabItem.base._onClicked.apply(this,arguments)}},tabItemP._onDelButtonClick=function(n,t){if(this._Enabled&&this._Parent&&this._Parent._Enabled&&this._Parent._EnableDelete){var i=this._Parent.getItems().indexOf(this);return t={TabIndex:i},this._Parent.TabDeleted.fire(this,t),t.Break||this._Parent.removeItem(i),!1}},tabItemP._onCaptionDblClick=function(){var u,r,i;this._Enabled&&this._Parent&&this._Parent._Enabled&&this._Parent._EnableEdit&&(this.getIsEditing()||(u=this._Parent.getItems().indexOf(this),this._Parent.TabEditing.fire(this,{TabIndex:u,Caption:this._Caption}),r=this._Position==PP.LTRB.Top||this._Position==PP.LTRB.Bottom,i=parseInt(PP.getStyle(this._DomNode,r?"width":"height"),10),i||(i=r?this._DomNode.offsetWidth:this._DomNode.offsetHeight),i||(i=r?this._Width:this._Height),this._HeaderContentDomNode.innerHTML="",this._captionTextBox=new PP.Ui.TextBox({ParentNode:this._HeaderContentDomNode,Width:i}),PP.setTimeout(this._setTBFocus,1,this),this._captionTextBox.setContent(this._Caption),this._captionTextBox.Blur.add(this._onCaptionTextBoxBlur,this),this._tmpCaption=this._Caption,this._Caption=""))},tabItemP._onCaptionTextBoxBlur=function(){var i=this._captionTextBox.getContent(),u,r;this._captionTextBox.dispose(),u=this._tmpCaption===i,this.setCaption(i),r=this._Parent.getItems().indexOf(this),this._Parent.TabEdited.fire(this,{TabIndex:r,Caption:i}),u||this._Parent.TextEdited.fire(this,{TabIndex:r,Caption:i})},tabItemP._setTBFocus=function(n){n._captionTextBox&&n._captionTextBox.isLive()&&n._captionTextBox.setFocus()},tabItemP._onMouseDown=function(n,t){var i;if(this._Enabled&&this._Parent&&this._Parent._Enabled&&this._Parent._DragDropEnabled&&!this._IsAddItem){this._removeEvent(this._DomNode,"mousedown",this._onMouseDown),this._addEvent(document.documentElement,"mouseup",this._onDocumentMouseUp);var f=PP.calculateMouseX(t.Event),e=PP.calculateMouseY(t.Event),u=this._Parent._getTabItemsPanel(this._Position),r=this._getItemIndexByCoords(u,f,e,this._Position);r=this._getItemOrderNumber(u,r,this._Position),i=this,this._mouseMoveTimer=setTimeout(function(){i._addEvent(document.documentElement,"mousemove",i._onDocumentMouseMove),i._isInMoving=!0,i._indexBeforeMove=r,i._cover=PP.createElement(i._Parent.getDomNode(),"PPTabControlCover"),i._cover.style.width=i._Parent.getWidth()+"px",i._cover.style.height=i._Parent.getHeight()+"px",i._addEvent(i._cover,"mouseup",i._onCoverMouseUp)},100)}},tabItemP._onDocumentMouseMove=function(n,t){var i,r,u;return this._InsertIcon||(this._InsertIcon=PP.htmlToDOM("<div class='InsertIcon'></div>"),document.body.insertBefore(this._InsertIcon,document.body.firstChild)),this._MoveIcon||(this._MoveIcon=PP.htmlToDOM("<div class='MoveIcon'></div>"),document.body.insertBefore(this._MoveIcon,document.body.firstChild)),i=PP.calculateMouseX(t.Event),r=PP.calculateMouseY(t.Event),this._MoveIcon.style.left=i+2+"px",this._MoveIcon.style.top=r+16+"px",u=this._setInsertIconCoords(i,r),u?PP.show(this._InsertIcon):PP.hide(this._InsertIcon),!1},tabItemP._onCoverMouseUp=function(n,t){this._isInMoving&&PP.isVisible(this._MoveIcon)||this._onClicked(this,t)},tabItemP._onDocumentMouseUp=function(n,t){var r;if(this._removeEvent(document.documentElement,"mouseup",this._onDocumentMouseUp),this._addEvent(this._DomNode,"mousedown",this._onMouseDown),this._cover&&(this._cover.parentNode.removeChild(this._cover),this._addEvent(this._cover,"mouseup",this._onCoverMouseUp),this._cover=null),this._mouseMoveTimer!=null&&(clearTimeout(this._mouseMoveTimer),this._mouseMoveTimer=null),this._isInMoving&&(this._isInMoving=!1,this._removeEvent(document.documentElement,"mousemove",this._onDocumentMouseMove),this._MoveIcon)){var u=PP.calculateMouseX(t.Event),f=PP.calculateMouseY(t.Event),i=new PP.Ui.TabControlArgs(t.Event);i.Item=this,i.OldPosition=this._Position,i.OldIndex=this._indexBeforeMove,this._indexBeforeMove=null,r=this._moveItemToAcceptor(u,f),r.Result==!0&&(i.NewPosition=r.Position,i.NewIndex=r.Index,this._Parent._raiseItemMoved(i)),this._InsertIcon&&(document.body.removeChild(this._InsertIcon),delete this._InsertIcon),document.body.removeChild(this._MoveIcon),delete this._MoveIcon}},tabItemP._moveItemToAcceptor=function(n,t){var r=this._Parent._TabItemsLeftPanel,u=PP.calculateOffset(r),i;return n>=u.X&&n<=u.X+r.clientHeight&&t>=u.Y&&t<=u.Y+r.offsetWidth?(i=this._getItemIndex(r,n,t,PP.LTRB.Left)+1,i=this.setPosition(PP.LTRB.Left,i),i=this._getItemOrderNumber(r,i,PP.LTRB.Left),{Result:!0,Position:PP.LTRB.Left,Index:i}):(r=this._Parent._TabItemsTopPanel,u=PP.calculateOffset(r),n>=u.X&&n<=u.X+r.clientWidth&&t>=u.Y&&t<=u.Y+r.offsetHeight)?(i=this._getItemIndex(r,n,t,PP.LTRB.Top),i=this.setPosition(PP.LTRB.Top,i),i=this._getItemOrderNumber(r,i,PP.LTRB.Top),{Result:!0,Position:PP.LTRB.Top,Index:i}):(r=this._Parent._TabItemsRightPanel,u=PP.calculateOffset(r),n>=u.X&&n<=u.X+r.clientHeight&&t>=u.Y&&t<=u.Y+r.offsetWidth)?(i=this._getItemIndex(r,n,t,PP.LTRB.Right),i=this.setPosition(PP.LTRB.Right,i),i=this._getItemOrderNumber(r,i,PP.LTRB.Right),{Result:!0,Position:PP.LTRB.Right,Index:i}):(r=this._Parent._TabItemsBottomPanel,u=PP.calculateOffset(r),n>=u.X&&n<=u.X+r.clientWidth&&t>=u.Y&&t<=u.Y+r.offsetHeight)?(i=this._getItemIndex(r,n,t,PP.LTRB.Bottom)+1,i=this.setPosition(PP.LTRB.Bottom,i),i=this._getItemOrderNumber(r,i,PP.LTRB.Bottom),{Result:!0,Position:PP.LTRB.Bottom,Index:i}):{Result:!1}},tabItemP._getItemOrderNumber=function(n,t,i){var u=n.childNodes.length,r=null;return r=!this._Parent._IsRTL&&i!=PP.LTRB.Left||this._Parent._IsRTL&&i==PP.LTRB.Left?t:u-1-t},tabItemP._getItemIndexByCoords=function(n,t,i,r){var o,u,e,f;if(r!=PP.LTRB.Left&&r!=PP.LTRB.Right&&r!=PP.LTRB.Top&&r!=PP.LTRB.Bottom)throw PP.ArgumentException("incorrect value of position");for(o=-1,u=0;u<n.childNodes.length;u++){e=n.childNodes[u],f=PP.calculateOffset(e);switch(r){case PP.LTRB.Left:case PP.LTRB.Right:if(i>=f.Y&&i<=f.Y+e.offsetWidth)return u;break;case PP.LTRB.Top:case PP.LTRB.Bottom:if(t>=f.X&&t<=f.X+e.clientWidth)return u}}return o},tabItemP._getItemIndex=function(n,t,i,r){var e,f;if(r!=PP.LTRB.Left&&r!=PP.LTRB.Right&&r!=PP.LTRB.Top&&r!=PP.LTRB.Bottom)throw PP.ArgumentException("incorrect value of position");for(e=-1,f=0;f<n.childNodes.length;f++){var h=n.childNodes[f],u=PP.calculateOffset(h),o=h.offsetWidth,s=h.clientWidth;switch(r){case PP.LTRB.Left:if(i>=u.Y&&i<=u.Y+o)return i-u.Y>u.Y+o-i?f-1:f;break;case PP.LTRB.Right:if(i>=u.Y&&i<=u.Y+o)return i-u.Y<u.Y+o-i?f:f+1;break;case PP.LTRB.Top:if(t>=u.X&&t<=u.X+s)return t-u.X<u.X+s-t?f:f+1;break;case PP.LTRB.Bottom:if(t>=u.X&&t<=u.X+s)return t-u.X>u.X+s-t?f-1:f}}return e=!this._Parent._IsRTL&&r!=PP.LTRB.Left||this._Parent._IsRTL&&r==PP.LTRB.Left?n.childNodes.length-1:n.childNodes.length},tabItemP._setInsertIconCoords=function(n,t){var e=!1,u,r,i=this._Parent._TabItemsLeftPanel,f=PP.calculateOffset(i),o,s;return n>=f.X&&n<=f.X+i.clientHeight&&t>=f.Y&&t<=f.Y+i.offsetWidth?(r=this._getItemIndex(i,n,t,PP.LTRB.Left),this._InsertIcon.className="InsertIconHorizontal",r>-1&&(r<i.childNodes.length?(o=i.childNodes[r],s=o.getAttribute(this._addItemAttr),u=PP.calculateOffset(o),this._InsertIcon.style.top=s?u.Y+o.offsetWidth-3+"px":u.Y-3+"px"):(u=PP.calculateOffset(i.childNodes[r-1]),this._InsertIcon.style.top=u.Y+i.childNodes[r-1].offsetWidth-3+"px"),this._InsertIcon.style.left=u.X+"px",e=!0),e):(i=this._Parent._TabItemsTopPanel,f=PP.calculateOffset(i),n>=f.X&&n<=f.X+i.clientWidth&&t>=f.Y&&t<=f.Y+i.offsetHeight)?(r=this._getItemIndex(i,n,t,PP.LTRB.Top),this._InsertIcon.className="InsertIcon",r>-1&&(r>-1&&r<i.childNodes.length?(u=PP.calculateOffset(i.childNodes[r]),this._InsertIcon.style.left=u.X-3+"px"):(u=PP.calculateOffset(i.childNodes[r-1]),this._InsertIcon.style.left=u.X+i.childNodes[r-1].clientWidth-3+"px"),this._InsertIcon.style.top=u.Y+i.offsetHeight+"px",e=!0),e):(i=this._Parent._TabItemsRightPanel,f=PP.calculateOffset(i),n>=f.X&&n<=f.X+i.clientHeight&&t>=f.Y&&t<=f.Y+i.offsetWidth)?(r=this._getItemIndex(i,n,t,PP.LTRB.Right),this._InsertIcon.className="InsertIconHorizontal",r>-1&&(r<i.childNodes.length?(u=PP.calculateOffset(i.childNodes[r]),this._InsertIcon.style.top=u.Y-3+"px"):(u=PP.calculateOffset(i.childNodes[r-1]),this._InsertIcon.style.top=u.Y+i.childNodes[r-1].offsetWidth-3+"px"),this._InsertIcon.style.left=u.X+"px",e=!0),e):(i=this._Parent._TabItemsBottomPanel,f=PP.calculateOffset(i),n>=f.X&&n<=f.X+i.clientWidth&&t>=f.Y&&t<=f.Y+i.offsetHeight)?(r=this._getItemIndex(i,n,t,PP.LTRB.Bottom),this._InsertIcon.className="InsertIcon",r>-1&&(r>-1&&r<i.childNodes.length?(u=PP.calculateOffset(i.childNodes[r]),this._InsertIcon.style.left=u.X-3+"px"):(u=PP.calculateOffset(i.childNodes[r-1]),this._InsertIcon.style.left=u.X+i.childNodes[r-1].clientWidth-3+"px"),this._InsertIcon.style.top=u.Y+i.offsetHeight+"px",e=!0),e):e},tabItemP.getCaption=function(){return this._Caption},tabItemP.setCaption=function(n){var r,i,t;if(n!=this._Caption&&(this._Caption=n,this._HeaderContentDomNode.innerHTML=n,this._DomNode.className=this._DomNode.className,this._Parent)){for(r=this._Parent._ItemsLists[this._Position],i=r.getItems(),t=0;t<i.length;t++)if(i[t].getData()==this){i[t].setContent(n);break}this._Parent.updateSize()}return this},tabItemP.setContent=function(n){return this._setContentToNode(n,this._ContentDomNode)},tabItemP.setPosition=function(n,t){var a,i,o,f,e,u,h;if(n!=PP.LTRB.Left&&n!=PP.LTRB.Right&&n!=PP.LTRB.Top&&n!=PP.LTRB.Bottom)throw PP.ArgumentException("incorrect type of value");if(typeof t!="undefined"&&typeof t!="number")throw PP.ArgumentException("incorrect type of index");var y=this._Position!=n,c=this._Position,l=n;if(this._Position=n,this._Parent){a=this._Parent._getTabItemsPanel(c),i=this._Parent._getTabItemsPanel(l),t=parseInt(t),isNaN(t)&&(t=i.childNodes.length-1),t>-1&&t<=i.childNodes.length&&(y?this._Parent._IsRTL?n==PP.LTRB.Top||n==PP.LTRB.Bottom||n==PP.LTRB.Right?t==0&&(t=1):n==PP.LTRB.Left&&t>=i.childNodes.length&&(t=i.childNodes.length-1):n==PP.LTRB.Top||n==PP.LTRB.Bottom||n==PP.LTRB.Right?t>=i.childNodes.length&&(t=i.childNodes.length-1):n==PP.LTRB.Left&&t==0&&(t=1):(o=!1,t>=i.childNodes.length?t=i.childNodes.length-1:o=this._DomNode.offsetLeft<i.childNodes[t].offsetLeft,o&&t--,this._Parent._IsRTL?n==PP.LTRB.Top||n==PP.LTRB.Bottom||n==PP.LTRB.Right?t==0&&(t=1):n==PP.LTRB.Left&&t>=i.childNodes.length-1&&(t=i.childNodes.length-2):n==PP.LTRB.Top||n==PP.LTRB.Bottom||n==PP.LTRB.Right?t>=i.childNodes.length-1&&(t=i.childNodes.length-2):n==PP.LTRB.Left&&t==0&&(t=1))),a.removeChild(this._DomNode),this._IsVisible?PP.show(this._DomNode,!0):PP.hide(this._DomNode),parseInt(t)>-1&&parseInt(t)<i.childNodes.length?i.insertBefore(this._DomNode,i.childNodes[t]):i.appendChild(this._DomNode),this._Parent.updateSize();var r=this._Parent._ItemsLists[c],v=r.getItems(),s=null;for(f=0;f<v.length;f++)if(v[f].getData()==this){s=f;break}e=s==r.getSelectedIndex(),r.removeItem(s),r=this._Parent._ItemsLists[l],u=new PP.Ui.ListItem({Parent:r,Content:this._Caption}),u.setData(this),this._Parent._IsRTL&&this._Position!=PP.LTRB.Left||!this._Parent._IsRTL&&this._Position==PP.LTRB.Left?t==1?(r.addItem(u),e&&r.setSelectedIndex(r.getItems().length-1,!1)):(h=r.getItems().length-t+1,r.insertItem(u,h),e&&r.setSelectedIndex(h,!1)):(t<r.getItems().length?r.insertItem(u,t):r.addItem(u),e&&r.setSelectedIndex(t,!1))}return this._Parent&&this._Parent._scrollToItem(this),t},tabItemP.getPosition=function(){return this._Position},tabItemP.getParent=function(){return this._Parent},tabItemP.setEnabled=function(n,t){var r,i,u;if(PP.Ui.TabItem.base.setEnabled.call(this,n,t),this._Parent)for(r=this._Parent.getItemsList(this._Position).getItems(),i=0;i<r.length;i++)if(u=r[i].getData(),this==u){r[i].setEnabled(n==!0);break}return this},tabItemP.getImageUrl=function(){return this._ImageUrl},tabItemP.setImageUrl=function(n){if(!this._IsAddItem){if(typeof n=="undefined"||n==null||n.toLowerCase()=="null")this._ImageUrl="";else if(typeof n!="string")throw PP.ArgumentException("incorrect type of value");else this._ImageUrl=n;this._ImageUrl?(this._imgDiv.style.backgroundImage="url('"+this._ImageUrl+"')",PP.show(this._imgCell)):(this._imgDiv.style.backgroundImage="",PP.hide(this._imgCell))}},tabItemP.setIsRTL=function(n){var u,e,f,r;if(this._isRTL!=n){this._IsRTL=n;var t=null,i=null,o=this._DomNode.firstChild;for(t=o.rows[0],i=t.cells,u=[],e=i.length;i.length>0;)f=i[0],t.removeChild(f),u.push(f);for(r=e-1;r>=0;r--)t.appendChild(u[r])}return this},tabItemP.setIsVisible=function(n){PP.Ui.TabItem.base.setIsVisible.apply(this,arguments),PP.isBoolean(n)&&(n=n?PP.Ui.Visibility.Visible:PP.Ui.Visibility.Collapsed);var t=this._ContentDomNode.style;switch(n){case PP.Ui.Visibility.Collapsed:PP.hide(this._ContentDomNode);break;case PP.Ui.Visibility.Visible:t.visibility="visible",this===this._Parent.getSelectedItem()&&PP.show(this._ContentDomNode);break;case PP.Ui.Visibility.Hidden:t.visibility="hidden"}},tabItemP.getOrderNumber=function(){var r=null,n;if(this._Parent){var t=null,i=this._Parent._getTabItemsPanel(this._Position),u=i.childNodes.length;for(n=0;n<u;n++)this._DomNode==i.childNodes[n]&&(t=n);t!=null&&(r=this._getItemOrderNumber(i,t,this._Position))}return r},tabItemP.getContentNodes=function(){return this._ContentDomNode.children},tabItemP.getIsHiddenActive=function(){return this._IsHiddenActive},tabItemP.setIsHiddenActive=function(n){this._IsHiddenActive=n},tabItemP.hide=function(){var n,t;if(this.setIsVisible(!1),this._Parent.getSelectedItem()==this)for(this._IsHiddenActive=!0,t=this._Parent.getItems(),n=0;n<t.length;n++)if(t[n].getIsVisible()){this._Parent.setSelectedIndex(n);break}for(t=this._Parent.getItemsList(this._Position).getItems(),n=0;n<t.length;n++)this==t[n].getData()&&t[n].setIsVisible(this._IsVisible);return this},tabItemP.show=function(){var t,n;for(this.setIsVisible(!0),this._IsHiddenActive&&(this._IsHiddenActive=!1,this._Parent.setSelectedIndex(this._Parent.getItems().indexOf(this))),t=this._Parent.getItemsList(this._Position).getItems(),n=0;n<t.length;n++)this==t[n].getData()&&t[n].setIsVisible(this._IsVisible);return this},tabItemP.getIsEditing=function(){return this._captionTextBox&&this._captionTextBox.isLive()},tabItemP.dispose=function(){if(delete this._Parent,this._ContentDomNode){var n=this._ContentDomNode.parentNode;n&&n.removeChild(this._ContentDomNode)}PP.Ui.TabItem.base.dispose.call(this,arguments)},tabItemP=null,PP.Ui.RibbonPanel=function(n){this._Caption="",n&&n.LaunchButton?(this._LaunchButton=new PP.Ui.RibbonButton(n.LaunchButton),this._LaunchButton.addClass("Launch"),delete n.LaunchButton):this._LaunchButton=null,this._Parent=null,this._Elements=null,this._ImageList=null,PP.Ui.RibbonPanel.base.constructor.apply(this,arguments),this._render()},PP.initClass(PP.Ui.RibbonPanel,PP.Ui.Control,"RibbonPanel"),ribbonPanelP=PP.Ui.RibbonPanel.prototype,ribbonPanelP._render=function(){var i,n,t;if(this._initFromHTML("<div class='PPRibbonPanel'><div class='PPRibbonPanelTop'></div><div class='PPRibbonPanelBottom'></div></div>"),i=this._DomNode.getElementsByTagName("div"),this._contentPanel=i[0],this._captionPanel=i[1],this._LaunchButton&&this._LaunchButton.addToNode(this._captionPanel),this._captionPanel.appendChild(PP.htmlToDOM("<div class='Caption'>"+this._Caption+"</div>")),this._captionPanel.firstChild.appendChild(PP.htmlToDOM("<div class='Shadow'>"+this._Caption+"</div>")),n=this._Elements,this._Elements=[],n)for(t=0;t<n.length;t++)n[t]instanceof PP.Ui.Control?this.addControl(n[t],!0):this._parseElement(n[t]);this._bindEvents(),PP.Ui.RibbonPanel.base._render.call(this)},ribbonPanelP._parseElement=function(n){var t,i;n=n||{},t=n.IsLargeControl,delete n.IsLargeControl,n.PPType!="RibbonButton"&&n.PPType!="SplitButton"||n.ImageList||(n.ImageList=this._ImageList),i=PP.create(n),this.addControl(i,t)},ribbonPanelP.getImageList=function(){return this._ImageList},ribbonPanelP.getControls=function(){return this._Elements},ribbonPanelP.getLaunchButton=function(){return this._LaunchButton},ribbonPanelP.getCaption=function(){return this._Caption},ribbonPanelP.setCaption=function(n){n!=this._Caption&&(this._Caption=n,this._captionPanel.removeChild(this._captionPanel.lastChild),this._captionPanel.appendChild(PP.htmlToDOM("<div class='Caption'>"+this._Caption+"</div>")),this._captionPanel.lastChild.appendChild(PP.htmlToDOM("<div class='Shadow'>"+this._Caption+"</div>")))},ribbonPanelP.setIsRTL=function(){var t,n;for(PP.Ui.RibbonPanel.base.setIsRTL.apply(this,arguments),t=this._Elements.length,n=0;n<t;n++)this._Elements[n].setIsRTL(this._IsRTL);return this._LaunchButton&&this._LaunchButton.setIsRTL(this._IsRTL),this},ribbonPanelP.setEnabled=function(n,t,i){var u,r;if(i=typeof i=="undefined"?!0:i==!0,PP.Ui.RibbonPanel.base.setEnabled.apply(this,arguments),this._LaunchButton&&this._LaunchButton.setEnabled(n,t),i&&this._Elements)for(u=this._Elements.length,r=0;r<u;r++)this._Elements[r]instanceof PP.Ui.Control?this._Elements[r].setEnabled(this._Enabled,t):this._Elements[r].Enabled=this._Enabled;return this},ribbonPanelP.setContent=function(n){for(var t=0;t<this._Elements.length;t++)this._Elements[t].dispose();return this._setContentToNode(n,this._contentPanel),this},ribbonPanelP.setIsVisible=function(){PP.Ui.RibbonPanel.base.setIsVisible.apply(this,arguments),this._Parent&&this._Parent._Parent&&this._Parent._Parent.updateAutoComplete()},ribbonPanelP.hide=function(){PP.hide(this._DomNode),PP.hide(this._DomNode.nextSibling)},ribbonPanelP.show=function(){PP.show(this._DomNode,!0),PP.show(this._DomNode.nextSibling)},ribbonPanelP.addControl=function(n,t){if(n instanceof PP.Ui.Control){if(this._ImageList&&n instanceof PP.Ui.RibbonButton&&n.setImageList(this._ImageList),t=!!t,t)n.addToNode(this._contentPanel),this._smallControlsDiv=null;else{this._smallControlsDiv||(this._smallControlsDiv=PP.htmlToDOM("<div class='PPRibbonList'></div>"),this._contentPanel.appendChild(this._smallControlsDiv));var i=PP.htmlToDOM("<div class='PPSmallControlContainer'></div>");this._smallControlsDiv.appendChild(i),n.addToNode(i),this._smallControlsDiv.childNodes.length>2&&(this._smallControlsDiv=null)}this._Elements.push(n),this._Parent&&this._Parent._Parent&&(n._Id!=null?this._Parent._Parent._Controls[n._Id]=n:(this._Parent._Parent._Controls["ctrl_"+this._counter]=n,this._Parent._Parent._counter++),this._Parent._Parent.updateAutoComplete())}},ribbonPanelP.updateSize=function(){for(var o=this._Elements.length,e=0,f=0,r,n,u,t,i=0;i<o;i++)r=this._Elements[i].getDomNode(),e+=r.offsetWidth,n=parseInt(PP.getStyle(r,"marginLeft")),isNaN(n)||(f+=n),n=parseInt(PP.getStyle(r,"marginRight")),isNaN(n)||(f+=n);u=0,t=parseInt(PP.getStyle(this._contentPanel,"paddingLeft")),isNaN(t)||(u+=t),t=parseInt(PP.getStyle(this._contentPanel,"paddingRight")),isNaN(t)||(u+=t),this._contentPanel.style.textAlign=e+f+u<this._DomNode.offsetWidth?"center":""},ribbonPanelP.dispose=function(){delete this._ImageList,delete this._Parent,PP.Ui.RibbonPanel.base.dispose.apply(this,arguments)},ribbonPanelP=null,PP.Ui.RibbonCategory=function(){this._Panels=null,this._GroupName="",this._Parent=null,this._ImageList=null,this._defineEvents(["Added","Removed"]),PP.Ui.RibbonCategory.base.constructor.apply(this,arguments),this._IsHiddenActive=!1},PP.initClass(PP.Ui.RibbonCategory,PP.Ui.TabItem,"RibbonCategory"),ribbonCategoryP=PP.Ui.RibbonCategory.prototype,ribbonCategoryP._render=function(){var n,t;if(this._initFromHTML("<div class='PPRibbonCategoryHeader'><table cellpadding='0' cellspacing='0' border='0'><tr><td class='PPRibbonCategoryHeaderLeft'></td><td class='PPRibbonCategoryHeaderCenter'></td><td class='PPRibbonCategoryHeaderRight'></td></tr></table></div>"),this.addClass("Released"),this._HeaderContentDomNode=PP.htmlToDOM("<div>"+this._Caption+"</div>"),PP.querySelector(this._DomNode,".PPRibbonCategoryHeaderCenter").appendChild(this._HeaderContentDomNode),this._ContentDomNode=PP.htmlToDOM("<div class='PPRibbonCategoryContent'></div>"),n=this._Panels,this._Panels=[],n)for(t=0;t<n.length;t++)n[t].Parent||(n[t].Parent=this),this._ImageList&&!n[t].ImageList&&(n[t].ImageList=this._ImageList),this.addPanel(new PP.Ui.RibbonPanel(n[t]));this._bindEvents(),PP.Ui.TabItem.base._render.call(this)},ribbonCategoryP._onClicked=function(){return!0},ribbonCategoryP._onMouseDown=function(n,t){var u,r,i;if(PP.Ui.RibbonCategory.base._onMouseDown.call(this,n,t),this._Enabled&&this._Parent&&(!this._Parent||this._Parent.getEnabled())){for(u=this._Parent.getSelectedIndex(),r=this._Parent.getItems(),i=0;i<r.length;i++)r[i]==this&&this._Parent.setSelectedIndex(i);this._Parent.getIsAutoHiding()&&(this._Parent.getIsCategoryContentHidden()||u==this._Parent.getSelectedIndex())&&this._Parent.showCategoryContent(this._Parent.getIsCategoryContentHidden())}},ribbonCategoryP._onDblClick=function(n,t){this._Enabled&&this._Parent&&(!this._Parent||this._Parent.getEnabled())&&this._Parent._IsAutoHidingEnabled&&(this._Parent.setIsAutoHiding(!this._Parent.getIsAutoHiding()),this._Parent._IsAutoHiding?this._Parent.CategoryContentCollapsed.fire(this,t):this._Parent.CategoryContentExpanded.fire(this,t))},ribbonCategoryP.getImageList=function(){return this._ImageList},ribbonCategoryP.getPanels=function(){return this._Panels},ribbonCategoryP.getCaption=function(){return this._Caption},ribbonCategoryP.setCaption=function(n){return n!=this._Caption&&(this._Caption=n,this._HeaderContentDomNode.innerHTML=this._Caption,this._DomNode.className=this._DomNode.className),this},ribbonCategoryP.setIsRTL=function(){var t,n;for(PP.Ui.TabItem.base.setIsRTL.apply(this,arguments),t=this._Panels.length,n=0;n<t;n++)this._Panels[n].setIsRTL(this._IsRTL);return this},ribbonCategoryP.setEnabled=function(n,t,i){var u,r;if(PP.hasClass(this._DomNode,"Context"))return this;if(i=typeof i=="undefined"?!0:i==!0,PP.Ui.TabItem.base.setEnabled.apply(this,arguments),i&&this._Panels)for(u=this._Panels.length,r=0;r<u;r++)this._Panels[r]instanceof PP.Ui.RibbonPanel?this._Panels[r].setEnabled(this._Enabled,t,i):this._Panels[r].Enabled=this._Enabled;return this},ribbonCategoryP.getGroupName=function(){return this._GroupName},ribbonCategoryP.setIsVisible=function(){PP.Ui.TabItem.base.setIsVisible.apply(this,arguments),this._Parent&&this._Parent.updateAutoComplete()},ribbonCategoryP.hide=function(){var i,t,n;if(this.setIsVisible(!1),!this._Parent)return this;if(i=this._ContentDomNode.parentNode,i==this._Parent._categoriesContentsPanel&&this._Parent._categoriesContentsPanel.removeChild(this._ContentDomNode),this._Parent.getSelectedItem()==this)for(this._IsHiddenActive=!0,t=this._Parent.getItems(),n=0;n<t.length;n++)if(t[n].getIsVisible()){this._Parent.setSelectedIndex(n);break}return this},ribbonCategoryP.show=function(n){return(this.setIsVisible(!0),!this._Parent)?this:(this===this._Parent.getSelectedItem()&&this._Parent._categoriesContentsPanel.appendChild(this._ContentDomNode),(this._IsHiddenActive||n)&&(this._IsHiddenActive=!1,this._Parent.setSelectedIndex(this._Parent.getItems().indexOf(this))),this)},ribbonCategoryP.addPanel=function(n){if(n instanceof PP.Ui.RibbonPanel){this._Panels.push(n),n.addToNode(this._ContentDomNode);var t=PP.htmlToDOM("<div class='PPRibbonSeparator'></div>");n._IsVisible||PP.hide(t),this._ContentDomNode.appendChild(t),n._Parent||(n._Parent=this),this._ImageList&&n._ImageList&&(n._ImageList=this._ImageList),this.updateSize(),this._Parent&&(n._Id!=null?this._Parent._Controls[n._Id]=n:(this._Parent._Controls["ctrl_"+this._counter]=n,this._Parent._counter++),this._Parent.updateAutoComplete())}},ribbonCategoryP.updateSize=function(){for(var t=this._Panels.length,n=0;n<t;n++)this._Panels[n].updateSize()},ribbonCategoryP.dispose=function(){delete this._ImageList,delete this._Parent,PP.Ui.RibbonCategory.base.dispose.apply(this,arguments)},ribbonCategoryP=null,PP.Ui.Ribbon=function(n){n=n||{},this._Categories=null,this._SelectedIndex=-1,n.MainButton&&(n.MainButton.Template||(n.MainButton.Template=PP.Templates.RibbonMainButton),n.MainButton.MenuArrowPosition||(n.MainButton.MenuArrowPosition=PP.LTRB.Right));var t=n.MainButton?n.MainButton:{MenuArrowPosition:PP.LTRB.Right,Template:PP.Templates.RibbonMainButton};this._MainButton=new PP.Ui.Button(t),n&&delete n.MainButton,n&&n.HideButton&&typeof n.HideButton.MenuArrowPosition=="undefined"&&(n.HideButton.MenuArrowPosition=PP.LTRB.Right),this._HideButton=new PP.Ui.RibbonButton(n&&n.HideButton?n.HideButton:{MenuArrowPosition:PP.LTRB.Right}),n&&n.HideButton&&typeof n.HideButton.MenuArrowPosition!="undefined"?this._HideButton.setMenuDropPosition(n.HideButton.MenuArrowPosition,!0,!0):this._HideButton.setMenuDropPosition(PP.LTRB.Top,!0,!0),this._HideButton.setToolTip(PP.resourceManager.getString("Content","hideButton")),n&&delete n.HideButton,this._IsAutoHiding=!1,this._IsAutoHidingEnabled=!0,this._ImageList=null,this._UseIntellisense=!0,this._defineEvents(["CategorySelected","CategoryDeselected","CategoryContentCollapsed","CategoryContentExpanded"]),PP.Ui.Ribbon.base.constructor.apply(this,arguments),this._categoriesHeadersPanel=null,this._Groups=[],this._QuickAccessControls=[],this._QuickAccessPanel=null,this._Controls={},this._counter=0,this._IntellisenseTextBox=null,this._IntellisenseAutocomplete=null,this._updateInProgress=!1,this._render(),PP.resourceManager.ResourcesLoaded.add(this._onResourcesLoaded,this)},PP.initClass(PP.Ui.Ribbon,PP.Ui.Control,"Ribbon"),ribbonP=PP.Ui.Ribbon.prototype,ribbonP._render=function(){var n,t;if(this._initFromHTML("<div class='PPRibbon'></div>"),this._categoriesHeadersPanel=PP.htmlToDOM("<div class='PPRibbonHeadersPanel'></div>"),this._DomNode.appendChild(this._categoriesHeadersPanel),this._HideButton.addClass("Hide"),this._HideButton.setImagePosition(PP.LTRB.Left),this._HideButton.Click.add(this._onCollapseButtonClick,this),this._HideButton.addToNode(this._categoriesHeadersPanel),this._customControlsContainer=PP.htmlToDOM("<div></div>"),this._customControlsContainer.className="PPCustomControlsContainer",this._categoriesHeadersPanel.appendChild(this._customControlsContainer),this._fakeImageList=new PP.ImageList({IconHeight:16,IconWidth:16}),this._IntellisenseTextBox=new PP.Ui.TextBox({Class:"PPIntellisenseTextBox",ParentNode:this._categoriesHeadersPanel,ResourceKey:"quickLaunch",ImageList:this._fakeImageList,IsWatermark:!0,AfterChange:PP.Delegate(this._onIntellisenseTextBoxAfterChange,this),Width:150}),this._IntellisenseAutocomplete=new PP.Ui.Autocomplete({Selected:PP.Delegate(this._onIntellisenseAutocompleteSelected,this)}),this._UseIntellisense||this._IntellisenseTextBox.removeFromDOM(),this._MainButton.addClass("Main"),this._MainButton.getMenu()||(this._mainButtonMenu=new PP.Ui.Menu,this._MainButton.setMenu(this._mainButtonMenu)),this._MainButton.getMenu().addClass("Main"),this._MainButton.addToNode(this._categoriesHeadersPanel),this._QuickAccessPanel=PP.htmlToDOM("<div class='QuickAccessPanel'><div class='QuickAccessPanel_Left'></div><div class='QuickAccessPanel_Center'></div><div class='QuickAccessPanel_Right'></div></div>"),PP.hide(this._QuickAccessPanel),this._categoriesHeadersPanel.appendChild(this._QuickAccessPanel),this._categoriesContentsPanel=PP.htmlToDOM("<div class='PPRibbonContentsPanel'></div>"),this._DomNode.appendChild(this._categoriesContentsPanel),this.beginUpdate(),n=this._Categories,this._Categories=[],n)for(t=0;t<n.length;t++)n[t]instanceof PP.Ui.RibbonCategory?this.addCategory(n[t]):(n[t].Parent||(n[t].Parent=this),this._ImageList&&!n[t].ImageList&&(n[t].ImageList=this._ImageList),this.addCategory(new PP.Ui.RibbonCategory(n[t])));this.endUpdate(),this._IsAutoHidingEnabled||this.setIsAutoHidingEnabled(this._IsAutoHidingEnabled,!0),this._IsAutoHiding&&this.setIsAutoHiding(this._IsAutoHiding,!0),PP.Ui.Ribbon.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},ribbonP._onIntellisenseAutocompleteSelected=function(n,t){var r=n.Suggestions[t.SelectionIndex],i;(this.setSelectedIndex(r.CategoryIndex,!1),n.Control.setContent("",!1),i=this.getControlById(r.Id),i.getEnabled())&&(i instanceof PP.Ui.SplitButton?i.getImageButton()._onClicked(i,{IntellisenseClick:!0}):i._onClicked(i,{IntellisenseClick:!0}))},ribbonP._onIntellisenseTextBoxAfterChange=function(){this._fillAutoComplete()},ribbonP._clearAutoComplete=function(){if(this._UseIntellisense){var n=this._IntellisenseAutocomplete,i=n.getTargets(),t=this._IntellisenseTextBox.getId();i[t]&&n.removeTarget(t)}},ribbonP._fillAutoComplete=function(){var i,l,p,t,r,o,s;if(this._UseIntellisense&&(i=this._IntellisenseTextBox,i.getContent().length!==0)&&(l=this._IntellisenseAutocomplete,p=l.getTargets(),!p[i.getId()])){var u={Control:i,ShowPopupSuggestion:!0,ShowTextSuggestion:!0,AlwaysShow:!0,Active:!0,MatchCase:!1,Suggestions:[]},y=this._Categories,c,h,w=[],b=y.length,a,v,e,f,n;for(this._getMenuTargetSettings(this._MainButton,u.Suggestions,-1,this._MainButton.getContent(),w),t=0;t<b;t++)if(e=y[t],e.getIsVisible())for(c=e.getPanels(),a=c.length,r=0;r<a;r++)if(f=c[r],f.getIsVisible())for(h=f.getControls(),v=h.length,o=0;o<v;o++)(n=h[o],(n instanceof PP.Ui.Button||n instanceof PP.Ui.SplitButton)&&n.getIsVisible())&&(s=e.getCaption()+" -> "+f.getCaption()+" -> "+n.getContent().replace("<br />"," "),u.Suggestions.push({Text:s,Id:n.getId(),CategoryIndex:t}),this._getMenuTargetSettings(n,u.Suggestions,t,s,w));l.addTarget(u)}},ribbonP._getMenuTargetSettings=function(n,t,i,r,u){var s=n.getMenu(),h,a,f,c,l,e,o;if(s&&s instanceof PP.Ui.Menu)for(h=s.getItems(),a=h.length,o=0;o<a;o++)(f=h[o],e=f.getId(),u.indexOf(e)>-1)||(u.push(e),f.getIsVisible()&&f.getEnabled())&&(c=f.getContent(),PP.isString(c))&&(l=r+" -> "+c,t.push({Text:l,Id:e,CategoryIndex:i}),this._getMenuTargetSettings(f,t,i,l,u))},ribbonP._onCultureChanged=function(n,t){PP.Ui.Ribbon.base._onCultureChanged.apply(this,arguments),this._onResourcesLoaded(n,t)},ribbonP._onResourcesLoaded=function(){this._HideButton.setToolTip(PP.resourceManager.getString("Content","hideButton")),this.updateSize()},ribbonP._onDocumentClick=function(n,t){var i;if(!this.getIsCategoryContentHidden()){var e=PP.calculateMouseX(t.Event),s=PP.calculateMouseY(t.Event),o=PP.calculateOffset(this._DomNode),r=-1,u=-1,h=0,f=null;for(i=0;i<this._Categories.length;i++)h+=this._Categories[i]._DomNode.offsetWidth,this._Categories[i]._DomNode.offsetWidth>0&&(f=PP.calculateOffset(this._Categories[i]._DomNode),(r<0||r>-1&&f.X<r)&&(r=f.X),(u<0||u>-1&&f.X+this._Categories[i]._DomNode.offsetWidth>u)&&(u=f.X+this._Categories[i]._DomNode.offsetWidth));(e<o.X||e>o.X+this._DomNode.offsetWidth||s<o.Y||s>o.Y+this._DomNode.offsetHeight+this._categoriesContentsPanel.offsetHeight||(e<r||e>u)&&s<PP.calculateOffset(this._categoriesContentsPanel).Y)&&this.showCategoryContent(!1)}},ribbonP._onCollapseButtonClick=function(n,t){this.setIsAutoHiding(!this._IsAutoHiding),this._IsAutoHiding?this.CategoryContentCollapsed.fire(this,t):this.CategoryContentExpanded.fire(this,t)},ribbonP.getCustomControlsContainer=function(){return this._customControlsContainer},ribbonP.getImageList=function(){return this._ImageList},ribbonP.getUseIntellisense=function(){return this._UseIntellisense},ribbonP.setUseIntellisense=function(n){n!=this._UseIntellisense&&(this._UseIntellisense=n,n?this._IntellisenseTextBox.addToNode(this._categoriesHeadersPanel,this._MainButton.getDomNode()):this._IntellisenseTextBox.removeFromDOM())},ribbonP.getIsAutoHiding=function(){return this._IsAutoHiding},ribbonP.setIsAutoHiding=function(n,t){var i,r,u;(n!=this._IsAutoHiding||t)&&this._IsAutoHidingEnabled&&(this._IsAutoHiding=n,this._HideButton.setToolTip(this._IsAutoHiding?PP.resourceManager.getString("hideButtonExpand"):PP.resourceManager.getString("Content","hideButton")),this._IsAutoHiding?(PP.addClass(this._DomNode,"AutoHide"),i=this._DomNode.cloneNode(!1),i.style.position="absolute",i.style.zIndex="2000",i.style.height=this._categoriesContentsPanel.offsetHeight+"px",i.style.width=this._categoriesContentsPanel.offsetWidth+"px",r=PP.calculateOffset(this._categoriesContentsPanel),i.style.left=r.X+"px",i.style.top=r.Y+"px",i.appendChild(this._categoriesContentsPanel),document.body.appendChild(i),this._HideButton.removeClass("Collapse"),this._HideButton.addClass("Expand"),this._addEvent(document,"mousedown",this._onDocumentClick),this._HideButton.setMenuDropPosition(PP.LTRB.Bottom,!1,!0)):(PP.removeClass(this._DomNode,"AutoHide"),u=this._categoriesContentsPanel.parentNode,this._DomNode.appendChild(this._categoriesContentsPanel),document.body.removeChild(u),this._HideButton.removeClass("Expand"),this._HideButton.addClass("Collapse"),this._removeEvent(document,"mousedown",this._onDocumentClick),this._HideButton.setMenuDropPosition(PP.LTRB.Top,!1,!0)),this.showCategoryContent(!this._IsAutoHiding))},ribbonP.getSelectedIndex=function(){return this._SelectedIndex},ribbonP.setSelectedIndex=function(n,t){var r,i,u;if(t=typeof t=="undefined"?!0:t==!0,parseInt(n)>-1&&n<this._Categories.length&&n!=this._SelectedIndex){if(!this._Categories[n].getIsVisible())return;for(r=0;r<this._Categories.length;r++)i=this._Categories[r],r==n?(this._SelectedIndex>-1&&(u=this._Categories[this._SelectedIndex]._ContentDomNode.parentNode,u&&(!PP.IsIE||u.nodeName!="#document-fragment")&&this._categoriesContentsPanel.removeChild(this._Categories[this._SelectedIndex]._ContentDomNode)),t&&this.CategoryDeselected.fire(i,{Index:this._SelectedIndex}),i.removeClass("Released"),i.addClass("Selected"),this._SelectedIndex=n,this._categoriesContentsPanel.appendChild(i._ContentDomNode),this.updateSize(),t&&this.CategorySelected.fire(i,{Index:this._SelectedIndex})):(i.removeClass("Selected"),i.addClass("Released"))}return this},ribbonP.getSelectedItem=function(){return this._SelectedIndex>-1&&this._SelectedIndex<this._Categories.length?this._Categories[this._SelectedIndex]:null},ribbonP.setSelectedItem=function(n,t){this.setSelectedIndex(this._Categories.indexOf(n),t)},ribbonP.getItems=function(){return this._Categories},ribbonP.setIsRTL=function(){var i,t,r;for(PP.Ui.Ribbon.base.setIsRTL.apply(this,arguments),i=this._Categories.length,t=0;t<i;t++)this._Categories[t].setIsRTL(this._IsRTL);for(this._MainButton.setIsRTL(this._IsRTL),r=this._QuickAccessControls.length,t=0;t<r;t++)this._QuickAccessControls[t].setIsRTL(this._IsRTL);return this._HideButton.setIsRTL(this._IsRTL),this._IntellisenseTextBox.setIsRTL(this._IsRTL),this._IntellisenseAutocomplete.setIsRTL(this._IsRTL),this},ribbonP.setEnabled=function(n,t,i){var r,u;if(i=typeof i=="undefined"?!0:i==!0,PP.Ui.Ribbon.base.setEnabled.apply(this,arguments),i&&this._Categories)for(u=this._Categories.length,r=0;r<u;r++)this._Categories[r]instanceof PP.Ui.RibbonCategory?this._Categories[r].setEnabled(this._Enabled,t,i):this._Categories[r].Enabled=this._Enabled;for(this._MainButton.setEnabled(n,t),r=0;r<this._QuickAccessControls.length;r++)this._QuickAccessControls[r].setEnabled(n,t);return this._HideButton.setEnabled(n,t),this._IntellisenseTextBox.setEnabled(this._Enabled),this},ribbonP.setWidth=function(){PP.Ui.Ribbon.base.setWidth.apply(this,arguments);var t=this._categoriesContentsPanel.parentNode;this._DomNode!=t&&(t.style.width=this._DomNode.style.width)},ribbonP.getIsCategoryContentHidden=function(){return this._categoriesContentsPanel.parentNode.style.visibility=="hidden"},ribbonP.getMainButton=function(){return this._MainButton},ribbonP.getHideButton=function(){return this._HideButton},ribbonP.getMainMenu=function(){return this._MainButton.getMenu()},ribbonP.setMainMenu=function(n){return n!=this._MainButton.getMenu()&&(n.addClass("Main"),this._MainButton.setMenu(n)),this},ribbonP.getIsAutoHidingEnabled=function(){return this._IsAutoHidingEnabled},ribbonP.setIsAutoHidingEnabled=function(n,t){return(n!=this._IsAutoHidingEnabled||t)&&(this._IsAutoHidingEnabled=n,this._IsAutoHiding&&this.setIsAutoHiding(!1),this._IsAutoHidingEnabled?this._HideButton.show():this._HideButton.hide()),this},ribbonP.getQuickAccessControls=function(){return this._QuickAccessControls},ribbonP.getControls=function(){return this._Controls},ribbonP.updateAutoComplete=function(){this._updateInProgress||(this._clearAutoComplete(),this._fillAutoComplete())},ribbonP.beginUpdate=function(){this._updateInProgress=!0},ribbonP.endUpdate=function(){this._updateInProgress=!1,this.updateAutoComplete()},ribbonP.addCategory=function(n){var t,e,f,i,u,r;if(n instanceof PP.Ui.RibbonCategory){if(n._Parent||(n._Parent=this),this._ImageList&&!n._ImageList&&(n._ImageList=this._ImageList),n._GroupName.length>0){for(e=!1,t=0;t<this._Groups.length;t++)if(n._GroupName==this._Groups[t]){e=!0;break}e||(f=new PP.Ui.RibbonCategory({Caption:n._GroupName,Enabled:!1}),this.addCategory(f),f.addClass("Context"),f.setIsVisible(!1),this._Groups.push(n._GroupName)),n.addClass("Context"),n.setIsVisible(!1)}for(this._Categories.push(n),n.addToNode(this._categoriesHeadersPanel),this._Categories.length==1&&this.setSelectedIndex(0,!1),n._Id!=null?this._Controls[n._Id]=n:(this._Controls["ctrl_"+this._counter]=n,this._counter++),i=n.getPanels(),t=0;t<i.length;t++)for(i[t]._Id!=null?this._Controls[i[t]._Id]=i[t]:(this._Controls["ctrl_"+this._counter]=i[t],this._counter++),u=i[t].getControls(),r=0;r<u.length;r++)u[r]._Id!=null?this._Controls[u[r]._Id]=u[r]:(this._Controls["ctrl_"+this._counter]=u[r],this._counter++);this.updateAutoComplete(),n.Added.fire(n)}},ribbonP.addQuickAccessControl=function(n){return n instanceof PP.Ui.RibbonButton&&(this._QuickAccessControls.push(n),n.addToNode(PP.querySelector(this._QuickAccessPanel,".QuickAccessPanel_Center")),this._QuickAccessControls.length===0?PP.hide(this._QuickAccessPanel):PP.show(this._QuickAccessPanel)),this},ribbonP.removeQuickAccessControl=function(n){var t=this._QuickAccessControls[n];return t.dispose(),this._QuickAccessControls.remove(n),this._QuickAccessControls.length===0?PP.hide(this._QuickAccessPanel):PP.show(this._QuickAccessPanel),this},ribbonP.removeQuickAccessControlById=function(n){var t=this.getControlById(n),i=this._QuickAccessControls.indexOf(t);return this.removeQuickAccessControl(i),this},ribbonP.showCategoryContent=function(n){var t,i,r;this._IsAutoHiding&&(t=this._categoriesContentsPanel.parentNode,t.style.height=this._categoriesContentsPanel.offsetHeight+"px",t.style.width=this._categoriesHeadersPanel.offsetWidth+"px",i=PP.calculateOffset(this._categoriesHeadersPanel),t.style.left=i.X+"px",t.style.top=i.Y+this._categoriesHeadersPanel.offsetHeight+"px"),this._categoriesContentsPanel.parentNode.style.visibility=n?"visible":"hidden",this._SelectedIndex>-1&&(n?this._categoriesContentsPanel.appendChild(this._Categories[this._SelectedIndex]._ContentDomNode):(r=this._Categories[this._SelectedIndex]._ContentDomNode.parentNode,r&&(!PP.IsIE||r.nodeName!="#document-fragment")&&this._categoriesContentsPanel.removeChild(this._Categories[this._SelectedIndex]._ContentDomNode))),this._Height=this._DomNode.offsetHeight},ribbonP.getCategoriesByGroupName=function(n){for(var r=[],i=-1,t=0;t<this._Categories.length;t++)this._Categories[t].getGroupName()==n&&(i<0&&(i=t-1),r.push(this._Categories[t]));return i>-1&&r.push(i),r},ribbonP.setCategoriesVisibilityByGroupName=function(n,t){var i=this.getCategoriesByGroupName(n),r;if(i.length>0)for(this._Categories[i[i.length-1]].setIsVisible(t),r=0;r<i.length-1;r++)i[r].setIsVisible(t)},ribbonP.updateSize=function(){this._SelectedIndex>-1&&this._Categories[this._SelectedIndex].updateSize()},ribbonP.getCategoryById=function(n){return this.getControlById(n)},ribbonP.getPanelById=function(n){return this.getControlById(n)},ribbonP.getControlById=function(n){var i=null,r=null,u=null,t,e,f;if(this._Controls[n])return this._Controls[n];if(u=this.getMainMenu().getMenuItemById(n),u)return u;for(e in this._Controls)if(i=this._Controls[e],i instanceof PP.Ui.Button||i instanceof PP.Ui.SplitButton){if(r=i.getMenu(),r&&r instanceof PP.Ui.Menu){if(r.getId()==n)return r;if(u=r.getMenuItemById(n),u)return u}}else if(i.getItems)for(f=i.getItems(),t=0;t<f.length;t++)if(f[t].getId()==n)return f[t];for(t=0;t<this._QuickAccessControls.length;t++)if(this._QuickAccessControls[t].getId()==n)return this._QuickAccessControls[t];return null},ribbonP.setSettingsTo=function(n,t){var r=null,u,i;if(typeof n=="undefined")throw new Error("ArgumentNullException");if(u=typeof n,u=="string"||n instanceof PP.Ui.Control)if(r=u=="string"?this.getControlById(n):n,r)r.setSettings(t);else throw new Error("Control not found.");else if(Array.isArray(n))for(i=0;i<n.length;i++)this.setSettingsTo(n[i],t);return this},ribbonP.dispose=function(){this.isLive()&&(delete this._ImageList,PP.resourceManager.ResourcesLoaded.remove(this._onResourcesLoaded,this),PP.Ui.Ribbon.base.dispose.apply(this,arguments))},ribbonP.getCategory=function(n){return this._Categories[n]},ribbonP=null,PP.ImageList=function(){this._IconWidth=this._IconHeight=-1,this._Source="",PP.ImageList.base.constructor.apply(this,arguments)},PP.initClass(PP.ImageList,PP.Object,"ImageList"),imageListP=PP.ImageList.prototype,imageListP.getIcon=function(n,t){return parseInt(n)>-1&&parseInt(t)>-1&&this._IconHeight>-1&&this._IconWidth>-1&&this._Source?"-"+t*this._IconWidth+"px -"+n*this._IconHeight+"px":""},imageListP.getLeft=function(n){return parseInt(n)>-1&&this._IconHeight>-1&&this._IconWidth>-1&&this._Source?-(n*this._IconWidth):""},imageListP.getTop=function(n){return parseInt(n)>-1&&this._IconHeight>-1&&this._IconWidth>-1&&this._Source?-(n*this._IconHeight):""},imageListP.getSource=function(){return this._Source},imageListP.setSource=function(n){n&&n!=this._Source&&(this._Source=n)},imageListP.getIconHeight=function(){return this._IconHeight},imageListP.setIconHeight=function(n){parseInt(n)>-1&&this._IconHeight!=n&&(this._IconHeight=n)},imageListP.getIconWidth=function(){return this._IconWidth},imageListP.setIconWidth=function(n){parseInt(n)>-1&&this._IconWidth!=n&&(this._IconWidth=n)},imageListP=null,PP.Ui.ListItem=function(){this._Parent=null,this._defineEvents(["ItemSelected","ItemDeselected"]),PP.Ui.ListItem.base.constructor.apply(this,arguments),this._ImageDomNode=null,this._ContentDomNode=null,this._oldContent=null,this._inputDomNode=null,this._clickTimeout=null,this._PMW=0,this._render()},PP.initClass(PP.Ui.ListItem,PP.Ui.Control,"ListItem"),listItemP=PP.Ui.ListItem.prototype,listItemP._RowIndex=-1,listItemP._ColumnIndex=-1,listItemP._Selected=!1,listItemP._Visibility=!0,listItemP._Template="{Content}",listItemP._CSSName="PPListItem",listItemP._render=function(){var n=this._Template;n=n.replace("{Content}",this._getImagePart()),this._initFromHTML("<div class='"+this._CSSName+"'>"+n+"</div>",!0),this._ImageDomNode=PP.querySelector(this._DomNode,".Icon"),this._ContentDomNode=PP.htmlToDOM("<div class='Content'></div>"),this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),this._ImageDomNode.parentNode.appendChild(this._ContentDomNode),this._DomNode.style.display=this._Visibility?"":"none",PP.Ui.ListItem.base._render.call(this)},listItemP._onClicked=function(){this._Enabled&&(!this._Parent||this._Parent.getEnabled())&&(this._Selected&&this._Parent&&this._Parent.getEnableEdit()?this._clickTimeout?(PP.clearTimeout(this._clickTimeout),this._clickTimeout=null):this._clickTimeout=PP.setTimeout(this._onClickedHandler.bind(this),500):(this.setSelected(!this._Selected),this.setIsHovered(!1)),PP.Ui.ListItem.base._onClicked.apply(this,arguments))},listItemP._onContextMenu=function(){this._Enabled&&(!this._Parent||this._Parent.getEnabled())&&(this.setIsHovered(!1),this.setSelected(!0),PP.Ui.ListItem.base._onContextMenu.apply(this,arguments))},listItemP._onClickedHandler=function(){this._clickTimeout=null,(this._Parent!=null&&this._Parent.getFocused()||this._Parent==null)&&this._Selected&&this._startEdit()},listItemP._startEdit=function(){if(!this._inputDomNode){var n=this._Parent;this._oldContent=this.getContent(),this.setContent(""),PP.removeChildren(this._ContentDomNode),this._inputDomNode=PP.createElement(this._ContentDomNode,"PPListItemInput","input"),this._addEvent(this._inputDomNode,"blur",this._onInputBlur),this._addEvent(this._inputDomNode,"keydown",this._onInputKeyDown),this._inputDomNode.value=PP.String.unescapeHTML(this._oldContent),this._inputDomNode.style.width=this._checkValue(this.getWidth()-this.getHeight()-20)+"px",this._inputDomNode.focus(),n.ItemEditing.fire(n,{Item:this})}},listItemP._stopEdit=function(){if(this._inputDomNode){var t=this._Parent,n=PP.String.escapeHTML(this._inputDomNode.value);this._inputDomNode=null,PP.removeChildren(this._ContentDomNode),this.setContent(n),this._oldContent!=n&&t.ItemEdited.fire(t,{Item:this,NewValue:n,PrevValue:this._oldContent})}},listItemP._cancelEdit=function(){this._inputDomNode=null,this.setContent(this._oldContent)},listItemP._onInputBlur=function(){this._stopEdit()},listItemP._onInputKeyDown=function(n,t){switch(t.Event.keyCode){case PP.Key.Enter:this._stopEdit();break;case PP.Key.Esc:this._cancelEdit()}t.Event.stopPropagation()},listItemP._getImagePart=function(){if(this._Parent){var n=this._Parent.getImageList();if(n&&n.getSource()&&this._RowIndex>-1&&this._ColumnIndex>-1)return"<div class='Icon' style='background: url("+n.getSource()+") "+n.getIcon(this._RowIndex,this._ColumnIndex)+" no-repeat; height: "+n.getIconHeight()+"px; width: "+n.getIconWidth()+"px;'></div>"}return"<div class='Icon'></div>"},listItemP._onMouseOver=function(n,t){PP.reallyOver(this._DomNode,t.Event)&&(PP.Ui.ListItem.base._onMouseOver.call(this,n,t),this.setIsHovered(!0))},listItemP._onMouseOut=function(n,t){PP.reallyOut(this._DomNode,t.Event)&&(PP.Ui.ListItem.base._onMouseOut.call(this,n,t),this.setIsHovered(!1))},listItemP.setContent=function(n){this._setContentToNode(n,this._ContentDomNode),this._Parent&&this._Parent.setWidth(this._Parent.getWidth())},listItemP.getParent=function(){return this._Parent},listItemP.setColumnIndex=function(n){if(parseInt(n)>-1&&n!=this._ColumnIndex&&(this._ColumnIndex=n,this._Parent)){var t=this._Parent.getImageList();t&&t.getSource()&&this._RowIndex>-1&&this._ColumnIndex>-1&&(this._ImageDomNode.style.backgroundImage="url("+t.getSource()+")",this._ImageDomNode.style.backgroundPosition=t.getIcon(this._RowIndex,this._ColumnIndex),this._ImageDomNode.style.backgroundRepeat="no-repeat",this._ImageDomNode.style.height=t.getIconHeight()+"px",this._ImageDomNode.style.width=t.getIconWidth()+"px",this._Parent.setWidth(this._Parent.getWidth()))}},listItemP.getColumnIndex=function(){return this._ColumnIndex},listItemP.setRowIndex=function(n){if(parseInt(n)>-1&&n!=this._RowIndex&&(this._RowIndex=n,this._Parent)){var t=this._Parent.getImageList();t&&t.getSource()&&this._RowIndex>-1&&this._ColumnIndex>-1&&(this._ImageDomNode.style.backgroundImage="url("+t.getSource()+")",this._ImageDomNode.style.backgroundPosition=t.getIcon(this._RowIndex,this._ColumnIndex),this._ImageDomNode.style.backgroundRepeat="no-repeat",this._ImageDomNode.style.height=t.getIconHeight()+"px",this._ImageDomNode.style.width=t.getIconWidth()+"px",this._Parent.setWidth(this._Parent.getWidth()))}},listItemP.getRowIndex=function(){return this._RowIndex},listItemP.setIsVisible=function(n){PP.isString(n)&&(n=n==PP.Ui.Visibility.Visible?!0:!1),n!=this._Visibility&&(this._Visibility=n,this._DomNode.style.display=this._Visibility?"":"none")},listItemP.getIsVisible=function(){return this._Visibility},listItemP.setSelected=function(n,t){t=typeof t=="undefined"?!0:t==!0,PP.isBoolean(n)&&n!=this._Selected&&(this._Selected=n,this._Selected?this.addClass("Selected"):this.removeClass("Selected"),!this._Selected&&this._clickTimeout&&(PP.clearTimeout(this._clickTimeout),this._clickTimeout=null),!this._Selected&&this._inputDomNode&&this._cancelEdit(),t&&(this._Selected?this.ItemSelected.fire(this,{}):this.ItemDeselected.fire(this,{})))},listItemP.getSelected=function(){return this._Selected},listItemP.setIsHovered=function(n){this._Enabled&&n?this.addClass("Hovered"):this.removeClass("Hovered")},listItemP.setEnabled=function(){return PP.Ui.ListItem.base.setEnabled.apply(this,arguments),this._Enabled||this.setIsHovered(!1),this},listItemP.setWidth=function(n){var t,i;(PP.Ui.ListItem.base.setWidth.apply(this,arguments),n!==this._Width)&&(n===null?this._ContentDomNode.style.width="":(this._PMW||(t=0,t+=PP.getStyle(this._ImageDomNode,"margin-left",!0),t+=PP.getStyle(this._ImageDomNode,"margin-right",!0),t+=PP.getStyle(this._ImageDomNode,"padding-left",!0),t+=PP.getStyle(this._ImageDomNode,"padding-right",!0),t+=PP.getStyle(this._ContentDomNode,"margin-left",!0),t+=PP.getStyle(this._ContentDomNode,"margin-right",!0),t+=PP.getStyle(this._ContentDomNode,"padding-left",!0),t+=PP.getStyle(this._ContentDomNode,"padding-right",!0),this._PMW=t),i=this._Width-this._PMW-PP.getStyle(this._ImageDomNode,"width",!0),this._ContentDomNode.style.width=this._checkValue(i)+"px"),this._Parent&&this._Parent.updateSize())},listItemP.setHeight=function(n){(PP.Ui.ListItem.base.setHeight.apply(this,arguments),n!==this._Height)&&this._Parent&&this._Parent.updateSize()},listItemP.toString=function(){var n=typeof this._Content,t;return n=="string"||n=="number"||n=="date"||n=="boolean"?(t=document.createElement("span"),t.innerHTML=this._Content,typeof t.textContent!="undefined"?t.textContent:t.innerText):n!="undefined"&&this._Content!=null?this._Content instanceof PP.Ui.Control?typeof this._Content._DomNode.textContent!="undefined"?this._Content._DomNode.textContent:this._Content._DomNode.innerText:typeof this._Content.textContent!="undefined"?this._Content.textContent:this._Content.innerText:""},listItemP.dispose=function(){this.isLive()&&(delete this._Parent,PP.clearTimeout(this._clickTimeout),PP.Ui.ListItem.base.dispose.apply(this,arguments))},listItemP=null,PP.Ui.ListBox=function(){this._Items=[],this._ImageList=null,this._defineEvents(["ItemSelected","ItemDeselected","ItemEditing","ItemEdited"]),PP.Ui.ListBox.base.constructor.apply(this,arguments),this._TabIndex===null&&(this._TabIndex=0),this._render()},PP.initClass(PP.Ui.ListBox,PP.Ui.Control,"ListBox"),listBoxP=PP.Ui.ListBox.prototype,listBoxP._SelectedIndex=-1,listBoxP._Orientation=PP.Orientation.Vertical,listBoxP._IsScrollToSelected=!0,listBoxP._EmptySelection=!1,listBoxP._MultiSelect=!1,listBoxP._EnableKeyboard=!0,listBoxP._EnableEdit=!1,listBoxP._render=function(){var n,t;if(this._initFromHTML("<div class='PPListBox'></div>",!0),this._ScrollBox=new PP.Ui.ScrollBox({ParentNode:this._DomNode,Parent:this,Width:this._Width,Height:this._Height}),n=this._Items,this._Items=[],this.beginUpdate(),n)for(t=0;t<n.length;t++)n[t]instanceof PP.Ui.ListItem?this.addItem(n[t]):(n[t].Parent||(n[t].Parent=this),n[t].PPType?this.addItem(PP.create(n[t])):this.addItem(new PP.Ui.ListItem(n[t])),delete n[t].Parent);this.endUpdate(),this.setSelectedIndex(this._SelectedIndex,!1,!0),PP.Ui.ListBox.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),this._Orientation&&this.setOrientation(this._Orientation)},listBoxP._onKeyDown=function(n,t){if(this._Enabled&&this._EnableKeyboard){if(this._Orientation===PP.Orientation.Vertical)switch(t.Event.keyCode){case PP.Key.Up:return this._selectNextItem(),!1;case PP.Key.Down:return this._selectPreviousItem(),!1}else switch(t.Event.keyCode){case PP.Key.Left:return this._selectNextItem(),!1;case PP.Key.Right:return this._selectPreviousItem(),!1}this.KeyDown.fire(this,t)}},listBoxP._selectNextItem=function(){var n=0;if(this._SelectedIndex<0&&this._Items.length>0){for(n=0;n<this._Items.length;n++)if(this._Items[n]._Enabled&&this._Items[n]._DomNode.style.display!="none"){this.setSelectedIndex(n);break}}else if(this._Items[this._SelectedIndex]._DomNode.style.display!="none"){for(n=this._SelectedIndex-1;n>-1;n--)if(this._Items[n]._Enabled&&this._Items[n]._DomNode.style.display!="none"){this.setSelectedIndex(n);break}}else if(this._Items[this._SelectedIndex]._DomNode.style.display=="none")for(n=0;n<this._Items.length;n++)if(this._Items[n]._Enabled&&this._Items[n]._DomNode.style.display!="none"){this.setSelectedIndex(n);break}},listBoxP._selectPreviousItem=function(){var n;if(this._SelectedIndex<0&&this._Items.length>0){for(n=0;n<this._Items.length;n++)if(this._Items[n]._Enabled&&this._Items[n]._DomNode.style.display!="none"){this.setSelectedIndex(n);break}}else if(this._Items[this._SelectedIndex]._DomNode.style.display!="none"){for(n=this._SelectedIndex+1;n<this._Items.length;n++)if(this._Items[n]._Enabled&&this._Items[n]._DomNode.style.display!="none"){this.setSelectedIndex(n);break}}else if(this._Items[this._SelectedIndex]._DomNode.style.display=="none")for(n=0;n<this._Items.length;n++)if(this._Items[n]._Enabled&&this._Items[n]._DomNode.style.display!="none"){this.setSelectedIndex(n);break}},listBoxP.scrollToSelected=function(){var i;if(this._IsScrollToSelected&&(i=this.getSelectedIndex(),i>=0)){var f=this._Items[i],o=f.getDomNode().offsetTop,s=this._DomNode.offsetTop,h=f.getHeight(),n=this._ScrollBox.getContentNode();if(n){var c=parseInt(n.style.height),r=n.scrollTop,u=r,t=o-s,e=c-h;t-e>r?u=t-e:t<r&&(u=t),n.scrollTop=u,this._ScrollBox.updateScrollPositions()}}return this},listBoxP._onItemSelected=function(n){this.setSelectedIndex(this._Items.indexOf(n),!1),this.ItemSelected.fire(this,{ListItem:n})},listBoxP._onItemDeselected=function(n){if(this._MultiSelect){this._SelectedIndex=-1;for(var i=0;i<this._Items.length;i++)if(this._Items[i].getSelected()){this._SelectedIndex=i;break}!this._EmptySelection&&this._SelectedIndex<0?this.setSelectedIndex(this._Items.indexOf(n),!1):this.ItemDeselected.fire(this,{ListItem:n})}else this._EmptySelection?(this.clearSelection(),this.ItemDeselected.fire(this,{ListItem:n})):this.setSelectedIndex(this._Items.indexOf(n),!1)},listBoxP._onItemDblClick=function(n,t){t.Event.stopPropagation(),t.Item=n,this.DblClick.fire(this,t)},listBoxP._onItemContextMenu=function(n,t){t.Event.stopPropagation(),t.Item=n,this.ContextMenu.fire(this,t)},listBoxP.getItems=function(){return this._Items},listBoxP.setSelectedItem=function(n,t,i){if(t=typeof t=="undefined"?!0:t==!0,n&&n instanceof PP.Ui.ListItem)for(var r=0;r<this._Items.length;r++)this._Items[r]==n&&this.setSelectedIndex(r,t,i);return this},listBoxP.getSelectedItem=function(){return this._SelectedIndex>-1&&this._SelectedIndex<this._Items.length?this._Items[this._SelectedIndex]:null},listBoxP.getSelectedItems=function(){for(var t=[],n=0;n<this._Items.length;n++)this._Items[n].getSelected()&&t.push(this._Items[n]);return t},listBoxP.setSelectedIndex=function(n,t,i){if(t=typeof t=="undefined"?!0:t==!0,parseInt(n)>-1&&n<this._Items.length){var r=null;this._MultiSelect||(r=this.getSelectedItem(),this.clearSelection()),this._SelectedIndex=n,t&&!this._MultiSelect&&r&&r!==this.getSelectedItem()&&this.ItemDeselected.fire(this,{ListItem:r}),this._Items[n].setSelected(!0,t,i),this.scrollToSelected()}return this},listBoxP.getSelectedIndex=function(){return this._SelectedIndex},listBoxP.getValue=function(){var n=this.getSelectedItem();return n?n.getValue():null},listBoxP.setValue=function(n,t,i){var u,r;for(t=typeof t=="undefined"?!0:t==!0,u=!1,r=0;r<this._Items.length;r++)(this._Items[r].getValue()==n||this._Items[r].getContent()==n)&&(this.setSelectedIndex(r,t,i),u=!0);return u||this.clearSelection(),this},listBoxP.setWidth=function(n){if(PP.Ui.ListBox.base.setWidth.apply(this,arguments),n=this._checkValue(n),this._ScrollBox.setWidth(n),this._Orientation===PP.Orientation.Vertical){var r=this._ScrollBox.getContentNode().scrollWidth,i=this._Items,u=i.length,t;if(this.beginUpdate(),r>n)for(t=0;t<u;t++)i[t].setWidth(r);else for(t=0;t<u;t++)i[t].setWidth(null);this.endUpdate()}else this.updateSize()},listBoxP.setHeight=function(n){PP.Ui.ListBox.base.setHeight.apply(this,arguments),this._ScrollBox.setHeight(n),this.updateSize()},listBoxP.setOrientation=function(n){this._Orientation=n,n==PP.Orientation.Vertical?(this.removeClass("Horizontal"),this.removeClass("Vertical"),this.addClass("Vertical")):(this.removeClass("Horizontal"),this.removeClass("Vertical"),this.addClass("Horizontal"))},listBoxP.getOrientation=function(){return this._Orientation},listBoxP.setImageList=function(n){n&&n!=this._ImageList&&(this._ImageList=n)},listBoxP.getImageList=function(){return this._ImageList},listBoxP.setFocus=function(){PP.Ui.ListBox.base.setFocus.apply(this,arguments),this.scrollToSelected()},listBoxP.getEnableKeyboard=function(){return this._EnableKeyboard},listBoxP.setEnableKeyboard=function(n){return this._EnableKeyboard=n==!0,this},listBoxP.setEnabled=function(n,t,i){var u,r;if(i=typeof i=="undefined"?!1:i==!0,PP.Ui.ListBox.base.setEnabled.apply(this,arguments),i&&this._Items)for(u=this._Items.length,r=0;r<u;r++)this._Items[r]instanceof PP.Ui.ListItem&&this._Items[r].setEnabled(this._Enabled,t);return this._ScrollBox.setEnabled(this._Enabled),this},listBoxP.setIsRTL=function(){var i,t;if(PP.Ui.ListBox.base.setIsRTL.apply(this,arguments),this._ScrollBox.setIsRTL(this._IsRTL),this._Items)for(i=this._Items.length,t=0;t<i;t++)this._Items[t]instanceof PP.Ui.ListItem?this._Items[t].setIsRTL(this._IsRTL):this._Items[t].IsRTL=this._IsRTL;return this},listBoxP.getIsScrollToSelected=function(){return this._IsScrollToSelected},listBoxP.setIsScrollToSelected=function(n){return n!=this._IsScrollToSelected&&(this._IsScrollToSelected=n),this},listBoxP.getMultiSelect=function(){return this._MultiSelect},listBoxP.setMultiSelect=function(n){if(PP.isBoolean(n)&&n!=this._MultiSelect&&(this._MultiSelect=n,!this._MultiSelect)){var t=this.getSelectedItems();t.length>0?(this.clearSelection(),this.setSelectedItem(t[0])):this._EmptySelection||this.setEmptySelection(this._EmptySelection,!1,!0)}return this},listBoxP.getEmptySelection=function(){return this._EmptySelection},listBoxP.setEmptySelection=function(n,t,i){var u,r;if(t=typeof t=="undefined"?!0:t==!0,(PP.isBoolean(n)&&n!=this._EmptySelection||i)&&(this._EmptySelection=n,!this._EmptySelection&&this._SelectedIndex<0))for(u=this._Items.length,r=0;r<u;r++)if(this._Items[r].getIsVisible()){this.setSelectedIndex(r,t);break}return this},listBoxP.getEnableEdit=function(){return this._EnableEdit},listBoxP.setEnableEdit=function(n){return this._EnableEdit=n,this},listBoxP.addToNode=function(){PP.Ui.ListBox.base.addToNode.apply(this,arguments),this.updateSize()},listBoxP.addItem=function(n){return this.insertItem(n)},listBoxP.insertItem=function(n,t){var u=typeof n,r,i;if(t>this._Items.length-1&&(t=null),r=typeof t=="undefined"||t==null,!r&&typeof t!="number")throw new Error("incorrect type of index");if(!r&&t<0)throw new Error("incorrect value of index");return u=="string"||u=="number"||u=="date"||u!="undefined"&&n!=null?(i=n instanceof PP.Ui.ListItem?n:new PP.Ui.ListItem({Parent:this,Content:n}),i._Parent||(i._Parent=this),r||this._Items.length==0?this._Items.push(i):this._Items.splice(t,0,i),i.setIsRTL(this._IsRTL),i.addToNode(this._ScrollBox.getContentNode()),r||this._ScrollBox.getContentNode().childNodes.length==0||this._ScrollBox.getContentNode().insertBefore(i._DomNode,this._ScrollBox.getContentNode().childNodes[t]),i.getSelected()&&this.setSelectedItem(i,!1),i.ItemSelected.add(this._onItemSelected,this),i.ItemDeselected.add(this._onItemDeselected,this),i.DblClick.add(this._onItemDblClick,this),i.ContextMenu.add(this._onItemContextMenu,this),this._Orientation===PP.Orientation.Vertical&&this.setWidth(this.getWidth()),this.updateSize(),i):null},listBoxP.removeItem=function(n,t){if(this.isLive()&&(t=typeof t=="undefined"?!0:t==!0,parseInt(n)>-1&&n<this._Items.length)){var i=this._Items[n];this._SelectedIndex==n?this._SelectedIndex=-1:this._SelectedIndex>n&&this._SelectedIndex--,t?i.dispose():i.removeFromDOM(),this._Items.splice(n,1),this.setEmptySelection(this._EmptySelection,!1,!0),this.updateSize()}},listBoxP.filterByText=function(n){var t,i;if(typeof n!="undefined"){for(t=0;t<this._Items.length;t++)i=this._Items[t],i.getIsVisible()&&(i._DomNode.style.display=this._Items[t].toString().toLowerCase().indexOf(n.toLowerCase())<0?"none":"");this.scrollToSelected()}},listBoxP.clearSelection=function(){this._SelectedIndex=-1;for(var n=0;n<this._Items.length;n++)this._Items[n].setSelected(!1,!1)},listBoxP.clear=function(n){while(this._Items.length>0)this.removeItem(0,n)},listBoxP.updateSize=function(){this._BeginUpdate==0&&this._ScrollBox.updateSize()},listBoxP.show=function(){PP.Ui.ListBox.base.show.call(this),this.updateSize()},listBoxP.selectItemById=function(n,t){t=typeof t=="undefined"?!0:t==!0;for(var i=0;i<this._Items.length;i++)if(this._Items[i].getId()==n){this.setSelectedIndex(i,t);break}},listBoxP.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},listBoxP.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this.updateSize()):this._BeginUpdate--},listBoxP=null,PP.Ui.NumberEdit=function(n){this._defineEvents(["Validate","AfterValueChange"]),this._Step=1,this._DecimalSeparator=PP.getCurrentCulture().DecimalSeparator,this._GroupSeparator=" ",this._IsNullable=!1,this._MinValue=-999999999999999934463,this._MaxValue=999999999999999934463,this._FractionCount=0,this._Walkthrough=!1,this._cssNumberEdit="PPNumberEdit",PP.Ui.NumberEdit.base.constructor.apply(this,arguments),this.setStep(this._Step),n?n.Value==null&&this._IsNullable?this.setValue(null,!1):this.setValue(n.Value,!1):this.setValue(0,!1),this._isMouseDown=!1,this._lastValue=this.getValue()},PP.initClass(PP.Ui.NumberEdit,PP.Ui.SpinEdit,"NumberEdit"),NumEdP=PP.Ui.NumberEdit.prototype,NumEdP._render=function(){PP.Ui.NumberEdit.base._render.call(this),PP.addClass(this._DomNode,this._cssNumberEdit)},NumEdP._raiseSpinEvent=function(n){var r,i,f,t,u;if(!(n instanceof PP.SpinEventArgs))throw new Error("incorrect EventArgs type");r=new PP.EventArgs,i=this.getValue(),i||this._Value||(i=0),i<this._MinValue&&(i=this._MinValue),i>this._MaxValue&&(i=this._MaxValue),f=Math.max(this._getFracNum(i),this._getFracNum(this._Step)),t=i+(n.IsSpinUp?+this._Step:-this._Step),t=this._round(t,f),t>this._MaxValue?t=this._Walkthrough?this._MinValue:this._MaxValue:t<this._MinValue&&(t=this._Walkthrough?this._MaxValue:this._MinValue),r.OldValue=i,r.NewValue=t,r.Cancel=!1,this._raiseBeforeChangeEvent(r),n.OldValue=i,n.NewValue=t,n.IsSpinUp?(r.SpinDirection=PP.Ui.SpinEdit.SpinDirection.Up,this.SpinUp.fire(this,n)):(r.SpinDirection=PP.Ui.SpinEdit.SpinDirection.Down,this.SpinDown.fire(this,n)),r.Cancel||n.Cancel||(this._Value=t,this._raiseAfterChangeEvent(r,undefined,undefined,!0),(this._textBeforeFocus==null||this._textBeforeFocus!=t)&&(u=new PP.EventArgs,u.OldText=i,u.NewText=t,this._raiseTextChangedEvent(u)),this._textBeforeFocus=t+"")},NumEdP._raiseAfterChangeEvent=function(n,t,i,r){var s,u,e,f,o;t=typeof t=="undefined"?!0:t==!0,t&&this.AfterChange.fire(this,n),t&&(this._inputInterval&&PP.clearTimeout(this._inputInterval),this._inputInterval=PP.setTimeout(this._raiseTimeoutEvent,1e3,this)),s=n.Event,this._EventArgsOnBlur={FireEvent:!1},r?(u=new PP.EventArgs(s),u.OldValue=n.OldValue,u.NewValue=this._Value,u.SpinDirection=n.SpinDirection,(u.OldValue!=u.NewValue||i)&&t&&this._raiseAfterValueChangeEvent(u),this._input.value=this._getFormatStr(this.getValue()),this.applyValidCSS()):(e={value:n.NewValue},f=new PP.Ui.NumberEditValidateArgs,f.IsValid=this._validate(e),f.TextValue=e.value,f.Value=e.numberValue,this._raiseValidate(f),f.IsValid&&f.Value>=this._MinValue&&f.Value<=this._MaxValue||e.value===""&&this._IsNullable?(u=new PP.EventArgs(s),u.OldValue=this._Value,this._Value=PP.isNumber(e.numberValue)?e.numberValue:null,u.NewValue=this._Value,(u.OldValue!=u.NewValue||i)&&t&&this._raiseAfterValueChangeEvent(u),this.applyValidCSS()):(this.applyNotValidCSS(),f.IsValid?t&&(o=-1,f.Value<this._MinValue?o=this._MinValue:f.Value>this._MaxValue&&(o=this._MaxValue),this._EventArgsOnBlur={FireEvent:!0,OldValue:this._Value,NewValue:o}):f.TextValue===""&&(this._IsNullable?(this.applyValidCSS(),this._EventArgsOnBlur={FireEvent:!0,OldValue:this._Value,NewValue:null}):this._EventArgsOnBlur={FireEvent:!0,OldValue:this._Value,NewValue:this._Value})))},NumEdP._raiseAfterValueChangeEvent=function(n){this.AfterValueChange.fire(this,n),this._inputInterval&&PP.clearTimeout(this._inputInterval),this._inputInterval=PP.setTimeout(this._raiseTimeoutEvent,1e3,this)},NumEdP._raiseValidate=function(n){if(!(n instanceof PP.Ui.NumberEditValidateArgs))throw new Error("incorrect type of EventArgs. EventArgs must be type of PP.Ui.NumberEditValidateArgs");this.Validate.fire(this,n)},NumEdP._validate=function(n){var t=this.getGroupSeparator(),i=this.getDecimalSeparator(),r=this.getFractionCount(),u=new RegExp("^\\"+t,"g"),f=new RegExp("\\"+t+"$","g"),e=new RegExp("^\\"+i,"g"),o=new RegExp("\\"+i+"$","g");return n.value=n.value.replace(u,"").replace(f,""),n.value=n.value.replace(e,"").replace(o,""),PP.getCurrentCulture().validateNumber(n,t,i,r)},NumEdP._isDigit=function(n){var t=!1;return(typeof n=="string"||n.length==1)&&(t="0123456789".indexOf(n)>=0),t},NumEdP._onCultureChanged=function(){PP.Ui.NumberEdit.base._onCultureChanged.apply(this,arguments),this.setDecimalSeparator(PP.getCurrentCulture().DecimalSeparator)},NumEdP._onKeyDownInput=function(n,t){if(!this._EnableEdit)return!1;PP.Ui.NumberEdit.base._onKeyDownInput.call(this,n,t);var i=t.Event,r=i.keyCode?i.keyCode:i.which;r==32&&i.ctrlKey&&i.preventDefault()},NumEdP._onKeyPressInput=function(n,t){var o,u;if(!this._EnableEdit)return!1;var i=t.Event,s=i.keyCode?i.keyCode:i.which,f=new PP.EventArgs(i),e=this.getContent();f.OldValue=e,o=this._getSelection(),u=!0;switch(s){case 9:case 8:case 13:u=!1;break;default:if(i.charCode===0||i.which===0||i.ctrlKey){u=!1;break}var h=e.substring(0,o.Start),c=e.substring(o.End),r=String.fromCharCode(s);f.NewValue=h+r+c,this._isDigit(r)||r==this.getDecimalSeparator()&&(r!=this.getDecimalSeparator()||this._FractionCount!==0)||r=="-"?r===this.getDecimalSeparator()&&this._FractionCount!==0&&this._input.value===""&&(this._input.value="0"):(u=!1,i.preventDefault(),i.stopPropagation())}return u&&(this._raiseBeforeChangeEvent(f),f.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i)),!0},NumEdP._onBlurInput=function(n,t){var r,i;PP.Ui.NumberEdit.base._onBlurInput.call(this,n,t),this._EventArgsOnBlur&&this._EventArgsOnBlur.FireEvent&&(r=new PP.EventArgs(t.Event),r.OldValue=this._EventArgsOnBlur.OldValue,r.NewValue=this._EventArgsOnBlur.NewValue,this._Value=r.NewValue,r.OldValue!=r.NewValue&&this._raiseAfterValueChangeEvent(r)),i=this._getFormatStr(this.getValue()),i||(i="",this._IsNullable||(i=0,i<this._MinValue&&(i=this._MinValue),i>this._MaxValue&&(i=this._MaxValue))),this._input.value=i,this.applyValidCSS()},NumEdP._getFormatStr=function(n){var t=this.getGroupSeparator(),i=this.getDecimalSeparator(),r=this.getFractionCount();return PP.getCurrentCulture().numberToFormattedString(n,t,i,r)},NumEdP._round=function(n,t){var r=n,i;return this._getFracNum(n)>t&&(i=Math.pow(10,t),r=Math.round(n*i)/i),r},NumEdP._getFracNum=function(n){var r=0,t,i;return typeof n=="number"&&(t=n+"",i=t.indexOf("."),i>=0&&i<t.length-1&&(t=t.substring(i+1),r=t.length)),r},NumEdP.getValue=function(){return this._Value},NumEdP.setValue=function(n,t,i){t=typeof t=="undefined"?!0:t==!0;var r;return PP.Ui.NumberEdit.base.setValue.apply(this,arguments),typeof n=="number"?(r=this.getFractionCount(),r!=null&&(n=this._round(n,r)),this.setContent(this._getFormatStr(n),t,i)):typeof n=="string"?n[0]!==this.getDecimalSeparator()||isNaN(parseInt(n.substr(1,n.length-1),10))&&n.length!==1?(this._Value="",this._IsNullable||(this._Value=0,this._Value<this._MinValue&&(this._Value=this._MinValue),this._Value>this._MaxValue&&(this._Value=this._MaxValue)),this.setContent(this._Value,t,i)):(n=parseFloat("0"+n.replace(",",".")),r=this.getFractionCount(),r!=null&&(n=this._round(n,r)),this.setContent(this._getFormatStr(n),t,i)):(this._Value="",this._IsNullable||(this._Value=0,this._Value<this._MinValue&&(this._Value=this._MinValue),this._Value>this._MaxValue&&(this._Value=this._MaxValue)),this.setContent(this._Value,t,i)),this},NumEdP.getFractionCount=function(){return this._FractionCount},NumEdP.setFractionCount=function(n){if(n==null||typeof n=="number"&&n>=0){var t=this._getFracNum(this.getStep());n!=null&&n<t&&this.setStep(1/Math.pow(10,n)),this._FractionCount=n,n!=null&&this.setValue(this._round(this._Value,n))}return this},NumEdP.getDecimalSeparator=function(){return this._DecimalSeparator},NumEdP.setDecimalSeparator=function(n){if(typeof n=="string"){if(n.length!=1)throw new Error("DecimalSeparator must consist of one character");this._DecimalSeparator=n,this._input.value=this._getFormatStr(this.getValue())}return this},NumEdP.getGroupSeparator=function(){return this._GroupSeparator},NumEdP.setGroupSeparator=function(n){if(typeof n=="string"){if(n.length>1)throw new Error("GroupSeparator should not contain more than one character");this._GroupSeparator=n,this._input.value=this._getFormatStr(this.getValue())}return this},NumEdP.getWalkthrough=function(){return this._Walkthrough},NumEdP.setWalkthrough=function(n){return this._Walkthrough=n==!0,this},NumEdP.getStep=function(){return this._Step},NumEdP.setStep=function(n){if(typeof n=="number"){var i=this._getFracNum(n),t=this.getFractionCount();if(t!=null&&i>t)throw new Error("Length of fractional part of step must be less than FractionCount property value");this._Step=n}return this},NumEdP.getMinValue=function(){return this._MinValue},NumEdP.setMinValue=function(n){if(typeof n=="number"){var t=this.getFractionCount();t!=null&&(n=this._round(n,t)),this._MinValue=n}return this},NumEdP.getMaxValue=function(){return this._MaxValue},NumEdP.setMaxValue=function(n){if(typeof n=="number"){var t=this.getFractionCount();t!=null&&(n=this._round(n,t)),this._MaxValue=n}return this},NumEdP.getIsNullable=function(){return this._IsNullable},NumEdP.setIsNullable=function(n){this._IsNullable=!!n,this._IsNullable||this.getValue()!==null||this.setValue(this._MinValue)},PP.Ui.NumberEditValidateArgs=function(){this.IsValid=!1,this.TextValue="",this.Value=0,PP.Ui.NumberEditValidateArgs.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.NumberEditValidateArgs,PP.EventArgs,"NumberEditValidateArgs"),NumEdP=null,PP.HtmlXamlConverter=function(){PP.HtmlXamlConverter.base.constructor.apply(this,arguments)},PP.initClass(PP.HtmlXamlConverter,PP.Object,"HtmlXamlConverter"),htmlXamlConverterP=PP.HtmlXamlConverter.prototype,htmlXamlConverterP.convertToXaml=function(n){var f="<?xml version='1.0' encoding='utf-16'?>",r=PP.htmlToDOM(n,!0),o=r.length,t,i,e,s,u;if(this._UnderlineToAdd="",o>1){for(i=r[0],e=1;e<o;e++)for(i.appendChild(document.createElement("br")),s=r[e],u=s.childNodes;u.length;)this._addStyles(s,u[0],!1),this._addStyles(u[0],i,!1),i.appendChild(u[0]);t=this._prepareNodes(i.childNodes),this._addStyles(i,t,!0),f+=this._getXAMLNode(t,!0)}else o===1?(t=this._prepareNodes(r[0].childNodes),this._addStyles(r[0],t,!0),f+=this._getXAMLNode(t,!0)):f+="<TextBlock xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' xmlns:s='clr-namespace:System;assembly=mscorlib'></TextBlock>";return f},htmlXamlConverterP._prepareNodes=function(n){for(var t=document.createElement("div");n.length;)this._prepareNode(n[0],t);return t},htmlXamlConverterP._prepareNode=function(n,t){var i=n.childNodes,r=i.length;if(!r||r===1&&i[0].nodeType===3){t.appendChild(n);return}while(i.length)this._addStyles(n,i[0]),this._prepareNode(i[0],t,!1);n.parentNode.removeChild(n)},htmlXamlConverterP._addStyles=function(n,t,i){var r=n.style,f,u,e,o;t.nodeType===3&&(f=document.createElement("span"),f.innerHTML=t.nodeValue,t.parentNode.insertBefore(f,t),t.parentNode.removeChild(t),t=f),u=t.style,r.fontSize&&(!u.fontSize||u.fontSize===r.fontSize)&&(u.fontSize=r.fontSize,i&&(r.fontSize="")),r.fontFamily&&(!u.fontFamily||u.fontFamily===r.fontFamily)&&(u.fontFamily=r.fontFamily,i&&(r.fontFamily="")),r.fontWeight&&(!u.fontWeight||u.fontWeight===r.fontWeight)&&(u.fontWeight=r.fontWeight,i&&(r.fontWeight="")),r.fontStyle&&(!u.fontStyle||u.fontStyle===r.fontStyle)&&(u.fontStyle=r.fontStyle,i&&(r.fontStyle="")),r.textDecoration&&(!u.textDecoration||u.textDecoration===r.textDecoration)&&(u.textDecoration=r.textDecoration,i&&(r.textDecoration="")),r.textAlign&&(!u.textAlign||u.textAlign===r.textAlign)&&(u.textAlign=r.textAlign,i&&(r.textAlign="")),r.height&&(!u.height||u.height===r.height)&&(u.height=r.height,i&&(r.height="")),r.color&&(!u.color||u.color===r.color)&&(u.color=r.color,i&&(r.color="")),r.whiteSpace&&(!u.whiteSpace||u.whiteSpace===r.whiteSpace)&&(u.whiteSpace=r.whiteSpace,i&&(r.whiteSpace="")),r.backgroundColor&&(!u.backgroundColor||u.backgroundColor===r.backgroundColor)&&(u.backgroundColor=r.backgroundColor,i&&(r.backgroundColor="")),e=n.getAttribute("opacity"),o=t.getAttribute("opacity"),e&&(!o||o===e)&&(t.setAttribute("opacity",e),i&&n.removeAttribute("opacity"))},htmlXamlConverterP._getXAMLNode=function(n,t){var o,r,u,f,e,c,s,h,i,l;switch(n.nodeType){case 1:if(n.nodeName.toLowerCase()==="br")return"<LineBreak/>";if(r=t?"<TextBlock xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' xmlns:s='clr-namespace:System;assembly=mscorlib' ":n.className==="Hyperlink"?"<Hyperlink xml:space='preserve' Tag='"+(n.getAttribute("dimId")+";"+n.getAttribute("dimKey"))+"' ":"<Run xml:space='preserve' ",e={},PP.IsIE&&PP.IEVer<9)for(c=n.style.cssText.split(";"),o=n.style.cssText?c.length:0,u=[],f=0;f<o;f++)s=c[f].trim().split(":"),u.push(s[0].trim().toLowerCase()),e[s[0].trim().toLowerCase()]=s[1].trim();else o=n.style.length,u=n.style;for(h=!1,f=0;f<o;f++)switch(u[f]){case"height":if(!t)continue;i=u.height||n.style.getPropertyValue&&n.style.getPropertyValue("height")||e.height,i.indexOf("px")>-1&&(i=parseInt(i)),r+="Height='"+i+"' ";break;case"font-family":i=u["font-family"]||n.style.getPropertyValue&&n.style.getPropertyValue("font-family")||e["font-family"],i.indexOf("'")>-1&&(i=i.substring(1,i.length-1)),r+="FontFamily='"+i+"' ";break;case"white-space":if(!t)continue;i=u["white-space"]||n.style.getPropertyValue&&n.style.getPropertyValue("white-space")||e["white-space"],r+=i==="nowrap"?"TextWrapping='NoWrap' ":"TextWrapping='Wrap' ";break;case"font-size":if(i=u["font-size"]||n.style.getPropertyValue&&n.style.getPropertyValue("font-size")||e["font-size"],i.indexOf("pt")>-1)i=Math.round(parseInt(i)/72*96);else switch(i){case 1:case"x-small":i=Math.round(768/72);break;case 2:case"small":i=Math.round(960/72);break;case 3:case"medium":i=Math.round(16);break;case 4:case"large":i=Math.round(1344/72);break;case 5:case"x-large":i=Math.round(24);break;case 6:case"xx-large":i=Math.round(32);break;case 7:case"-webkit-xxx-large":i=Math.round(48)}r+="FontSize='"+i+"' ";break;case"color":i=new PP.Color(u.color||n.style.getPropertyValue&&n.style.getPropertyValue("color")||e.color),r+="Foreground='"+i.toString(!0)+"' ",i.dispose();break;case"background-color":i=new PP.Color(u["background-color"]||n.style.getPropertyValue&&n.style.getPropertyValue("background-color")||e["background-color"]),n.getAttribute("opacity")&&i.setA(parseInt(n.getAttribute("opacity"))),r+="Background='"+i.toString(!0)+"' ",i.dispose();break;case"font-weight":i=u["font-weight"]||n.style.getPropertyValue&&n.style.getPropertyValue("font-weight")||e["font-weight"],i=i=="bold"||i==700?"Bold":"Normal",r+="FontWeight='"+i+"' ";break;case"font-style":i=u["font-style"]||n.style.getPropertyValue&&n.style.getPropertyValue("font-style")||e["font-style"],i=i=="italic"?"Italic":"Normal",r+="FontStyle='"+i+"' ";break;case"text-align":if(!t)continue;i=u["text-align"]||n.style.getPropertyValue&&n.style.getPropertyValue("text-align")||e["text-align"],i.indexOf("left")>-1||i.indexOf("start")>-1||i.indexOf("auto")>-1?i="Left":i.indexOf("center")>-1?i="Center":i.indexOf("right")>-1&&(i="Right"),r+="TextAlignment='"+i+"' ";break;case"text-decoration":i=u["text-decoration"]||n.style.getPropertyValue&&n.style.getPropertyValue("text-decoration")||e["text-decoration"],i=="underline"&&(t?this._UnderlineToAdd="Underline":i="Underline"),t||(i==="Underline"?(r+="TextDecorations='"+i+"' ",h=!0):this._UnderlineToAdd&&(r+="TextDecorations='"+this._UnderlineToAdd+"' ",h=!0))}if(h||t||!this._UnderlineToAdd||(r+="TextDecorations='"+this._UnderlineToAdd+"' "),r+=">",t)for(l=n.childNodes.length,f=0;f<l;f++)r+=this._getXAMLNode(n.childNodes[f]);else r+=n.innerHTML;return r+=t?"</TextBlock>":n.className==="Hyperlink"?"</Hyperlink>":"</Run>",t||n.nodeName!=="DIV"||(r+="<LineBreak/>"),r;case 3:return t?"<TextBlock xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' xmlns:s='clr-namespace:System;assembly=mscorlib'>"+PP.String.escapeHTML(n.nodeValue)+"</TextBlock>":PP.String.escapeHTML(n.nodeValue)}return null},htmlXamlConverterP.convertToHtml=function(n){n=n.replace(/<Run\/>/g,""),n=n.replace(/<Run xml:space=\"preserve\"><\/Run>/g,"");var i=new DOMParser,r=i.parseFromString(n,"text/xml"),t=r.firstChild;return t.nodeType==PP.XMLNodeType.PROCESSING_INSTRUCTION_NODE&&(t=t.nextSibling),this._getHTMLNode(t,!0,n)},htmlXamlConverterP._getHTMLNode=function(n,t,i){var s=-1,r,u,h,c,a,v,y,l,f,e,o;switch(n.nodeType){case 1:if(t)r="<div style='";else{if(n.nodeName==="LineBreak")return"<br />";if(n.nodeName==="TextBlock.Resources")return"";r="<span style='"}if(h=n.childNodes,c=h.length,n.getAttribute("TextAlignment")&&(r+="text-align: "+n.getAttribute("TextAlignment").toLowerCase()+"; "),n.getAttribute("Height")?r+="height: "+(n.getAttribute("Height").toLowerCase()!="auto"?n.getAttribute("Height")+"px":n.getAttribute("Height").toLowerCase())+"; ":n.nodeName==="TextBlock"&&(r+="height: auto; "),n.getAttribute("FontFamily")&&(r+="font-family: "+n.getAttribute("FontFamily")+"; "),n.getAttribute("FontSize")&&(r+="font-size: "+Math.round(parseInt(n.getAttribute("FontSize"))/96*72)+"pt; "),n.getAttribute("TextWrapping")&&(a=n.getAttribute("TextWrapping"),r+=a==="NoWrap"?"white-space: nowrap; ":"white-space: normal; "),n.getAttribute("FontWeight")&&(v=n.getAttribute("FontWeight"),v==="Bold"&&(r+="font-weight: bold; ")),n.getAttribute("FontStyle")&&(y=n.getAttribute("FontStyle"),y==="Italic"&&(r+="font-style: italic; ")),t){for(l=0;i.indexOf('<TextDecoration Location="Underline"/>')>-1;)i=i.replace('<TextDecoration Location="Underline"/>',""),l++;c===l&&(r+="text-decoration: underline; ")}else r+=this._getTextDecorations(n);for(n.getAttribute("Foreground")&&(u=new PP.Color(n.getAttribute("Foreground")),r+="color: "+u.toString()+"; ",u.dispose()),n.getAttribute("Background")&&(u=new PP.Color(n.getAttribute("Background")),s=u.getA(),r+=PP.IsIE&&PP.IEVer<9?"background-color: "+u.toString()+"; ":"background-color: "+u.toDecimalString(!0)+"; ",u.dispose()),r+="' ",f=n.getAttribute("Tag"),f&&(r+="class='Hyperlink' dimId='"+f.split(";")[0]+"' dimKey='"+f.split(";")[1]+"' "),s>-1&&(r+="opacity='"+s+"' "),r+=">",e=0;e<c;e++)r+=this._getHTMLNode(h[e]);return r+=t?"</div>":"</span>";case 3:return o=n.nodeValue,o=PP.String.escapeHTML(o)}return null},htmlXamlConverterP._getTextDecorations=function(n){for(var e=n.childNodes.length,t,u,f,r,i=0;i<e;i++)if(t=n.childNodes[i],(t.nodeName==="Run.TextDecorations"||t.nodeName==="Hyperlink.TextDecorations")&&t.childNodes&&t.childNodes.length>0)for(u=t.childNodes,f=u.length,r=0;r<f;r++)if(u[r].getAttribute("Location")==="Underline")return"text-decoration: underline; ";return""},htmlXamlConverterP=null,PP.Ui.Window=function(){this._EnableMove=!0,this._ExpandButton=new PP.Ui.RibbonButton({ImagePosition:PP.LTRB.Left}),this._CloseButton=new PP.Ui.RibbonButton({ImagePosition:PP.LTRB.Left}),this._ExpandButton.addClass("Expand"),this._CloseButton.addClass("Close"),this._defineEvents(["Moving","Moved","Expanding","Expanded"]),this._Caption="",this._CaptionIcon="",PP.Ui.Window.base.constructor.apply(this,arguments),this.Opened.add(this._onOpened,this),this.Opening.add(this._onOpening,this),this.Closed.add(this._onClosed,this),this._positionTop=this._positionLeft=100,this._lastMouseX=this._lastMouseY=this._oldWindowWidth=this._oldWindowHeight=0,this._parentWindow=null,this._oldResizerBL=null,this._oldResizerBR=null},PP.initClass(PP.Ui.Window,PP.Ui.DropPanel,"Window"),windowP=PP.Ui.Window.prototype,PP.Ui.Window.FocusWindow=null,windowP._render=function(){var t=this._Template,n,i;t=t.replace("{Content}","<div class='ContentBody'></div>"),this._initFromHTML("<DIV class='PPDropPanel'>"+t+"</div>",!0),this.addClass("PPWindow"),n=PP.htmlToDOM("<table cellspacing='0' cellpadding='0' border='0' class='WindowTable'><tbody><tr><td class='Header'><div class='Icon'></div><div class='Text'></div></td><td class='Buttons'></td></tr><tr><td colspan='2'><div class='Content'></div><div class='ResizeTriangle'></div></td></tr></tbody></table>"),this._ResizeTriangle=PP.querySelector(n,".ResizeTriangle"),this._DragCell=PP.querySelector(n,".Header"),this._WindowContentDomNode=PP.querySelector(n,".Content"),this._Caption&&this.setCaption(this._Caption,!0),this._CaptionIcon&&this.setCaptionIcon(this._CaptionIcon,!0),i=PP.querySelector(n,".Buttons"),this._ExpandButton.addToNode(i),this._CloseButton.addToNode(i),this._setStructure(),this._ContentDomNode.appendChild(n),this._setContentToNode(this._Content,this._WindowContentDomNode,"Content",!0),PP.Ui.DropPanel.base._render.apply(this,arguments),this._IsInitialized=!0},windowP._bindEvents=function(){this._isBind||(PP.Ui.Window.base._bindEvents.call(this),this.SizeChanged.add(this._onResizeCompleted,this),this._DragCell&&(this._EnableMove&&this._addEvent(this._DragCell,"mousedown",this._onMouseDownDragCell),this._addEvent(this._DragCell,"dblclick",this._onClickExpandButton)),this._CloseButton.Click.add(this._onClickCloseButton,this),this._ExpandButton.Click.add(this._onClickExpandButton,this))},windowP._unBindEvents=function(){PP.Ui.Window.base._unBindEvents.call(this),this.SizeChanged.remove(this._onResizeCompleted,this),this._DragCell&&this._removeAllEvents(this._DragCell),this._CloseButton.Click.remove(this._onClickCloseButton,this),this._ExpandButton.Click.remove(this._onClickExpandButton,this)},windowP._onResizeCompleted=function(){if(!this._IsExpanded){this._oldWindowWidth=this.getWidth(),this._oldWindowHeight=this.getHeight();var n=PP.calculateOffset(this._DomNode);return this._positionTop=n.Y,this._positionLeft=n.X,this}},windowP._onMouseDownDragCell=function(n,t){if(this._getMouseButton(t.Event)!=1)return!1;this._lastMouseX=PP.calculateMouseX(t.Event),this._lastMouseY=PP.calculateMouseY(t.Event);var i=PP.calculateOffset(this._ParentNode),r=this._DomNode.offsetParent;this._maxTop=i.Y+r.offsetHeight-this.getHeight(),this._maxLeft=i.X+r.offsetWidth-this.getWidth(),this._minTop=i.Y,this._minLeft=i.X,this._removeEvent(this._DragCell,"mousedown",this._onMouseDownDragCell),this._addEvent(this._DragCell,"mouseup",this._onMouseUpDragCell),this._addEvent(this._DragCell,"mousemove",this._onMouseMoveDragCell),PP.setCapture(this._DragCell)},windowP._onMouseUpDragCell=function(n,t){return this._getMouseButton(t.Event)!=1?!1:(this._addEvent(this._DragCell,"mousedown",this._onMouseDownDragCell),this._removeEvent(this._DragCell,"mouseup",this._onMouseUpDragCell),this._removeEvent(this._DragCell,"mousemove",this._onMouseMoveDragCell),PP.releaseCapture(this._DragCell),this.Moved.fire(this,t),!1)},windowP._onMouseMoveDragCell=function(n,t){if(!this.getEnabled())return!1;this.Moving.fire(this,t);var h=PP.calculateMouseX(t.Event),c=PP.calculateMouseY(t.Event),f=h-this._lastMouseX,e=c-this._lastMouseY,r=this._positionTop+e,u=this._positionLeft+f,o=0,s=0,i=this._DomNode.offsetParent.getBoundingClientRect();return u<this._minLeft-i.left&&(o=this._minLeft-f,u=this._minLeft-i.left),r<this._minTop-i.top&&(s=this._minTop-e,r=this._minTop-i.top),u>this._maxLeft-i.left&&(o=this._maxLeft-f,u=this._maxLeft-i.left),r>this._maxTop-i.top&&(s=this._maxTop-e,r=this._maxTop-i.top),o==0&&(this._lastMouseX=h,this._positionLeft=u),s==0&&(this._lastMouseY=c,this._positionTop=r),this.setPosition(this._positionLeft,this._positionTop),!1},windowP._onClickCloseButton=function(){this._oldWindowWidth=this._oldWindowWidth==0?this.getWidth():this._oldWindowWidth,this._oldWindowHeight=this._oldWindowHeight==0?this.getHeight():this._oldWindowHeight,this.hide()},windowP._onClickExpandButton=function(){if(!this.getEnabled())return!1;this.expand()},windowP._onOpened=function(){this._DragCellHeight||(this._DragCellHeight=this._DragCell.offsetHeight),this._WindowContentDomNode.style.height=this._checkValue(this._DomNode.offsetHeight-this._HeightDifference-this._DragCellHeight-this._getWindowContentDomNodeMarginsAndBordersHeight())+"px"},windowP._onOpening=function(n,t){t.X=t.X>-1?t.X:0,t.Y=t.Y>-1?t.Y:0},windowP._onClosed=function(){this===PP.Ui.Window.FosusWindow&&(PP.Ui.Window.FocusWindow=null),this._parentWindow&&this._parentWindow.setFocus()},windowP._onMouseDown=function(n,t){var r;if(this.isLive()&&this._Enabled){if(this._onContentMouseDown(n,t),!this._isResingNow&&this.DragStart.getCount()>0&&!PP.getCaptureNode()&&!PP.Ui.Control._DragDrop.Data&&(this._addEvent(this._DomNode,"mousemove",this._onDragDropMouseMove),this._addEvent(document,"mouseup",this._onDDDocMouseUp)),!t.Break&&PP.Ui.DropPanel.OpenedPanels.length>0&&PP.Ui.DropPanel.OpenedPanels[PP.Ui.DropPanel.OpenedPanels.length-1]!=this){this._DomNode.style.zIndex=parseInt(PP.Ui.DropPanel.OpenedPanels[PP.Ui.DropPanel.OpenedPanels.length-1]._DomNode.style.zIndex);var u=0,i=null,f=-1;for(r=0;r<PP.Ui.DropPanel.OpenedPanels.length;r++)i=PP.Ui.DropPanel.OpenedPanels[r],i==this?(u=-1,f=r):(i._DomNode.style.zIndex=parseInt(i._DomNode.style.zIndex)+u,i._Frame&&(i._Frame.style.zIndex=parseInt(i._DomNode.style.zIndex)-1));PP.Ui.DropPanel.OpenedPanels.splice(f,1),PP.Ui.DropPanel.OpenedPanels.push(this)}return this.MouseDown.fire(n,t)}},windowP._getWindowContentDomNodeMarginsAndBordersHeight=function(){return this._checkValue(parseInt(this.getCssStyle(this._WindowContentDomNode,"margin-top")))+this._checkValue(parseInt(this.getCssStyle(this._WindowContentDomNode,"margin-bottom")))+this._checkValue(parseInt(this.getCssStyle(this._WindowContentDomNode,"border-top-width")))+this._checkValue(parseInt(this.getCssStyle(this._WindowContentDomNode,"border-bottom-width")))},windowP._getWindowPosition=function(n,t){var i=0,r=0,u;return this._ParentNode?(i=n>-1?n:this._ParentNode.offsetWidth/2+this._ParentNode.offsetLeft-this.getWidth()/2,r=t>-1?t:this._ParentNode.offsetHeight/2+this._ParentNode.offsetTop-this.getHeight()/2):(i=n>-1?n:window.innerWidth/2+this._ParentNode.offsetLeft-this.getWidth()/2,r=t>-1?t:window.innerHeight/2+this._ParentNode.offsetTop-this.getHeight()/2),u={top:r,left:i}},windowP._updateResizeTriangle=function(){this._IsResizable?this._ResizeTriangle.setAttribute("ResizeWay",this._IsRTL?"BL":"BR"):(this._ResizeTriangle.removeAttribute("ResizeWay","BL"),this._ResizeTriangle.removeAttribute("ResizeWay","BR")),this._updateResizerClass(this._ResizeTriangle,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeRight),this._oldResizerBL&&(this._IsRTL?this._updateResizerClass(this._oldResizerBL,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeRight):this._updateResizerClass(this._oldResizerBL,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeLeft)),this._oldResizerBR&&(this._IsRTL?this._updateResizerClass(this._oldResizerBR,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeLeft):this._updateResizerClass(this._oldResizerBR,this._EnableResize&&this._EnableResizeBottom&&this._EnableResizeRight))},windowP.getContentHeight=function(){return this._WindowContentDomNode.offsetHeight},windowP.getContentWidth=function(){return this._WindowContentDomNode.offsetWidth},windowP.setHeight=function(n,t){t=typeof t=="undefined"?!0:t==!0,n=this._checkValue(n),this._WindowContentDomNode&&(this._DragCellHeight||(this._DragCellHeight=this._DragCell.offsetHeight),this._WindowContentDomNode.style.height=this._checkValue(n-this._HeightDifference-this._DragCellHeight-this._getWindowContentDomNodeMarginsAndBordersHeight())+"px"),PP.Ui.Window.base.setHeight.apply(this,arguments)},windowP.setCaption=function(n,t){(n!=this._Caption||t)&&(this._Caption=n,this._DragCell.lastChild.innerHTML=n)},windowP.getCaption=function(){return this._Caption},windowP.setContent=function(n){if(n&&n!=this._Content)return this._setContentToNode(n,this._WindowContentDomNode)},windowP.getCaptionIcon=function(){return this._CaptionIcon},windowP.setCaptionIcon=function(n,t){(n!=this._CaptionIcon||t)&&(this._CaptionIcon=n,this._DragCell.firstChild.style.backgroundImage="url("+n+")",this._DragCell.firstChild.style.backgroundRepeat="no-repeat")},windowP.getCloseButton=function(){return this._CloseButton},windowP.getExpandButton=function(){return this._ExpandButton},windowP.setIsRTL=function(){PP.Ui.Window.base.setIsRTL.apply(this,arguments),this._ContentDomNode.dir=this._IsRTL?"rtl":"ltr",this._updateResizeTriangle()},windowP.setEnabled=function(n,t){(n!=this.getEnabled()||t)&&(PP.Ui.Window.base.setEnabled.call(this,n,t),this._ExpandButton.setEnabled(n,t),this._CloseButton.setEnabled(n,t))},windowP.setEnableMove=function(n){n!=this._EnableMove&&(this._EnableMove=n,this._EnableMove&&!this._IsExpanded?this._addEvent(this._DragCell,"mousedown",this._onMouseDownDragCell):this._removeEvent(this._DragCell,"mousedown",this._onMouseDownDragCell))},windowP.getEnableMove=function(){return this._EnableMove},windowP.setEnableResize=function(n){PP.Ui.Window.base.setEnableResize.apply(this,arguments),this._ResizeTriangle&&(n?PP.removeClass(this._ResizeTriangle,"PPHide"):PP.addClass(this._ResizeTriangle,"PPHide"))},windowP.show=function(n,t,i,r){if(i=typeof i=="undefined"?!0:i==!0,!this._DroppedDown){var u=this._getWindowPosition(n,t),f=u.top,e=u.left;this._parentWindow=r,this.removeClass("PPDialogWindow"),this._oldResizerBL&&(this._ResizerBL=this._oldResizerBL,this._oldResizerBL=null),this._oldResizerBR&&(this._ResizerBR=this._oldResizerBR,this._oldResizerBR=null),this._updateResizeTriangle(),PP.Ui.Window.base.show.call(this,e,f,i),this._CloseOnFrameMouseDown||(this._DomNode.style.zIndex=this._getNextZIndex(),PP.Ui.DropPanel.OpenedPanels.push(this)),this._positionTop=f,this._positionLeft=e,PP.Ui.Window.FosusWindow=this,this._DragCell&&this._addEvent(this._DragCell,"dblclick",this._onClickExpandButton)}},windowP.showDialog=function(n,t,i,r){if(i=typeof i=="undefined"?!1:i==!0,!this._DroppedDown){var u=this._getWindowPosition(n,t),f=u.top,e=u.left;this._parentWindow=r,this.addClass("PPDialogWindow"),this._ExpandButton.hide(),this._CloseOnFrameMouseDown=!1,this._IsRTL?this._ResizerBL!==this._ResizeTriangle&&(this._oldResizerBL=this._ResizerBL,this._ResizerBL=this._ResizeTriangle,this._HeightDifference=-1):this._ResizerBR!==this._ResizeTriangle&&(this._oldResizerBR=this._ResizerBR,this._ResizerBR=this._ResizeTriangle,this._HeightDifference=-1),this._updateResizeTriangle(),PP.Ui.Window.base.show.call(this,e,f,i),this._CloseOnFrameMouseDown||(this._DomNode.style.zIndex=this._getNextZIndex(),PP.Ui.DropPanel.OpenedPanels.push(this)),this._positionTop=f,this._positionLeft=e,PP.Ui.Window.FosusWindow=this,this._DragCell&&this._removeEvent(this._DragCell,"dblclick",this._onClickExpandButton)}},windowP.expand=function(){var r={},n,t,i;(this.Expanding.fire(this,r),r.Cancel)||(n=PP.calculateOffset(this._ParentNode),this._IsExpanded?(this._IsExpanded=!1,this.setPosition(this._positionLeft,this._positionTop),this.setPosition(this._positionLeft,this._positionTop),this.setSize(this._oldWindowWidth,this._oldWindowHeight),this.setEnableResize(this._oldEnableResize),this.setMaxDropDownHeight(this._oldMaxDropDownHeight),this.setMaxDropDownWidth(this._oldMaxDropDownWidth),this._EnableMove&&this._addEvent(this._DragCell,"mousedown",this._onMouseDownDragCell),this._ExpandButton.removeClass("Expanded")):(this._IsExpanded=!0,t=this._ParentNode.offsetHeight,i=this._ParentNode.offsetWidth,this._oldWindowWidth=this._oldWindowWidth==0?this.getWidth():this._oldWindowWidth,this._oldWindowHeight=this._oldWindowHeight==0?this.getHeight():this._oldWindowHeight,this._oldEnableResize=this._EnableResize,this.setEnableResize(!1),this._oldMaxDropDownHeight=this._MaxDropDownHeight,this._oldMaxDropDownWidth=this._MaxDropDownWidth,this.setMaxDropDownHeight(t),this.setMaxDropDownWidth(i),this.setPosition(n.X,n.Y),this.setSize(i,t),this._EnableMove&&this._removeEvent(this._DragCell,"mousedown",this._onMouseDownDragCell),this._ExpandButton.addClass("Expanded")),this.Expanded.fire(this,{}))},windowP=null,(PP.Ui.DialogButtons=function(){PP.Ui.DialogButtons.Ok="Ok",PP.Ui.DialogButtons.Cancel="Cancel",PP.initEnum(PP.Ui.DialogButtons,"PP.Ui.DialogButtons")})(),PP.Ui.Dialog=function(n){n=n||{},n.MinDropDownWidth||(n.MinDropDownWidth=100),n.MinDropDownHeight||(n.MinDropDownHeight=100),n.MaxDropDownHeight||(n.MaxDropDownHeight=1e3),n.MaxDropDownWidth||(n.MaxDropDownWidth=1e3),this._ButtonsHeight=21,this._ButtonsWidth=80,this._FocusToDefaultButton=!0,this._defineEvents(["OkButtonClicked","CancelButtonClicked"]),PP.Ui.Dialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.Dialog,PP.Ui.Window,"Dialog"),dialogP=PP.Ui.Dialog.prototype,dialogP._render=function(){var n=PP.htmlToDOM("<table cellpadding='0' cellspacing='0' class='PPDialog'><tbody><tr><td class='PPDialogContent'></td></tr><tr><td class='PPDialogButtons'></td></tr></tbody></table>");this._DialogContentDomNode=PP.querySelector(n,".PPDialogContent"),this._DialogButtonsDomNode=PP.querySelector(n,".PPDialogButtons"),this._OkButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"okButton",ParentNode:this._DialogButtonsDomNode,TabIndex:0,Click:PP.Delegate(this._onOkButtonClick,this)}),this._CancelButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"cancelButton",ParentNode:this._DialogButtonsDomNode,TabIndex:0,Click:PP.Delegate(this._onCancelButtonClick,this)}),this._DefaultButton=this._OkButton,this._tmpContent=this._Content,this._Content=null,PP.Ui.Dialog.base._render.call(this),this.setEnableResize(!1),this._tmpContent&&this.setContent(this._tmpContent),this._WindowContentDomNode.appendChild(n)},dialogP._onCancelButtonClick=function(){this.CancelButtonClicked.fire(this,{}),this.close()},dialogP._onOkButtonClick=function(){this.OkButtonClicked.fire(this,{}),this.close()},dialogP._onKeyDown=function(n,t){t.Event.keyCode===PP.Key.Enter&&this._DefaultButton&&this._DefaultButton.getEnabled()&&this._DefaultButton.Click.fire(this),PP.Ui.Dialog.base._onKeyDown.apply(this,arguments)},dialogP.getOkButton=function(){return this._OkButton},dialogP.getCancelButton=function(){return this._CancelButton},dialogP.setDefaultButton=function(n){if(!n)throw PP.ArgumentException("There Incorrect default button");this._DefaultButton=n},dialogP.getDefaultButton=function(){return this._DefaultButton},dialogP.setContent=function(n){if(n&&n!=this._Content)return this._setContentToNode(n,this._DialogContentDomNode)},dialogP.getDialogResult=function(){return this._DialogResult},dialogP.setIsRTL=function(n){return PP.Ui.Dialog.base.setIsRTL.call(this,n),this._OkButton&&this._OkButton.setIsRTL(n),this._CancelButton&&this._CancelButton.setIsRTL(n),this},dialogP.close=function(){this._oldWindowWidth=this._oldWindowWidth==0?this.getWidth():this._oldWindowWidth,this._oldWindowHeight=this._oldWindowHeight==0?this.getHeight():this._oldWindowHeight,this.hide()},dialogP.showDialog=function(n,t,i){return this.show(n,t,i)},dialogP.show=function(n,t,i){PP.Ui.Dialog.base.showDialog.call(this,n,t,i),this._FocusToDefaultButton&&PP.setTimeout(this._setFocusToButton,100,this._DefaultButton)},dialogP._setFocusToButton=function(n){n&&n.setFocus()},dialogP=null,PP.Color=function(n,t,i){if(this._R=0,this._G=0,this._B=0,this._H=0,this._S=0,this._V=0,this._A=255,typeof n=="string"){var r=PP.Color.getColor(n);if(!r)throw new Error("ArgumentException");this.initByColor(r)}else typeof n=="number"&&typeof t=="number"&&typeof i=="number"&&n>=0&&n<=255&&t>=0&&t<=255&&i>=0&&i<=255&&(this._R=n,this._G=t,this._B=i,this._recalcHSV())},PP.initClass(PP.Color,PP.Object,"Color"),PP.Color.getColor=function(n){return typeof n!="string"?null:PP.Color.parse(n)||PP.Color.parseARGB(n)||PP.Color.parseBI(n)||PP.Color.parseDecimal(n)||PP.Color.parseName(n)},PP.Color.convert=function(n,t){n instanceof PP.Color||(n=new PP.Color(n));switch(t){case PP.Color.Type.RGB:return n.toString();case PP.Color.Type.PPBI:return"A="+n.getA()+";R="+n.getR()+";G="+n.getG()+";B="+n.getB()+";";case PP.Color.Type.ARGB:return n.toString(!0);case PP.Color.Type.HSV:n._RGBtoHSV({R:n.getR(),G:n.getG(),B:n.getB()});default:throw new Error("NotImplementedException");}},PP.Color.parseBI=function(n){var t,i;if(!n||typeof n!="string")throw new Error("ArgumentException");return n.indexOf(";")==-1||n.indexOf("=")==-1?null:(t=n.split(";"),t.length<4)?null:(i=new PP.Color,i.setA(parseInt(t[0].split("=")[1]),10),i.setR(parseInt(t[1].split("=")[1]),10),i.setG(parseInt(t[2].split("=")[1]),10),i.setB(parseInt(t[3].split("=")[1]),10),i)},PP.Color.parse=function(n){var i,t;if(typeof n!="string")throw new Error("ArgumentException");return(n.charAt(0)=="#"&&(n=n.substr(1)),i=new RegExp("^([0-9]|[a-f]|[A-F]){6}$","ig"),!i.test(n))?null:(t=new PP.Color,t.setR(parseInt(n.substr(0,2),16)),t.setG(parseInt(n.substr(2,2),16)),t.setB(parseInt(n.substr(4,2),16)),t)},PP.Color.parseDecimal=function(n){var t,i,r;if(typeof n!="string")throw new Error("ArgumentException");return n.indexOf("rgb")<0?null:n.indexOf("rgba")>-1?(i=n.match(/rgba\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3}),\s?([\d\.]{1,})\)/),t=new PP.Color,t.setR(parseInt(i[1],10)),t.setG(parseInt(i[2],10)),t.setB(parseInt(i[3],10)),r=parseInt(i[4],10),r<=1&&(r*=255),t.setA(r),t):(i=n.match(/rgb\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/),t=new PP.Color,t.setR(parseInt(i[1],10)),t.setG(parseInt(i[2],10)),t.setB(parseInt(i[3],10)),t)},PP.Color.parseName=function(n){var i=document.createElement("span"),r,u,t,f;if(i.style.cssText="color : "+n+"; position:absolute; visibility : hidden; top : -100px; left:-100px;",document.body.appendChild(i),r=PP.getStyle(i,"color").toLowerCase(),document.body.removeChild(i),PP.Color.Colors[r])return PP.Color.parse(PP.Color.Colors[r]);for(u=new RegExp("\\d+","img"),t=[];(f=u.exec(r))!=null;)t.push(parseInt(f[0]));return new PP.Color(t[0],t[1],t[2])},PP.Color.parseARGB=function(n){var i,t;if(typeof n!="string")throw new Error("ArgumentException");return(n.charAt(0)=="#"&&(n=n.substr(1)),i=new RegExp("^([0-9]|[a-f]|[A-F]){8}$","ig"),!i.test(n))?null:(t=new PP.Color,t.setA(parseInt(n.substr(0,2),16)),t.setR(parseInt(n.substr(2,2),16)),t.setG(parseInt(n.substr(4,2),16)),t.setB(parseInt(n.substr(6,2),16)),t)},ColorP=PP.Color.prototype,ColorP.getSettings=function(n,t,i){return(i=typeof i=="undefined"?!1:i==!0,t)?PP.Color.base.getSettings.apply(this,arguments):this.toString(i)},ColorP.getOpacity=function(){return this._A/255},ColorP.getA=function(){return this._A},ColorP.setA=function(n){if(typeof n!="number"||n<0||n>255)throw new Error("ArgumentException");return this._A=n,this},ColorP.getR=function(){return this._R},ColorP.setR=function(n){if(typeof n!="number")throw new Error("incorrect type");if(n<0||n>255)throw new Error("incorrect value");return this._R!=n&&(this._R=n,this._recalcHSV()),this},ColorP.getG=function(){return this._G},ColorP.setG=function(n){if(typeof n!="number")throw new Error("incorrect type");if(n<0||n>255)throw new Error("incorrect value");return this._G!=n&&(this._G=n,this._recalcHSV()),this},ColorP.getB=function(){return this._B},ColorP.setB=function(n){if(typeof n!="number")throw new Error("incorrect type");if(n<0||n>255)throw new Error("incorrect value");return this._B!=n&&(this._B=n,this._recalcHSV()),this},ColorP.getH=function(){return this._H},ColorP.setH=function(n){if(typeof n!="number")throw new Error("incorrect type");if(n<0||n>360)throw new Error("incorrect value");return this._H!=n&&(this._H=n,this._recalcRGB()),this},ColorP.getS=function(){return this._S},ColorP.setS=function(n){if(typeof n!="number")throw new Error("incorrect type");if(n<0||n>100)throw new Error("incorrect value");return this._S!=n&&(this._S=n,this._recalcRGB()),this},ColorP.getV=function(){return this._V},ColorP.setV=function(n){if(typeof n!="number")throw new Error("incorrect type");if(n<0||n>100)throw new Error("incorrect value");return this._V!=n&&(this._V=n,this._recalcRGB()),this},ColorP.toString=function(n){var t=this.getR().toString(16).toUpperCase(),i=this.getG().toString(16).toUpperCase(),r=this.getB().toString(16).toUpperCase(),u;return t.length==1&&(t="0"+t),i.length==1&&(i="0"+i),r.length==1&&(r="0"+r),n?(u=this.getA().toString(16).toUpperCase(),u.length==1&&(u="0"+u),"#"+u+t+i+r):"#"+t+i+r},ColorP.toDecimalString=function(n){var i=PP.IsIE&&PP.IEVer<=8,t=n&&!i?"rgba(":"rgb(";return t+=this._R+", "+this._G+", "+this._B,t+=n&&!i?", "+parseFloat((this._A/255).toFixed(2)):"",t+=")"},ColorP.brighten=function(n){var t=[this._R,this._G,this._B],i;if(isFinite(n)&&n!==0)for(i=0;i<3;i++)t[i]+=parseInt(n*255),t[i]<0&&(t[i]=0),t[i]>255&&(t[i]=255);return this.setR(t[0]),this.setG(t[1]),this.setB(t[2]),this},ColorP._RGBtoHSV=function(n){if(typeof n.R!="number"||typeof n.B!="number"||typeof n.B!="number"||n.R<0||n.R>255||n.G<0||n.G>255||n.B<0||n.B>255)throw new Error("incorrect object");var f=n.R,r=n.G,u=n.B,i=Math.max(f,r,u),e=Math.min(f,r,u),t=null,o=null,s=null;switch(i){case e:t=0;break;case f:t=60*(r-u)/(i-e),r<u&&(t+=360);break;case r:t=60*(u-f)/(i-e)+120;break;case u:t=60*(f-r)/(i-e)+240}return t=Math.round(t),o=i==0?0:Math.round((1-e/i)*100),s=Math.round(i*100/255),{H:t,S:o,V:s}},ColorP._HSVtoRGB=function(n){if(typeof n.H!="number"||typeof n.S!="number"||typeof n.V!="number"||n.H<0||n.H>360||n.S<0||n.S>100||n.V<0||n.V>100)throw new Error("incorrect object");var e=n.H==360?0:n.H,o=n.S/100,t=n.V/100,l=Math.floor(e/60)%6,c=e/60-Math.floor(e/60),f=t*(1-o),s=t*(1-c*o),h=t*(1-(1-c)*o),i=null,r=null,u=null;switch(l){case 0:i=t,r=h,u=f;break;case 1:i=s,r=t,u=f;break;case 2:i=f,r=t,u=h;break;case 3:i=f,r=s,u=t;break;case 4:i=h,r=f,u=t;break;case 5:i=t,r=f,u=s}return i=Math.round(i*255),r=Math.round(r*255),u=Math.round(u*255),{R:i,G:r,B:u}},ColorP._recalcHSV=function(){var n=this._RGBtoHSV({R:this._R,G:this._G,B:this._B});this._H=n.H,this._S=n.S,this._V=n.V},ColorP._recalcRGB=function(){var n=this._HSVtoRGB({H:this._H,S:this._S,V:this._V});this._R=n.R,this._G=n.G,this._B=n.B},ColorP.clone=function(){var n=new PP.Color;return n._A=this._A,n._H=this._H,n._S=this._S,n._V=this._V,n._R=this._R,n._G=this._G,n._B=this._B,n},ColorP.initByColor=function(n){n instanceof PP.Color&&n&&(this._A=n.getA(),this._H=n.getH(),this._S=n.getS(),this._V=n.getV(),this._R=n.getR(),this._G=n.getG(),this._B=n.getB())},ColorP.isEqual=function(n){if(!(n instanceof PP.Color))throw new Error("ArgumentException");return n&&this._R==n.getR()&&this._G==n.getG()&&this._B==n.getB()},ColorP=null,(PP.Color.Type=function(){var n=PP.Color.Type;n.HSV="HSV",n.RGB="RGB",n.ARGB="ARGB",n.PPBI="PPBI",PP.initEnum(n,"PP.Color.Type")})(),PP.Color.Colors={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},PP.Ui.ColorCombo=function(n){var t=n&&n.DropPanel?n.DropPanel:{};t.UseScrollBox=!1,this._DropPanel=new PP.Ui.DropPanel(t),this._Color=this._Value=new PP.Color("#000000"),this._Mode=PP.Ui.ColorPanel.Mode.Palette,this._SpectrumMode=PP.Ui.ColorPanel.SpectrumMode.RGB,this._PresentedColors=null,this._defineEvents(["ColorChanged","ColorChange"]),PP.Ui.ColorCombo.base.constructor.apply(this,arguments),this._DropClass="PPCCDrop",this._DropPanel.addClass(this._DropClass),this._cssPressed="PPCComboFacePressed",this._bg=null,this._cssBg="Bg",this._arrow=null,this._cssArrow="Arrow",this._cssArrowD="ArrowD",this._cssArrowL="ArrowL",this._render(),this._DropPanel.Closed.add(this._onDropPanelClosed,this)},PP.initClass(PP.Ui.ColorCombo,PP.Ui.Control,"ColorCombo"),CComboP=PP.Ui.ColorCombo.prototype,CComboP._render=function(){this._newColor=this._Color.clone(),this._DropPanel.setEnableResize(!1),this._DropPanel.setMinDropDownHeight(0),this._DropPanel.setMinDropDownWidth(0),this._DropPanel.setMaxDropDownHeight(1e4),this._DropPanel.setMaxDropDownWidth(1e4),this._DomNode||(this._initFromHTML("<div class='PPCComboFace'></div>"),this._bg=PP.createElement(this._DomNode,this._cssBg),this._arrow=PP.createElement(this._bg),this._setBackgroundColor(this._Color)),PP.Ui.ColorCombo.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},CComboP._onMouseDown=function(){var i,o;if(!this._Enabled)return!1;PP.Ui.ColorCombo._GlobalColorPanel&&PP.Ui.ColorCombo._GlobalColorPanel.isLive()?(PP.Ui.ColorCombo._GlobalColorPanel._Collection.indexOf(this)===-1&&PP.Ui.ColorCombo._GlobalColorPanel._Collection.push(this),PP.Ui.ColorCombo._GlobalColorPanel.PaletteSelected.add(this._onPaletteSelected,this),PP.Ui.ColorCombo._GlobalColorPanel.ColorChange.add(this._onColorChange,this)):(PP.Ui.ColorCombo._GlobalColorPanel=new PP.Ui.ColorPanel,PP.Ui.ColorCombo._GlobalColorPanel._Collection=[],PP.Ui.ColorCombo._GlobalColorPanel._Collection.push(this),PP.Ui.ColorCombo._GlobalColorPanel.PaletteSelected.add(this._onPaletteSelected,this),PP.Ui.ColorCombo._GlobalColorPanel.ColorChange.add(this._onColorChange,this)),i=PP.calculateOffset(this._DomNode),o=parseInt(PP.getStyle(this._DomNode,"height"),10)+parseInt(PP.getStyle(this._DomNode,"paddingTop"),10)+parseInt(PP.getStyle(this._DomNode,"paddingTop"),10),this._DropPanel.setContent(PP.Ui.ColorCombo._GlobalColorPanel),this._setSettingsToPanel(),this._DropPanel.show(0,0);var r=this._DropPanel.getDomNode().offsetHeight,u=this._DropPanel.getDomNode().offsetWidth,h=document.documentElement.clientHeight,f=document.documentElement.clientWidth,s=0,e=0;e=i.Y+o+r>h?i.Y-r>0?i.Y-r:h-r:i.Y+o,i.X+u>f?s=f-u:(f<u||i.X+u<=f)&&(s=i.X),this._DropPanel.setCoords(s,e),this._setPressed(!0),PP.Ui.ColorCombo._GlobalColorPanel.updateSize()},CComboP._onColorChange=function(n,t){PP.Ui.ColorCombo._GlobalColorPanel._Context===this&&(this._setBackgroundColor(t.NewColor),this.ColorChange.fire(this,t))},CComboP._onPaletteSelected=function(){PP.Ui.ColorCombo._GlobalColorPanel._Context===this&&(this._DropPanel.hide(),this._setPressed(!1))},CComboP._onDropPanelClosed=function(){this._setPressed(!1);var n=new PP.Ui.ColorPanelArgs;n.OldColor=this._Color.clone(),n.NewColor=PP.Ui.ColorCombo._GlobalColorPanel.getColor().clone(),this._DropPanel.setContent(null),this._getSettingsFromPanel(),n.NewColor.isEqual(n.OldColor)||(PP.Ui.ColorCombo._GlobalColorPanel.updateUsedColors(n.NewColor),this._raiseColorChanged(n))},CComboP._raiseColorChanged=function(n){this.ColorChanged.fire(this,n)},CComboP._setPressed=function(n){n==!0?PP.addClass(this._DomNode,this._cssPressed):PP.removeClass(this._DomNode,this._cssPressed)},CComboP._setSettingsToPanel=function(){PP.Ui.ColorCombo._GlobalColorPanel._Context=this,PP.Ui.ColorCombo._GlobalColorPanel.setPresentedColors(this._PresentedColors),PP.Ui.ColorCombo._GlobalColorPanel.setColor(this._Color.clone()),PP.Ui.ColorCombo._GlobalColorPanel.setMode(this._Mode),PP.Ui.ColorCombo._GlobalColorPanel.setSpectrumMode(this._SpectrumMode),PP.Ui.ColorCombo._GlobalColorPanel.setIsRTL(this._IsRTL)},CComboP._getSettingsFromPanel=function(){PP.Ui.ColorCombo._GlobalColorPanel._Context=null,this._PresentedColors=PP.Ui.ColorCombo._GlobalColorPanel.getPresentedColors(),this._Color=PP.Ui.ColorCombo._GlobalColorPanel.getColor().clone(),this._Mode=PP.Ui.ColorCombo._GlobalColorPanel.getMode(),this._SpectrumMode=PP.Ui.ColorCombo._GlobalColorPanel.getSpectrumMode()},CComboP._setBackgroundColor=function(n){if(n!=null&&!(n instanceof PP.Color))throw new Error("incorrect type of color");this._bg&&(this._bg.style.backgroundColor=this._Enabled?n.toString():""),this._setArrowCss(n)},CComboP._setArrowCss=function(n){var t,i,r;this._arrow&&(t="",n==null?t=this._cssArrowL:(typeof n=="string"?i=new PP.Color(n):n instanceof PP.Color&&(i=n),r=.299*i.getR()+.587*i.getG()+.114*i.getB(),t=r<180?this._cssArrowL:this._cssArrowD),this._arrow.className=[this._cssArrow,t].join(" "))},CComboP.setEnabled=function(n,t){n=n==!0,PP.Ui.ColorCombo.base.setEnabled.call(this,n,t),n?this._setBackgroundColor(this._Color):this._bg.style.backgroundColor="",this._DropPanel.getDroppedDown()&&this._DropPanel.hide()},CComboP.getPresentedColors=function(){return this._PresentedColors},CComboP.setPresentedColors=function(n){this._PresentedColors=n,PP.Ui.ColorCombo._GlobalColorPanel._Context==this&&PP.Ui.ColorCombo._GlobalColorPanel.setPresentedColors(this._PresentedColors)},CComboP.setWidth=function(){},CComboP.setHeight=function(){},CComboP.getDropPanel=function(){return this._DropPanel},CComboP.getColor=function(){return this._Color.clone()},CComboP.setColor=function(n,t){var r,i;if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined"||n==null)n=new PP.Color;else if(typeof n=="string")n=PP.Color.getColor(n);else if(!(n instanceof PP.Color))throw new Error("incorrect type of Color");return this._Color.isEqual(n)||(r=n.clone(),t?(i=new PP.Ui.ColorPanelArgs,i.OldColor=this._Color.clone(),i.NewColor=n.clone(),this.ColorChange.fire(this,i),i.Cancel||(this._setBackgroundColor(r),this._DropPanel.getDroppedDown()&&PP.Ui.ColorCombo._GlobalColorPanel.setColor(n.clone()),this._Color=n.clone()),this._raiseColorChanged(i)):(this._setBackgroundColor(r),this._DropPanel.getDroppedDown()&&PP.Ui.ColorCombo._GlobalColorPanel.setColor(n.clone()),this._Color=n.clone())),this},CComboP.getValue=function(){return this.getColor()},CComboP.setValue=function(n,t){return this.setColor(n,t)},CComboP.setIsRTL=function(n){PP.Ui.ColorCombo.base.setIsRTL.apply(this,arguments),PP.Ui.ColorCombo._GlobalColorPanel&&PP.Ui.ColorCombo._GlobalColorPanel.isLive()&&PP.Ui.ColorCombo._GlobalColorPanel._Context==this&&PP.Ui.ColorCombo._GlobalColorPanel.setIsRTL(n)},CComboP.showDropPanel=function(){this._onMouseDown()},CComboP.dispose=function(){if(this.isLive()){if(this._DropPanel.getDroppedDown()&&this._DropPanel.hide(),PP.Ui.ColorCombo._GlobalColorPanel&&PP.Ui.ColorCombo._GlobalColorPanel.isLive()){PP.Ui.ColorCombo._GlobalColorPanel._Context=null;var n=PP.Ui.ColorCombo._GlobalColorPanel._Collection.indexOf(this);n!==-1&&PP.Ui.ColorCombo._GlobalColorPanel._Collection.splice(n,1),PP.Ui.ColorCombo._GlobalColorPanel._Collection.length===0&&PP.Ui.ColorCombo._GlobalColorPanel.dispose()}PP.Ui.ColorCombo.base.dispose.call(this)}},CComboP=null,PP.Ui.ComboBox=function(){this._AutoFind=!0,this._MinAutoFindSymbolsCount=3,this._ListBox=null,PP.Ui.ComboBox.base.constructor.apply(this,arguments),PP.cultureChanged.add(this._onCultureChanged,this),this._DropPanel.setUseScrollBox(!1),this._DropPanel._ContentAutoFit=!0,this._DropPanel.Opened.add(this._onDropPanelOpened,this)},PP.initClass(PP.Ui.ComboBox,PP.Ui.Combo,"ComboBox"),comboBoxP=PP.Ui.ComboBox.prototype,comboBoxP._render=function(){if(this._ListBox instanceof PP.Ui.ListBox)this._ListBox.ItemSelected.add(this._onItemSelected,this),this._ListBox.KeyDown.add(this._onListBoxKeyDown,this),this._ListBox.Click.add(this._onListBoxClick,this),this._DropPanel.setContent(this._ListBox),this._ListBox.getSelectedItem()&&PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().toString());else{this._ListBox=this._ListBox||{};var n=this._ListBox.ItemSelected;this._ListBox.ItemSelected=PP.Delegate(this._onItemSelected,this),n&&(this._ListBox.ItemSelected.add(n),n=null),n=this._ListBox.ItemDeselected,this._ListBox.ItemDeselected=PP.Delegate(this._onItemDeselected,this),n&&(this._ListBox.ItemDeselected.add(n),n=null),n=this._ListBox.KeyDown,this._ListBox.KeyDown=PP.Delegate(this._onListBoxKeyDown,this),n&&(this._ListBox.KeyDown.add(n),n=null),n=this._ListBox.Click,this._ListBox.Click=PP.Delegate(this._onListBoxClick,this),n&&(this._ListBox.Click.add(n),n=null),this._initContentOnJSON()}PP.Ui.ComboBox.base._render.apply(this,arguments),this._Value!==null&&this.setValue(this._Value,!1,!0)},comboBoxP._onDropPanelOpened=function(){this._ListBox.updateSize(),this._ListBox.getIsScrollToSelected()&&this._ListBox.scrollToSelected()},comboBoxP._onDropPanelClosed=function(){PP.Ui.ComboBox.base._onDropPanelClosed.apply(this,arguments),this._doNotCloseDropPanel=!1,this._AutoFind&&this.filterByText("")},comboBoxP._onListBoxClick=function(){this._ListBox.getMultiSelect()||this._DropPanel.hide()},comboBoxP._getSelectedIndexOnJSON=function(){var i=this._ListBox.Items,t=-1,r,n;if(i){for(r=i.length,n=0;n<r;n++)i[n].Selected&&(t=n);if(t>-1)return t;if(this._ListBox.SelectedIndex>-1)return this._ListBox.SelectedIndex}return t},comboBoxP._initContentOnJSON=function(){var t=this._ListBox.Items,n,i;t&&(n=this._getSelectedIndexOnJSON(),n>-1&&(i="",t[n].ResourceKey?i=PP.resourceManager.getString(t[n].ResourceKey).Content:t[n].Content&&(i=t[n].Content),this._Content=i))},comboBoxP._onCultureChanged=function(){this._ListBox instanceof PP.Ui.ListBox?this._ListBox.getSelectedItem()&&PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().toString()):this._initContentOnJSON(),PP.Ui.ComboBox.base._onCultureChanged.apply(this,arguments)},comboBoxP._onItemSelected=function(){if(this._ListBox.getMultiSelect()){var i=this._ListBox.getSelectedItems().length;i>1?PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelected")+" "+i):i===1?PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().getContent()):PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelectedNone"))}else PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().getContent());this._ListBox.getMultiSelect()||this._doNotCloseDropPanel||this._DropPanel.hide()},comboBoxP._onItemDeselected=function(){var i=this._ListBox.getSelectedItems().length;i>1?PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelected")+" "+i):i===1?PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().getContent()):PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelectedNone")),this._ListBox.getMultiSelect()||this._doNotCloseDropPanel||this._DropPanel.hide()},comboBoxP._onListBoxKeyDown=function(n,t){if(t.Event.keyCode==PP.Key.Enter)if(this._ListBox.getMultiSelect()||(this._DropPanel.hide(),this.setFocus()),this._ListBox.getMultiSelect()){var i=this._ListBox.getSelectedItems().length;i>1?PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelected")+" "+i):i===1?PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().getContent()):PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelectedNone"))}else PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().getContent())},comboBoxP._mouseDownTimeout=function(n){var t=n.Self,r,i;t.isLive()&&(r=n.KeyCode,i=t.getContent(),t._AutoFind&&(i&&i.length>=t._MinAutoFindSymbolsCount?t.filterByText(i):t.filterByText("")),t._OpenOnKeyDown&&!t._DropPanel.getDroppedDown()?t.showDropPanel():r==PP.Key.Down||r==PP.Key.Up?(t._ListBox.getEnabled()&&t._ListBox.setFocus(),t._doNotCloseDropPanel=!0):r==PP.Key.Enter&&(t._DropPanel.hide(),t.setContent(i)))},comboBoxP._onKeyDown=function(n,t){PP.setTimeout(this._mouseDownTimeout,0,{Self:this,KeyCode:t.Event.keyCode}),PP.Ui.ComboBox.base._onKeyDown.apply(this,arguments)},comboBoxP.getListBox=function(){return this._ListBox instanceof PP.Ui.ListBox?this._ListBox:(this._ListBox=new PP.Ui.ListBox(this._ListBox),this._DropPanel.setContent(this._ListBox),this._ListBox)},comboBoxP.getItems=function(){return this.getListBox().getItems()},comboBoxP.setAutoFind=function(n){return n!=this._AutoFind&&(this._AutoFind=n),this._AutoFind||this.filterByText(""),this},comboBoxP.getAutoFind=function(){return this._AutoFind},comboBoxP.setIsRTL=function(){PP.Ui.ComboBox.base.setIsRTL.apply(this,arguments),this._ListBox instanceof PP.Ui.ListBox?this._ListBox.setIsRTL(this._IsRTL):this._ListBox.IsRTL=this._IsRTL},comboBoxP.getSelectedItem=function(){return this.getListBox().getSelectedItem()},comboBoxP.setSelectedItem=function(n,t){this.getListBox().setSelectedItem(n,t),PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem()?this._ListBox.getSelectedItem().toString():"")},comboBoxP.getSelectedIndex=function(){return this._ListBox instanceof PP.Ui.ListBox?this._ListBox.getSelectedIndex():this._getSelectedIndexOnJSON()},comboBoxP.setSelectedIndex=function(n,t,i){return this.getListBox().setSelectedIndex(n,t,i),PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem()?this._ListBox.getSelectedItem().toString():""),this},comboBoxP.getValue=function(){var n,t;return this._ListBox instanceof PP.Ui.ListBox?this._ListBox.getValue():(n=this._ListBox.Items,n&&(t=this._getSelectedIndexOnJSON(),t>-1))?n[t].Value:void 0},comboBoxP.setValue=function(n,t,i){this.getListBox().setValue(n,t,i);var r=this._ListBox.getSelectedItems().length;return r>1?PP.Ui.ComboBox.base.setContent.call(this,PP.resourceManager.getString("listBoxSelected")+" "+r,t):r===1?PP.Ui.ComboBox.base.setContent.call(this,this._ListBox.getSelectedItem().getContent(),t):PP.Ui.ComboBox.base.setContent.call(this,n+"",t),this},comboBoxP.getMinAutoFindSymbolsCount=function(){return this._MinAutoFindSymbolsCount},comboBoxP.setMinAutoFindSymbolsCount=function(n){return PP.isNumber(n)&&n!=this._MinAutoFindSymbolsCount&&(this._MinAutoFindSymbolsCount=n),this},comboBoxP.setContent=function(n,t){var r,i;for(PP.Ui.ComboBox.base.setContent.apply(this,arguments),this.getListBox().clearSelection(),r=this._ListBox.getItems(),i=0;i<r.length;i++)n==r[i].getContent()&&this._ListBox.setSelectedIndex(i,t);return this},comboBoxP.clear=function(){this._ListBox&&this._ListBox instanceof PP.Ui.ListBox?(this._ListBox.clear(),this._ListBox.updateSize()):this._ListBox.Items&&(this._ListBox.Items=[]),this.setContent("",!1)},comboBoxP.addItem=function(n){return this.getListBox().addItem(n),this},comboBoxP.filterByText=function(n){this._ListBox instanceof PP.Ui.ListBox&&this._ListBox.filterByText(n)},comboBoxP.showDropPanel=function(){var t,e;if(this._ListBox instanceof PP.Ui.ListBox||(this._ListBox=new PP.Ui.ListBox(this._ListBox),this._DropPanel.setContent(this._ListBox)),PP.Ui.ComboBox.base.showDropPanel.apply(this,arguments),this._DropPanel.getDomNode().style.height===""){this._DropPanel._Height=0;var n=0,u=this._ListBox.getItems(),f=this._DropPanel.getMaxDropDownHeight();for(t=0;t<u.length;t++)n+=u[t].getHeight();if(e=this._ListBox.getDomNode().offsetHeight,n>f?this._ListBox.setHeight(f-15):this._ListBox.setHeight(n),e<n){var i=this._DropPanel.getDomNode().offsetHeight,s=PP.calculateOffset(this._DropPanel.getDomNode()),r=document.documentElement.clientHeight,h=PP.calculateOffset(this._DomNode),o=h.Left;i>r?this._DropPanel.setCoords(o,0):s.Top+i>r&&this._DropPanel.setCoords(o,r-i)}}},comboBoxP=null,PP.Ui.NumComboBox=function(){this._NumberEdit=null,PP.Ui.NumComboBox.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.NumComboBox,PP.Ui.ComboBox,"NumComboBox"),numComboBoxP=PP.Ui.NumComboBox.prototype,numComboBoxP._render=function(){PP.Ui.NumComboBox.base._render.apply(this,arguments),this._EditControl.dispose(),this._MaskEditControl.dispose(),this._EditControl=new PP.Ui.NumberEdit({Content:this._Content,ParentNode:this._ControlDomNode,ShowButtons:!1,AllowSpin:!1,AfterValueChange:PP.Delegate(this._onNumberChanged,this)});var n;n=this._NumberEdit instanceof PP.Ui.Control?this._NumberEdit.getSettings():this._NumberEdit,this._EditControl.setSettings(n),this._MaskEditControl=this._EditControl,this._EnableEdit||(this._EditControl.hide(),PP.show(this._ContentDomNode)),this.setContent(0,!1)},numComboBoxP._onNumberChanged=function(n,t){this.setContent(t.NewValue)},numComboBoxP._onItemSelected=function(n,t){this.setContent(t.ListItem.toString(),!1),this._ListBox.getMultiSelect()||this._doNotCloseDropPanel||this._DropPanel.hide()},numComboBoxP.setContent=function(n,t){var i,u,f,e,r;if(t=typeof t=="undefined"?!0:t==!0,n!=this._Content){if(i=parseInt(n,10),u=!1,isNaN(i))return this;var o=this._EditControl.getGroupSeparator(),s=this._EditControl.getDecimalSeparator(),h=this._EditControl.getFractionCount(),c=PP.getCurrentCulture().validateNumber({value:i},o,s,h);if(!c)return;if(i<this._EditControl.getMinValue()&&(i=this._EditControl.getMinValue()),i>this._EditControl.getMaxValue()&&(i=this._EditControl.getMaxValue()),this._Content=i.toString(),this._ContentDomNode.innerHTML=this._Content,this._EditControl.setContent(this._Content,t),this._ListBox instanceof PP.Ui.Control)this._ListBox.setValue(this._Content,t);else if(this._ListBox.Items){for(f=this._ListBox.Items,e=this._ListBox.Items.length,r=0;r<e;r++)delete f[r].Selected,f[r].Content==this._Content&&(this._ListBox.SelectedIndex=r,u=!0);u||delete this._ListBox.SelectedIndex}t&&this.TextChanged.fire(this,{})}return this},numComboBoxP.setValue=function(n,t){this.setContent(n,t)},numComboBoxP.clear=function(){PP.Ui.NumComboBox.base.clear.apply(this,arguments),this.setContent(0,!1)},numComboBoxP=null,(PP.Ui.ConfirmButtons=function(){PP.Ui.ConfirmButtons.Yes="Yes",PP.Ui.ConfirmButtons.No="No",PP.initEnum(PP.Ui.ConfirmButtons,"PP.Ui.ConfirmButtons")})(),PP.Ui.ConfirmDialog=function(){this._ResourceKey="confirmDialog",this._Width=410,this._Height=171,this._ImagePath="",this._defineEvents(["YesButtonClicked","NoButtonClicked"]),this._ShowCancelButton=!1,PP.Ui.ConfirmDialog.base.constructor.apply(this,arguments),delete this.OkButtonClicked},PP.initClass(PP.Ui.ConfirmDialog,PP.Ui.Dialog,"ConfirmDialog"),confirmDialogP=PP.Ui.ConfirmDialog.prototype,confirmDialogP._render=function(){this._dialogTable=PP.htmlToDOM("<table cellpadding='0' cellspacing='0' class='PPDialog PPConfirmDialog'><tbody><tr><td class='PPDialogContent'></td></tr><tr><td class='PPDialogButtons'></td></tr></tbody></table>"),this._DialogContentDomNode=this._dialogTable.rows[0].cells[0],this._DialogButtonsDomNode=this._dialogTable.rows[1].cells[0],this._ImageDomNode=PP.htmlToDOM("<div class='PPConfirmDialogImg'></div>"),this._ImageDomNode.style.background="url('"+this._ImagePath+"question.png')",this._YesButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"yesButton",ParentNode:this._DialogButtonsDomNode}),this._NoButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"noButton",ParentNode:this._DialogButtonsDomNode}),this._CancelButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"cancelButton",ParentNode:this._DialogButtonsDomNode,Click:PP.Delegate(this._onCancelButtonClick,this)}),this._CancelButton.setIsVisible(this._ShowCancelButton),this._NoButton&&this._NoButton.setTabIndex(0),this._YesButton.Click.add(this._onYesButtonClick,this),this._NoButton.Click.add(this._onNoButtonClick,this),this._tmpContent=this._Content,this._Content=null,PP.Ui.Dialog.base._render.call(this),this._Content=this._tmpContent,this._DialogButtonsDomNodeHeight=this._DialogButtonsDomNode.offsetHeight,this._DialogContentDomNode.style.height=this._checkValue(this.getContentHeight()-this._DialogButtonsDomNodeHeight-this._checkValue(parseInt(this.getCssStyle(this._DialogContentDomNode,"margin-top")))-1)+"px",this.setEnableResize(!1),this._WindowContentDomNode.appendChild(this._ImageDomNode),this._WindowContentDomNode.appendChild(this._dialogTable),this._DefaultButton=this._YesButton},confirmDialogP._onYesButtonClick=function(){this.YesButtonClicked.fire(this,{Confirmed:!0}),this.close()},confirmDialogP._onNoButtonClick=function(){this.NoButtonClicked.fire(this,{Confirmed:!1}),this.close()},confirmDialogP._onCancelButtonClick=function(){this.CancelButtonClicked.fire(this,{}),this.close()},confirmDialogP.getOkButton=function(){throw PP.Exception("Unsupported");},confirmDialogP.getCancelButton=function(){return this._CancelButton},confirmDialogP.getYesButton=function(){return this._YesButton},confirmDialogP.getNoButton=function(){return this._NoButton},confirmDialogP.setImagePath=function(n){this._ImagePath=n,this._ImageDomNode.style.background="url('"+this._ImagePath+"question.png')"},confirmDialogP.getImagePath=function(){return this._ImagePath},confirmDialogP.setEnabled=function(n){return PP.Ui.ConfirmDialog.base.setEnabled.apply(this,arguments),this._YesButton.setEnabled(n),this._NoButton.setEnabled(n),this},confirmDialogP.setContent=function(n){this._setContentToNode(n,this._DialogContentDomNode,"Content",!0)},confirmDialogP.show=function(){PP.Ui.ConfirmDialog.base.show.apply(this,arguments),this._Content&&this.setContent(this._Content),this._DialogButtonsDomNodeHeight||(this._DialogButtonsDomNodeHeight=this._DialogButtonsDomNode.offsetHeight),this._DialogContentDomNode.style.height=this._checkValue(this.getContentHeight()-this._DialogButtonsDomNodeHeight-this._checkValue(parseInt(this.getCssStyle(this._DialogContentDomNode,"margin-top")))-1)+"px"},confirmDialogP.setIsRTL=function(n){return PP.Ui.ConfirmDialog.base.setIsRTL.apply(this,arguments),this._YesButton.setIsRTL(n),this._NoButton.setIsRTL(n),this},confirmDialogP=null,PP.Ui.FileUploadDialog=function(n){n=n||{},n.Width=300,n.Height=120,this._FileUpload=null,this._defineEvents(["Uploading"]),PP.Ui.FileUploadDialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.FileUploadDialog,PP.Ui.Dialog,"FileUploadDialog"),dialogP=PP.Ui.FileUploadDialog.prototype,dialogP.getFileUpload=function(){return this._FileUpload},dialogP._render=function(){PP.Ui.FileUploadDialog.base._render.call(this),this._FileUpload=this._FileUpload||{},this._FileUpload.Class="PPFileUploadDialog",this._FileUpload.Width=258,this._FileUpload.Enabled=this._Enabled,this._FileUpload.IsRTL=this._IsRTL,this._FileUpload=new PP.Ui.FileUpload(this._FileUpload),this._FileUpload.FileInputChanged.add(this._onFileUploadChanged,this),this._FileUpload.FileUploaded.add(this._onFileLoaded,this),this._OkButton.setEnabled(!1),this._OkButton.Click=PP.Delegate(this._onOkClick,this),this.setContent(this._FileUpload)},dialogP._onFileLoaded=function(){this.hide()},dialogP._onOkClick=function(){this.Uploading.fire(this),this._FileUpload.send()},dialogP._onFileUploadChanged=function(){this._OkButton.setEnabled(!0)},dialogP.setIsRTL=function(){return PP.Ui.FileUploadDialog.base.setIsRTL.apply(this,arguments),this._FileUpload&&(this._FileUpload instanceof PP.Ui.FileUpload?this._FileUpload.setIsRTL(this._IsRTL):this._FileUpload.IsRTL=this._IsRTL),this},dialogP.setEnabled=function(){return PP.Ui.FileUploadDialog.base.setEnabled.apply(this,arguments),this._FileUpload&&(this._FileUpload instanceof PP.Ui.FileUpload?this._FileUpload.setEnabled(this._Enabled):this._FileUpload.Enabled=this._Enabled),this},dialogP=null,(PP.Ui.MessageType=function(){var n=PP.Ui.MessageType;n.Error="Error",n.Exclamation="Exclamation",n.Information="Information",n.Custom="Custom"})(),PP.Ui.Message=function(n){n=n||{},n.ResourceKey||(this._ResourceKey="Message"),typeof n.Width=="undefined"&&(this._Width=410),typeof n.Height=="undefined"&&(this._Height=171),this._Title="",this._ImagePath="",this._Type=PP.Ui.MessageType.Custom,this._ImageUrl="",PP.Ui.Message.base.constructor.call(this,n),this.CancelButtonClicked=null},PP.initClass(PP.Ui.Message,PP.Ui.Dialog,"Message"),MesgPro=PP.Ui.Message.prototype,MesgPro._render=function(){var n=this._Content;this._Content=null,this._ScrollBox=new PP.Ui.ScrollBox({}),PP.Ui.Message.base._render.call(this),this._Content=n,PP.addClass(this._DomNode,"Message"),this._ImageDomNode=PP.createElement(this._DialogContentDomNode,"MessageImage"),this._AlertContentNode=PP.createElement(this._DialogContentDomNode,"MessageText"),this._ScrollBox.addToNode(this._AlertContentNode),this._ImageList=new PP.ImageList({Source:this._ImagePath+"MessageIcons.png",IconHeight:32,IconWidth:32}),this._CancelButton.removeFromDOM(),this._CancelButton.dispose()},MesgPro.show=function(){PP.Ui.Message.base.show.apply(this,arguments),this._ScrollBox.setWidth(this._AlertContentNode.offsetWidth),this._ScrollBox.setHeight(this._AlertContentNode.offsetHeight),this._Content&&this.setContent(this._Content),this.setType(this._Type),this._ScrollBox.updateSize()},MesgPro.setContent=function(n){this._ScrollBox.setContent(n)},MesgPro.setType=function(n){n===PP.Ui.MessageType.Error?(this._ImageDomNode.style.backgroundImage="url('"+this._ImageList.getSource()+"')",this._ImageDomNode.style.backgroundPosition=this._ImageList.getIcon(0,0)):n===PP.Ui.MessageType.Exclamation?(this._ImageDomNode.style.backgroundImage="url('"+this._ImageList.getSource()+"')",this._ImageDomNode.style.backgroundPosition=this._ImageList.getIcon(0,1)):n===PP.Ui.MessageType.Information?(this._ImageDomNode.style.backgroundImage="url('"+this._ImageList.getSource()+"')",this._ImageDomNode.style.backgroundPosition=this._ImageList.getIcon(0,2)):n===PP.Ui.MessageType.Custom&&(this._ImageDomNode.style.backgroundImage="url('"+this._ImageUrl+"')",this._ImageDomNode.style.backgroundPosition=""),this._Type=n},MesgPro.getType=function(){return this._Type},MesgPro.setImageUrl=function(n){this._ImageUrl=n,this._Type===PP.Ui.MessageType.Custom&&(this._ImageDomNode.style.backgroundImage="url('"+this._ImageUrl+"')",this._ImageDomNode.style.backgroundPosition="")},MesgPro.getImageUrl=function(){return this._ImageUrl},PP.Ui.Container=function(){this._Items=null,PP.Ui.Container.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.Container,PP.Ui.Control,"Container"),containerP=PP.Ui.Container.prototype,containerP.getItem=function(n){return this._Items[n]},containerP.getItemById=function(n){for(var t=0;t<this._Items.length;t++)if(this._Items[t].getId()==n)return this._Items[t];return null},containerP.getCount=function(){return this._Items.length},containerP.forEachElement=function(n){if(!n)return this;for(var t=0;t<this._Items.length;t++)n(this._Items[t]);return this},containerP.setSettingsToControls=function(n){if(!n)return this;for(var t=0;t<this._Items.length;t++)this._Items[t].setSettings(n);return this},containerP.removeAt=function(n,t){return this._Items[n]&&(t?this._Items[n].removeFromDOM(!0):this._Items[n].dispose(),this._Items.splice(n,1)),this},containerP.remove=function(n,t){this.removeAt(this._Items.indexOf(n),t)},containerP.hideAt=function(n){return this._Items[n].hide(),this},containerP.showAt=function(n){return this._Items[n].show(),this},containerP.getItems=function(){return this._Items},containerP.setEnabled=function(n,t){if(this._Enabled==n&&!t)return!1;var i;if((!this._disabledItems||!n&&this._Enabled)&&(this._disabledItems=[],this._Items))for(i=0;i<this._Items.length;i++)this._Items[i].getEnabled()||this._disabledItems.push(this._Items[i].getId());if(PP.Ui.Container.base.setEnabled.call(this,n,t),this._Items)if(n){for(i=0;i<this._Items.length;i++)this._disabledItems.indexOf(this._Items[i].getId())<0&&this._Items[i].setEnabled(n,t);this._disabledItems=[]}else for(i=0;i<this._Items.length;i++)this._Items[i].setEnabled(n,t);return this},containerP.setIsRTL=function(n){if(PP.Ui.Container.base.setIsRTL.call(this,n),this._Items)for(var t=0;t<this._Items.length;t++)this._Items[t].setIsRTL(n);return this},containerP.clear=function(n){for(var t=0;t<this._Items.length;t++)this._Items[t].isLive()&&(n?this._Items[t].removeFromDOM():this._Items[t].dispose());this._Items=[]},containerP=null,PP.Ui.GridPanel=function(){PP.Ui.GridPanel.base.constructor.apply(this,arguments),this._render()},PP.initClass(PP.Ui.GridPanel,PP.Ui.Container,"GridPanel"),gridPanelP=PP.Ui.GridPanel.prototype,gridPanelP._render=function(){var t,n;if(this._initFromHTML("<div class='PPGridPanelContainer'><table cellspacing='0' cellpadding='0' class='PPGridPanel'><tbody></tbody></table></div>",!0),this._Table=this._DomNode.firstChild,this._Width&&(this._Table.style.width=this._Width+"px"),this._Height&&(this._Table.style.height=this._Height+"px"),Array.isArray(this._Items))for(t=this._Items,this._Items=[],n=0;n<t.length;n++)t[n]&&this.add(t[n]);else this._Items=[];PP.Ui.GridPanel.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode)},gridPanelP._checkTable=function(n,t){for(var i=this._Table,r;!i.rows[n];)i.insertRow(i.rows.length);for(r=i.rows[n];!r.cells[t];)r.insertCell(r.cells.length)},gridPanelP.getTable=function(){return this._Table},gridPanelP.getRowsCount=function(){return this._Table.rows.length},gridPanelP.clear=function(){var i,n,r,t;for(PP.Ui.GridPanel.base.clear.apply(this,arguments),i=this.getRowsCount(),n=i-1;n>-1;n--){for(r=this._Table.rows[n].cells.length,t=r-1;t>-1;t--)this._Table.rows[n].deleteCell(t);this._Table.deleteRow(n)}},gridPanelP.setRowHeight=function(n,t){if(!PP.isNumber(n)||!PP.isNumber(t))throw new Error("Argument Exception");return n>-1&&n<this._Table.rows.length&&(this._Table.rows[n].style.height=t+"px"),this},gridPanelP.setColumnWidth=function(n,t){var r,i;if(!PP.isNumber(n)||!PP.isNumber(t))throw new Error("Argument Exception");if(this._Table.rows.length==0)throw new Error("There are no rows in panel");if(n>=0)for(r=this._Table.rows,i=0;i<r.length;i++)if(n<r[i].cells.length){r[i].cells[n].style.width=t+"px";break}return this},gridPanelP.setRowVisibility=function(n,t){if(!PP.isNumber(n)||!PP.isBoolean(t))throw new Error("Argument Exception");var i;if(n>-1&&n<this._Table.rows.length)if(t){for(i=0;i<this._Items.length;i++)this._Items[i].getTop()==n&&this._Items[i].show();PP.show(this._Table.rows[n],!0)}else{for(i=0;i<this._Items.length;i++)this._Items[i].getTop()==n&&this._Items[i].hide();PP.hide(this._Table.rows[n])}return this},gridPanelP.add=function(n,t,i){if(!n||!(n instanceof PP.Ui.Control)&&!n.PPType)throw new Error("ArgumentException");return n.PPType&&(n=PP.create(n)),t>-1?n.setLeft(t):t=n.getLeft(),i>-1?n.setTop(i):i=n.getTop(),this._Items.push(n),this._checkTable(i,t),n.addToNode(this._Table.rows[i].cells[t]),this},gridPanelP.getItemFromTable=function(n,t){for(var r,i=0;i<this._Items.length;i++)if(r=this._Items[i],r.getTop()==n&&r.getLeft()==t)return r;return null},gridPanelP.removeLastRow=function(n){for(var t=0;t<this._Items.length;t++)this._Items[t].getTop()==this._Table.rows.length-1&&this.removeAt(t,n);return this._Table.deleteRow(this._Table.rows.length-1),this},gridPanelP.dispose=function(){this.isLive()&&(PP.IsIE&&PP.IEVer<9&&(this._DomNode.innerHTML="",PP.Ui.GridPanel.base.clear.apply(this,arguments)),PP.Ui.GridPanel.base.dispose.apply(this,arguments))},gridPanelP=null,PP.Ui.Panel=function(){PP.Ui.Panel.base.constructor.apply(this,arguments),this._render()},PP.initClass(PP.Ui.Panel,PP.Ui.Container,"Panel"),iPanelp=PP.Ui.Panel.prototype,iPanelp._render=function(){var t,n;if(this._initFromHTML("<div class='PPPanel'></div>",!0),Array.isArray(this._Items))for(t=this._Items,this._Items=[],n=0;n<t.length;n++)this.add(t[n]);else this._Items=[];PP.Ui.Panel.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode)},iPanelp.add=function(n){if(!n)throw new Error("ArgumentNullException");if(n.PPType&&(n=PP.create(n)),n instanceof PP.Ui.Control){this._Items.push(n),n.addClass("PPPanelElem");var t;t=n instanceof PP.Ui.ProxyControl?n.getControl()._DomNode:n._DomNode,t.style.top=n.getTop()+"px",t.style.left=n.getLeft()+"px",n.addToNode(this._DomNode)}else typeof n=="string"&&this._DomNode.appendChild(PP.htmlToDOM(n))},iPanelp.setWidth=function(n){var r=this.getWidth(),t,i;for(PP.Ui.Panel.base.setWidth.apply(this,arguments),t=0;t<this._Items.length;t++)i=this._Items[t].getWidth(),this._Items[t].getAnchors()==PP.Ui.AnchorStyles.Right&&this._Items[t].setWidth(i-(r-n));return this},iPanelp=null,PP.Ui.StackPanel=function(){this._IsHorisontal=!1,this._MinControlSize=0,this._IsContentResizable=!1,this._defineEvents(["ItemSizeChanged"]),PP.Ui.StackPanel.base.constructor.apply(this,arguments),this._IsInitialised=!1,this._offsetDropP=11,this._NotSizeable=[],this._render(),this._Width||(this._Width=this._DomNode.offsetWidth,this.setWidth(this._Width)),this._Height||(this._Height=this._DomNode.offsetHeight,this.setHeight(this._Height))},PP.initClass(PP.Ui.StackPanel,PP.Ui.Container,"StackPanel"),iStPanelp=PP.Ui.StackPanel.prototype,iStPanelp._render=function(){var t,n;if(this._initFromHTML("<div class='PPStackPanel'></div>"),this._ScrollBox=new PP.Ui.ScrollBox({ParentNode:this._DomNode}),Array.isArray(this._Items))for(t=this._Items,this._Items=[],n=0;n<t.length;n++)this.add(t[n]);else this._Items=[];PP.Ui.Panel.base._render.apply(this,arguments),this._ParentNode&&(this.addToNode(this._ParentNode),this._ScrollBox.updateSize(),this._IsInitialised=!0)},iStPanelp.addToNode=function(){PP.Ui.StackPanel.base.addToNode.apply(this,arguments),this._IsInitialised=!0,this._recalcProportions(),this.setHeight(this._Height),this.setWidth(this._Width)},iStPanelp._createDropP=function(n){var t=new PP.Ui.DropPanel({Content:n,SizeChanged:PP.Delegate(this._onSizeChanged,this),MinDropDownWidth:100,MinDropDownHeight:100,MaxDropDownHeight:1e4,MaxDropDownWidth:1e4,EnableResizeTop:!1,ContentAutoFit:!0,EnableResizeLeft:!1,EnableResizeRight:this._IsHorisontal,EnableResizeBottom:!this._IsHorisontal,CloseOnFrameMouseDown:!1,ParentNode:this._ScrollBox.getContentNode(),Width:this._Width-this._offsetDropP,Height:this._Height,UseScrollBox:!1,Class:this._IsHorisontal?"PPStackDropPanel PPStackHoriz":"PPStackDropPanel"});return t.addClass("PPStackNode"),this._IsHorisontal||t.addClass("Vert"),delete t._IsSizeChanged,t},iStPanelp._reAddedZeroCtrl=function(n){var t,i;n?(t=this._Items[0],t instanceof PP.Ui.DropPanel||(t.removeClass("PPStackNode"),t.removeClass("Vert"),this._Items[0]=this._createDropP(t),t._SPSize&&(this._Items[0].setTag({Width:t._SPSize.Width,Height:t._SPSize.Height}),delete t._SPSize),this._Items[0].show(0,0,!0))):(t=this._Items[0],t instanceof PP.Ui.DropPanel&&(t.addClass("PPStackNode"),t.addClass("Vert"),i=this._Items[0],this._Items[0]=i.getContent(),i.hide(),i.setContent(null),i.dispose(),this._Items[0].addToNode(this._ScrollBox.getContentNode())))},iStPanelp.add=function(n,t,i,r){if(n instanceof PP.Ui.Control){if(this._Items.indexOf(n)==-1)if(this._IsContentResizable&&this._Items.length!=0){this._Items.length==1&&this._reAddedZeroCtrl(!0);var u=this._getSPofControl(n);u||(n._FullSize=t,u=this._createDropP(n),this._Items.push(u)),i>0&&r>0&&u.setTag({Width:i,Height:r}),u.show(0,0,!0)}else i>0&&r>0&&(n._SPSize={Width:i,Height:r}),this._Items.push(n),n.addClass("PPStackNode"),this._IsHorisontal||n.addClass("Vert"),n.addToNode(this._ScrollBox.getContentNode())}else if(typeof n=="string"||typeof n=="object"){if(this._IsContentResizable)throw PP.NotSupportedException(this);n=new PP.Ui.Label({Content:n}),this._Items.push(n),n.addClass("PPStackNode"),this._IsHorisontal||n.addClass("Vert"),n.addToNode(this._ScrollBox.getContentNode())}return this._recalcProportions(),this},iStPanelp._getSPofControl=function(n){for(var t=0;t<this._Items.length;t++)if(this._Items[t].getContent()===n)return this._Items[t];return null},iStPanelp._onSizeChanged=function(n){n._IsSizeChanged=!0,n.getTag()||this._recalcProportions(),this._updateVisibleScroll(),this.ItemSizeChanged.fire(this,{Item:n.getContent()})},iStPanelp.remove=function(n,t){var i,u,r;return this._IsContentResizable&&(i=this._getSPofControl(n),i&&(i.hide(),i.setContent(null),i.dispose(),n=i)),u=this._Items.indexOf(n),r=this._NotSizeable.indexOf(u),r!=-1&&this._NotSizeable.splice(r,1),PP.Ui.StackPanel.base.remove.call(this,n,t),this._Items.length==1&&this._IsContentResizable&&this._reAddedZeroCtrl(!1),this._recalcProportions(),this._BeginUpdate||this._ScrollBox.updateSize(),this},iStPanelp.clear=function(n){var t,i;for(n=n==undefined?!0:!1,t=0;t<this._Items.length;t++)i=this._Items[t],i instanceof PP.Ui.DropPanel&&n&&(i.hide(),i.setContent(null)),n?this._Items[t].removeFromDOM():this._Items[t].dispose();this._Items=[],this._NotSizeable=[]},iStPanelp.removeAt=function(n){return PP.Ui.StackPanel.base.removeAt.apply(this,arguments),this._NotSizeable.indexOf(n)!=-1&&this._NotSizeable.splice(this._NotSizeable.indexOf(n),1),this._recalcProportions(),this},iStPanelp._updateVisibleScroll=function(n){var i,r,t,u;if(this._IsContentResizable&&this._Items.length>1){if(i=this._IsHorisontal?"Height":"Width",r=this._IsHorisontal?"Width":"Height",n==undefined)for(n=0,t=0;t<this._Items.length;t++)n+=this._Items[t]["get"+r]();for(this._IsOverFlow=n>this["_"+r],u=this._IsOverFlow?this["_"+i]-this._ScrollBox.getVerticalScroll().getWidth():this["_"+i],t=0;t<this._Items.length;t++)this._Items[t]["set"+i](u,!1),this._Items[t].getContent()["set"+i](u-this._offsetDropP),this._Items[t].setEnableResize(!0);this._IsOverFlow||(this._ScrollBox.getContentNode().scrollLeft=0,this._ScrollBox.getContentNode().scrollTop=0),this._ScrollBox.updateSize()}},iStPanelp._recalcPropCR=function(){var e,i,t,n,r,u,o,f,s;if(this._Items.length==1){if(this._Items[0]instanceof PP.Ui.DropPanel)throw PP.ArgumentException(this);this._Items[0].setSize(this._Width,this._Height),delete this._Items[0]._IsSizeChanged,this._ScrollBox.hideScrolls()}else{if(this._ScrollBox.showScrolls(),e=0,this._IsHorisontal){for(u=this._Width,r=this._Items.length,t=0;t<this._Items.length;t++)this._Items[t].getContent()._FullSize&&r--;for(u/=r,o=u,t=0;t<this._Items.length;t++)n=this._Items[t],n.getTag()&&(i=n.getTag(),n._IsSizeChanged=!0,n.setSize(i.Width,i.Height),n.setTag(null)),n._IsSizeChanged?o=u+(u-n.getWidth()):(n.getContent()._FullSize?n.setWidth(this._Width-this._offsetDropP,!1):n.setWidth(o-this._offsetDropP,!1),o=u),n.setHeight(this._Height,!1),e+=n.getWidth()-this._offsetDropP}else{for(f=this._Height,r=this._Items.length,t=0;t<this._Items.length;t++)this._Items[t].getContent()._FullSize&&r--;for(f/=r,s=f,t=0;t<this._Items.length;t++)n=this._Items[t],n.getTag()&&(i=n.getTag(),n._IsSizeChanged=!0,n.setSize(i.Width,i.Height),n.setTag(null)),n._IsSizeChanged?s=f+(f-n.getHeight()):(n.getContent()._FullSize?n.setHeight(this._Height,!1):n.setHeight(s,!1),s=f),n.setWidth(this._Width,!1),e+=n.getHeight()}this._updateVisibleScroll(e)}},iStPanelp._recalcProportions=function(){var t,n,i,r,u,f,e;if(!this._IsInitialised||this._BeginUpdate)return!1;if(this._IsContentResizable)return this._recalcPropCR();if(n=0,this._IsHorisontal){for(f=this._Width,n=0;n<this._Items.length;n++)this._NotSizeable.indexOf(n)!=-1&&(f-=this._Items[n].getDomNode().offsetWidth);for(e=this._Height,t=Math.floor(f/(this._Items.length-this._NotSizeable.length)),t<this._MinControlSize?(t=this._MinControlSize,this._IsOverFlow=!0):this._IsOverFlow=!1,this._IsOverFlow&&(e-=this._ScrollBox.getVerticalScroll().getHeight()),n=0;n<this._Items.length;n++)if(this._NotSizeable.indexOf(n)==-1&&(this._Items[n].setHeight(e,!1),this._Items[n].setWidth(t,!1),this._Items[n].getDomNode()&&this._Items[n].getDomNode().offsetWidth!=t))return this._NotSizeable.push(n),this._recalcProportions(),!1}else{for(r=this._Height,n=0;n<this._Items.length;n++)this._NotSizeable.indexOf(n)!=-1&&(i=this._Items[n].getDomNode(),r-=i.offsetHeight);for(t<this._MinControlSize?(t=this._MinControlSize,this._IsOverFlow=!0):this._IsOverFlow=!1,u=this._Width,this._IsOverFlow&&(u-=this._ScrollBox.getVerticalScroll().getWidth()),t=Math.floor(r/(this._Items.length-this._NotSizeable.length)),n=0;n<this._Items.length;n++)if(this._NotSizeable.indexOf(n)==-1&&(this._Items[n].setWidth(u,!1),this._Items[n].setHeight(t,!1),i=this._Items[n].getDomNode(),i&&i.offsetHeight!=t))return this._NotSizeable.push(n),this._recalcProportions(),!1}this._ScrollBox.getContentNode().scrollLeft=0,this._ScrollBox.getContentNode().scrollTop=0,this._ScrollBox.updateSize()},iStPanelp.updateSize=function(){var n,t,i;if(!this._IsInitialised||this._BeginUpdate)return!1;if(this._IsHorisontal)for(n=0;n<this._Items.length;n++)t=this._Height,this._ScrollBox.getHorizontalScroll().getIsVisible()?this._Items[n].setHeight(t-this._ScrollBox.getHorizontalScroll().getHeight(),!1):this._Items[n].setHeight(t,!1);else for(n=0;n<this._Items.length;n++)i=this._Width,this._ScrollBox.getVerticalScroll().getIsVisible()?this._Items[n].setWidth(i-this._ScrollBox.getVerticalScroll().getWidth(),!1):this._Items[n].setWidth(i,!1);return this._ScrollBox.updateSize(),this},iStPanelp.sendToItems=function(n,t){for(var i=0;i<this._Items.length;i++)typeof this._Items[i][n]=="function"&&this._Items[i][n](t);return this},iStPanelp.setIsHorisontal=function(n){if(this._IsHorisontal==!!n)return this;this._IsHorisontal=!!n;var t;if(this._IsHorisontal)for(PP.removeClass(this._DomNode,"Vert"),t=0;t<this._Items.length;t++)this._Items[t].removeClass("Vert"),this._IsContentResizable&&this._Items.length>1&&(this._Items[t].addClass("PPStackHoriz"),this._Items[t].setEnableResizeRight(!0),this._Items[t].setEnableResizeBottom(!1),delete this._Items[t]._IsSizeChanged);else for(PP.addClass(this._DomNode,"Vert"),t=0;t<this._Items.length;t++)this._Items[t].addClass("Vert"),this._IsContentResizable&&this._Items.length>1&&(this._Items[t].removeClass("PPStackHoriz"),this._Items[t].setEnableResizeRight(!1),this._Items[t].setEnableResizeBottom(!0),delete this._Items[t]._IsSizeChanged);return this._recalcProportions(),this},iStPanelp.getIsHorisontal=function(){return this._IsHorisontal},iStPanelp.setWidth=function(n){return PP.Ui.StackPanel.base.setWidth.call(this,n),this._ScrollBox.setWidth(this._Width),this._recalcProportions(),this},iStPanelp.setHeight=function(n){return PP.Ui.StackPanel.base.setHeight.call(this,n),this._ScrollBox.setHeight(this._Height),this._recalcProportions(),this},iStPanelp.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},iStPanelp.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this.updateSize(),this._recalcProportions(),this._ScrollBox.updateSize(!0)):this._BeginUpdate--},iStPanelp=null,PP.Ui.ProxyControl=function(n){var i,u,r,t;if(this._Control||(this._Control=null),this._ViewType||(this._ViewType=null),this._checkViewType(),n=n||{},delete n.ViewType,n.Control){if(this._Control instanceof this._ViewType)throw PP.ArgumentException(this);n.Control instanceof this._ViewType||(i=this._cutSettingsForControl(n),PP.extend(n.Control,i,!0),this._Control=new this._ViewType(n.Control),delete n.Control),PP.Ui.ProxyControl.base.constructor.call(this,n)}else this._Control?PP.Ui.ProxyControl.base.constructor.call(this,n):(i=this._cutSettingsForControl(n),u=this._cutSettingsforThis(n,this),PP.Ui.ProxyControl.base.constructor.call(this,u),PP.extend(n,i),this._Control=new this._ViewType(n));r=this._Events.Control;for(t in r)if(this._Control[t])this[t]=r[t]=this._Control[t],this[t].fire=this._ProxyFire;else throw PP.ArgumentException(this);this._Control.__OwnerProxy=this},PP.initClass(PP.Ui.ProxyControl,PP.Ui.Control,"ProxyControl"),PP.Ui.ProxyControl.prototype._ProxyFire=function(n,t){PP.Delegate.prototype.fire.call(this,n.__OwnerProxy?n.__OwnerProxy:n,t)};for(member in PP.Ui.Control.prototype)member=="constructor"||member in PP.Object.prototype||!PP.isFunction(PP.Ui.Control.prototype[member])||(PP.Ui.ProxyControl.prototype[member]=function(n){return function(){if(this._Control)return this._Control[n].apply(this._Control,arguments)}}(member));PP.Ui.ProxyControl.prototype._checkViewType=function(){if(!this._ViewType)throw PP.ArgumentNullException("ProxyControl._ViewType == null",this);if(!PP.isBaseClass(this._ViewType,PP.Ui.Control))throw PP.ArgumentException(this);},PP.Ui.ProxyControl.prototype._cutSettingsForControl=function(n){var i={},t;for(t in n)PP.isFunction(PP.Ui.Control.prototype["get"+t])&&(i[t]=n[t],delete n[t]);return i},PP.Ui.ProxyControl.prototype._cutSettingsforThis=function(n){var i={},t;for(t in n)(this[t]instanceof PP.Delegate||typeof this["_"+t]!="undefined")&&(i[t]=n[t],delete n[t]);return i},PP.Ui.ProxyControl.prototype.dispose=function(){delete this._ViewType,this._Control&&delete this._Control.__OwnerProxy,PP.Ui.ProxyControl.base.dispose.apply(this,arguments)},PP.Ui.ProxyControl.prototype.getControl=function(){return this._Control},PP.Ui.Master=function(n){this._ViewType=PP.Ui.NavigationBar,this._Panels=[],this._defineEvents(["ControlChanged"]),this._InsertIndex=-1;var t=!(n&&n.Control instanceof this._ViewType);PP.Ui.Master.base.constructor.apply(this,arguments),this._IsSelfNavBar=t,this._selfNavItems=[],this._HeaderClasses=[],this._ActiveGroupPanel={},this._ActiveGroupName=""},PP.initClass(PP.Ui.Master,PP.Ui.ProxyControl,"Master"),masterP=PP.Ui.Master.prototype,masterP.getIsVisible=function(){return this._IsVisible},masterP.setIsVisible=function(n){PP.isBoolean(n)&&(n=n?PP.Ui.Visibility.Visible:PP.Ui.Visibility.Collapsed);switch(n){case PP.Ui.Visibility.Collapsed:this.hide(),this._IsVisible=!1;break;case PP.Ui.Visibility.Visible:this._IsVisible=!0,this.show()}},masterP.getActiveGroupName=function(){return this._ActiveGroupName},masterP.refresh=function(){for(var t,n=0;n<this._selfNavItems.length;n++)t=this._selfNavItems[n],t instanceof PP.Ui.MasterPanel&&t.refresh()},masterP._containsGroup=function(n,t){if(t!=null){if(PP.isString(t))return n.indexOf(t)>-1;if(Array.isArray(t))for(var i=0;i<t.length;i++)if(n.indexOf(t[i])>-1)return!0}return!1},masterP._restoreActiveItem=function(n){var t=this._ActiveGroupPanel[this._ActiveGroupName];t&&t.getEnabled()?t.expand(!1):n&&n.getEnabled()?n.expand(!1):this.expandFirstItem(!1,this._ActiveGroupName)},masterP.hide=function(){var t=this.getControl().getActiveItem(),n;for(this._IsVisible=!1,this.beginUpdate(),n=0;n<this._selfNavItems.length;n++)t===this._selfNavItems[n]&&(this._ActiveGroupPanel[this._ActiveGroupName]=t),this._selfNavItems[n].hide();this._ActiveGroupName="",this.endUpdate()},masterP.show=function(){this._IsVisible=!0,this.beginUpdate();for(var n=0;n<this._selfNavItems.length;n++)this._selfNavItems[n].show();this.getControl().getActiveItem()||this._restoreActiveItem(),this.endUpdate()},masterP.showGroup=function(n,t){var i,u,r,f;for(t=t||!1,n=Array.isArray(n)?n:[n],this._IsVisible=!0,this.beginUpdate(),i=this.getControl().getActiveItem(),u=i&&i.getGroupName?i.getGroupName():null,r=0;r<this._selfNavItems.length;r++)f=this._selfNavItems[r],this._containsGroup(n,f.getGroupName())?this._selfNavItems[r].show():i!==this._selfNavItems[r]||this._containsGroup(n,u)||(this._ActiveGroupPanel[this._ActiveGroupName]=i);!0!==t&&(this._ActiveGroupName=n.toString(),i&&this._containsGroup(n,u)||this._restoreActiveItem()),this.endUpdate()},masterP.hideGroup=function(n){var t,i;for(n=Array.isArray(n)?n:[n],this.beginUpdate(),t=0;t<this._selfNavItems.length;t++)i=this._selfNavItems[t],this._containsGroup(n,i.getGroupName())&&this._selfNavItems[t].hide();this.endUpdate()},masterP.showOnlyGroup=function(n,t){var r,u,i,f,e;if(n=Array.isArray(n)?n:[n],r=t?this._Control.getItem(t):null,this._ActiveGroupName!==n.toString()){for(this._IsVisible=!0,u=r||this.getControl().getActiveItem()||null,this.beginUpdate(),i=0;i<this._selfNavItems.length;i++)f=this._selfNavItems[i],e=f.getGroupName(),this._containsGroup(n,e)?this._selfNavItems[i].show():(u===this._selfNavItems[i]&&(this._ActiveGroupPanel[this._ActiveGroupName]=u),this._selfNavItems[i].hide());this._ActiveGroupName=n.toString(),this._restoreActiveItem(u),this.endUpdate()}r&&r.expand(!1)},masterP.addMaster=function(n,t){var r,i;if(!(n instanceof PP.Ui.Master))throw PP.ArgumentException(this);if(n.getControl()===this.getControl())return!1;for(r=[].concat(n.getControl().getItems()),i=0;i<r.length;i++)n._Control.removeItem(r[i],!0),this._Control.addItem(r[i],t);delete n._Control.__OwnerProxy,n._Control.dispose(),n._Control=this._Control},masterP.removeMaster=function(n){var i,t;for(n._Control=new PP.Ui.NavigationBar,i=n.getItems(),t=0;t<i.length;t++)this._Control.removeItem(i[t],!0),n._Control.addItem(i[t])},masterP.getItem=function(n){var i=this._selfNavItems,u,t,r;if(PP.isNumber(n))return i[n];for(u=i.length,t=0;t<u;t++)if(r=i[t],r instanceof n)return r;return null},masterP.addNavItem=function(n){if(this._selfNavItems.push(n),this._InsertIndex>-1?this._InsertIndex++:this._InsertIndex=this._Control.getItems().length+1,this._Control.addItem(n,this._InsertIndex-1),this._InsertIndex>1)for(var i=0;i<this._HeaderClasses.length;i++)n.addHeaderClass(this._HeaderClasses[i])},masterP.addMasterPanel=function(n,t){t?(PP.arrInsertBefore(this._selfNavItems,n,t),this._Control.addItem(n,t)):this.addNavItem(n,n)},masterP.removeMasterPanel=function(n){if(n._ViewType!==PP.Ui.NavigationItem)throw PP.ArgumentException(this);PP.rmvFrmArr(this._selfNavItems,n),this._Control.removeItem(n,!0)},masterP.removePanelsByGroup=function(n){if(!n)throw PP.ArgumentNullException(this);},masterP.addClassToTitles=function(n){for(var i=this._selfNavItems.length,t=1;t<i;t++)this._selfNavItems[t].addHeaderClass(n);this._HeaderClasses.push(n)},masterP.clearItems=function(n){if(this._Control.isLive())for(var t=0;t<this._selfNavItems.length;t++)this._Control.removeItem(this._selfNavItems[t],n);this._selfNavItems=[]},masterP.getItems=function(){return this._selfNavItems},masterP.expandFirstItem=function(n,t,i){var r,e,f,o,u;if(!this._IsVisible)return!1;if(r=this._Control.getActiveItem(),e=r&&r.getGroupName?r.getGroupName():null,!r||t&&!this._containsGroup(t,e)||i)for(f=0,o=this._selfNavItems.length;f<o;f++)if(u=this._selfNavItems[f],u.getIsVisible()&&u.getEnabled()){if(t&&!this._containsGroup(t,u.getGroupName()))continue;return u.expand(n),!0}return!1},masterP.refreshGroup=function(n){for(var i,t=0;t<this._selfNavItems.length;t++)i=this._selfNavItems[t],this._containsGroup(n,i.getGroupName())&&i.refresh()},masterP.beginUpdate=function(){this._Control.beginUpdate()},masterP.endUpdate=function(){this._Control.endUpdate()},masterP.dispose=function(){this.isLive()&&(this._IsSelfNavBar||(this.clearItems(),delete this._selfNavItems,delete this._Control,delete this._HeaderClasses,delete this._ActiveGroupPanel,delete this._Panels),PP.Ui.Master.base.dispose.apply(this,arguments))},masterP=null,PP.Ui.Label=function(){PP.Ui.Label.base.constructor.apply(this,arguments),this._render()},PP.initClass(PP.Ui.Label,PP.Ui.Control,"Label"),labelP=PP.Ui.Label.prototype,labelP._render=function(){this._initFromHTML("<div class='PPLabel'></div>",!0),PP.Ui.Label.base._render.apply(this,arguments),this._setContentToNode(this._Content,this._DomNode,"Content",!0),this._ParentNode&&this.addToNode(this._ParentNode)},labelP.setContent=function(n){return this._setContentToNode(n,this._DomNode,"Content",!0),this},labelP=null,PP.Ui.CheckBox=function(){this._Checked=!1,this._CheckedState=!1,this._ThreeState=!1,this._defineEvents(["CheckedChanged"]),PP.Ui.CheckBox.base.constructor.apply(this,arguments),this._SpanIMG=null,this._SpanContent=null,this._CSSPPCheckBox||(this._CSSPPCheckBox="PPCheckBox"),this._CSSCBImg||(this._CSSCBImg="CBImg"),this._CSSPPCBText||(this._CSSPPCBText="PPCBText"),this._CSSChecked||(this._CSSChecked="Checked"),this._CSSUnChecked||(this._CSSUnChecked="Unchecked"),this._CSSIndeterminate||(this._CSSIndeterminate="Indeterminate"),this._CSSDisabled||(this._CSSDisabled="Disabled"),this._render(),this.setCheckedState(this._Checked,!1,!0)},PP.initClass(PP.Ui.CheckBox,PP.Ui.Control,"CheckBox"),checkProto=PP.Ui.CheckBox.prototype,checkProto._onClicked=function(n,t){if(!this.getEnabled())return!1;switch(this._CheckedState){case!0:this._ThreeState?this.setCheckedState(null):this.setCheckedState(!1);break;case!1:this.setCheckedState(!0);break;case null:this.setCheckedState(!1)}if(this.isLive())return this.Click.fire(this,t)},checkProto._render=function(){this._initFromHTML("<span class='"+this._CSSPPCheckBox+"'><div class='"+this._CSSCBImg+"'></div><span class='"+this._CSSPPCBText+"'></span></span>"),this._DivIMG=this._DomNode.firstChild,this._SpanContent=this._DomNode.lastChild,this._setContentToNode(this._Content,this._SpanContent,"Content",!0),PP.Ui.CheckBox.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},checkProto.getValue=function(){return this._Checked},checkProto.setValue=function(n,t){return t=typeof t=="undefined"?!0:t==!0,this.setChecked(n,t)},checkProto.setContent=function(n){return this._setContentToNode(n,this._SpanContent)},checkProto.setChecked=function(n,t,i){return n=!!n,t=typeof t=="undefined"?!0:t==!0,this.setCheckedState(n,t,i),this},checkProto.getChecked=function(){return this._Checked},checkProto.setCheckedState=function(n,t,i){if(t=typeof t=="undefined"?!0:t==!0,this._CheckedState!=n||i){this._Checked=n,this._CheckedState=n==!0?!0:n==!1||this._ThreeState==!1?!1:null;var r=this.getEnabled();switch(this._CheckedState){case!0:this._DivIMG.className=this._CSSCBImg+" "+this._CSSChecked;break;case null:this._DivIMG.className=this._CSSCBImg+" "+this._CSSIndeterminate;break;default:this._DivIMG.className=this._CSSCBImg+" "+this._CSSUnChecked}r?t&&this.CheckedChanged.fire(this,new PP.EventArgs(null)):this._DivIMG.className+=" "+this._CSSDisabled}return this},checkProto.getCheckedState=function(){return this._CheckedState},checkProto.setThreeState=function(n){return this._ThreeState!=n&&(this._ThreeState=n,this._ThreeState||this._CheckedState!=null||this.setCheckedState(!1)),this},checkProto.getThreeState=function(){return this._ThreeState},checkProto.setEnabled=function(){return PP.Ui.CheckBox.base.setEnabled.apply(this,arguments),this._Enabled?PP.removeClass(this._DivIMG,this._CSSDisabled):PP.addClass(this._DivIMG,this._CSSDisabled),this},checkProto.setIsRTL=function(n){PP.Ui.CheckBox.base.setIsRTL.call(this,n),PP.IsOpera&&(this._IsRTL?(this._SpanContent.style.display="inline-block",this._SpanContent.style.paddingRight=PP.getStyle(this._SpanContent,"margin-right")):(this._SpanContent.style.display="",this._SpanContent.style.paddingRight=""))},checkProto=null,PP.Ui.NavigationItem=function(n){n=n||{},this._Title="",this._HeaderControl=n.HeaderControl?null:n.CheckBox instanceof PP.Ui.CheckBox?PP.Ui.CheckBox:new PP.Ui.CheckBox(n.CheckBox),n&&n.CheckBox&&delete n.CheckBox,this._IsHeaderControlVisible=!0,this._defineEvents(["Toggled","Toggling","Collapsing","Expanding","VisibleChanged","EnableChanged"]),PP.Ui.NavigationItem.base.constructor.apply(this,arguments),this._Animation=new PP.AnimationSettings,this._IsCollapsed=!0,this._barDomNode=null,this._controlContainerDomNode=null,this._titleContainerDomNode=null,this._arrowContainerDomNode=null,this._arrowDomNode=null,this._contentDomNode=null,this._ScrollBox=null,this._thisRender(),this._adjustMarkup(),this._contentSize=null,this._IsRendered=!1,this._HeaderControl&&(this._HeaderControl.Click&&this._HeaderControl.Click.add(this._onCBClick,this),this._HeaderControl.MouseDown&&this._HeaderControl.MouseDown.add(this._onCBClick,this),this._HeaderControl.MouseUp&&this._HeaderControl.MouseUp.add(this._onCBClick,this))},PP.initClass(PP.Ui.NavigationItem,PP.Ui.Control,"NavigationItem"),NavigationItemPr=PP.Ui.NavigationItem.prototype,NavigationItemPr.show=function(){PP.show(this._DomNode),this._IsVisible=!0,this.VisibleChanged.fire(this),this._Height>0&&!this._IsCollapsed&&this._ScrollBox.show()},NavigationItemPr.hide=function(){this.collapse(!1,!0,!0),PP.hide(this._DomNode),this._IsVisible=!1,this._ScrollBox.hide(),this.VisibleChanged.fire(this)},NavigationItemPr._onCBClick=function(){this._stopHeaderClick=!0},NavigationItemPr._bindEvents=function(){this._isBind||(PP.Ui.NavigationItem.base._bindEvents.apply(this,arguments),this._addEvents(this._barDomNode,{click:this._onBarClick,mousedown:this._onBarMouseDown,mouseup:this._onBarMouseUp}),this._addEvent(this._barDomNode.firstChild,"mouseout",this._onBarMouseUp))},NavigationItemPr._unBindEvents=function(){PP.Ui.NavigationItem.base._unBindEvents.apply(this,arguments),this._removeAllEvents(this._barDomNode.firstChild),this._removeAllEvents(this._barDomNode)},NavigationItemPr._thisRender=function(){var i,t,n;this._initFromHTML("<div class='PPNavItm Collapsed'><div class='Bar'><table cellspacing='0' cellpadding='0'><tbody></tbody></table></div></div>"),this._barDomNode=this._DomNode.firstChild,i=this._tableBar=PP.querySelector(this._barDomNode,"tbody"),t=document.createElement("tr"),i.appendChild(t),this._controlContainerDomNode=document.createElement("td"),PP.addClass(this._controlContainerDomNode,"ControlContainer"),t.appendChild(this._controlContainerDomNode),n=this._HeaderControl,n&&(n.addToNode?(n.addClass("PPHeaderControl"),n.addToNode(this._controlContainerDomNode)):(PP.addClass(n,"PPHeaderControl"),this._controlContainerDomNode.appendChild(n))),this._IsHeaderControlVisible||this.setIsHeaderControlVisible(this._IsHeaderControlVisible),this._titleContainerDomNode=document.createElement("td"),PP.addClass(this._titleContainerDomNode,"TitleContainer"),t.appendChild(this._titleContainerDomNode),this._arrowContainerDomNode=document.createElement("td"),PP.addClass(this._arrowContainerDomNode,"ArrowContainer"),t.appendChild(this._arrowContainerDomNode),this._arrowDomNode=document.createElement("div"),PP.addClass(this._arrowDomNode,"DownArrow"),this._arrowContainerDomNode.appendChild(this._arrowDomNode),this._viewDomNode=document.createElement("div"),PP.addClass(this._viewDomNode,"PPNavItemView"),this._DomNode.appendChild(this._viewDomNode),this._ScrollBox=new PP.Ui.ScrollBox({ParentNode:this._viewDomNode}),this._contentDomNode=document.createElement("div"),PP.addClass(this._contentDomNode,"PPNavItemContent"),this._ScrollBox.setContent(this._contentDomNode),this._setContentToNode(this._Content,this._contentDomNode,"Content",!0),this._setContentToNode(this._Title,this._titleContainerDomNode,"Title",!0),PP.Ui.NavigationItem.BarHeight=29,PP.Ui.NavigationItem.base._render.call(this)},NavigationItemPr._render=function(){},NavigationItemPr._onBarClick=function(){this._Enabled&&!this._stopHeaderClick&&(this._IsCollapsed?this.expand():this.collapse()),delete this._stopHeaderClick},NavigationItemPr._onBarMouseDown=function(){this._Enabled&&(PP.addClass(this._barDomNode,"Pressed"),this._changeUpDown())},NavigationItemPr._onBarMouseUp=function(){this._Enabled&&PP.hasClass(this._barDomNode,"Pressed")&&(PP.removeClass(this._barDomNode,"Pressed"),this._changeUpDown())},NavigationItemPr._changeUpDown=function(){PP.removeClass(this._arrowDomNode,"UpArrow"),PP.removeClass(this._arrowDomNode,"DownArrow"),this._IsCollapsed?PP.addClass(this._arrowDomNode,"DownArrow"):PP.addClass(this._arrowDomNode,"UpArrow")},NavigationItemPr.setContent=function(n){this._contentHeight=-1;var t=this._setContentToNode(n,this._contentDomNode);return this._ScrollBox&&this._ScrollBox.updateSize(),t},NavigationItemPr.getTitle=function(){return this._Title},NavigationItemPr.setTitle=function(n){if(this._titleContainerDomNode)return this._setContentToNode(n,this._titleContainerDomNode,"Title")},NavigationItemPr.getContentSize=function(){return this._contentSize||(this._contentSize={},this._contentSize.Height=this._contentDomNode.offsetHeight,this._contentSize.Width=this._contentDomNode.offsetWidth),this._contentSize},NavigationItemPr.setHeight=function(n,t,i){if(n=this._checkValue(n),(this._Height!==n||t)&&(this._Height=n,this._viewDomNode.style.height=n+"px",!i)){var r=this._ScrollBox;n==0?r.hide():(r.getIsVisible()||r.show(),r.setHeight(n),r.updateSize()),this.SizeChanged.fire(this,{})}},NavigationItemPr.setWidth=function(n,t){n=this._checkValue(n),(this._Width!==n||t)&&(this._Width=n,this._viewDomNode.style.width=n+"px",this._ScrollBox.setWidth(n),this._ScrollBox.getIsVisible()&&this._ScrollBox.updateSize(),this.SizeChanged.fire(this,{}))},NavigationItemPr.showScrolls=function(){this._ScrollBox.showScrolls(),this._ScrollBox.updateSize()},NavigationItemPr.hideScrolls=function(){this._ScrollBox.hideScrolls()},NavigationItemPr.getScrollBox=function(){return this._ScrollBox},NavigationItemPr.getHeightOfCDomNode=function(){return this._ScrollBox.getHeight()},NavigationItemPr.getIsHeaderControlVisible=function(){return this._IsHeaderControlVisible},NavigationItemPr.setIsHeaderControlVisible=function(n){return this._IsHeaderControlVisible=n,this._HeaderControl&&(this._IsHeaderControlVisible?this._HeaderControl.show():this._HeaderControl.hide()),this},NavigationItemPr.getHeaderControl=function(){return this._HeaderControl},NavigationItemPr.setHeaderControl=function(n){return this._HeaderControl!==n&&(this._HeaderControl&&(this._HeaderControl.dispose&&this._HeaderControl.dispose(),this._HeaderControl=null),this._HeaderControl=n,this._HeaderControl?(this._setContentToNode(this._HeaderControl,this._controlContainerDomNode,"HeaderControl",!0),this._HeaderControl.addClass&&this._HeaderControl.addClass("PPHeaderControl"),this._HeaderControl.Click&&this._HeaderControl.Click.add(this._onCBClick,this),PP.addClass(this._HeaderControl,"PPHeaderControl")):PP.removeChildren(this._controlContainerDomNode)),this},NavigationItemPr.getIsCollapsed=function(){return this._IsCollapsed},NavigationItemPr.setEnabled=function(n,t){PP.Ui.NavigationItem.base.setEnabled.call(this,n,t);var i=this._HeaderControl;return i&&i.setEnabled&&i.setEnabled(n,t),this._ScrollBox&&this._ScrollBox.setEnabled(n,t),this.EnableChanged.fire(this),this},NavigationItemPr.getIsRendered=function(){return this._IsRendered},NavigationItemPr.expand=function(n){if(this._IsCollapsed){n=n==undefined?!0:n;var t={IsExpanding:!0};if(this._IsRendered||(this._IsRendered=!0,this._render()),this._ScrollBox.show(),this.Toggling.fire(this,t),t.Cancel)return this;this._IsCollapsed=!1,this._changeUpDown(),PP.addClass(this._barDomNode,"BarExpanded"),PP.removeClass(this._DomNode,"Collapsed"),this.Expanding.fire(this,{UseAnimation:n})}return this},NavigationItemPr.collapse=function(n,t,i){if(this._IsCollapsed!==!0){if(t=t==undefined?!0:t,n=n==undefined?!0:n,t&&!i){var r={IsExpanding:!1};if(this.Toggling.fire(this,r),r.Cancel)return this}this._IsCollapsed=!0,this._changeUpDown(),PP.removeClass(this._barDomNode,"BarExpanded"),PP.addClass(this._DomNode,"Collapsed"),t&&this.Collapsing.fire(this,{UseAnimation:n})}return this},NavigationItemPr.addHeaderClass=function(n){this._barDomNode&&PP.addClass(this._barDomNode,n)},NavigationItemPr.updateScrolls=function(){this._ScrollBox&&this._ScrollBox.updateSize()},NavigationItemPr.setIsRTL=function(n){var t,i;PP.Ui.NavigationItem.base.setIsRTL.call(this,n),this._ScrollBox.setIsRTL(n),t=this._HeaderControl,t&&t.setIsRTL&&t.setIsRTL(n),i=this._Content,i&&i.setIsRTL&&i.setIsRTL(n)},NavigationItemPr=null,PP.Ui.MasterPanel=function(n){n=n||{},this._ViewType=n.ViewType,delete n.ViewType,this._GroupName||(this._GroupName=""),this._defineEvents(["PropertyChanged"]),this.ControlChanged=this.PropertyChanged,PP.Ui.MasterPanel.base.constructor.apply(this,arguments),n.ViewType=this._ViewType,this._ViewType!=PP.Ui.NavigationItem&&(this._IsRendered=!0,this._render())},PP.initClass(PP.Ui.MasterPanel,PP.Ui.NavigationItem,"MasterPanel"),masterpPr=PP.Ui.MasterPanel.prototype,masterpPr._addSeparator=function(){var n=document.createElement("div");return n.className="PPCtrlSeparator",this.getContentDomNode().appendChild(n),n},masterpPr._bindEvents=function(){this._ViewType===PP.Ui.NavigationItem&&(PP.Ui.MasterPanel.base._bindEvents.apply(this,arguments),this.Toggled.add(this._OnToogled,this),this.Toggling.add(this._OnToggling,this))},masterpPr._unBindEvents=function(){this._ViewType===PP.Ui.NavigationItem&&PP.Ui.MasterPanel.base._unBindEvents.apply(this,arguments)},masterpPr._OnToggling=function(n,t){t.IsExpanding&&this._IsVisible&&(this._needUpdateCall&&this._update(),delete this._needUpdateCall)},masterpPr._OnToogled=function(n,t){t.IsExpanded&&this._IsVisible&&this.updateSize()},masterpPr.updateSize=function(){},masterpPr._update=function(){},masterpPr.refresh=function(){this._IsRendered?this._update():this._needUpdateCall=!0},masterpPr.setWidth=function(){this._ViewType===PP.Ui.NavigationItem?PP.Ui.MasterPanel.base.setWidth.apply(this,arguments):PP.Ui.NavigationItem.base.setWidth.apply(this,arguments)},masterpPr.setHeight=function(n,t,i){this._ViewType===PP.Ui.NavigationItem?PP.Ui.MasterPanel.base.setHeight.apply(this,arguments):PP.Ui.NavigationItem.base.setHeight.apply(this,arguments),!i&&this._IsRendered&&this.updateSize()},masterpPr.isVisible=function(){return this._ViewType===PP.Ui.NavigationItem?!this.getIsCollapsed():PP.Ui.NavigationItem.base.getIsVisible.apply(this,arguments)},masterpPr.getContentDomNode=function(){return this._ViewType===PP.Ui.NavigationItem?this._masterCNode:this._DomNode},masterpPr._render=function(){this._ViewType===PP.Ui.NavigationItem?(PP.Ui.MasterPanel.base._render.apply(this,arguments),this._masterCNode=document.createElement("div"),this._masterCNode.className="PPMasterPanel",this._contentDomNode.appendChild(this._masterCNode)):(this._initFromHTML("<div class='PPMasterPanel'></div>",!0),PP.Ui.NavigationItem.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode))},masterpPr.setContent=function(n){return this._contentHeight=-1,this._setContentToNode(n,this.getContentDomNode())},masterpPr._init=function(){},masterpPr.getCanDisable=function(){},masterpPr.setCanDisable=function(){},masterpPr.getGroupName=function(){return this._GroupName},masterpPr.setGroupName=function(n){this._GroupName=n},masterpPr=null,PP.Ui.SplitButton=function(n){n=n||{},this._ImageList=this._ImageUrl=this._Menu=null,this._RowIndex=this._ColumnIndex=-1,this._IsToggleButton=!1,this._IsHorizontal=!1,this._defineEvents(["DefaultAction"]),this._IsPressed=!1,this._IsDefaultTemplate=!0,this._UseWrapping=!0,PP.Ui.SplitButton.base.constructor.apply(this,arguments),this._render(),this.setIsPressed(this._IsPressed,!0)},PP.initClass(PP.Ui.SplitButton,PP.Ui.Control,"SplitButton"),splitButtonP=PP.Ui.SplitButton.prototype,splitButtonP._render=function(){var n,t,i;this._initFromHTML("<div class='PPSplitButton'></div>"),this._IsHorizontal?this.addClass("Horizontal"):this.addClass("Vertical"),n={IsToggleButton:this._IsToggleButton,RowIndex:this._RowIndex,ColumnIndex:this._ColumnIndex,ImageList:this._ImageList,ImageUrl:this._ImageUrl,ParentNode:this._DomNode,Class:"ImageButton",Click:PP.Delegate(this._onImageButtonClick,this)},this._IsHorizontal&&(n.Content=this._Content,n.UseWrapping=this._UseWrapping),this._ImageButton=new PP.Ui.RibbonButton(n),delete this._IsToggleButton,delete this._RowIndex,delete this._ColumnIndex,delete this._ImageList,delete this._ImageUrl,t={UseWrapping:this._UseWrapping,Content:this._Content,ParentNode:this._DomNode,Class:"ContentButton",Click:PP.Delegate(this._onContentButtonClick,this)},this._IsHorizontal&&(delete t.UseWrapping,delete t.Content),this._ContentButton=new PP.Ui.RibbonButton(t),this._Menu?(this.setMenu(this._Menu),delete this._Menu):(this._Menu=new PP.Ui.Menu,this.setMenu(this._Menu)),this._IsHorizontal&&(this._ImageButton.setImagePosition(PP.LTRB.Left),this._ContentButton.setImagePosition(PP.LTRB.Left),this._ImageButton.setMenuArrowPosition(PP.LTRB.Right),this._ContentButton.setMenuArrowPosition(PP.LTRB.Right)),PP.Ui.SplitButton.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),PP.IEVer==7&&(i=this._ContentButton.getWidth(),!this._IsHorizontal&&this._ImageButton.getWidth()<i&&this._ImageButton.setWidth(i),this.setContent(this._Content))},splitButtonP._onMouseOver=function(){if(this._Enabled)return this._setIsHovered(!0),PP.Ui.SplitButton.base._onMouseOver.apply(this,arguments)},splitButtonP._onMouseOut=function(n,t){if(PP.reallyOut(this._DomNode,t.Event))return this._setIsHovered(!1),PP.Ui.SplitButton.base._onMouseOut.apply(this,arguments)},splitButtonP._onMenuOpening=function(n,t){if(this._IsHorizontal){var i=this._getMenuDropCoords();t.X=i[1],t.Y=i[0]}},splitButtonP._getMenuDropCoords=function(){var n=[],u=this._ContentButton.getMenu(),i=u.isVisibleArea(0,0,!0),t=PP.calculateOffset(this._DomNode),r,f,e;return n.push(t.Y+this._DomNode.offsetHeight+1),this._IsRTL?this._IsDefaultTemplate?n.push(t.X+this._DomNode.offsetWidth-i.Width+1):n.push(t.X+this._DomNode.offsetWidth-i.Width):this._IsDefaultTemplate?n.push(t.X-1):n.push(t.X),i=u.isVisibleArea(n[0],n[1],!0),r=null,i.VisibleByHeight||(f=0,f=t.Y-i.Height-1,u._IsDefaultTemplate&&(f+=5),f>-1&&(r=u.isVisibleArea(f,n[1],!0),r.VisibleByHeight&&(n[0]=f))),i.VisibleByWidth||(this._IsRTL?(e=this._IsDefaultTemplate?t.X-1:t.X,r=u.isVisibleArea(n[0],e,!0),r.VisibleByWidth&&(n[1]=e)):(e=this._IsDefaultTemplate?t.X+this._DomNode.offsetWidth-i.Width+1:t.X+this._DomNode.offsetWidth-i.Width,r=u.isVisibleArea(n[0],e,!0),r.VisibleByWidth&&(n[1]=e))),n},splitButtonP._onImageButtonClick=function(n,t){return this._ImageButton.getIsToggleButton()&&this.setIsPressed(this._ImageButton.getIsPressed()),this._raiseDefaultActionEvent(n,t),this},splitButtonP._raiseDefaultActionEvent=function(n,t){return this.DefaultAction.fire(this,t),this},splitButtonP._onContentButtonClick=function(){return this._ContentButton.getMenu().getDroppedDown()||this._ContentButton.setIsPressed(this._ContentButton.getIsPressed(),!0),this},splitButtonP._setIsHovered=function(n){var t=this.getMenu();return t&&t.getDroppedDown()?this:(n?this.addClass("Hovered"):this.removeClass("Hovered"),this)},splitButtonP._onMenuClosed=function(){this._setIsHovered(!1)},splitButtonP.getImageButton=function(){return this._ImageButton},splitButtonP.getIsDefaultTemplate=function(){return this._IsDefaultTemplate},splitButtonP.getContentButton=function(){return this._ContentButton},splitButtonP.getMenu=function(){return this._ContentButton.getMenu()},splitButtonP.setMenu=function(n){this._ContentButton.setMenu(n);var t=this.getMenu();return t instanceof PP.Ui.DropPanel&&(t.Opening.add(this._onMenuOpening,this),t.Closed.add(this._onMenuClosed,this)),this},splitButtonP.getImageList=function(){return this._ImageButton.getImageList()},splitButtonP.setImageList=function(n){return this._ImageButton.setImageList(n)},splitButtonP.getImageUrl=function(){return this._ImageButton.getImageUrl()},splitButtonP.setImageUrl=function(n){return this._ImageButton.setImageUrl(n)},splitButtonP.setEnabled=function(n,t){return PP.Ui.SplitButton.base.setEnabled.call(this,n,t),this._ImageButton.setEnabled(n,t),this._ContentButton.setEnabled(n,t),this},splitButtonP.setIsRTL=function(n){return PP.Ui.SplitButton.base.setIsRTL.call(this,n),this._ImageButton.setIsRTL(n),this._ContentButton.setIsRTL(n),this},splitButtonP.setContent=function(n){return PP.Ui.SplitButton.base.setContent.call(this,n),this._IsHorizontal?this._ImageButton.setContent(n):(this._ContentButton.setContent(n),PP.IsIE&&PP.IEVer===7&&this._ImageButton.setContent(n)),this},splitButtonP.setIsPressed=function(n,t){if(this._IsPressed!==n&&this.getIsToggleButton()||t){this._IsPressed=n,this._ImageButton.setIsPressed(n,t);var i=this._ContentButton.getIsToggleButton();this._ContentButton.setIsToggleButton(!0),this._ContentButton.setIsPressed(n,t),this._ContentButton.setIsToggleButton(i)}return this},splitButtonP.getRowIndex=function(){return this._ImageButton.getRowIndex()},splitButtonP.getColumnIndex=function(){return this._ImageButton.getColumnIndex()},splitButtonP.getIsToggleButton=function(){return this._ImageButton.getIsToggleButton()},splitButtonP.setIsToggleButton=function(n){return this._ImageButton.setIsToggleButton(n),this},splitButtonP.getUseWrapping=function(){return this._IsHorizontal?this._ImageButton.getUseWrapping():this._ContentButton.getUseWrapping()},splitButtonP.setUseWrapping=function(n){return this._IsHorizontal?this._ImageButton.setUseWrapping(n):this._ContentButton.setUseWrapping(n),this},splitButtonP.getMenuDropPosition=function(){return this._ContentButton.getMenuDropPosition()},splitButtonP.setMenuDropPosition=function(n,t,i){return this._ContentButton.setMenuDropPosition(n,t,i),this},splitButtonP.getIsPressed=function(){return this._ImageButton.getIsPressed()&&this._ContentButton.getIsPressed()},splitButtonP.setIsHovered=function(n){return this._setIsHovered(n),this._ImageButton.setIsHovered(n),this._ContentButton.setIsHovered(n),this},splitButtonP.setWidth=function(n){return PP.Ui.SplitButton.base.setWidth.call(this,n),this._ImageButton&&(this._ImageButton.setWidth(n),this._ContentButton.setWidth(n)),this},splitButtonP.getIsHorizontal=function(){return this._IsHorizontal},splitButtonP=null,PP.Ui.StripePanel=function(n){n=n||{},this._ImageList=null,this._Controls=[],this._Parent=null,PP.Ui.StripePanel.base.constructor.apply(this,arguments),this._LeftSeparator=null,this._RightSeparator=null,this._updateInProgress=!1,this._render()},PP.initClass(PP.Ui.StripePanel,PP.Ui.Control,"StripePanel"),stripePanelP=PP.Ui.StripePanel.prototype,stripePanelP._render=function(){var n,i,t;if(this._initFromHTML("<div class='PPStripePanel'><div class='PPLeftSeparator'></div><div class='PPRightSeparator'></div></div>"),this._LeftSeparator=this._DomNode.childNodes[0],this._RightSeparator=this._DomNode.childNodes[1],n=this._Controls,i=n.length,this._Controls=[],this.beginUpdate(),n)for(t=0;t<i;t++)this.addControl(n[t]);this.endUpdate(),PP.Ui.StripePanel.base._render.apply(this,arguments)},stripePanelP._initControl=function(n){return n instanceof PP.Ui.Button||n instanceof PP.Ui.SplitButton?(!n.getImageList()&&this._ImageList&&n.setImageList(this._ImageList),n.setUseWrapping(!1),n):(!n.ImageList&&this._ImageList&&(n.ImageList=this._ImageList),n.PPType||(n.PPType="RibbonButton"),n.UseWrapping=!1,PP.create(n))},stripePanelP._addControlToMenu=function(n){var i,t,r;this._Parent&&(i=this._Parent.getPanelsMenu(),t={Parent:i},n.getIsToggleButton()&&!n.getMenu()&&(t.Checked=n.getIsPressed()),n.getContent()&&(t.Content=n.getContent()),n.getResourceKey()&&(t.ResourceKey=n.getResourceKey()),n.getMenu()&&(t.Menu=n.getMenu()),r=new PP.Ui.MenuItem(t),i.addItem(r),this._Parent._getPanelsItemsMapping()[n.getId()]=r)},stripePanelP._removeControlFromMenu=function(n){var t=this._Parent.getPanelsMenu();t.removeItemByIndex(t.getItems().indexOf(this._Parent._getPanelsItemsMapping()[n.getId()])),delete this._Parent._getPanelsItemsMapping()[n.getId()]},stripePanelP.getControls=function(){return this._Controls},stripePanelP.getImageList=function(){return this._ImageList},stripePanelP.getParent=function(){return this._Parent},stripePanelP.setIsRTL=function(){var t,n;for(PP.Ui.StripePanel.base.setIsRTL.apply(this,arguments),t=this._Controls.length,n=0;n<t;n++)this._Controls[n].setIsRTL(this._IsRTL);return this},stripePanelP.beginUpdate=function(){this._updateInProgress=!0},stripePanelP.endUpdate=function(){this._updateInProgress=!1},stripePanelP.addControl=function(n){n=this._initControl(n),this._Controls.push(n),this._addControlToMenu(n);var t=PP.htmlToDOM("<div class='PPStripeControl'></div>");this._DomNode.insertBefore(t,this._RightSeparator),n.addToNode(t),this._updateInProgress||this.updateSize()},stripePanelP.removeControl=function(n,t){var r=this._Controls.indexOf(n),i;this._Controls.splice(r,1),this._removeControlFromMenu(n),i=n.getDomNode().parentNode,n.removeFromDOM(n.getDomNode().parentNode),this._DomNode.removeChild(i),t=typeof t=="undefined"?!0:t==!0,t&&n.dispose(),this._updateInProgress||this.updateSize()},stripePanelP.removeAllControls=function(n){for(var i=this._Controls.length,t=i-1;t>-1;t--)this.removeControl(this._Controls[t],n)},stripePanelP.setSeparatorsVisible=function(n){switch(n){case PP.Ui.StripePanel.SeparatorsVisibility.None:PP.hide(this._LeftSeparator),PP.hide(this._RightSeparator);break;case PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.show(this._LeftSeparator),PP.hide(this._RightSeparator);break;case PP.Ui.StripePanel.SeparatorsVisibility.Right:PP.hide(this._LeftSeparator),PP.show(this._RightSeparator);break;case PP.Ui.StripePanel.SeparatorsVisibility.Both:PP.show(this._LeftSeparator),PP.show(this._RightSeparator)}},stripePanelP.updateSize=function(){},stripePanelP.getControlById=function(n){for(var i=this._Controls.length,t=0;t<i;t++)if(this._Controls[t].getId()===n)return this._Controls[t];return null},stripePanelP.dispose=function(){this.removeAllControls(),delete this._ImageList,delete this._Parent,PP.Ui.StripePanel.base.dispose.apply(this,arguments)},stripePanelP=null,(PP.Ui.StripePanel.SeparatorsVisibility=function(){var n=PP.Ui.StripePanel.SeparatorsVisibility;n.None="None",n.Left="Left",n.Right="Right",PP.initEnum(n,"PP.Ui.StripePanel.SeparatorsVisibility")})(),PP.Ui.StripeContextPanel=function(){this._GroupName="Default",PP.Ui.StripeContextPanel.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.StripeContextPanel,PP.Ui.StripePanel,"StripeContextPanel"),stripeContextPanelP=PP.Ui.StripeContextPanel.prototype,stripeContextPanelP._render=function(){PP.Ui.StripeContextPanel.base._render.apply(this,arguments),this.addClass("Context")},stripeContextPanelP._initControl=function(n){if(!(n instanceof PP.Ui.Control)){if(!n.PPType)throw PP.ArgumentNullException();n=PP.create(n)}return n.getImageList&&n.setImageList&&!n.getImageList()&&this._ImageList&&n.setImageList(this._ImageList),n},stripeContextPanelP._addControlToMenu=function(){},stripeContextPanelP.getGroupName=function(){return this._GroupName},stripeContextPanelP.setGroupName=function(n){this._GroupName=n},stripeContextPanelP.addControl=function(){PP.Ui.StripeContextPanel.base.addControl.apply(this,arguments)},stripeContextPanelP.removeControl=function(){PP.Ui.StripeContextPanel.base.removeControl.apply(this,arguments)},PP.Ui.Stripe=function(n){n=n||{},this._ImageList=null,this._Panels=[],this._ContextPanels=[],this._ActiveGroupName="",PP.Ui.Stripe.base.constructor.apply(this,arguments),this._NavigationNode=null,this._MainNode=null,this._ContextNode=null,this._updateInProgress=!1,this._PanelsMenu=null,this._ContextPanelsMenu=null,this._PanelsItemsMapping={},this._render()},PP.initClass(PP.Ui.Stripe,PP.Ui.Control,"Stripe"),stripeP=PP.Ui.Stripe.prototype,stripeP._render=function(){var t,r,i,u,n;if(this._initFromHTML("<div class='PPStripe'><div class='PPNavigation'></div><div class='PPMain'></div><div class='PPContext'></div></div>"),this._NavigationNode=this._DomNode.childNodes[0],this._MainNode=this._DomNode.childNodes[1],this._ContextNode=this._DomNode.childNodes[2],this._PanelsMenu=new PP.Ui.Menu({Class:"PPStripeMenu",ItemSelected:PP.Delegate(this._onPanelsMenuItemSelected,this),Opening:PP.Delegate(this._onPanelsMenuOpening,this)}),this._ContextPanelsMenu=new PP.Ui.Menu({Class:"PPStripeMenu",ShowIcons:!1}),this._btn1=new PP.Ui.Button({Class:"tmp",Menu:this._PanelsMenu,ParentNode:this._MainNode}),this._btn2=new PP.Ui.Button({Class:"tmp",Menu:this._ContextPanelsMenu,ParentNode:this._ContextNode}),t=this._Panels,r=t.length,this._Panels=[],i=this._ContextPanels,u=i.length,this._ContextPanels=[],this.beginUpdate(),t)for(n=0;n<r;n++)this.addPanel(t[n]);if(i)for(n=0;n<u;n++)this.addPanel(i[n],!0);this.setActiveGroupName(this._ActiveGroupName),this.endUpdate(),PP.Ui.Stripe.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode)},stripeP._initPanel=function(n,t){return n instanceof PP.Ui.StripePanel?(!n.getImageList()&&this._ImageList&&n.setImageList(this._ImageList),n._Parent=this,n):(!n.ImageList&&this._ImageList&&(n.ImageList=this._ImageList),n.Parent=this,t=typeof t=="undefined"?!1:t==!0,t?new PP.Ui.StripeContextPanel(n):new PP.Ui.StripePanel(n))},stripeP._getPanelsVisibleControlsCount=function(n){for(var u=n instanceof PP.Ui.StripeContextPanel,i=n.getControls(),f=i.length,r=0,t=0;t<f;t++)(i[t].getIsVisible()||u)&&r++;return r},stripeP._sortPanelsArray=function(n,t){var i=n.getParent()._getPanelsVisibleControlsCount(n),r=t.getParent()._getPanelsVisibleControlsCount(t);if(i>r)return-1;if(i==r){var u=n.getParent(),f=u.getPanels().indexOf(n),e=u.getPanels().indexOf(t);return f>e?-1:f===e?0:1}return 1},stripeP._hideLastVisibleControl=function(n,t){var r,u,i,f,e;if(t=typeof t=="undefined"?!1:t==!0,r=n.getControls(),u=r.length,t){for(i=u-1;i>-1;i--){f=r[i],r[i]._StripePanel=n,n.removeControl(r[i],!1),e=new PP.Ui.ActiveMenuItem({Parent:this._ContextPanelsMenu,Content:f}),this._ContextPanelsMenu.insertItem(e,0);break}r.length===0&&n.setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.None)}else{for(i=u-1;i>-1;i--)if(r[i].getIsVisible()){r[i].hide();break}this._getPanelsVisibleControlsCount(n)===0&&n.setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.None)}},stripeP._updateButtonsVisibility=function(n,t){var r,o,i,s,l,u,f,h,a,e,c,v;for(t=typeof t=="undefined"?!1:t==!0,r=t?this._ContextPanels:this._Panels,o=r.length,i=0;i<o;i++)if(s=r[i].getControls(),l=s.length,!t)for(u=l-1;u>-1;u--)s[u].show(),this._PanelsItemsMapping[s[u].getId()].show();if(t)for(f=this._ContextPanelsMenu.getItems();f.length>0;)h=f[0].getContent(),f[0].setContent(null),this._ContextPanelsMenu.removeItem(f[0]),a=h._StripePanel,delete h._StripePanel,a.addControl(h);for(e=0,i=0;i<o;i++)e+=r[i].getDomNode().scrollWidth;while(e>n){if(c=[].concat(r),c.sort(this._sortPanelsArray),v=this._getPanelsVisibleControlsCount(c[0]),v>0)this._hideLastVisibleControl(c[0],t);else break;for(e=0,i=0;i<o;i++)e+=r[i].getDomNode().scrollWidth}},stripeP._updateSeparatorsVisibility=function(n){n=typeof n=="undefined"?!1:n==!0;var t=n?this._ContextPanels:this._Panels,r=t.length,i;switch(r){case 0:break;case 1:t[0].setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.Both);break;case 2:t[0].setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.Both),t[1].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right);break;case 3:t[0].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right),t[1].setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.Both),t[2].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Right:PP.Ui.StripePanel.SeparatorsVisibility.Left);break;case 4:t[0].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right),t[1].setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.Both),t[2].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right),t[3].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Right:PP.Ui.StripePanel.SeparatorsVisibility.Left);break;default:if(r%2==0){for(t[0].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right),i=1;i<r-1;i++)t[i].setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.Both);t[r/2].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right),t[r-1].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Right:PP.Ui.StripePanel.SeparatorsVisibility.Left)}else{for(t[0].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Left:PP.Ui.StripePanel.SeparatorsVisibility.Right),i=1;i<r-1;i++)t[i].setSeparatorsVisible(PP.Ui.StripePanel.SeparatorsVisibility.Both);t[r-1].setSeparatorsVisible(this._IsRTL?PP.Ui.StripePanel.SeparatorsVisibility.Right:PP.Ui.StripePanel.SeparatorsVisibility.Left)}}},stripeP._updatePanelsPositions=function(n){var r=n.length,t,h,f,u,i,e,o,s,c,l,a,v;if(r!==0){for(h=n==this._ContextPanels,f=this._MainNode.offsetWidth,this._updateSeparatorsVisibility(h),t=0;t<r;t++)n[t].getDomNode().style.overflow="auto";for(this._updateButtonsVisibility(f,h),u=[],i=[],t=0;t<r;t++)i.push(n[t].getDomNode().scrollWidth);for(t=0;t<r;t++)n[t].getDomNode().style.overflow="";switch(r){case 0:break;case 1:u.push((this._MainNode.offsetWidth-n[0].getDomNode().offsetWidth)/2);break;case 2:u.push((f-(i[0]+i[1]))/2),u.push((f-(i[0]+i[1]))/2+i[0]);break;case 3:u.push(0),u.push((f-i[1])/2),u.push(f-i[2]);break;case 4:u.push(0),u.push((f-(i[1]+i[2]))/2),u.push((f-(i[1]+i[2]))/2+i[1]),u.push(f-i[3]);break;default:if(u.push(0),r%2==0){for(e=0,t=1;t<r/2-1;t++)e+=i[t];for(o=(f-(i[r/2-1]+i[r/2]))/2-(u[0]+i[0]),s=(o-e)/((r-4)/2+1),t=1;t<r/2-1;t++)u.push(u[t-1]+i[t-1]+s);for(u.push((f-(i[r/2-1]+i[r/2]))/2),u.push((f-(i[r/2-1]+i[r/2]))/2+i[r/2-1]),e=0,t=r/2+1;t<r-1;t++)e+=i[t];for(o=f-i[r-1]-(u[r/2]+i[r/2]),s=(o-e)/((r-4)/2+1),t=r/2+1;t<r-1;t++)u.push(u[t-1]+i[t-1]+s);u.push(f-i[r-1])}else{for(e=0,t=1;t<(r+1)/2-1;t++)e+=i[t];for(o=(f-i[(r+1)/2-1])/2-(u[0]+i[0]),s=(o-e)/((r-3)/2+1),t=1;t<(r+1)/2-1;t++)u.push(u[t-1]+i[t-1]+s);for(u.push((f-i[(r+1)/2-1])/2),e=0,t=(r+1)/2;t<r-1;t++)e+=i[t];for(o=f-i[r-1]-(u[(r+1)/2-1]+i[(r+1)/2-1]),s=(o-e)/((r-3)/2+1),t=(r+1)/2;t<r-1;t++)u.push(u[t-1]+i[t-1]+s);u.push(f-i[r-1])}}for(n[0].getDomNode().style.left=u[0]+"px",t=1;t<r;t++)n[t].getDomNode().style.left=u[t]<u[t-1]+i[t-1]?u[t-1]+i[t-1]+"px":u[t]+"px";if(c=h?this._btn2:this._btn1,c.hide(),h)this._ContextPanelsMenu.getItems().length>0&&c.show();else for(l in this._PanelsItemsMapping)a=this.getControlById(l),v=this._PanelsItemsMapping[l],a.getIsVisible()?v.hide():c.show()}},stripeP._updatePanelsMenu=function(){var t,n,i;for(t in this._PanelsItemsMapping)n=this.getControlById(t),i=this._PanelsItemsMapping[t],n.getIsToggleButton()&&!n.getMenu()&&i.setChecked(n.getIsPressed(),!1)},stripeP._onPanelsMenuItemSelected=function(n,t){var i,u,r;for(i in this._PanelsItemsMapping)if(u=this._PanelsItemsMapping[i],t.MenuItem===u){r=this.getControlById(i),r._onClicked(r);break}},stripeP._onPanelsMenuOpening=function(){this._updatePanelsMenu()},stripeP._getPanelsItemsMapping=function(){return this._PanelsItemsMapping},stripeP._isContainGroup=function(n,t){var r,i;if(PP.isString(t))return n===t;for(r=t.length,i=0;i<r;i++)if(n===t[i])return!0;return!1},stripeP.getActiveGroupName=function(){return this._ActiveGroupName},stripeP.setActiveGroupName=function(n){this._ActiveGroupName=n;var i=this._ContextPanels.length,t;if(this._ActiveGroupName){for(t=0;t<i;t++)this._isContainGroup(this._ActiveGroupName,this._ContextPanels[t].getGroupName())?this._ContextPanels[t].show():this._ContextPanels[t].hide();this._updatePanelsPositions(this._ContextPanels)}else for(t=0;t<i;t++)this._ContextPanels[t].hide()},stripeP.getPanels=function(){return this._Panels},stripeP.getContextPanels=function(){return this._ContextPanels},stripeP.getPanelsMenu=function(){return this._PanelsMenu},stripeP.getContextPanelsMenu=function(){return this._ContextPanelsMenu},stripeP.getImageList=function(){return this._ImageList},stripeP.setIsRTL=function(){var t,n,i;for(PP.Ui.Stripe.base.setIsRTL.apply(this,arguments),this._btn1.setIsRTL(this._IsRTL),this._btn2.setIsRTL(this._IsRTL),t=this._Panels.length,n=0;n<t;n++)this._Panels[n].setIsRTL(this._IsRTL);for(t=this._ContextPanels.length,n=0;n<t;n++)this._ContextPanels[n].setIsRTL(this._IsRTL);return this._updateSeparatorsVisibility(!1),this._updateSeparatorsVisibility(!0),i=this._MainNode.offsetWidth,this._updateButtonsVisibility(i,!1),this._updateButtonsVisibility(i,!0),this},stripeP.setWidth=function(){PP.Ui.Stripe.base.setWidth.apply(this,arguments),this.updateSize()},stripeP.getNavigationNode=function(){return this._NavigationNode},stripeP.beginUpdate=function(){this._updateInProgress=!0},stripeP.endUpdate=function(){this._updateInProgress=!1,this.updateSize()},stripeP.addPanel=function(n,t){t=typeof t=="undefined"?!1:t==!0,n=this._initPanel(n,t),t?(this._ContextPanels.push(n),n.addToNode(this._ContextNode)):(this._Panels.push(n),n.addToNode(this._MainNode)),this._updateInProgress||this.updateSize()},stripeP.removePanel=function(n,t,i){i=typeof i=="undefined"?!1:i==!0;var r;r=i?this._ContextPanels.indexOf(n):this._Panels.indexOf(n),i?(this._ContextPanels.splice(r,1),n.removeFromDOM(this._ContextNode)):(this._Panels.splice(r,1),n.removeFromDOM(this._MainNode)),t=typeof t=="undefined"?!0:t==!0,t&&n.dispose(),this._updateInProgress||this.updateSize()},stripeP.updateSize=function(){this._updatePanelsPositions(this._Panels),this._updatePanelsPositions(this._ContextPanels)},stripeP.getControlById=function(n){for(var i=null,u=this._Panels.length,r,t=0;t<u;t++)if(i=this._Panels[t].getControlById(n),i)return i;for(r=this._ContextPanels.length,t=0;t<r;t++)if(i=this._ContextPanels[t].getControlById(n),i)return i;return i},stripeP.dispose=function(){delete this._ImageList,PP.Ui.Stripe.base.dispose.apply(this,arguments)},stripeP=null,(PP.Ui.TreeListSort=function(){var n=PP.Ui.TreeListSort;n.none=0,n.asc=1,n.desc=2,PP.initEnum(n,"PP.Ui.TreeListSort")})(),(PP.Ui.TreeColumnType=function(){var n=PP.Ui.TreeColumnType;n.string=0,n.number=1,PP.initEnum(n,"PP.Ui.TreeColumnType")})(),(PP.Ui.TreeListEventType=function(){var n=PP.Ui.TreeListEventType;n.none=null,n.node="node",n.line="line",n.text="text",n.checkBox="cbox",n.lastColumn="last",PP.initEnum(n,"PP.Ui.TreeListEventType")})(),PP.Ui.TreeList=function(){this._Nodes=[],this._Columns=null,this._ImageList=null,this._IsRTL=!1,this._ShowColumns=!1,this._CaptionVisible=!1,this._EnableResizeColumn=!0,this._EnableColumnsMenu=!0,this._EnableSortColumns=!0,this._SortSequence=[0,1,2],this._EnableSearch=!0,this._DblClickExpand=!0,this._ShowHints=!1,this._RowSelect=!1,this._MultiSelect=!1,this._IsCSMultiSelect=!1,this._EmptySelection=!0,this._WordWrap=!1,this._EnableKeyNavigation=!0,this._UseCtrlSelect=!0,this._UseShiftSelect=!0,this._ShowLines=!0,this._ShowGridLines=!1,this._CheckBoxes=!1,this._EnableEdit=!1,this._RightButtonSelect=!1,this._AreaSelect=!0,this._SelectEditorText=!0,this._FilterCaseSensitive=!0,this._EnableHighlight=!1,this._HighlightFont=null,this._HighlightColor=!1,this._EnableSelectedHighlight=!1,this._SelectedHighlightFont=null,this._SelectedHighlightColor=!1,this._defineEvents(["HintShowing","LoadSubNodesOf","BeforeCollapse","Collapse","BeforeExpand","Expand","NodeClick","NodeDblClick","MouseDownNode","SelectionChanging","SelectionChanged","CheckBoxClick","CheckedChanged","NodeDragStart","NodeEditing","NodeEdited","NodeEditCanceled","Finding","Found"]),PP.Ui.TreeList.base.constructor.apply(this,arguments),this._DomTable=null,this._DomTBody=null,this._DomSpacer=null,this._DomColgroup=null,this._DomColumns=[],this._DomCaptionDiv=null,this._DomEditor=null,this._DomSearch=null,this._DomFocus=null,this._DomArea=null,this._TreeNodes=null,this._Hint=null,this._ScrollV=null,this._ScrollH=null,this._SearchPanel=null,this._RowIndex=[],this._KeyIndex={},this._SearchIndex=[],this._NextKey=0,this._ViewNodeHeight=0,this._CaptionHeight=0,this._TreeHeight=0,this._TreeLastNodesCount=0,this._NodesCount=0,this._FirstVisibleIndex=0,this._LastVisibleIndex=0,this._VisibleNodesCount=0,this._FocusedNode=null,this._SelectedNode=null,this._SelectedCount=0,this._mouseShift=!1,this._mouseCtrl=!1,this._SortColumn=-1,this._SortMethod=PP.Ui.TreeListSort.none,this._HintNode=null,this._HintNodeNew=null,this._HintActive=!1,this._HintX=-1,this._HintY=-1,this._HintTimeout=null,this._LastSearch=null,this._LastFound=null,this._LastFoundI=-1,this._VScrollWidth=0,this._HScrollHeight=0,this._IsCSMultiSelect&&(this._MultiSelect=!1),this._render()},PP.initClass(PP.Ui.TreeList,PP.Ui.Control,"TreeList"),PP.Object.defineProps(PP.Ui.TreeList,["EnableHighlight","HighlightFont","HighlightColor","EnableSelectedHighlight","SelectedHighlightFont","SelectedHighlightColor"],!1),PP.Object.defineProps(PP.Ui.TreeList,["FilterCaseSensitive"],!0),treeListP=PP.Ui.TreeList.prototype,treeListP._render=function(){var n,t,i;this._DomNode=document.createElement("div"),this._DomNode.className="PPTreeList PPNoSelect "+this._Class,this._DomNode.id=this._Id,this._DomNode.tabIndex=1,this._DomCaptionDiv=document.createElement("div"),this._DomCaptionDiv.className="caption",n=document.createElement("table"),t=document.createElement("thead"),this._DomCaptionTr=document.createElement("tr"),t.appendChild(this._DomCaptionTr),n.appendChild(t),this._DomCaptionDiv.appendChild(n),this._DomNode.appendChild(this._DomCaptionDiv),this._DomDiv=document.createElement("div"),this._DomDiv.className="data",this._DomTable=document.createElement("table"),this._DomColgroup=document.createElement("colgroup"),this._DomTBody=document.createElement("tbody"),this._DomTable.appendChild(this._DomColgroup),this._DomTable.appendChild(this._DomTBody),this._DomDiv.appendChild(this._DomTable),this._DomNode.appendChild(this._DomDiv),i=document.createElement("div"),i.className="void",this._DomDiv.appendChild(i),this._DomSpacer=document.createElement("div"),this._DomSpacer.className="spacer",this._DomNode.appendChild(this._DomSpacer),this._DomEditor=document.createElement("input"),this._DomEditor.className="editor",this._DomFocus=document.createElement("div"),this._DomFocus.className="focus",this._DomDiv.appendChild(this._DomFocus),this._DomArea=document.createElement("div"),this._DomArea.className="area",this._DomArea.appendChild(document.createElement("div")),this._DomNode.appendChild(this._DomArea),this._Hint=new PP.Ui.ToolTip({ParentNode:document.body}),this._ScrollV=new PP.Ui.ScrollBar({ParentNode:this._DomNode,IsVertical:!0}),this._ScrollV.setEnabled(this._Enabled),this._ScrollV.setDraggerMinSize(15),this._ScrollV.MoveScroll.add(this._onMoveScrollV,this),this._ScrollV.MovedScroll.add(this._onMovedScrollV,this),this._ScrollH=new PP.Ui.ScrollBar({ParentNode:this._DomNode,IsVertical:!1}),this._ScrollH.setEnabled(this._Enabled),this._ScrollH.setDraggerMinSize(15),this._ScrollH.MoveScroll.add(this._onMoveScrollH,this),this._ScrollH.MovedScroll.add(this._onMovedScrollH,this),this._SearchPanel=new PP.Ui.DropPanel({ParentNode:document.body,IsResizable:!1,UseScrollBox:!1,MinDropDownHeight:30}),this._SearchPanel.addClass("PPTreeListSearchPanel"),this._SearchPanel.Closed.add(this._onSearchClosed,this),this._SearchPanel.MouseDown.add(this._onSearchMouseDown,this),this._DomSearch=document.createElement("input"),this._DomSearch.className="PPTreeListSearchInput",this._SearchPanel.setContent(this._DomSearch),this.setColumns(this._Columns,!1),PP.Ui.TreeList.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode),this._buildIndex(),this._checkSelection(),this.updateSize(),this.setIsRTL(this._IsRTL),this.setEnabled(this._Enabled),this._Columns.update(),this._SortSequence[0]&&this.sort(0,this._SortSequence[0],null,!0),this._EnableHighlight&&this.addClass("highlighted")},treeListP._bindEvents=function(){PP.Ui.TreeList.base._bindEvents.apply(this,arguments),this._addEvent(this._DomNode,"touchstart",this._onNodeTouchStart),this._addEvent(this._DomNode,"keydown",this._onNodeKeyDown),this._addEvent(this._DomNode,"blur",this._onBlur),this._addEvent(this._DomTable,"dblclick",this._onTableDblClick),this._addEvent(this._DomTable,"click",this._onTableClick),this._addEvent(this._DomFocus,"dblclick",this._onFocusDblClick),this._addEvent(this._DomFocus,"click",this._onFocusClick),this._addEvent(this._DomFocus,"contextmenu",this._onFocusContextMenu),this._addEvent(this._DomTable,"mouseover",this._onMouseOver),this._addEvent(this._DomTable,"mouseout",this._onMouseOut),this._addEvent(this._DomFocus,"mouseover",this._onFocusMouseOver),this._addEvent(this._DomFocus,"mouseout",this._onFocusMouseOut),this._addEvent(this._DomEditor,"blur",this._onInputBlur),this._addEvent(this._DomEditor,"keydown",this._onInputKeyDown),this._addEvent(this._DomSearch,"keydown",this._onSearchKeyDown)},treeListP._unBindEvents=function(){this._removeEvent(this._DomNode,"touchstart",this._onNodeTouchStart),this._removeEvent(this._DomNode,"keydown",this._onKeyDown),this._removeEvent(this._DomNode,"blur",this._onBlur),this._removeEvent(this._DomTable,"dblclick",this._onTableDblClick),this._removeEvent(this._DomTable,"click",this._onTableClick),this._removeEvent(this._DomFocus,"dblclick",this._onFocusDblClick),this._removeEvent(this._DomFocus,"click",this._onFocusClick),this._removeEvent(this._DomFocus,"contextmenu",this._onFocusContextMenu),this._removeEvent(this._DomTable,"mouseover",this._onMouseOver),this._removeEvent(this._DomTable,"mouseout",this._onMouseOut),this._removeEvent(this._DomFocus,"mouseover",this._onFocusMouseOver),this._removeEvent(this._DomFocus,"mouseout",this._onFocusMouseOut),this._removeEvent(this._DomEditor,"blur",this._onInputBlur),this._removeEvent(this._DomEditor,"keydown",this._onInputKeyDown),this._removeEvent(this._DomSearch,"keydown",this._onSearchKeyDown),PP.Ui.TreeList.base._unBindEvents.apply(this,arguments)},treeListP._adjustMarkup=function(){PP.Ui.TreeList.base._adjustMarkup.apply(this,arguments),this._IsRTL?this._ScrollH.scrollTo(99999):this._ScrollH.scrollTo(0),this._updateScrolls(),this._styleTree()},treeListP.dispose=function(){if(this.isLive()){delete this._ImageList,this._buildIndex();for(var n in this._KeyIndex)this._KeyIndex.hasOwnProperty(n)&&this._KeyIndex[n]._TreeNode&&this._KeyIndex[n]._TreeNode.dispose();PP.IsIE&&(this._DomNode.innerHTML=""),PP.Ui.TreeList.base.dispose.apply(this,arguments)}},treeListP.addToNode=function(){PP.Ui.TreeList.base.addToNode.apply(this,arguments),this.updateSize()},treeListP._onNodeTouchStart=function(n,t){this._addEvent(this._DomNode,"touchmove",this._onNodeTouchMove),this._addEvent(this._DomNode,"touchend",this._onNodeTouchEnd),this._touchX=t.Event.targetTouches[0].clientX,this._touchY=t.Event.targetTouches[0].clientY,this._touchKX=100/(this._Columns.getFullWidth()-this._Width+2+this._getVScrollWidth())},treeListP._onNodeTouchMove=function(n,t){var i=t.Event.targetTouches[0].clientX,r=t.Event.targetTouches[0].clientY,u;this._FirstVisibleIndex+=(this._touchY-r)/this._ViewNodeHeight,this._updatePosition(),this._shiftTree(),this._touchX-i&&this._ScrollH.getIsVisible()&&(u=this._ScrollH.getValue(),this._ScrollH.scrollTo(u+this._touchKX*(this._touchX-i),!0)),this._touchX=i,this._touchY=r},treeListP._onNodeTouchEnd=function(){delete this._touchX,delete this._touchY,this._removeEvent(this._DomNode,"touchmove",this._onNodeTouchMove),this._removeEvent(this._DomNode,"touchend",this._onNodeTouchEnd),this._updateScrolls()},treeListP._onNodeKeyDown=function(n,t){return t.Event.keyCode===114?(this.showSearch(),t.Event.stopPropagation(),t.Event.returnValue=!1,t.Event.keyCode=0,!1):t.Event.ctrlKey&&t.Event.keyCode===70?(this.showSearch(),t.Event.stopPropagation(),t.Event.returnValue=!1,t.Event.keyCode=0,!1):void 0},treeListP._onMoveScrollV=function(){PP.IEVer===7&&this._Columns.getItem(0)&&(this._Columns.getItem(0)._DomCol.style.width="999999px"),this._FirstVisibleIndex=this._WordWrap?this._ScrollV.getValue()*(this._NodesCount-this._TreeLastNodesCount)/100:this._ScrollV.getValue()*(this._NodesCount-this._VisibleNodesCount)/100,this._FirstVisibleIndex<0&&(this._FirstVisibleIndex=0),this._shiftTree()},treeListP._onMovedScrollV=function(){PP.IsIE&&PP.IEVer<9&&this.getFullTreeHeight(),this._updateScrolls(),this._updatePosition(),this._drawTree()},treeListP._onMoveScrollH=function(){var u=this._getVScrollWidth(),r=0,i=this._ScrollH.getValue();i>100&&(i=100),i<0&&(i=0),this._IsRTL&&(i=100-i),r=i?Math.floor(i*(this._Columns.getFullWidth()-this._Width+2+u)/100):0,this._IsRTL&&!PP.IsIE&&(r=this._getVScrollWidth()+this._Columns.getFullWidth()-this._Width-r),this._DomCaptionDiv.scrollLeft=r,this._DomDiv.scrollLeft=r},treeListP._onMovedScrollH=function(){this._drawTree()},treeListP._onContextMenu=function(n,t){var i,r;this._Enabled&&(i=this._getEventNode(t.Event),this._RightButtonSelect&&i&&(this._fireSelectionChanging(i,t.Event),r=this._setSelectedForNode(i,!0),this._fireSelectionChanged(i,r),this._focusNode(i,!0)),t.TreeNode=this._getTreeNode(i),PP.Ui.TreeList.base._onContextMenu.apply(this,arguments))},treeListP._onFocusContextMenu=function(n,t){this._RightButtonSelect&&this._onFocusClick(n,t);var i=this._getEventNode(t.Event);t.TreeNode=this._getTreeNode(i),PP.Ui.TreeList.base._onContextMenu.apply(this,arguments)},treeListP._getEventNode=function(n){for(var t=n.target,i=null;t;){if(t.tagName==="TR"){if(t.id===undefined||!this._KeyIndex[t.id])return null;i=this._KeyIndex[t.id];break}t=t.parentNode}return!i||!i._Dom?null:i},treeListP._getEventType=function(n){var i=n.target,t=i.className;return t=t.indexOf(" ")>0?t.substr(0,t.indexOf(" ")):t},treeListP._getEventColumn=function(n){for(var t=n.target,i=null,r;t.parentNode;){if(t.tagName=="TD"){i=t;break}t=t.parentNode}return i?(r=i.cellIndex,r>=this._Columns.getCount())?-1:r:-1},treeListP._onBlur=function(){this._editTimeout&&PP.clearTimeout(this._editTimeout)},treeListP._onTableClick=function(n,t){var i,r,u,f;(this._editTimeout&&PP.clearTimeout(this._editTimeout),i=this._getEventType(t.Event),r=this._getEventNode(t.Event),this._mouseShift=t.Event.shiftKey,this._mouseCtrl=t.Event.ctrlKey,this._mouseAlt=t.Event.altKey,u=this._getTreeNode(r),f={Node:u,Type:i,AltKey:this._mouseAlt,CtrlKey:this._mouseCtrl,ShiftKey:this._mouseShift,Cancel:!1},this.NodeClick.fire(this,f),f.Cancel)||(this.MouseDownNode.fire(this,{Node:u,Type:i,AltKey:this._mouseAlt,CtrlKey:this._mouseCtrl,ShiftKey:this._mouseShift}),this._click(r,i,t))},treeListP._onFocusClick=function(n,t){var i,r,u;this._FocusedNode&&(this._DomFocus.style.display="none",i={target:document.elementFromPoint(t.Event.pageX,t.Event.pageY)},this._DomFocus.style.display="block",r=this._getEventType(i),u=this._getEventNode(i),this._click(u,r,t))},treeListP._click=function(n,t,i){if(n){this._mouseShift=i.Event.shiftKey,this._mouseCtrl=i.Event.ctrlKey;switch(t){case"node":this._clickNode(n,i);break;case"cbox":this._clickCheckBox(n,i);break;default:this._clickRow(n,i)}}},treeListP._clickNode=function(n){(n.Nodes&&n.Nodes.length||n.HasChild)&&(n.Expanded?this._collapseNode(n):this._expandNode(n))},treeListP._clickCheckBox=function(n){n.Checked=!n.Checked,this._styleNode(n);var i=this._getTreeNode(n);this.CheckedChanged.fire(this,{Node:i})},treeListP._clickRow=function(n,t){var i,o,f,r,s,u,e;if(t.Event.shiftKey&&this._UseShiftSelect&&this._FocusedNode&&(this._MultiSelect||this._IsCSMultiSelect)){this._fireSelectionChanging(n),i=this._setSelectedForNodesFromTo(this._FocusedNode,n,!0),this._fireSelectionChanged(n,i);return}if(o=new Date,f=o.getTime(),!this._LastClickTime||this._LastClickNode!==n||this._LastClickTime+500<f)if(r=this._getEventColumn(t.Event),n===this._FocusedNode&&this._EnableEdit&&r>=0&&this._Columns.getItem(r)._Editable&&n.Editable!==!1)this._initEdit(n,r);else{if(s=this._fireSelectionChanging(n,t.Event),s)return;u=t.Event.ctrlKey,e=!n.Selected||this._IsCSMultiSelect&&!u,i=this._setSelectedForNode(n,e,!1,u),u&&this._UseCtrlSelect&&n.Nodes&&(this._MultiSelect||this._IsCSMultiSelect)&&(i=i.concat(this._setSelectedForSubTree(n.Nodes,e))),this._fireSelectionChanged(n,i),this._focusNode(n),PP.addClass(n._Dom,"hover")}this._LastClickTime=f,this._LastClickNode=n},treeListP._onTableDblClick=function(n,t){var i,u,f,r;if(this._editTimeout&&PP.clearTimeout(this._editTimeout),i=this._getEventNode(t.Event),u=this._getEventType(t.Event),i){if(this._mouseShift=t.Event.shiftKey,this._mouseCtrl=t.Event.ctrlKey,this._mouseAlt=t.Event.altKey,f=this._getTreeNode(i),r={Node:f,Type:u,AltKey:this._mouseAlt,CtrlKey:this._mouseCtrl,ShiftKey:this._mouseShift,Cancel:!1},this.NodeDblClick.fire(this,r),r.Cancel)return;this._DblClickExpand&&(i.Expanded?this._collapseNode(i):this._expandNode(i))}},treeListP._onFocusDblClick=function(n,t){if(this._editTimeout&&PP.clearTimeout(this._editTimeout),this._FocusedNode){this._mouseShift=t.Event.shiftKey,this._mouseCtrl=t.Event.ctrlKey;var i=this._getTreeNode(this._FocusedNode);this.NodeDblClick.fire(this,{Node:i})}},treeListP._initEdit=function(n,t){this._editTimeout&&PP.clearTimeout(this._editTimeout),this._editTimeout=PP.setTimeout(this._startEdit,500,{self:this,node:n,column:t})},treeListP._startEdit=function(n){var t=n.self,i=n.node,r=n.column,u,f;if(t._EditNode!==i||t._EditColumn!==r){if(t._EditNode&&t._stopEdit(),!i._DomColumns||!i._DomColumns[r])return;r>=0&&(f=t._getTreeNode(i),t.NodeEditing.fire(t,{Node:f,Column:r}),u=t._ShowColumns?t._Columns.getItem(r)._Width-8:t._Width-t._getVScrollWidth()-8,i._DomColumns[r].className.substr(0,4)==="tree"&&(t._WordWrap?(u=i._DomContent[r].innerHTML="x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x",u=i._DomContent[r].offsetWidth-6):u=u-i._DomControls.offsetWidth),i._DomContent[r].innerHTML="",i._DomContent[r].appendChild(t._DomEditor),PP.addClass(i._DomContent[r],"edit"),t._DomEditor.value=PP.String.unescapeHTML(r?i.Columns[r-1]:i.Text),t._DomEditor.style.width=t._checkValue(u)+"px",t._DomEditor.focus(),t._EditNode=i,t._EditColumn=r,t._SelectEditorText&&PP.setTimeout(t._selectEdit,0,{Context:t,Target:t._DomEditor}))}},treeListP._selectEdit=function(n){n.Target.select(),PP.IsFF&&n.Target.setSelectionRange(0,n.Target.value.length)},treeListP._stopEdit=function(){var r;if(this._EditNode){var n=this._EditNode,t=this._EditColumn,i=PP.String.escapeHTML(this._DomEditor.value),u=t?n.Columns[t-1]:n.Text;u!=i?(this._EditNode=null,this._EditColumn=null,t?n.Columns[t-1]=i:n.Text=i,PP.removeClass(n._DomContent[t],"edit"),n._DomContent[t].innerHTML="",this._setNodeContent(n,t,i),this._styleNode(n),r=this._getTreeNode(n),this.NodeEdited.fire(this,{Node:r,Column:this._EditColumn})):this._cancelEdit(!0),this._buildIndex(),this._updateScrolls()}},treeListP._cancelEdit=function(n){var t,i,r,u;this._EditNode&&(t=this._EditNode,i=this._EditColumn,this._EditNode=null,this._EditColumn=null,PP.removeClass(t._DomContent[i],"edit"),r=i?t.Columns[i-1]:t.Text,t._DomContent[i].innerHTML="",this._setNodeContent(t,i,r),this._styleNode(t),u=this._getTreeNode(t),this.NodeEditCanceled.fire(this,{Node:u,Column:i,Esc:!n}))},treeListP._checkSelection=function(){var n,t;if(!this._EmptySelection&&!this._SelectedCount)if(this._FocusedNode)this._FocusedNode.Selected=!0,this._incrementSelect(this._FocusedNode),this._SelectedCount+=1;else for(n in this._RowIndex)if(this._RowIndex[n].CanSelect!==!1){this._RowIndex[n].Selected=!0,this._incrementSelect(this._RowIndex[n]),this._SelectedCount+=1;break}if(!this._MultiSelect&&!this._IsCSMultiSelect){for(t in this._KeyIndex)this._KeyIndex[t].Selected&&(this._KeyIndex[t].Selected=!1,this._SelectedNode=this._KeyIndex[t]);this._SelectedNode&&(this._SelectedNode.Selected=!0)}},treeListP._setNodeContent=function(n,t,i){if(i===undefined&&(i=""),t<this._Columns.getCount()&&this._Columns.getItem(t)._FormatMethod){var r=this._Columns.getItem(t)._FormatMethod;n._DomContent[t].innerHTML=r instanceof PP.Object?r.format(i):r(i)}else n._DomContent[t].innerHTML=i},treeListP._onInputBlur=function(){this._stopEdit()},treeListP._onInputKeyDown=function(n,t){switch(t.Event.keyCode){case PP.Key.Enter:this._stopEdit();break;case PP.Key.Esc:this._cancelEdit()}t.Event.stopPropagation()},treeListP._onSearchKeyDown=function(n,t){var i,r;switch(t.Event.keyCode){case PP.Key.Enter:i=this._DomSearch.value,i&&(r=this.find(i,0,!0),r||(this._DomSearch.className="PPTreeListSearchInput notfound",PP.setTimeout(function(n){n.self._DomSearch.className="PPTreeListSearchInput"},1e3,{self:this})));break;case PP.Key.Esc:this._SearchPanel.hide()}},treeListP._onSearchClosed=function(){this.setFocus(),this._DomNode.focus(),PP.setTimeout(this._onSearchClosedTimeout,100,{self:this})},treeListP._onSearchClosedTimeout=function(n){n.self._DomNode.focus()},treeListP._onSearchMouseDown=function(n,t){return t.Event.stopPropagation(),t.Event.returnValue=!1,!1},treeListP._onMouseOver=function(n,t){var i=this._getEventNode(t.Event);(i&&(this._HoveredNode&&PP.removeClass(this._HoveredNode._Dom,"hover"),PP.addClass(i._Dom,"hover"),this._HoveredNode=i),this._ShowHints)&&(this._HintActive=!0,this._HintNode=null,this._HintNodeNew=i,this._HintX=t.Event.pageX,this._HintY=t.Event.pageY,this._Hint.hide(),this._checkHint({self:this}))},treeListP._onMouseOut=function(n,t){var i=this._getEventNode(t.Event);i&&(PP.removeClass(i._Dom,"hover"),this._HoveredNode==i&&(this._HoveredNode=null)),this._HintActive=!1,this._Hint.hide()},treeListP._onFocusMouseOver=function(){PP.addClass(this._FocusedNode._Dom,"hover")},treeListP._onFocusMouseOut=function(){PP.removeClass(this._FocusedNode._Dom,"hover")},treeListP._checkHint=function(n){var t=n.self;t._HintActive&&t._ShowHints&&!t._EditNode&&(this._HintTimeout&&PP.clearTimeout(this._HintTimeout),t._HintNode&&PP.isVisible(t._HintNode._Dom)?(t._Hint.hide(),t._Hint.setContent(t._HintNode.Text),t.HintShowing.fire(t,{Node:t._getTreeNode(t._HintNode),Hint:t._Hint}),t._Hint.show(t._HintX+10,t._HintY+5)):(t._HintNode=t._HintNodeNew,this._HintTimeout=PP.setTimeout(t._checkHint,1e3,{self:t})))},treeListP._onMouseDown=function(n,t){return(this._editTimeout&&PP.clearTimeout(this._editTimeout),t.Event.button>1&&(PP.getCaptureNode()||PP.Ui.Control._DragDrop.Data))?!1:PP.Ui.TreeList.base._onMouseDown.apply(this,arguments)},treeListP._onDragDropMouseMove=function(n,t){return t.Node=this._getTreeNode(this._getEventNode(t.Event)),this._DragDropClick=!1,t.Node&&!t.Node.getSelected()&&(this._onTableClick(n,t),this._DragDropClick=!0),PP.Ui.TreeList.base._onDragDropMouseMove.apply(this,arguments)},treeListP._onDragDropMouseUp=function(n,t){var i=this._getEventNode(t.Event);if(i)return this._DragDropClick||PP.IsFF||this._onTableClick(n,t),delete this._DragDropClick,PP.Ui.TreeList.base._onDragDropMouseUp.apply(this,arguments)},treeListP._getTreeNode=function(n){return n?(n._TreeNode||(n._TreeNode=new PP.Ui.TreeNode({JSON:n,Owner:this})),n._TreeNode):null},treeListP._buildIndex=function(){var n,i,t;if(!this._IsUpdating){for(this._NodesCount=0,this._SelectedCount=0,this._KeyIndex={},this._buildKeyIndex(null,this._Nodes),this._RowIndex=[],n=this.getRootNode(),n._JSON.Nodes&&this._buildRowIndex(null,n._JSON.Nodes,n._JSON.NodesSort,n._JSON.NodesFilter),i=this._RowIndex.length,t=0;t<i;t++)this._RowIndex[t]._index=t;this._NodesCount=i}},treeListP._buildRowIndex=function(n,t,i,r){var o,u,c;i&&i.method&&(t=t.slice(0),this._Sort=i,t.sort(this._sortRowIndex));var l=t.length,h=0,f,s=null,e=null;for(o=l-1;o>=0;o--)u=t[o],f=0,u.Nodes&&(u.Expanded?(i&&i.recursive&&(u.NodesSort=null),f=this._buildRowIndex(u,u.Nodes,u.NodesSort&&u.NodesSort.method?u.NodesSort:i,u.NodeFilter?u.NodeFilter:r)):f=this._checkFilter(u,u.Nodes,u.NodeFilter?u.NodeFilter:r)),u._hidden=!0,c=new RegExp(r,this._FilterCaseSensitive?"":"i"),(f||!r||u.Text.search(c)>-1)&&(u._hidden=!1,h+=1,e||(e=u),s=u,u._isFolder=f?f:!1,r||(u._isFolder=u._isFolder||u.HasChild),this._RowIndex.unshift(u)),u._first=!1,u._last=!1;return s&&(s._first=!0),e&&(e._last=!0),n||this.getFullTreeHeight(),h},treeListP._checkFilter=function(n,t,i){for(var o=t.length,e=0,f,r,u=o-1;u>=0;u--)f=0,r=t[u],r._hidden=!0,r.Nodes&&(f=this._checkFilter(r,r.Nodes,r.NodeFilter?r.NodeFilter:i)),(f||!i||r.Text.indexOf(i)>-1)&&e++;return e},treeListP._buildSearchIndex=function(n,t,i){var f,u,r;for(i&&i.method&&(t=t.slice(0),this._Sort=i,t.sort(this._sortRowIndex)),f=t.length,u=0;u<f;u++)r=t[u],this._SearchIndex.push(r),r.Nodes&&(i&&i.recursive&&(r.NodesSort=null),this._buildSearchIndex(r,r.Nodes,r.NodesSort&&r.NodesSort.method?r.NodesSort:i))},treeListP._sortRowIndex=function(n,t){var i=n._owner,r,u,s,o,h,f,e;if(!i._Sort.method||!i._Sort.column<0)return 0;if(s=i._Columns.getItem(i._Sort.column)._Type,o=i._Columns.getItem(i._Sort.column)._SortMethod,o)return h={type:s,column:i._SortColumn,direction:i._SortMethod},i._SortMethod===1?o(n,t,h):o(t,n,h);if(i._Sort.property?(r=n[i._Sort.property],u=t[i._Sort.property]):(r=i._Sort.column===0?n.Text:n.Columns[i._Sort.column-1],u=i._Sort.column===0?t.Text:t.Columns[i._Sort.column-1]),r=(r===0||r?r+"":"").toLowerCase(),u=(u===0||u?u+"":"").toLowerCase(),s===PP.Ui.TreeColumnType.number){if(f=parseFloat(r),e=parseFloat(u),isNaN(f)&&!isNaN(e))return 1;if(!isNaN(f)&&isNaN(e))return-1;isNaN(f)&&isNaN(e)&&(f=r,e=u),r=f,u=e}switch(i._Sort.method){case PP.Ui.TreeListSort.asc:return r<u?-1:r==u?0:1;case PP.Ui.TreeListSort.desc:return u<r?-1:u==r?0:1;case PP.Ui.TreeListSort.none:return r<u?-1:r==u?0:1}return 0},treeListP._buildKeyIndex=function(n,t){for(var u=t.length,i,r=0;r<u;r++)i=t[r],i._parent=n,i._owner=this,i.Columns||(i.Columns=[]),i.Selected&&(n&&n.HasChildSelected++,this._SelectedCount++),(!PP.isDefined(i.Key)||this._KeyIndex[i.Key])&&(i.Key=this._getNewKey()),this._KeyIndex[i.Key]=i,i.Nodes?(i.HasChildSelected=0,this._buildKeyIndex(i,i.Nodes),n&&(n.HasChildSelected+=i.HasChildSelected)):i.HasChild||(i.HasChildSelected=0)},treeListP._getNewKey=function(){while(this._KeyIndex[this._NextKey])this._NextKey++;var n=this._NextKey;return this._NextKey++,n},treeListP._clearTree=function(n){var i,r,t,u;if(!this._IsUpdating){for(i=this._DomTBody.childNodes,r=i.length,t=r-1;t>=0;t--)this._DomTBody.removeChild(i[t]);if(n!==!1)for(u=this._RowIndex.length,t=0;t<u;t++)this._RowIndex[t]._Dom&&(this._RowIndex[t]._Dom=null)}},treeListP._shiftTree=function(){if(!this._IsUpdating){this._LastVisibleIndex=Math.floor(this._FirstVisibleIndex+this._VisibleNodesCount),this._LastVisibleIndex>=this._NodesCount&&(this._LastVisibleIndex=this._NodesCount-1);var n;if(this._FirstVisibleIndex>this._LastVisibleIndexOld||this._LastVisibleIndex<this._FirstVisibleIndexOld){if(PP.IEVer===8)for(n=Math.floor(this._FirstVisibleIndex);n<=this._LastVisibleIndex;n++)this._drawNode(this._RowIndex[n],!0),this._styleNode(this._RowIndex[n]);this._drawTree();return}for(this._styleFocus(),n=Math.floor(this._FirstVisibleIndexOld);n>=Math.floor(this._FirstVisibleIndex);n--)this._drawNode(this._RowIndex[n],!0),this._styleNode(this._RowIndex[n]);for(n=this._LastVisibleIndexOld+1;n<=this._LastVisibleIndex;n++)this._drawNode(this._RowIndex[n],!1),this._styleNode(this._RowIndex[n]);for(n=Math.floor(this._FirstVisibleIndexOld);n<Math.floor(this._FirstVisibleIndex);n++)this._removeNode(this._RowIndex[n]);for(n=this._LastVisibleIndex+1;n<=this._LastVisibleIndexOld;n++)this._removeNode(this._RowIndex[n]);this._DomDiv.scrollTop=this._FirstVisibleIndex>0?this._WordWrap?parseInt(this._RowIndex[Math.floor(this._FirstVisibleIndex)]._Dom.offsetHeight)*(this._FirstVisibleIndex-Math.floor(this._FirstVisibleIndex)):this._ViewNodeHeight*(this._FirstVisibleIndex-Math.floor(this._FirstVisibleIndex)):0,this._FirstVisibleIndexOld=this._FirstVisibleIndex,this._LastVisibleIndexOld=this._LastVisibleIndex}},treeListP._styleFocus=function(n){if(!this._IsUpdating)if(this._RowSelect&&this._FocusedNode&&this._FocusedNode._Dom){var u=this._FocusedNode._Dom,i,r,t;this._WordWrap?(i=PP.calculateOffset(u),r=PP.calculateOffset(this._DomTable),this._DomFocus.style.top=i.Y>=r.Y?this._checkValue(i.Y-r.Y)+"px":this._checkValue(i.Y-r.Y)+"px"):this._DomFocus.style.top=(this._FocusedNode._index-Math.floor(this._FirstVisibleIndex))*this._ViewNodeHeight+"px",this._ShowColumns?(t=u.offsetWidth-3,n&&(t-=this._getVScrollWidth())):t=parseInt(this._Columns.getItem(0)._DomNode.style.width)-this._getVScrollWidth(),this._DomFocus.style.width=PP.IsIE?this._checkValue(t+1)+"px":this._checkValue(t)+"px",this._DomFocus.style.height=this._checkValue(u.clientHeight-3)+"px",this._DomFocus.style.display=t<0||this._WordWrap&&i.Y<r.Y?"none":"block"}else this._DomFocus.style.display="none"},treeListP._removeNode=function(n){n&&n._Dom&&n._Dom.parentNode==this._DomTBody&&this._DomTBody.removeChild(n._Dom)},treeListP._drawTree=function(){if(!this._IsUpdating){var n;for(this._LastVisibleIndex=Math.floor(this._FirstVisibleIndex+this._VisibleNodesCount),this._LastVisibleIndex>=this._NodesCount&&(this._LastVisibleIndex=this._NodesCount-1),this._clearTree(!1),n=Math.floor(this._FirstVisibleIndex);n<=this._LastVisibleIndex;n++)this._drawNode(this._RowIndex[n]);for(this._DomDiv.scrollTop=this._WordWrap?this._RowIndex[Math.floor(this._FirstVisibleIndex)]&&this._RowIndex[Math.floor(this._FirstVisibleIndex)]._Dom?parseInt(this._RowIndex[Math.floor(this._FirstVisibleIndex)]._Dom.offsetHeight)*(this._FirstVisibleIndex-Math.floor(this._FirstVisibleIndex)):0:this._ViewNodeHeight*(this._FirstVisibleIndex-Math.floor(this._FirstVisibleIndex)),n=Math.floor(this._FirstVisibleIndex);n<=this._LastVisibleIndex;n++)this._styleNode(this._RowIndex[n]);this._styleTree(),this._FirstVisibleIndexOld=this._FirstVisibleIndex,this._LastVisibleIndexOld=this._LastVisibleIndex}},treeListP._styleTree=function(){var i,t,n;this._IsUpdating||(i=this._EnableResizeColumn?"caption resizable":"caption nonresizable",i+=this._ShowGridLines?" lined":"",this._DomCaptionDiv.className=i,t=this._Columns.update(),this._styleFocus(t),n=this._RowSelect?"selectrow":"selecttext",n+=this._ShowGridLines?" lined":"",n+=this._WordWrap?" wraped":" nowrap",n+=t?" wide":" short",this._DomTable.className=n,this._updateScrolls(),this._HoveredNode&&PP.addClass(this._HoveredNode._Dom,"hover"))},treeListP._drawNode=function(n,t){var r,i;if(n._Dom==null)if(n._Dom=document.createElement("TR"),n._Dom.id=n.Key,this._drawNodeControls(n),n._DomColumns=[],n._DomContent=[],r=this._Columns._Count,this._ShowColumns)for(i=0;i<=r;i++)this._drawNodeColumn(n,i);else this._drawNodeColumn(n,0),this._drawNodeColumn(n,r);t&&this._DomTBody.childNodes[0]?this._DomTBody.insertBefore(n._Dom,this._DomTBody.childNodes[0]):this._DomTBody.appendChild(n._Dom)},treeListP._drawNodeControls=function(n){var t;n._DomControls=document.createElement("SPAN"),n._DomNode=document.createElement("SPAN"),n._DomControls.appendChild(n._DomNode),t=20,this._CheckBoxes?(n._DomBox=document.createElement("SPAN"),n._DomBox.className="cbox",n._DomControls.appendChild(n._DomBox),t+=20):n._DomBox=null,this._ImageList?(n._DomIcon=document.createElement("SPAN"),n._DomIcon.className="icon",n._DomIcon.style.width=this._ImageList.getIconWidth()+"px",n._DomIcon.style.height=this._ImageList.getIconHeight()+"px",n._DomIcon.style.backgroundImage="url("+this._ImageList.getSource()+")",n._DomControls.appendChild(n._DomIcon),t+=this._ImageList.getIconWidth()):n._DomIcon=null;for(var i=null,u=n._DomNode,r=n._parent;r;)i=document.createElement("SPAN"),i.className=!this._ShowLines||r._last||r._hidden?"line empty":"line",n._DomControls.insertBefore(i,u),u=i,r=r._parent,t+=20;this._WordWrap&&(PP.IsIE||PP.IsOpera||PP.IsFF)&&(n._DomControls.style.minWidth=t+"px")},treeListP._drawNodeColumn=function(n,t){n._DomColumns[t]=document.createElement("TD"),n._DomContent[t]=document.createElement("SPAN"),n._DomContent[t].className="text",t===0?this._setNodeContent(n,t,n.Text):n.Columns&&t<this._Columns.getCount()?this._setNodeContent(n,t,n.Columns[t-1]):n._DomContent[t].innerHTML="&nbsp;",n._DomColumns[t].appendChild(n._DomContent[t]),n._Dom.appendChild(n._DomColumns[t])},treeListP._decrementSelect=function(n){while(n._parent)n=n._parent,n.HasChildSelected--,n.HasChildSelected<=0&&(n.HasChildSelected=0,this._styleNode(n))},treeListP._incrementSelect=function(n){while(n._parent)n=n._parent,n.HasChildSelected==0?(n.HasChildSelected++,this._styleNode(n)):n.HasChildSelected++},treeListP._styleNode=function(n){var r,u,e,s,f,i,o,t;if(n&&n._Dom){for(r=n._isFolder,u=r?n.Expanded:!1,n._DomNode.className=this._ShowLines?"node"+(r?" folder":"")+(u?" open":"")+(n._parent?"":" root")+(n._first?" first":"")+(n._last?" last":""):"node simple"+(r?" folder":"")+(u?" open":""),this._ImageList&&n._DomIcon&&(n._DomIcon.style.backgroundPosition=n.ImageIndex!==undefined&&n.ImageIndex>=0?this._ImageList.getIcon(0,n.ImageIndex):this._ImageList.getIcon(0,r?u?1:0:2)),e=!0,s=this._Columns.getCount(),f=0;f<=s;f++)e=this._styleNodeColumn(n,f,e);this._MultiSelect||this._IsCSMultiSelect||!n.Selected||(this._SelectedNode?this._SelectedNode!==n&&(this._SelectedNode.Selected=!1,this._SelectedNode=n,this._SelectedCount=0,this._decrementSelect(this._SelectedNode)):this._SelectedNode=n),n.CanSelect===undefined&&(n.CanSelect=!0),n._Dom.className=(n.Selected?"selected":n.CanSelect?"selectable":"")+(n.HasChildSelected?" childselect":"")+(n===this._FocusedNode?" focused ":""),n.Highlighted&&this._EnableHighlight&&PP.addClass(n._Dom,"highlight"),i=n._Dom.style,o=n.Selected&&this._EnableSelectedHighlight&&this._SelectedHighlightColor?this._SelectedHighlightColor:this._HighlightColor,i.backgroundColor=n.Highlighted&&this._EnableHighlight&&o?o:"",t=n.Selected&&this._EnableSelectedHighlight&&this._SelectedHighlightFont?this._SelectedHighlightFont:this._HighlightFont,i.color=n.Highlighted&&this._EnableHighlight&&t?t.getColor():"",i.fontSize=n.Highlighted&&this._EnableHighlight&&t?t.getSize()+"px":"",i.fontFamily=n.Highlighted&&this._EnableHighlight&&t?t.getFontFamily()+", Helvetica":"",i.fontWeight=n.Highlighted&&this._EnableHighlight&&t?t.getIsBold()?"bold":"normal":"",i.fontStyle=n.Highlighted&&this._EnableHighlight&&t?t.getIsItalic()?"italic":"normal":"",i.textDecoration=n.Highlighted&&this._EnableHighlight&&t?t.getIsUnderline()?"underline":"none":"",this._ImageList&&(n._DomIcon.style.height=this._ImageList.getIconHeight()+"px"),n._DomBox&&(n._DomBox.className=n.Checked?"cbox checked":"cbox")}},treeListP._styleColumnCaption=function(n){var i,t;n>=this._Columns.getCount()||(i=(n?2:1)*parseInt(PP.getStyle(this._Columns.getItem(n)._DomDrag,"border-left-width"))+parseInt(PP.getStyle(this._Columns.getItem(n)._DomDrag,"padding-left")),this._ShowColumns?this._Columns.getItem(n)._DomText.style.width=this._checkValue(this._Columns.getItem(n)._Width-i)+"px":(t=this.getMaximalWidthForColumn(0)+this._getVScrollWidth(),t<this._Width&&(t=this._Width),this._Columns.getItem(n)._DomText.style.width=this._checkValue(t-4)+"px"))},treeListP._styleNodeColumn=function(n,t,i){var r,u;return n._DomColumns[t]?(r=0,r=this._ShowColumns?t<this._Columns.getCount()?this._Columns.getItem(t).getIsVisible()?this._Columns.getItem(t).getWidth():0:this._Width:t===0?this._Width-parseInt(this._DomTable.style.left)-this._getVScrollWidth()-2:1e3,r<=0?n._DomColumns[t].style.display="none":(n._DomColumns[t].style.display="",i?(n._DomColumns[t].insertBefore(n._DomControls,n._DomContent[t]),n._DomColumns[t].className="tree",i=!1,u=n._DomContent[t].offsetWidth+n._DomControls.offsetWidth+1,u>r&&(n._DomColumns[t].className+=" long")):n._DomColumns[t].className=t==this._Columns.getCount()?"last":""),i):i},treeListP._getViewNodeHeight=function(){var n=0,t=document.createElement("TR"),i=document.createElement("TD");return t.appendChild(i),this._DomTBody.appendChild(t),i.innerHTML='<span class="text">x</span>',n=t.offsetHeight,this._DomTBody.removeChild(t),n||(n=20),n},treeListP._fireSelectionChanging=function(n,t){var i={Cancel:!1,Event:t};return i.Node=n instanceof PP.Ui.TreeNode?n:this._getTreeNode(n),i.SingleSelectedItem=this._MultiSelect?null:this._getTreeNode(this._SelectedNode),this.SelectionChanging.fire(this,i),i.Cancel},treeListP._fireSelectionChanged=function(n,t){if(!t||t.length!==0){var i={};i.Node=n instanceof PP.Ui.TreeNode?n:this._getTreeNode(n),i.ChangedNodes=t?t:[i.Node],i.IsCtrl=this._mouseCtrl,i.IsShift=this._mouseShift,this.SelectionChanged.fire(this,i),this._mouseCtrl=!1,this._mouseShift=!1}},treeListP._setSelectedForNode=function(n,t,i,r){var f,u;if(n){if(n.CanSelect===undefined&&(n.CanSelect=!0),!n.CanSelect&&t&&!i)return[];if(this._SelectedCount<2&&!this._EmptySelection&&!t&&!i)return[];if(f=[],this._IsCSMultiSelect&&!r){for(u in this._KeyIndex)this._KeyIndex[u].Selected&&u!==n.Key&&(this._KeyIndex[u].Selected=!1,this._SelectedCount--,this._decrementSelect(this._KeyIndex[u]),this._styleNode(this._KeyIndex[u]),f.push(this._getTreeNode(this._KeyIndex[u])));this._SelectedNode=null}return this._MultiSelect||this._IsCSMultiSelect&&r||!this._SelectedNode||this._SelectedNode===n||!t||(this._SelectedNode.Selected=!1,this._SelectedCount--,this._decrementSelect(this._SelectedNode),this._styleNode(this._SelectedNode),f.push(this._getTreeNode(this._SelectedNode))),t||!this._SelectedNode||this._MultiSelect||(this._SelectedNode=null),!n.Selected==t&&(n.Selected=!!t,t?(this._SelectedCount++,this._incrementSelect(n)):(this._SelectedCount--,this._decrementSelect(n)),t&&(this._SelectedNode=n),this._styleNode(n),f.push(this._getTreeNode(n))),f}},treeListP._setSelectedForSubTree=function(n,t){for(var r=[],u=n.length,i=0;i<u;i++){if(!n[i].Selected==t){if(!this._EmptySelection&&!t&&this._SelectedCount<2)break;r.push(this._getTreeNode(n[i])),n[i].Selected=t,t?(this._SelectedCount++,this._incrementSelect(n[i])):(this._SelectedCount--,this._decrementSelect(n[i])),this._SelectedNode!=n[i]||t||(this._SelectedNode=null)}(n[i].Nodes||n[i].HasChild)&&(n[i].HasChildSelected=!!t),this._styleNode(n[i]),n[i].Nodes&&(r=r.concat(this._setSelectedForSubTree(n[i].Nodes,t,r)))}return r},treeListP._setSelectedForNodesFromTo=function(n,t,i){var o,r;if(n._index!==undefined&&t._index!==undefined){var u=[],f=n._index,e=t._index;for(n._index>t._index&&(f=t._index,e=n._index),o=this._RowIndex.length,r=0;r<o;r++)this._RowIndex[r]&&(r>=f&&r<=e?!this._RowIndex[r].Selected==i&&(this._RowIndex[r].Selected=i,i?(this._SelectedCount++,this._incrementSelect(this._RowIndex[r])):(this._SelectedCount--,this._decrementSelect(this._RowIndex[r])),this._styleNode(this._RowIndex[r]),u.push(this._getTreeNode(this._RowIndex[r]))):this._RowIndex[r].Selected==i&&(this._RowIndex[r].Selected=!i,i?(this._SelectedCount--,this._decrementSelect(this._RowIndex[r])):(this._SelectedCount++,this._incrementSelect(this._RowIndex[r])),this._styleNode(this._RowIndex[r]),u.push(this._getTreeNode(this._RowIndex[r]))));return u}},treeListP._setSelectedForLevel=function(n,t,i,r){var f=[],e=n.length,u;if(t==i)for(u=0;u<e;u++)if(!n[u].Selected==r){if(!this._EmptySelection&&!r&&this._SelectedCount<2)break;r&&(this._SelectedNode=n[u]),(!r||this._MultiSelect||this._IsCSMultiSelect)&&(n[u].Selected=r,r?(this._SelectedCount++,this._incrementSelect(n[u])):(this._SelectedCount--,this._decrementSelect(n[u])),this._styleNode(n[u]),f.push(this._getTreeNode(n[u])))}if(t<i)for(u=0;u<e;u++)n[u].Nodes&&(f=f.concat(this._setSelectedForLevel(n[u].Nodes,t+1,i,r)));return f},treeListP._getCaptionHeight=function(){return this._CaptionVisible?parseInt(this._DomCaptionTr.offsetHeight)+1:0},treeListP._getVScrollWidth=function(n){return this._WordWrap?this._TreeHeight>this._Height-this._CaptionHeight-(!n?0:this._HScrollHeight)?this._ScrollV.getWidth():0:this._VisibleNodesCount<this._NodesCount+(!n?1:!!this._HScrollHeight)?this._ScrollV.getWidth():0},treeListP._updateScrolls=function(){var t,u,f;if(!this._IsUpdating){var r=this._Columns.getFullWidth(),n=0,i=0;(!this._ShowColumns||(this._Height-this._CaptionHeight)/this._ViewNodeHeight<this._NodesCount||r>this._Width)&&(n=this._getVScrollWidth(!1),i=r>this._Width-n?this._ScrollH.getHeight():0,this._HScrollHeight=i,this._ShowColumns||(n=this._getVScrollWidth(!0)),this._VScrollWidth=n,this._VisibleNodesCount=(this._Height-this._CaptionHeight-this._HScrollHeight-1)/this._ViewNodeHeight),n&&(this._ScrollV.setEnabled(this._Enabled),this._ScrollV.MoveScroll.remove(this._onMoveScrollV,this),this._ScrollV.MovedScroll.remove(this._onMovedScrollV,this),this._ScrollV.setTop(this._CaptionHeight+"px"),this._IsRTL?this._ScrollV.setLeft(0):this._ScrollV.setLeft(this._Width-n),this._ScrollV.setHeight(this._Height-this._CaptionHeight-i),t=this._WordWrap?(this._Height-this._CaptionHeight-this._HScrollHeight)/this._TreeHeight:this._VisibleNodesCount/this._NodesCount,(t>1||t<0||isNaN(t))&&(t=1,n=0),u=.3*(this._Height-this._CaptionHeight-i-30)*(1-t)/(this._NodesCount-this._VisibleNodesCount+1),f=this._ScrollV.getValue(),this._ScrollV.setDraggerSize((this._Height-this._CaptionHeight-i-30)*t),this._ScrollV.scrollTo(f,!0),this._ScrollV.setIsVisible(!0),this._ScrollV.setScrollSpeed(u),this._ScrollV.updateSize(),this._ScrollV.MoveScroll.add(this._onMoveScrollV,this),this._ScrollV.MovedScroll.add(this._onMovedScrollV,this)),n||(this._FirstVisibleIndex=0,this._ScrollV.setIsVisible(!1),this._ScrollV.setEnabled(!1)),i?(this._ScrollH.setEnabled(this._Enabled),this._ScrollH.setTop(this._Height-i),this._IsRTL?this._ScrollH.setLeft(n):this._ScrollH.setLeft(0),this._ScrollH.setWidth(this._Width-n),this._ScrollH.setIsVisible(!0),t=(this._Width-n)/r,(t>1||t<=0)&&(t=1),this._ScrollH.setDraggerSize((this._Width-n-31)*t),this._ScrollH.updateSize()):(this._ScrollH.setIsVisible(!1),this._ScrollH.scrollTo(0,!0),this._ScrollH.setEnabled(!1),this._IsRTL?(this._DomDiv.scrollLeft=99999,this._DomCaptionDiv.scrollLeft=99999):(this._DomDiv.scrollLeft=0,this._DomCaptionDiv.scrollLeft=0)),n&&i?(this._DomSpacer.style.display="block",this._DomSpacer.style.width=n-2+"px",this._DomSpacer.style.height=i-2+"px",this._DomSpacer.style.left=this._IsRTL?"0":this._Width-n+"px",this._DomSpacer.style.top=this._Height-i+"px"):this._DomSpacer.style.display="none"}},treeListP._updatePosition=function(){if(!this._IsUpdating){this._WordWrap?this._FirstVisibleIndex>this._NodesCount-this._TreeLastNodesCount&&(this._FirstVisibleIndex=this._NodesCount-this._TreeLastNodesCount):this._NodesCount-this._FirstVisibleIndex<this._VisibleNodesCount&&(this._FirstVisibleIndex=this._NodesCount-this._VisibleNodesCount),this._FirstVisibleIndex<0&&(this._FirstVisibleIndex=0);var t;t=this._WordWrap?this._FirstVisibleIndex/(this._NodesCount-this._TreeLastNodesCount)*100:this._FirstVisibleIndex/(this._NodesCount-this._VisibleNodesCount)*100,(t<0||isNaN(t))&&(t=0),this._ScrollV.MoveScroll.remove(this._onMoveScrollV,this),this._ScrollV.MovedScroll.remove(this._onMovedScrollV,this),this._ScrollV.scrollTo(t,!0),this._ScrollV.MoveScroll.add(this._onMoveScrollV,this),this._ScrollV.MovedScroll.add(this._onMovedScrollV,this)}},treeListP.show=function(){PP.Ui.TreeList.base.show.apply(this,arguments),this.updateSize()},treeListP._focusNode=function(n){if(this._FocusedNode){var t=this._FocusedNode;this._FocusedNode=null,t.Focused=!1,this._styleNode(t)}this._FocusedNode=n,n.Focused=!0,this._styleNode(n),this._styleTree(),this.expandToNode(this._getTreeNode(n))},treeListP._defocus=function(){if(this._FocusedNode){var n=this._FocusedNode;this._FocusedNode=null,this._styleNode(n),this._styleTree(n)}},treeListP.removeFocus=function(){this._defocus()},treeListP._getSelectedForSubTree=function(n,t){var r,i;if(n&&n.length)for(r=n.length,i=0;i<r;i++)n[i].Selected&&t.push(n[i]),n[i].Nodes&&this._setSelectedForSubTree(n[i].Nodes,t,[])},treeListP._clearSubTree=function(n){var r,t,i;if(n)for(r=n.length,t=0;t<r;t++)i=n.pop(),i._treeNode&&i._treeNode.dispose()},treeListP.update=function(){this._buildIndex(),this._drawTree()},treeListP.getColumns=function(){return this._Columns},treeListP.setColumns=function(n,t){n&&(!Array.isArray(n)||n.length)||(n=[{Caption:"",Width:this._Width,MinWidth:10,Visible:!0}]),this._Columns=n,Array.isArray(n)?this._Columns=new PP.Ui.TreeColumns({Owner:this,Columns:n}):(this._Columns=n,this._Columns.setOwner(this)),this._Columns._updateColumns(),t!==!1&&(this._clearTree(),this._drawTree())},treeListP.getImageList=function(){return this._ImageList},treeListP.setImageList=function(n){this._ImageList!==n&&(this._ImageList=n,this._clearTree(),this._drawTree())},treeListP.getIsRTL=function(){return this._IsRTL},treeListP.getShowColumns=function(){return this._ShowColumns},treeListP.setShowColumns=function(n){this._ShowColumns==!n&&(this._ShowColumns=!!n,this._Columns.update(),this._clearTree(),this._drawTree(),this._drawTree())},treeListP.getCaptionVisible=function(){return this._CaptionVisible},treeListP.setCaptionVisible=function(n){this._CaptionVisible==!n&&(this._CaptionVisible=!!n,this._Columns.update(),this.updateSize())},treeListP.getEnableResizeColumn=function(){return this._EnableResizeColumn},treeListP.setEnableResizeColumn=function(n){this._EnableResizeColumn==!n&&(this._EnableResizeColumn=!!n,this._styleTree())},treeListP.getShowHints=function(){return this._ShowHints},treeListP.setShowHints=function(n){this._ShowHints=!!n,this._Hint.hide()},treeListP.getRowSelect=function(){return this._RowSelect},treeListP.setRowSelect=function(n){this._RowSelect==!n&&(this._RowSelect=!!n,this._styleTree())},treeListP.getMultiSelect=function(){return this._MultiSelect},treeListP.setMultiSelect=function(n,t){if(this._MultiSelect==!n)if(this._MultiSelect=!!n,this._MultiSelect)this._IsCSMultiSelect=!1,this._SelectedNode&&(this._SelectedNode.Selected=!0);else{this._SelectedCount=0;var r=[],i;if(this._RowIndex[0]&&t!==!1&&this._fireSelectionChanging(this._RowIndex[0]),!this._SelectedNode||!this._SelectedNode.Selected)for(i in this._KeyIndex)this._KeyIndex[i].Selected&&(this._SelectedNode=this._KeyIndex[i]);this._SelectedNode&&(this._SelectedCount=1,this._incrementSelect(this._SelectedNode));for(i in this._KeyIndex)this._KeyIndex[i].Selected&&this._KeyIndex[i]!==this._SelectedNode&&(this._KeyIndex[i].Selected=!1,this._decrementSelect(this._KeyIndex[i]),this._styleNode(this._KeyIndex[i]),r.push(this._getTreeNode(this._KeyIndex[i])));t!==!1&&this._fireSelectionChanged(this._SelectedNode,r)}},treeListP.setEnableHighlight=function(n){this._EnableHighlight=!!n,this._EnableHighlight?this.addClass("highlighted"):this.removeClass("highlighted"),this.update()},treeListP.setEnableSelectedHighlight=function(n){this._EnableSelectedHighlight=!!n,this.update()},treeListP.getEmptySelection=function(){return this._EmptySelection},treeListP.setEmptySelection=function(n){this._EmptySelection==!n&&(this._EmptySelection=!!n,this._checkSelection(),this._drawTree())},treeListP.getWordWrap=function(){return this._WordWrap},treeListP.setWordWrap=function(n){this._WordWrap!=n&&(this._WordWrap=!!n,this._clearTree(),this._drawTree(),this._drawTree(),this._buildIndex(),this._updateScrolls(),this._updatePosition())},treeListP.getEnableKeyNavigation=function(){return this._EnableKeyNavigation},treeListP.setEnableKeyNavigation=function(n){this._EnableKeyNavigation=!!n},treeListP.getUseCtrlSelect=function(){return this._UseCtrlSelect},treeListP.setUseCtrlSelect=function(n){this._UseCtrlSelect=!!n},treeListP.getUseShiftSelect=function(){return this._UseShiftSelect},treeListP.setUseShiftSelect=function(n){this._UseShiftSelect=!!n},treeListP.getShowLines=function(){return this._ShowLines},treeListP.setShowLines=function(n){this._ShowLines==!n&&(this._ShowLines=!!n,this._clearTree(),this._drawTree())},treeListP.getShowGridLines=function(){return this._ShowGridLines},treeListP.setShowGridLines=function(n){this._ShowGridLines==!n&&(this._ShowGridLines=!!n,this._styleTree())},treeListP.getCheckBoxes=function(){return this._CheckBoxes},treeListP.setCheckBoxes=function(n){this._CheckBoxes==!n&&(this._CheckBoxes=!!n,this._clearTree(),this._drawTree())},treeListP.getIsCSMultiSelect=function(){return this._IsCSMultiSelect},treeListP.setIsCSMultiSelect=function(n){this._IsCSMultiSelect=!!n,this._IsCSMultiSelect&&(this._MultiSelect=!1)},treeListP.getEnableEdit=function(){return this._EnableEdit},treeListP.setEnableEdit=function(n){this._EnableEdit=n},treeListP.getFocusedNode=function(){return this._FocusedNode?this._getTreeNode(this._FocusedNode):null},treeListP.getSelectedNodes=function(){var n=[],i,t;if(this._MultiSelect||this._IsCSMultiSelect){for(i in this._KeyIndex)t=this._KeyIndex[i],t.Selected&&n.push(this._getTreeNode(t));n=n.sort(function(n,t){return n._JSON.Key>t._JSON.Key?1:-1})}else n=this._SelectedNode?[this._getTreeNode(this._SelectedNode)]:[];return n},treeListP.getHorizontalScroll=function(){return this._ScrollH},treeListP.getVerticalScroll=function(){return this._ScrollV},treeListP.updateSize=function(){this._DomNode.style.width=this._Width>0?this._Width+"px":"0",this._DomNode.style.height=this._Height>0?this._Height+"px":"0",this._CaptionHeight=this._getCaptionHeight(),this._ViewNodeHeight=this._getViewNodeHeight(),this._VisibleNodesCount=(this._Height-this._CaptionHeight-this._HScrollHeight-1)/this._ViewNodeHeight,this._drawTree(),this._Columns.update()},treeListP.getNodes=function(){return this.getRootNode(),this._TreeNode.getNodes()},treeListP.getRootNode=function(){return this._TreeNode||(this._TreeNode=new PP.Ui.TreeNode({JSON:{Nodes:this._Nodes},Owner:this,Root:!0})),this._TreeNode},treeListP.setWidth=function(n){this._Width!=n&&(this._Width=n,this._DomNode.style.width=this._Width>0?this._Width+"px":"0",this._Columns.update(),this._updateScrolls(),this._WordWrap&&this.getFullTreeHeight())},treeListP.setHeight=function(n){this._Height!=n&&(this._Height=n,this._DomNode.style.height=this._Height>0?this._Height+"px":"0",this._CaptionHeight=this._getCaptionHeight(),this._ViewNodeHeight=this._getViewNodeHeight(),this._VisibleNodesCount=(this._Height-this._CaptionHeight-this._HScrollHeight-1)/this._ViewNodeHeight,this._updatePosition(),this._updateScrolls(),this._shiftTree())},treeListP.selectAll=function(n){if(this._Nodes&&this._Nodes[0]&&(n!==!1&&this._fireSelectionChanging(this._Nodes[0]),this._MultiSelect||this._IsCSMultiSelect)){var t=this._setSelectedForSubTree(this._Nodes,!0);n!==!1&&this._fireSelectionChanged(this._Nodes[0],t)}},treeListP.deSelectAll=function(n){var t,i;if(this._Nodes&&this._Nodes[0]){if(n!==!1&&this._fireSelectionChanging(this._Nodes[0]),t=!1,this._MultiSelect||this._IsCSMultiSelect)t=this._setSelectedForSubTree(this._Nodes,!1);else{this._SelectedNode&&this._EmptySelection&&(this._SelectedNode.Selected=!1,this._styleNode(this._SelectedNode),t=[this._getTreeNode(this._SelectedNode)],this._SelectedNode=null,this._SelectedCount=0);for(i in this._KeyIndex)this._KeyIndex[i].HasChildSelected&&(this._KeyIndex[i].HasChildSelected=0,this._styleNode(this._KeyIndex[i]))}n!==!1&&t&&this._fireSelectionChanged(this._Nodes[0],t)}},treeListP._collapseNode=function(n,t,i){if(n.Nodes){var r=this._getTreeNode(n);t!==!1&&this.BeforeCollapse.fire(this,{Node:r}),n.Expanded=!1,i!==!1&&(this._buildIndex(),this._updatePosition(),this._drawTree()),t!==!1&&this.Collapse.fire(this,{Node:r})}},treeListP._expandNode=function(n,t,i){n.Expanded||(this._expandedNode=this._getTreeNode(n),t!==!1&&(this.BeforeExpand.fire(this,{Node:this._expandedNode}),!n.HasChild||n.Nodes&&n.Nodes.length||this.loadNode(n)),n.Expanded=!0,i!==!1&&(this._buildIndex(),this._drawTree(),this._updatePosition()),t!==!1&&this.Expand.fire(this,{Node:this._expandedNode}))},treeListP.setExpandedForNode=function(n,t,i){n.Expanded!==t&&(t?this._expandNode(n,!0,i):this._collapseNode(n,!0,i))},treeListP._setExpandedForSubTree=function(n,t,i){var u,r;if(n.Nodes||n.HasChild){if(this.setExpandedForNode(n,t,i),!n.Nodes||!n.Nodes.length){n._expandOnLoad=t;return}for(u=n.Nodes.length,r=0;r<u;r++)this._setExpandedForSubTree(n.Nodes[r],t,i)}},treeListP._setExpandedForAll=function(n){var i,t;if(this._Nodes&&this._Nodes.length){for(i=this._Nodes.length,t=0;t<i;t++)this._setExpandedForSubTree(this._Nodes[t],n,!1);this._buildIndex(),this._updatePosition(),this._drawTree()}},treeListP.expandAll=function(){this._setExpandedForAll(!0)},treeListP.collapseAll=function(){this._setExpandedForAll(!1)},treeListP.loadNode=function(n){var t=this._getTreeNode(n);this.LoadSubNodesOf.fire(this,{Node:t})},treeListP.getNodeLevel=function(n){var t=n._JSON,i;for(n=t,i=0;t._parent;)t._parent&&(t=t._parent),i++;return i},treeListP.selectLevel=function(n,t){var i=null,r,u;PP.isObject(n)&&(i=n,n=this.getNodeLevel(n)),t!==!1&&this._fireSelectionChanging(i),r=this._SelectedNode,u=this._setSelectedForLevel(this._Nodes,0,n,!0),this._MultiSelect||this._IsCSMultiSelect||!this._SelectedNode||this._SelectedNode==r||(r&&(r.Selected=!1,this._styleNode(r),u.push(this._getTreeNode(r))),this._SelectedNode.Selected||(this._incrementSelect(this._SelectedNode),this._SelectedNode.Selected=!0,this._styleNode(this._SelectedNode),u.push(this._getTreeNode(this._SelectedNode))),this.SelectedCount=1),i||(i=u[0]),t!==!1&&i&&this._fireSelectionChanged(i,u)},treeListP.deSelectLevel=function(n,t){var i=null,r;PP.isObject(n)&&(i=n,n=this.getNodeLevel(n)),t!==!1&&this._fireSelectionChanging(i),r=this._setSelectedForLevel(this._Nodes,0,n,!1),r.length&&(this._SeletedNode=null,this._SeletedCount=0),i||(i=r[0]),t!==!1&&i&&this._fireSelectionChanged(i,r)},treeListP._getNodeByKey=function(n){return this._KeyIndex[n]},treeListP.getNodeByKey=function(n){var t=this._KeyIndex[n];return this._getTreeNode(t)},treeListP.getNodeByKeyGlobal=function(n){var t=this._getNodeByKey(n);return this._getTreeNode(t)},treeListP.expandToKeyNode=function(n){var t=this._getNodeByKey(n);if(t)while(t._parent)t=t._parent,this._expandNode(t)},treeListP.getOptimalWidthForColumn=function(n){var i,t,r;return n=n?n:0,i=this.getMaximalWidthForColumn(n),t=this._Columns.getItem(n)._DomText,t.style.display="inline-block",r=this._Columns.getItem(n)._DomText.offsetWidth+6,t.style.display="",Math.max(i,r)},treeListP.getMaximalWidthForColumn=function(n){var e=Math.floor(this._FirstVisibleIndex),u=Math.floor(this._FirstVisibleIndex+this._VisibleNodesCount),r,t,f,i;for(u>=this._NodesCount&&(u=this._NodesCount-1),r=0,t=e;t<=u;t++)this._RowIndex[t]._DomContent&&this._RowIndex[t]._DomContent[n]&&(f=parseInt(this._RowIndex[t]._DomContent[n].style.width),this._RowIndex[t]._DomContent[n].style.width="",i=this._RowIndex[t]._DomContent[n].clientWidth+6,f&&(this._RowIndex[t]._DomContent[n].style.width=this._checkValue(f)+"px"),n===0&&(i=i+this._RowIndex[t]._DomControls.offsetWidth),r<i&&(r=i));return r},treeListP.getHasSecondLevel=function(){for(var t=this._Nodes.length,n=0;n<t;n++)if(this._Nodes[n].Nodes&&this._Nodes[n].Nodes.length||this._Nodes[n].HasChild)return!0;return!1},treeListP.getAllExpandedKeys=function(){for(var t=[],i=this._RowIndex.length,n=0;n<i;n++)this._RowIndex[n].Expanded&&t.push(this._RowIndex[n].Key);return t},treeListP.setExpandedByKeys=function(n){for(var i=n.length,t=0;t<i;t++)this._KeyIndex[n[t]]&&this._expandNode(this._KeyIndex[n[t]])},treeListP.getAllSelectedKeys=function(){var t=[],n;for(n in this._KeyIndex)this._KeyIndex[n].Selected&&t.push(this._KeyIndex[n].Key);return t},treeListP.setSelectedByKeys=function(n,t,i){var u,f,e,r,o;for(i!==!1&&this._Nodes[0]&&this._fireSelectionChanging(this._Nodes[0]),u=[],f=n.length,e=0;e<f;e++)if(!this._KeyIndex.hasOwnProperty(n[e]))throw PP.Exception('node with key "'+n[e]+"\" don't exist in tree",this);if(this._MultiSelect||this._IsCSMultiSelect)for(r in this._KeyIndex)this._KeyIndex.hasOwnProperty(r)&&(n.indexOf(this._KeyIndex[r].Key)>=0?this._KeyIndex[r].Selected!=!0&&(this._KeyIndex[r].Selected=!0,this._incrementSelect(this._KeyIndex[r]),this._styleNode(this._KeyIndex[r]),u.push(this._KeyIndex[r])):!this._KeyIndex[r].Selected==!1&&t&&(this._KeyIndex[r].Selected=!1,this._decrementSelect(this._KeyIndex[r]),this._styleNode(this._KeyIndex[r]),u.push(this._KeyIndex[r])));else f&&(!this._SelectedNode||n[f-1]!==this._SelectedNode.Key)&&(o=n[f-1],this._SelectedNode&&(this._SelectedNode.Selected=!1,u.push(this._SelectedNode),this._styleNode(this._SelectedNode),this._decrementSelect(this._SelectedNode)),this._SelectedNode=this._KeyIndex[o],this._SelectedNode.Selected=!0,this._incrementSelect(this._SelectedNode),u.push(this._SelectedNode),this._styleNode(this._SelectedNode));i!==!1&&this._fireSelectionChanged(u[0],u)},treeListP.getEnableColumnsMenu=function(){return this._EnableColumnsMenu},treeListP.setEnableColumnsMenu=function(n){this._EnableColumnsMenu==!n&&(this._EnableColumnsMenu=!!n,this._Columns.update())},treeListP.getDblClickExpand=function(){return this._DblClickExpand},treeListP.setDblClickExpand=function(n){this._DblClickExpand=!!n},treeListP.getEnableSortColumns=function(){return this._EnableSortColumns},treeListP.setEnableSortColumns=function(n){this._EnableSortColumns=!!n},treeListP.getSortSequence=function(){return this._SortSequence},treeListP.setSortSequence=function(n){n||(n=[0,1,2]),this._SortSequence=n},treeListP.setEnabled=function(n,t){n!=this._Enabled&&(this._Enabled=!!n,this._Enabled?(this._DomNode.removeAttribute("disabled"),this._bindEvents()):(this._DomNode.setAttribute("disabled","disabled"),this._unBindEvents()),this._ScrollV.setEnabled(this._Enabled),this._ScrollH.setEnabled(this._Enabled),PP.Ui.TreeList.base.setEnabled.call(this,n,t))},treeListP.sort=function(n,t,i,r){this._SortMethod=t,this._SortColumn=n,this.getNodes().setSort(n,t,i,r)},treeListP.getSort=function(){return this.getNodes().getSort()},treeListP.getSortMethod=function(){var n=this.getNodes().getSort();return n?n.method:0},treeListP.getSortColumn=function(){var n=this.getNodes().getSort();return n?n.column:null},treeListP.getSortProperty=function(){var n=this.getNodes().getSort();return n?n.property:null},treeListP.getSortRecursive=function(){var n=this.getNodes().getSort();if(n.recursive!==undefined)return n.recursive},treeListP.getSelectedNodesCount=function(){return this._SelectedCount},treeListP.getRightButtonSelect=function(){return this._RightButtonSelect},treeListP.setRightButtonSelect=function(n){this._RightButtonSelect=!!n},treeListP.getEnableSearch=function(){return this._EnableSearch},treeListP.setEnableSearch=function(n){this._EnableSearch=!!n},treeListP.getSelectEditorText=function(){return this._SelectEditorText},treeListP.setSelectEditorText=function(n){this._SelectEditorText=!!n},treeListP.find=function(n,t,i,r){var h={Cancel:!1,Value:n,Column:t,SetFocus:i},f,u,c,o,s,l,e;if(r!==!1&&this.Finding.fire(this,h),h.Cancel)return-1;if(n===null)return this._LastSearch=null,this._LastFound=null,this._LastFoundI=-1,null;for(n=n.toLowerCase(),(t===null||t===undefined)&&(t=0),this._LastFound&&this._LastSearch&&this._LastSearch.value==n&&this._LastSearch.column==t||(this._LastFound=null,this._LastFoundI=-1),this._LastSearch={value:n,column:t},f=null,this._SearchIndex.length==0&&(this._LastFoundI=-1,u=this.getRootNode(),this._SearchIndex=[],u._JSON.Nodes&&this._buildSearchIndex(null,u._JSON.Nodes,u._JSON.NodesSort)),c=this._SearchIndex.length,o=this._LastFoundI+1;o<c;o++)if(u=this._SearchIndex[o],s=""+(t?u.Columns[t-1]:u.Text),s=s.toLowerCase(),l=PP.String.escapeRegExp(n),s.search(l)>=0){f=u,this._LastFoundI=o,f=u;break}return e=null,f?(this._LastFound=f,e=this._getTreeNode(this._LastFound),i&&(this.expandToNode(e),this.scrollToNode(e),this._focusNode(f))):(this._LastFound=null,i&&this._defocus()),r!==!1&&this.Found.fire(this,{Node:e,Value:n,Column:t,SetFocus:i}),e},treeListP.getLastSearch=function(){return this._LastSearch},treeListP.getLastFound=function(){return this._getTreeNode(this._LastFound)},treeListP.expandToNode=function(n){for(var t=n._JSON;t._parent;)t=t._parent,t.Expanded||this._expandNode(t)},treeListP.scrollToNode=function(n){var t=n._JSON;this._FirstVisibleIndex=t._index,this._updatePosition(),this._drawTree()},treeListP.showSearch=function(){if(this._EnableSearch){var n=PP.calculateOffset(this._DomNode);this._DomSearch.style.width=this._checkValue(this._Width-8)+"px",this._DomSearch.className="PPTreeListSearchInput",this._DomSearch.value="",this._SearchPanel.show(n.X,n.Y+this._Height),this._DomSearch.focus()}},treeListP.startEditing=function(n,t){t||(t=0),this._startEdit({self:this,node:n._JSON,column:t})},treeListP.beginUpdate=function(){this._IsUpdating=!0},treeListP.endUpdate=function(){delete this._IsUpdating,this._buildIndex(),this._updatePosition(),this._clearTree(!0),this.update()},treeListP.getVisibleNodesCount=function(){if(!this._WordWrap)return this._VisibleNodesCount;for(var n=Math.floor(this._FirstVisibleIndex);this._RowIndex[n]&&this._RowIndex[n]._Dom&&this._RowIndex[n]._Dom.parentNode&&this._RowIndex[n]._Dom.offsetTop-this._DomDiv.scrollTop<this._Height-this._CaptionHeight;)n+=1;return n-Math.floor(this._FirstVisibleIndex)},treeListP.getFullTreeHeight=function(){var r,t,n;if(this._WordWrap){for(this._TreeHeight=0,r=this._RowIndex.length,t=0;t<r;t++)n=this._RowIndex[t],n._Dom&&n._Dom.parentNode?(this._styleNode(n),n._DomHeight=n._Dom.offsetHeight,this._TreeHeight+=n._DomHeight):(this._drawNode(n),this._styleNode(n),n._DomHeight=n._Dom.offsetHeight,this._TreeHeight+=n._DomHeight,this._removeNode(n));t=r-1;for(var u=0,f=0,e=this._Height-this._CaptionHeight-this._HScrollHeight,i=null;t>=0&&u<e;)f+=1,i=this._RowIndex[t],u+=i._DomHeight,t-=1;this._TreeLastNodesCount=f,i&&(this._TreeLastNodesCount-=(u-e)/i._DomHeight)}else this._TreeHeight=this._ViewNodeHeight*this._NodesCount,this._TreeLastNodesCount=0;return this._TreeHeight},treeListP.getFirstVisibleIndex=function(n){return n?this._FirstVisibleIndex:Math.floor(this._FirstVisibleIndex)},treeListP.getAllNodes=function(n){var u=[],r=this._RowIndex,t,f,i;for(n&&(this._SearchIndex&&this._SearchIndex.length||(t=this.getRootNode(),this._SearchIndex=[],t._JSON.Nodes&&this._buildSearchIndex(null,t._JSON.Nodes,t._JSON.NodesSort)),r=this._SearchIndex),f=r.length,i=0;i<f;i++)u.push(this._getTreeNode(r[i]));return u},treeListP.getNodeByIndex=function(n,t){var r=this._RowIndex,i;return t&&(this._SearchIndex&&this._SearchIndex.length||(i=this.getRootNode(),this._SearchIndex=[],i._JSON.Nodes&&this._buildSearchIndex(null,i._JSON.Nodes,i._JSON.NodesSort)),r=this._SearchIndex),r[n]?this._getTreeNode(r[n]):null},treeListP.setEnableHighlight=function(n){this._EnableHighlight=!!n,this._EnableHighlight?this.addClass("highlighted"):this.removeClass("highlighted"),this.update()},treeListP.setEnableSelectedHighlight=function(n){this._EnableSelectedHighlight=!!n,this.update()},treeListP.setHighlightColor=function(n){n instanceof PP.Color||(n=new PP.Color(n)),this._HighlightColor=n.toString(),this.getEnableHighlight()&&this.update()},treeListP.setSelectedHighlightColor=function(n){n instanceof PP.Color||(n=new PP.Color(n)),this._SelectedHighlightColor=n.toString(),this.getEnableHighlight()&&this.update()},treeListP.setHighlightFont=function(n){n instanceof PP.Font||(n=new PP.Font(n)),this._HighlightFont=n,this.getEnableHighlight()&&this.update()},treeListP.setSelectedHighlightFont=function(n){n instanceof PP.Font||(n=new PP.Font(n)),this._SelectedHighlightFont=n,this.getEnableHighlight()&&this.update()},treeListP=null,PP.Ui.TreeColumn=function(){this._Index=0,this._Type=-1,this._Caption="",this._Width=50,this._MinWidth=0,this._Visible=!0,this._Editable=!0,this._Hideable=!0,this._IsEnabled=!0,this._ResourceKey=null,this._SortMethod=null,this._FormatMethod=null,this._defineEvents(["WidthChanged"]),PP.Ui.TreeColumn.base.constructor.apply(this,arguments),this._Owner=null,this._DomNode=null,this._DomDrag=null,this._DomText=null,this._DomCol=null,this._Type<0&&(this._Type=this._Index?PP.Ui.TreeColumnType.number:PP.Ui.TreeColumnType.string),this._render()},PP.initClass(PP.Ui.TreeColumn,PP.Ui.Control,"TreeColumn"),treeColumnP=PP.Ui.TreeColumn.prototype,treeColumnP._render=function(){this._DomNode=document.createElement("th"),this._DomText=document.createElement("div"),this._DomNode.appendChild(this._DomText),this._DomDrag=document.createElement("th"),this._DomDrag.className="drag",this._DomDrag.appendChild(document.createElement("div")),this._DomCol=document.createElement("col"),PP.Ui.TreeColumn.base._render.apply(this,arguments)},treeColumnP._bindEvents=function(){this._addEvents(this._DomDrag,{mousedown:this._onDraggerMouseDown}),this._addEvents(this._DomNode,{click:this._onClick})},treeColumnP._unBindEvents=function(){this._removeAllEvents(this._DomDrag),this._removeAllEvents(this._DomNode)},treeColumnP._onClick=function(){var i,r,u;if(this._IsEnabled&&this._Visible&&this._Owner._Enabled&&this._Owner._EnableSortColumns){if(i=this._Owner._SortSequence,r=1,this._Owner._SortColumn==this._Index)for(u=0;u<i.length;u++)if(this._Owner._SortMethod===i[u]){r=u+1;break}r>=i.length&&(r=0),this._Owner.sort(this._Index,i[r],null,!0),this.updateContent(),this._Index>=0&&this._Owner.getColumns().getItem(this._Index).updateContent()}},treeColumnP._onDraggerMouseDown=function(n,t){if(this._IsEnabled&&this._Visible&&this._Owner._Enabled&&this._Owner._EnableResizeColumn&&this._Owner._ShowColumns)return this._addEvent(document,"mousemove",this._onDraggerMouseMove),this._addEvent(document,"mouseup",this._onDraggerMouseUp),this._addEvent(document,"mousedown",this._onDraggerMouseUp),PP.setCapture(this._DomNode),this._dragMouseW=this._Owner.getIsRTL()?this._Width+t.Event.pageX:this._Width-t.Event.pageX,this._OldScrollPosition=this._Owner._ScrollH.getValue(),this._OldScrollPosition>100&&(this._OldScrollPosition=100),this._OldColumnsWidth=this._Owner._Columns.getFullWidth(),this._OldDraggerSize=this._Owner._ScrollH.getDraggerSize(),!1},treeColumnP._onDraggerMouseMove=function(n,t){var i;return i=this._Owner.getIsRTL()?this._dragMouseW-t.Event.pageX:this._dragMouseW+t.Event.pageX,this.setWidth(i,!1),this._Owner._FocusedNode&&this._Owner._styleNode(this._Owner._FocusedNode),!1},treeColumnP._onDraggerMouseUp=function(n,t){var i;i=this._Owner.getIsRTL()?this._dragMouseW-t.Event.pageX:this._dragMouseW+t.Event.pageX,this.setWidth(i,!1),this._Owner._updateScrolls(),this._Owner.getIsRTL()&&(PP.IsIE?this._Owner._ScrollH.scrollTo(99999):this._Owner._ScrollH.scrollTo(99999)),this._removeEvent(document,"mousemove",this._onDraggerMouseMove),this._removeEvent(document,"mouseup",this._onDraggerMouseUp),this._removeEvent(document,"mousedown",this._onDraggerMouseUp),PP.releaseCapture(this._DomNode),this._Owner._styleTree(),this.WidthChanged.fire(this,{})},treeColumnP.dispose=function(){delete this._Owner,PP.Ui.TreeColumn.base.dispose.apply(this,arguments)},treeColumnP.appendToDom=function(){this._Owner&&(this._Owner._DomCaptionTr.insertBefore(this._DomNode,this._Owner._Columns._DomLastTh),this._Owner._DomCaptionTr.insertBefore(this._DomDrag,this._Owner._Columns._DomLastTh),this._Owner._DomColgroup.insertBefore(this._DomCol,this._Owner._Columns._DomLastCol),this.updateContent(),this._bindEvents())},treeColumnP.removeFromDom=function(){this._unBindEvents(),this._DomNode&&this._DomNode.parentNode==this._Owner._DomCaptionTr&&(this._Owner._DomCaptionTr.removeChild(this._DomNode),this._Owner._DomCaptionTr.removeChild(this._DomDrag),this._Owner._DomColgroup.removeChild(this._DomCol))},treeColumnP.updateContent=function(){this._Owner._SortColumn==this._Index&&this._Owner._SortMethod?(this._Owner._SortMethod==1&&(this._DomText.innerHTML=this._Caption+'<span class="sorticon asc">&nbsp;</span>'),this._Owner._SortMethod==2&&(this._DomText.innerHTML=this._Caption+'<span class="sorticon desc">&nbsp;</span>')):this._DomText.innerHTML=this._Caption},treeColumnP.show=function(n){return this._DomNode?(this._DomNode.style.display="",this._DomDrag.style.display="",this._DomNode.style.width=this._checkValue(this._Width-3)+"px",this._DomCol.style.width=this._checkValue(this._Width)+"px",this._Visible=!0,n!==!1&&this._Owner&&(this._Owner._clearTree(!0),this._Owner._drawTree()),this._Width):0},treeColumnP.hide=function(n){this._DomNode.style.display="none",this._DomDrag.style.display="none",this._DomCol.style.width="0",this._Visible=!1,n!==!1&&this._Owner&&(this._Owner._clearTree(!0),this._Owner._drawTree())},treeColumnP.getOwner=function(){return this._Owner},treeColumnP.setOwner=function(n){this._Owner=n},treeColumnP.getMinWidth=function(){return this._MinWidth},treeColumnP.setMinWidth=function(n){this._MinWidth!=n&&(this._MinWidth=n,this._MinWidth>this._Width&&this.setWidth(this._MinWidth))},treeColumnP.getWidth=function(){return this._Width},treeColumnP.setWidth=function(n,t){(n<this._MinWidth||n<2)&&(n=Math.max(this._MinWidth,2)),this._Owner._ShowColumns&&(this._Owner._Columns._LastWidth+=this._Width-n,this._Owner._Columns._LastWidth<0&&(this._Owner._Columns._LastWidth=0),this._Owner._Columns._DomLastTh.style.width=this._Owner._checkValue(this._Owner._Columns._LastWidth)+"px",this._Owner._Columns._DomLastCol.style.width=this._Owner._checkValue(this._Owner._Columns._LastWidth)+"px"),this._Width=n,this._DomNode.style.width=this._checkValue(this._Width-3)+"px",this._DomCol.style.width=this._checkValue(this._Width)+"px",this._Owner._updateScrolls(),t!==!1&&this.WidthChanged.fire(this,{})},treeColumnP.getCaption=function(){return this._Caption},treeColumnP.setCaption=function(n){this._Caption=n,this._DomText.innerHTML=this._Caption},treeColumnP.getEditable=function(){return this._Editable},treeColumnP.setEditable=function(n){this._Editable=!!n},treeColumnP.getHideable=function(){return this._Hideable},treeColumnP.setHideable=function(n){this._Hideable=!!n},treeColumnP.getIsVisible=function(){return this._Visible},treeColumnP.getType=function(){return this._Type},treeColumnP.setType=function(n){this._Type=n},treeColumnP.getSortMethod=function(){return this._SortMethod},treeColumnP.setSortMethod=function(n){this._SortMethod=n},treeColumnP.getFormatMethod=function(){return this._FormatMethod},treeColumnP.setFormatMethod=function(n){this._FormatMethod=n},treeColumnP=null,PP.List=function(n){this._Items=null,this._defineEvents(["Changing","Changed"]),PP.List.base.constructor.call(this,n)},PP.initClass(PP.List,PP.Object,"List"),list=PP.List.prototype,list.getCount=function(){return this._Items?this._Items.length:0},list.add=function(n,t){var i,r;return t=t==undefined?!0:t,this._Items||(this._Items=[]),i={Cancel:!1,Operation:"add"},t&&this.Changing.fire(this,i),i.Cancel?void 0:(r=this._Items.push(n),i=new PP.EventArgs,i.Operation="add",t&&this.Changed.fire(this,i),r)},list.insert=function(n,t,i){i=i==undefined?!0:i;var r={Cancel:!1,Operation:"insert",Index:t};i&&this.Changing.fire(this,r),r.Cancel||(this._Items||(this._Items=[]),this._Items.length<=t?this._Items.push(n):PP.insertToArr(this._Items,n,t),i&&this.Changed.fire(this,{Operation:"insert",Index:t}))},list.insertBefore=function(){var i={Cancel:!1,Operation:"insert"};if(this.Changing.fire(this,i),!i.Cancel){i=new PP.EventArgs,i.Operation="insert",this.Changed.fire(this,i);throw new Error("NotImplementedException");}},list.remove=function(n,t,i){if(i=i==undefined?!0:i,this._Items){if(typeof n=="number"&&n>=0&&n<this._Items.length){var r={Cancel:!1,Operation:"remove"};if(i&&this.Changing.fire(this,r),r.Cancel)return;t&&this._Items[n].dispose&&this._Items[n].dispose(),this._Items.splice(n,1),r=new PP.EventArgs,r.Operation="remove",i&&this.Changed.fire(this,r);return}throw new Error("ArgumentException");}},list.clear=function(n,t){var i,r;if((t=t==undefined?!0:t,this._Items)&&(i={Cancel:!1,Operation:"remove"},t&&this.Changing.fire(this,i),!i.Cancel)){for(r=0;r<this._Items.length;r++)n&&this._Items[r].dispose&&this._Items[r].dispose();this._Items=[],i=new PP.EventArgs,i.Operation="remove",t&&this.Changed.fire(this,i)}},list.getItem=function(n){if(!this._Items||typeof n!="number")throw new Error("IndexOuOfRangeException");if(n<this._Items.length&&n>=0)return this._Items[n];throw new Error("IndexOuOfRangeException");},list.setItem=function(n,t){if(!this._Items||typeof t!="number")throw new Error("IndexOuOfRangeException");if(t<this._Items.length&&t>=0){if(this._Items[t]!==n){var i={Cancel:!1,Operation:"set",Index:t};this.Changing.fire(this,i),i.Cancel||(this._Items[t]=n,i=new PP.EventArgs,i.Operation="set",i.Index=t,this.Changed.fire(this,i))}}else throw new Error("IndexOuOfRangeException");},list.contains=function(n){return this._Items?this._Items.indexOf(n)!=-1:!1},list.indexOf=function(n){var t=-1;return this._Items&&(t=this._Items.indexOf(n)),t},list=null,PP.Ui.TreeColumns=function(){this._Owner=null,this._Columns=[],PP.Ui.TreeColumns.base.constructor.apply(this,arguments),this._Count=-1,this._LastColumn=null,this._DomIcon=null,this._DomLastTh=null,this._DomLastCol=null,this._LastWidth=0,this._render()},PP.initClass(PP.Ui.TreeColumns,PP.List,"TreeColumns"),treeColumnsP=PP.Ui.TreeColumns.prototype,treeColumnsP._render=function(){this._DomIcon=document.createElement("div"),this._DomIcon.className="menuicon",this._DomLastTh=document.createElement("th"),this._DomLastCol=document.createElement("col"),this._DomLastTh.className="last",this._DomLastCol.className="last",this.setOwner(this._Owner),this._bindEvents()},treeColumnsP._removeColumns=function(){for(var n=0;n<this._Count;n++)this.getItem(n).removeFromDom();this._LastColumn&&this._LastColumn.removeFromDom(),this._Count=-1,this._LastColumn=0},treeColumnsP._updateColumns=function(){var i,n,t;for(this._removeColumns(),i=this._Columns.length,n=0;n<i;n++)this._Columns[n]instanceof PP.Ui.TreeColumn?(this._Columns[n]._Index=n,this._Columns[n]._Owner=this._Owner,this.add(this._Columns[n])):(this._Columns[n].Index=n,t=new PP.Ui.TreeColumn(this._Columns[n]),t.setOwner(this._Owner),this.add(t))},treeColumnsP._bindEvents=function(){this._Owner._addEvent(this._DomIcon,"mousedown",this._onIconMouseDown)},treeColumnsP._onIconMouseDown=function(){return this._Columns.showMenu(),!1},treeColumnsP._onMenuItemSelected=function(n,t){var i=this.getItem(t.SelectedIndex);i.getIsVisible()?i.hide():i.show()},treeColumnsP._onMenuClosed=function(){},treeColumnsP.update=function(){var t,r,n,i,f,u;if(this._Owner){if(this._Owner._DomCaptionDiv.style.display=this._Owner._CaptionVisible?"":"none",this._DomIcon.style.display=this._Owner._CaptionVisible&&this._Owner._EnableColumnsMenu&&this._Owner._ShowColumns?"":"none",this._Count=this.getCount(),t=0,r=this._Owner._getVScrollWidth(),this._Owner._ShowColumns)for(i=0;i<this._Count;i++)n=this.getItem(i),n._Visible?(n.appendToDom(),t+=n.show(!1)):(n.removeFromDom(),n.hide(!1));else for(t=this._Owner.getMaximalWidthForColumn(0),(t<this._Owner._Width-r||this._Owner._WordWrap)&&(t=this._Owner._Width-r-1),i=0;i<this._Count;i++)n=this.getItem(i),i==0?(n.appendToDom(),n._DomNode.style.display="",n._DomDrag.style.display="",n._DomNode.style.width=this._Owner._checkValue(t+r)+"px",n._DomCol.style.width=this._Owner._checkValue(t)+"px"):n.removeFromDom();return f=!1,t>this._Owner._Width-r?(this._LastWidth=r,f=!0):this._LastWidth=this._Owner._Width-t-r-1,this._Owner._ShowColumns?(this._DomLastTh.style.width=this._Owner._checkValue(this._LastWidth+(f?0:r+1))+"px",this._DomLastCol.style.width=this._Owner._checkValue(this._LastWidth)+"px"):(this._DomLastTh.style.width="0",this._DomLastCol.style.width=this._Owner._checkValue(this._LastWidth)+"px"),this._Owner._IsRTL?u=0:(u=this._Owner.getWidth()-parseInt(PP.getStyle(this._DomIcon,"width"))-2*parseInt(PP.getStyle(this._DomIcon,"padding-left"))-2*parseInt(PP.getStyle(this._DomIcon,"border-left-width")),isNaN(u)&&(u=this._Owner.getWidth()-16)),this._DomIcon.style.left=u>0?u+"px":"0",f}},treeColumnsP.dispose=function(){this._Owner=null,PP.Ui.TreeColumns.base.dispose.apply(this,arguments)},treeColumnsP.clear=function(){for(PP.Ui.TreeColumns.base.clear.call(this,!0);this._Owner._DomColgroup.childNodes.length>1;)this._Owner._DomColgroup.removeChild(this._Owner._DomColgroup.firstChild);while(this._Owner._DomCaptionTr.childNodes.length>1)this._Owner._DomCaptionTr.removeChild(this._Owner._DomCaptionTr.firstChild)},treeColumnsP.add=function(n){if(!(n instanceof PP.Ui.TreeColumn))throw new Error("ArgumentException: required PP.Ui.TreeColumn");PP.Ui.TreeColumns.base.add.call(this,n),this._Count=this.getCount(),n._Index=this._Count-1,n._Owner=this._Owner,n.appendToDom()},treeColumnsP.remove=function(n,t){var i,r,u,f;if(typeof n=="number")r=n,i=this.getItem(n);else{if(!(n instanceof PP.Ui.TreeColumn))throw new Error("ArgumentException: required PP.Ui.TreeColumn");i=n,r=this.indexOf(i)}if(!i)throw new Error("ArgumentException: Column don't exist");i.removeFromDom(),i.setOwner(null),PP.Ui.TreeColumns.base.remove.call(this,r,t);for(u in this._Owner._KeyIndex)r?this._Owner._KeyIndex[u].Columns.splice(r-1,1):(this._Owner._KeyIndex[u].Text=this._Owner._KeyIndex[u].Columns[0],this._Owner._KeyIndex[u].Columns.splice(0,1));for(this._Count=this.getCount(),f=0;f<this._Count;f++)this.getItem(f)._Index=f;this.update(),this._Owner._clearTree(!0),this._Owner.updateSize()},treeColumnsP.getFullWidth=function(){var n=0,r,t,u,i;if(this._Owner._ShowColumns)for(r=this.getCount(),t=0;t<r;t++)u=this.getItem(t),u.getIsVisible()&&(n+=this.getItem(t).getWidth());else this._Owner._WordWrap?n=this._Owner._Width-this._Owner._getVScrollWidth():(n=this._Owner.getMaximalWidthForColumn(0),i=this._Owner._Width-this._Owner._getVScrollWidth(),n<i&&(n=i));return n},treeColumnsP.setItem=function(n,t){if(!(n instanceof PP.Ui.TreeColumn))throw new Error("ArgumentException: required PP.Ui.TreeColumn");var i=this.getItem(t);i&&i.setOwner(null),PP.Ui.TreeColumns.base.setItem.call(this,n,t),n&&n.setOwner(this._Owner)},treeColumnsP.showMenu=function(){var u,i,t,f,n,r,e;if(this._Owner._Enabled){for(this._Menu&&(this._Menu.dispose(),delete this._Menu),this._Menu=new PP.Ui.Menu,this._Menu.ItemSelected.add(this._onMenuItemSelected,this),this._Menu.Closed.add(this._onMenuClosed,this),u=this.getCount(),i=0;i<u;i++)t=this.getItem(i),f=new PP.Ui.MenuItem({Parent:this._Menu,Enabled:t.getHideable(),Content:t.getCaption(),Checked:t.getIsVisible(),Data:t}),this._Menu.addItem(f);this._Menu.setIsRTL(this._Owner.getIsRTL()),n=PP.calculateOffset(this._DomIcon),this._Menu.show(0,0),r=n.X+this._Menu.getWidth()>parseInt(document.body.clientWidth)?parseInt(document.body.clientWidth)-this._Menu.getWidth():n.X,e=n.Y+this._Owner._getCaptionHeight()+this._Menu.getHeight()>parseInt(document.body.clientHeight)?parseInt(document.body.clientHeight)-this._Menu.getHeight():n.Y+this._Owner._getCaptionHeight(),this._Menu.hide(),this._Menu.show(r,n.Y+this._Owner._getCaptionHeight())}},treeColumnsP.getOwner=function(){return this._Owner},treeColumnsP.setOwner=function(n){var i,t;if(n){if(this._Owner=n,this._Owner._DomColgroup)while(this._Owner._DomColgroup.childNodes.length>0)this._Owner._DomColgroup.removeChild(this._Owner._DomColgroup.firstChild);if(this._Owner._DomCaptionTr)while(this._Owner._DomCaptionTr.childNodes.length>0)this._Owner._DomCaptionTr.removeChild(this._Owner._DomCaptionTr.firstChild);this._Owner._DomNode.appendChild(this._DomIcon),this._Owner._DomCaptionTr.appendChild(this._DomLastTh),this._Owner._DomColgroup.appendChild(this._DomLastCol)}else this._Owner&&(this._Owner._DomNode.removeChild(this._DomIcon),this._Owner._DomCaptionTr.removeChild(this._DomLastTh),this._Owner._DomColgroup.removeChild(this._DomLastCol));if(this._Owner!=n)for(this._Owner=n,i=this.getCount(),t=0;t<i;t++)this.getItem(t).setOwner(n)},treeColumnsP=null,PP.Ui.TreeNode=function(n){n||(n={}),n.JSON||(n={JSON:n}),this._JSON={},this._Owner=null,this._Tag=null,this._Root=!1,PP.Ui.TreeNode.base.constructor.apply(this,arguments),this._TreeNodes=null,this._DomNode=this._JSON._Dom},PP.initClass(PP.Ui.TreeNode,PP.Object,"TreeNode"),treeNodeP=PP.Ui.TreeNode.prototype,treeNodeP.dispose=function(){this._DomNode&&this._DomNode.parent&&this._DomNode.parent.removeChild(this._DomNode),delete this._JSON,delete this._Owner,this._TreeNodes&&(this._TreeNodes.dispose(),delete this._TreeNodes),delete this._Tag,delete this._DomNode,PP.Ui.TreeNode.base.dispose.apply(this,arguments)},treeNodeP.getNodes=function(){return this._TreeNodes||(this._JSON.Nodes==undefined&&(this._JSON.Nodes=[]),this._TreeNodes=new PP.Ui.TreeNodes({Owner:this._Owner,Parent:this})),this._TreeNodes},treeNodeP.getParentNode=function(){return this._JSON._parent?this._Owner._getTreeNode(this._JSON._parent):null},treeNodeP.getKey=function(){return PP.isDefined(this._JSON.Key)||(this._JSON.Key=this._Owner._getNewKey()),this._JSON.Key},treeNodeP.setKey=function(n){this._JSON.Key=n},treeNodeP.getText=function(){return this._JSON.Text},treeNodeP.setText=function(n){this._JSON.Text=n,this._JSON._DomContent&&this._JSON._DomContent[0]&&(this._JSON._DomContent[0].innerHTML=n)},treeNodeP.getColumnText=function(n){return n===0?this._JSON.Text:this._JSON.Columns[n-1]},treeNodeP.setColumnText=function(n,t){if(n>=this._Owner._Columns.getCount()||n<0)throw PP.OutOfRangeException("Incorrect column number",this);n===0?this._JSON.Text=t:this._JSON.Columns[n-1]=t,this._Owner._setNodeContent(this._JSON,n,t)},treeNodeP.getValue=function(){return this._JSON.Value},treeNodeP.setValue=function(n){this._JSON.Value=n},treeNodeP.getSelected=function(){return!!this._JSON.Selected},treeNodeP.setSelected=function(n,t,i){if(n=!!n,this._JSON.Selected!==n){i!==!1&&this._Owner._fireSelectionChanging(this._JSON);var r=this._Owner._setSelectedForNode(this._JSON,n,t);i!==!1&&this._Owner._fireSelectionChanged(this._JSON,r)}},treeNodeP.getExpanded=function(){return!!this._JSON.Expanded},treeNodeP.setExpanded=function(n){this._Owner.setExpandedForNode(this._JSON,n)},treeNodeP.getChecked=function(){return!!this._JSON.Checked},treeNodeP.setChecked=function(n,t){this._JSON.Checked=!!n,this._Owner._styleNode(this._JSON),t!==!1&&this._Owner.CheckedChanged.fire(this._Owner,{Node:this})},treeNodeP.getFocused=function(){return!!this._JSON.Focused},treeNodeP.setFocused=function(){this._Owner._focusNode(this._JSON)},treeNodeP.getDraggable=function(){return!!this._JSON.Draggable},treeNodeP.setDraggable=function(n){this._JSON.Draggable=!!n},treeNodeP.getCanSelect=function(){return!!this._JSON.CanSelect},treeNodeP.setCanSelect=function(n){this._JSON.CanSelect==!0&&n==!1&&this._JSON.Selected&&this.setSelected(!0,!1,!0),this._JSON.CanSelect=!!n,this._Owner._styleNode(this._JSON)},treeNodeP.getImageUrl=function(){return this._JSON.ImageUrl||(this._JSON.ImageUrl=null),this._JSON.ImageUrl},treeNodeP.setImageUrl=function(n){this._JSON.ImageUrl=n,this._Owner._styleNode(this._JSON)},treeNodeP.getImageIndex=function(){return this._JSON.ImageIndex||(this._JSON.ImageIndex=-1),this._JSON.ImageIndex},treeNodeP.setImageIndex=function(n){this._JSON.ImageIndex=n,this._Owner._styleNode(this._JSON)},treeNodeP.expand=function(n){this._Owner._expandNode(this._JSON,n)},treeNodeP.collapse=function(n){this._Owner._collapseNode(this._JSON,n)},treeNodeP.toggle=function(n){this._JSON.Expanded?this._Owner._collapseNode(this._JSON,n):this._Owner._expandNode(this._JSON,n)},treeNodeP.expandAll=function(){this._Owner._setExpandedForSubTree(this._JSON,!0)},treeNodeP.collapseAll=function(){this._Owner._setExpandedForSubTree(this._JSON,!1)},treeNodeP.getData=function(){return this._JSON.Data},treeNodeP.setData=function(n){this._JSON.Data=n},treeNodeP.getHasChild=function(){return this._JSON.HasChild},treeNodeP.setHasChild=function(n){this._JSON.HasChild=!!n},treeNodeP.selectChild=function(n){if(!this._JSON.Nodes){this._JSON.HasChild&&(this._JSON.HasChildSelected=1,this._Owner._incrementSelect(this._JSON),this._Owner._styleNode(this._JSON));return}n!==!1&&this._Owner._fireSelectionChanging(this._JSON);var t=this._Owner._setSelectedForSubTree(this._JSON.Nodes,!0);n!==!1&&this._Owner._fireSelectionChanged(this._JSON,t)},treeNodeP.deSelectChild=function(n){if(!this._JSON.Nodes){this._JSON.HasChild&&(this._Owner._decrementSelect(this._JSON.HasChildSelected),this._JSON.HasChildSelected=0,this._Owner._styleNode(this._JSON));return}n!==!1&&this._Owner._fireSelectionChanging(this._JSON);var t=this._Owner._setSelectedForSubTree(this._JSON.Nodes,!1);n!==!1&&this._Owner._fireSelectionChanged(this._JSON,t)},treeNodeP.load=function(){this._Owner.loadNode(this._JSON)},treeNodeP.getHasChildSelected=function(){return!!this._JSON.HasChildSelected},treeNodeP.setHasChildSelected=function(n){this._JSON.HasChildSelected=0+n},treeNodeP.getHighlighted=function(){return!!this._JSON.Highlighted},treeNodeP.setHighlighted=function(n){this._JSON.Highlighted=!!n,this._Owner.update()},treeNodeP.isLast=function(){return this._JSON._index>=this._Owner._RowIndex.length-1},treeNodeP.isVisible=function(n){return this._JSON._hidden||!this._Owner?null:(n=n?-1:0,!this._Owner._WordWrap)?this._JSON._index-this._Owner._FirstVisibleIndex<n?!1:!(this._Owner._LastVisibleIndex-this._JSON._index-1<n):this.getVisualPosition()+!n<this._Owner.getVisibleNodesCount()},treeNodeP.getVisualPosition=function(){return this._JSON._hidden||!this._Owner?null:this._JSON._index-this._Owner._FirstVisibleIndex},treeNodeP.clone=function(){return new PP.Ui.TreeNode(PP.extend({},this._JSON,!0,!1))},treeNodeP=null,PP.Ui.TreeNodes=function(){this._Owner=null,this._Parent=null,PP.Ui.TreeNodes.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.TreeNodes,PP.Object,"TreeNodes"),treeNodesP=PP.Ui.TreeNodes.prototype,treeNodesP.dispose=function(){delete this._Owner,delete this._Parent,PP.Ui.TreeNodes.base.dispose.apply(this,arguments)},treeNodesP.loadFrom=function(n){this._Owner._clearSubTree(this._Parent._JSON.Nodes);for(var i=n.length,t=0;t<i;t++)this._Parent._JSON.Nodes[t]=n[t],this._Parent._JSON.Nodes[t].Expanded&&this._Owner._expandNode(this._Parent._JSON.Nodes[t]);if(i==0&&(this._Parent._JSON.HasChild=!1),this._Parent._JSON._expandOnLoad){for(this._Parent.expand(!1),t=0;t<i;t++)this._Owner._setExpandedForSubTree(this._Parent._JSON.Nodes[t],!0);delete this._Parent._JSON._expandOnLoad}this._Parent._Root&&(this._Owner._FirstVisibleIndex=0,this._Owner._LastVisibleIndex=-1),this._SearchIndex=[],this._Owner._buildIndex(),this._Owner.updateSize(),this._Owner._updatePosition()},treeNodesP.updateFrom=function(n){var i,u,r,t;for(i=this._Parent._JSON.Nodes?this._Parent._JSON.Nodes:[],u={},r=i.length,t=0;t<r;t++)u[i[t].Key]=i[t];for(r=n.length,this._Parent._JSON.Nodes=[],t=0;t<r;t++)u[n[t].Key]?(this._Parent._JSON.Nodes[t]=u[n[t].Key],this._Parent._JSON.Nodes[t].Text=n[t].Text):(this._Parent._JSON.Nodes[t]=n[t],this._Parent._JSON.Nodes[t].Expanded&&this._Owner._expandNode(this._Parent._JSON.Nodes[t]));r==0&&(this._Parent._JSON.HasChild=!1),this._SearchIndex=[],this._Owner._clearTree(!0),this._Owner._buildIndex(),this._Owner.updateSize(),this._Owner._updatePosition()},treeNodesP.clear=function(){this._Owner._clearSubTree(this._Parent._JSON.Nodes),this._Owner.update()},treeNodesP.getCount=function(){return this._Parent._JSON.Nodes?this._Parent._JSON.Nodes.length:0},treeNodesP.getItem=function(n){return this._Parent._JSON.Nodes?this._Owner._getTreeNode(this._Parent._JSON.Nodes[n]):null},treeNodesP.getItemByKey=function(n){var i,t;if(!this._Parent._JSON.Nodes)return null;for(i=this._Parent._JSON.Nodes.length,t=0;t<i;t++)if(this._Parent._JSON.Nodes[t].Key==n)return this._Owner._getTreeNode(this._Parent._JSON.Nodes[t]);return null},treeNodesP.getSort=function(){return this._Parent._JSON.NodesSort},treeNodesP.setSort=function(n,t,i,r){var u=this._SortColumn;n=t?n:-1,r=r===undefined?!0:!!r,this._Parent._JSON.NodesSort=t?{column:n,method:t,property:i,recursive:r}:null,u>=0&&this._Owner.getColumns().getItem(u).updateContent(),this._SortColumn>=0&&this._Owner.getColumns().getItem(n).updateContent(),this._Owner._SearchIndex=[],this._Owner._buildIndex(),this._Owner._drawTree()},treeNodesP.getFilter=function(){return this._Parent._JSON.NodesFilter},treeNodesP.setFilter=function(n){this._Parent._JSON.NodesFilter=n,this._Owner._SearchIndex=[],this._Owner._buildIndex(),this._Owner._updatePosition(),this._Owner._clearTree(!0),this._Owner._drawTree()},treeNodesP.insertNode=function(n,t){var u=-1,i={},f,r;if(n instanceof PP.Ui.TreeNode)if(n._Owner)throw PP.ArgumentException("Node already in TreeList, use .clone()",this);else i=n._JSON;else i=n,delete i._TreeNode;if(this._Parent._JSON.Nodes||(this._Parent._JSON.Nodes=[]),t)for(f=this._Parent._JSON.Nodes.length,r=0;r<f;r++)if(this._Parent._JSON.Nodes[r]._TreeNode===t){u=r;break}u>=0?this._Parent._JSON.Nodes.splice(u,0,i):this._Parent._JSON.Nodes.push(i),n._Owner=this._Parent._Owner,n.Selected&&(this._Owner._SelectedCount+=1),this._Owner._SearchIndex=[],this._Owner._buildIndex(),this._Owner._clearTree(!0),this._Owner._drawTree()},treeNodesP.deleteNode=function(n){var i=-1,r,t;if(this._Parent._JSON.Nodes||(this._Parent._JSON.Nodes=[]),n)for(r=this._Parent._JSON.Nodes.length,t=0;t<r;t++)if(this._Parent._JSON.Nodes[t]._TreeNode===n){i=t;break}i>=0&&(n.Selected&&(this._Owner._SelectedCount-=1),this._Parent._JSON.Nodes.splice(i,1),n._Owner=null,n._Dom=null),this._Owner._SearchIndex=[],this._Owner._buildIndex(),this._Owner._clearTree(!0),this._Owner._drawTree()},treeNodesP=null,PP.Ui.ToolBarButton=function(){this._ImageUrl="",this._ColumnIndex=-1,this._RowIndex=-1,this._Menu=null,this._IsChecked=!1,this._IsToggle=!1,this._GroupName="",this._Parent=null,this._Template=PP.Templates.ToolBarButton,this._IsFlat=!1,this._defineEvents(["StateChanged"]),PP.Ui.ToolBarButton.base.constructor.apply(this,arguments),this._FakeIsChecked=!1,this._IsHidden=!1,this._mouseDown=!1,this._render()},PP.initClass(PP.Ui.ToolBarButton,PP.Ui.Control,"ToolBarButton"),toolBarButtonP=PP.Ui.ToolBarButton.prototype,toolBarButtonP._render=function(){this._Template=this._Template.replace("{Content}","<div class='PPContent'><div class='PPImage'></div><div class='PPText'></div></div>"),this._initFromHTML("<div class='PPToolBarButton'>"+this._Template+"</div>"),this.addClass("Released"),this.addClass("PPNoSelect"),this._IsFlat&&this.addClass("Flat"),PP.IsOpera&&this.addClass("PPOperaFix"),this._ImageDomNode=PP.querySelector(this._DomNode,".PPImage"),this._ContentDomNode=PP.querySelector(this._DomNode,".PPText"),this._ContentDomNode.style.display=this._Content?"":"none",this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),this._Menu&&(this._Menu instanceof PP.Ui.Menu||(this._Menu=new PP.Ui.Menu),this._Menu.Closed.add(this._onMenuClosed,this),this._MenuArrowDomNode=PP.htmlToDOM("<div class='PPMenuArrow'></div>"),this._ContentDomNode.parentNode.appendChild(this._MenuArrowDomNode),this._ContentDomNode.parentNode.dir=this._IsRTL?"rtl":"ltr"),this.setImageUrl(this._ImageUrl,!0),this.setIsChecked(this._IsChecked,!1,!0),this.refreshCorners(),PP.Ui.ToolBarButton.base._render.call(this)},toolBarButtonP._onClicked=function(){if(this._Enabled){if(this._Menu){var i=this._getMenuDropCoords();this._Menu.getDroppedDown()?(this._Menu.hide(),this._setFakeIsChecked(!1)):(this._Menu.show(i[1],i[0],!0),this._setFakeIsChecked(!0))}else this._GroupName?this._IsChecked||this.setIsChecked(!0):this._IsToggle&&this.setIsChecked(!this._IsChecked);return this.removeClass("Released"),this.addClass("Hovered"),PP.Ui.ToolBarButton.base._onClicked.apply(this,arguments)}},toolBarButtonP._onMouseDown=function(n,t){if(this._Enabled)return t.Event.which==1?(this._mouseDown=!0,this._setFakeIsChecked(!0),this._Menu&&PP.Ui.Menu&&PP.Ui.Menu.RootMenu&&this._Menu==PP.Ui.Menu.RootMenu&&t.Event.stopPropagation()):this._Menu&&this._Menu.getDroppedDown()&&(this._Menu.hide(),this._setFakeIsChecked(!1)),PP.Ui.ToolBarButton.base._onMouseDown.apply(this,arguments)},toolBarButtonP._onMouseUp=function(n,t){if(this._Enabled)return t.Event.which==1&&this._mouseDown&&(this._mouseDown=!1,this._setFakeIsChecked(!1)),PP.Ui.ToolBarButton.base._onMouseUp.apply(this,arguments)},toolBarButtonP._onMouseOver=function(){if(this._Enabled)return this.setIsHovered(!0),PP.Ui.ToolBarButton.base._onMouseOver.apply(this,arguments)},toolBarButtonP._onMouseOut=function(n,t){if(this._Enabled)return PP.reallyOut(this._DomNode,t.Event)&&(this.setIsHovered(!1),this._mouseDown=!1),PP.Ui.ToolBarButton.base._onMouseOut.apply(this,arguments)},toolBarButtonP._onMenuClosed=function(){this._setFakeIsChecked(!1)},toolBarButtonP._setFakeIsChecked=function(n){this._FakeIsChecked=n,this._FakeIsChecked?(this.removeClass("Released"),this.removeClass("Hovered"),this.addClass("Checked")):(this.addClass("Released"),this.removeClass("Hovered"),this.removeClass("Checked"))},toolBarButtonP._getMenuDropCoords=function(){var n=[],i=this._Menu.isVisibleArea(0,0,!0),r=PP.calculateOffset(this._DomNode),t,f,u;return n.push(r.Y+this._DomNode.offsetHeight+1),this._IsRTL?n.push(r.X+this._DomNode.offsetWidth-i.Width):n.push(r.X),i=this._Menu.isVisibleArea(n[0],n[1],!0),t=null,i.VisibleByHeight||(f=0,f=r.Y-i.Height-1,f>-1&&(t=this._Menu.isVisibleArea(f,n[1],!0),t.VisibleByHeight&&(n[0]=f))),i.VisibleByWidth||(this._IsRTL?(u=r.X,t=this._Menu.isVisibleArea(n[0],u,!0),t.VisibleByWidth&&(n[1]=u)):(u=r.X+this._DomNode.offsetWidth-i.Width,t=this._Menu.isVisibleArea(n[0],u,!0),t.VisibleByWidth&&(n[1]=u))),n},toolBarButtonP._setCssClass=function(n){this.removeClass("Released"),this.removeClass("Hovered"),this.removeClass("Checked"),this.addClass(n)},toolBarButtonP._getMargins=function(){var t=0,n=parseInt(PP.getStyle(this._DomNode,"marginLeft"));return isNaN(n)||(t+=n),n=parseInt(PP.getStyle(this._DomNode,"marginRight")),isNaN(n)||(t+=n),t},toolBarButtonP._findNextSibling=function(){var n;if(!this._Parent)return null;var t=this._Parent.getItems(),i=t.length,r=t.indexOf(this);for(n=r+1;n<i;n++)if(this._ParentNode===t[n].getDomNode().parentNode)return t[n].getDomNode();return null},toolBarButtonP.setWidth=function(n){PP.Ui.ToolBarButton.base.setWidth.apply(this,arguments),PP.IsIE&&PP.IEVer===7&&(n?this.addClass("HW"):this.removeClass("HW"))},toolBarButtonP.setIsHovered=function(n){return this._Menu&&this._Menu.getDroppedDown()?this:(this._setCssClass(n&&this.getEnabled()?"Hovered":this._IsChecked?"Checked":"Released"),this)},toolBarButtonP.setEnabled=function(){return PP.Ui.ToolBarButton.base.setEnabled.apply(this,arguments),this._Enabled?this.removeClass("Disabled"):(this.setIsHovered(this._Enabled),this.addClass("Disabled")),this._Menu&&this._Menu.setEnabled(this._Enabled),this._DomNode.removeAttribute("disabled"),this._DomNode.removeAttribute("enabled"),this._DomNode.className=this._DomNode.className,this},toolBarButtonP.setIsRTL=function(){return PP.Ui.ToolBarButton.base.setIsRTL.apply(this,arguments),this._ContentDomNode.parentNode&&(this._ContentDomNode.parentNode.dir=this._IsRTL?"rtl":"ltr"),this._Menu&&this._Menu.setIsRTL(this._IsRTL),this._Parent&&this._Parent.refreshGroups(),this},toolBarButtonP.getIsChecked=function(){return this._IsChecked},toolBarButtonP.setIsChecked=function(n,t,i,r){var u,e,f;if(t=typeof t=="undefined"?!0:t==!0,PP.isBoolean(n)&&(n!=this._IsChecked||i)){if(this._Parent&&this._GroupName&&!r&&(u=this._Parent.getItemsByGroupName(this._GroupName),u&&n))for(e=u.length,f=0;f<e;f++)u[f].setIsChecked(!1,!1,!1,!0);this._IsChecked=n,this._IsChecked?(this.removeClass("Released"),this.removeClass("Hovered"),this.addClass("Checked")):(this.addClass("Released"),this.removeClass("Hovered"),this.removeClass("Checked")),this._Parent&&this._Parent._updateMenuItem(this),t&&this.StateChanged.fire(this,{})}},toolBarButtonP.getIsToggle=function(){return this._IsToggle},toolBarButtonP.setIsToggle=function(n){return PP.isBoolean(n)&&n!==this._IsToggle&&(this._IsToggle=n,!this._IsToggle&&this._IsChecked&&this.setIsChecked(!1,!1)),this},toolBarButtonP.getGroupName=function(){return this._GroupName},toolBarButtonP.setGroupName=function(n){var i,t,r;return PP.isString(n)&&n!==this._GroupName&&(i=this._GroupName,this._GroupName=n,this._Parent&&(t=this._Parent._Groups[i],t&&(r=t.indexOf(this),r>-1&&t.splice(r,1)),this._GroupName&&(this._Parent._Groups[this._GroupName]?this._Parent._Groups[this._GroupName].indexOf(this)<0&&this._Parent._Groups[this._GroupName].push(this):this._Parent._Groups[this._GroupName]=[this]),this._Parent.refreshGroup(i),this._GroupName?this._Parent.refreshGroup(this._GroupName):this.refreshCorners(),this._Parent._updateMenuItem(this))),this},toolBarButtonP.setContent=function(n){return this._ContentDomNode.style.display=n?"":"none",this._setContentToNode(n,this._ContentDomNode),this._Parent&&this._Parent._updateMenuItem(this),this},toolBarButtonP.getRowIndex=function(){return this._RowIndex},toolBarButtonP.getColumnIndex=function(){return this._ColumnIndex},toolBarButtonP.getImageUrl=function(){return this._ImageUrl},toolBarButtonP.setImageUrl=function(n,t){return(PP.isString(n)&&n!==this._ImageUrl||t)&&(this._Parent&&this._Parent.getImageList()&&this._ColumnIndex>-1&&this._RowIndex>-1?(this._ImageUrl="",this._ImageDomNode.style.background="url("+this._Parent.getImageList().getSource()+") "+this._Parent.getImageList().getIcon(this._RowIndex,this._ColumnIndex)+" no-repeat",this._ImageDomNode.style.display=""):n?(this._ImageUrl=n,this._ImageDomNode.style.background="url("+this._ImageUrl+") no-repeat",this._ImageDomNode.style.display=""):(this._ImageUrl="",this._ImageDomNode.style.display="none")),this._Parent&&this._Parent._updateMenuItem(this),this},toolBarButtonP.getMenu=function(){return this._Menu},toolBarButtonP.setMenu=function(n){n instanceof PP.Ui.Menu?n!=this._Menu&&(this._Menu&&this._Menu.Closed.remove(this._onMenuClosed,this),this._Menu=n,this._Menu.Closed.add(this._onMenuClosed,this),this._MenuArrowDomNode?this._MenuArrowDomNode.style.display="":(this._MenuArrowDomNode=PP.htmlToDOM("<div class='PPMenuArrow'></div>"),this._ContentDomNode.parentNode.appendChild(this._MenuArrowDomNode)),this._Parent&&this._Parent._updateMenuItem(this)):(this._Menu.Closed.remove(this._onMenuClosed,this),this._MenuArrowDomNode&&(this._MenuArrowDomNode.style.display="none"),this._Menu=null,this._Parent&&this._Parent._updateMenuItem(this))},toolBarButtonP.setIsVisible=function(n){PP.Ui.ToolBarButton.base.setIsVisible.apply(this,arguments),PP.isBoolean(n)&&(this._IsHidden=!n);switch(n){case PP.Ui.Visibility.Collapsed:case PP.Ui.Visibility.Hidden:this._IsHidden=!0;break;case PP.Ui.Visibility.Visible:this._IsHidden=!1}return this},toolBarButtonP.show=function(){if(this._ParentNode){var n=this._DomNode.parentNode;(!n||PP.IsIE&&n.nodeName=="#document-fragment")&&this.addToNode(this._ParentNode,this._findNextSibling())}this._IsVisible||this.setIsVisible(!0),this._IsHidden=!1,this._Parent&&this._GroupName&&this._Parent.refreshGroup(this._GroupName)},toolBarButtonP.hide=function(){var n=this._ParentNode;this.removeFromDOM(),this._ParentNode=n,this.setIsVisible(!1),this._IsHidden=!0,this._Parent&&this._GroupName&&this._Parent.refreshGroup(this._GroupName)},toolBarButtonP.setRoundedCorners=function(n){switch(n){case PP.Ui.ToolBarButton.RoundedCorners.All:this.addClass("Left"),this.addClass("Right");break;case PP.Ui.ToolBarButton.RoundedCorners.None:this.removeClass("Left"),this.removeClass("Right");break;case PP.Ui.ToolBarButton.RoundedCorners.Left:this.addClass(this._IsRTL?"Right":"Left"),this.removeClass(this._IsRTL?"Left":"Right");break;case PP.Ui.ToolBarButton.RoundedCorners.Right:this.removeClass(this._IsRTL?"Right":"Left"),this.addClass(this._IsRTL?"Left":"Right")}},toolBarButtonP.refreshCorners=function(){this._GroupName&&this._Parent?this._Parent.refreshGroup(this._GroupName):(this.addClass("Left"),this.addClass("Right"))},toolBarButtonP.dispose=function(){if(this._GroupName&&this._Parent){var n=this._Parent._Groups[this._GroupName];n.splice(n.indexOf(this),1)}delete this._Menu,delete this._Parent,PP.Ui.ToolBarButton.base.dispose.apply(this,arguments)},toolBarButtonP=null,(PP.Ui.ToolBarButton.RoundedCorners=function(){var n=PP.Ui.ToolBarButton.RoundedCorners;n.Left="Left",n.Right="Right",n.None="None",n.All="All",PP.initEnum(n,"PP.Ui.ToolBarButton.RoundedCorners")})(),PP.Ui.ToolBarSeparator=function(){this._Parent=null,PP.Ui.ToolBarSeparator.base.constructor.apply(this,arguments),this._IsHidden=!1,this._render()},PP.initClass(PP.Ui.ToolBarSeparator,PP.Ui.Control,"ToolBarSeparator"),toolBarSeparatorP=PP.Ui.ToolBarSeparator.prototype,toolBarSeparatorP._render=function(){this._initFromHTML("<div class='PPToolBarSeparator'></div>"),this.addClass("PPNoSelect"),PP.IsOpera&&this.addClass("PPOperaFix"),PP.Ui.ToolBarSeparator.base._render.call(this)},toolBarSeparatorP._getMargins=function(){var t=0,n=parseInt(PP.getStyle(this._DomNode,"marginLeft"));return isNaN(n)||(t+=n),n=parseInt(PP.getStyle(this._DomNode,"marginRight")),isNaN(n)||(t+=n),t},toolBarSeparatorP.setIsVisible=function(n){PP.Ui.ToolBarSeparator.base.setIsVisible.apply(this,arguments),PP.isBoolean(n)&&(this._IsHidden=!n);switch(n){case PP.Ui.Visibility.Collapsed:case PP.Ui.Visibility.Hidden:this._IsHidden=!0;break;case PP.Ui.Visibility.Visible:this._IsHidden=!1}return this},toolBarSeparatorP.setEnabled=function(){this._DomNode.removeAttribute("disabled"),this._DomNode.removeAttribute("enabled"),this._Enabled?this.removeClass("Disabled"):this.addClass("Disabled")},toolBarSeparatorP.show=function(){PP.Ui.ToolBarSeparator.base.show.apply(this,arguments),this._IsHidden=!1,this._Parent&&this._GroupName&&this._Parent.refreshGroup(this._GroupName)},toolBarSeparatorP.hide=function(){PP.Ui.ToolBarSeparator.base.hide.apply(this,arguments),this._IsHidden=!0,this._Parent&&this._GroupName&&this._Parent.refreshGroup(this._GroupName)},toolBarSeparatorP.dispose=function(){delete this._Parent,PP.Ui.ToolBarSeparator.base.dispose.apply(this,arguments)},toolBarSeparatorP=null,PP.Ui.ToolBar=function(){this._ImageList=null,this._Items=[],this._ShowOverflowButton=!1,this._defineEvents(["StateChanged"]),PP.Ui.ToolBar.base.constructor.apply(this,arguments),this._Groups={},this._onUpdate=!1,this._Menu=null,this._ItemsMapping={},this._render()},PP.initClass(PP.Ui.ToolBar,PP.Ui.Control,"ToolBar"),toolBarP=PP.Ui.ToolBar.prototype,toolBarP._render=function(){var n,i,t;if(this._initFromHTML("<div class='PPToolBar'></div>",!0),this._Menu=new PP.Ui.Menu({ImageList:this._ImageList,ItemSelected:PP.Delegate(this._onMenuItemSelected,this)}),this._OverflowMenuButton=new PP.Ui.ToolBarButton({Class:"OverflowMenuButton",IsFlat:!0,Menu:this._Menu}),this._ShowOverflowButton&&(this.addItem(this._OverflowMenuButton,!0),this._OverflowMenuButton.setIsVisible(!1)),this.beginUpdate(),n=this._Items,this._Items=[],n)for(i=n.length,t=0;t<i;t++)n[t]instanceof PP.Ui.ToolBarButton?this.addItem(n[t]):(n[t].Parent||(n[t].Parent=this),n[t].PPType?this.addItem(PP.create(n[t])):this.addItem(new PP.Ui.ToolBarButton(n[t])),delete n[t].Parent);this.endUpdate(),PP.Ui.ToolBar.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},toolBarP._onMenuItemSelected=function(n,t){var i,u,r;for(i in this._ItemsMapping)if(u=this._ItemsMapping[i],t.MenuItem===u){r=this.getItemById(i),r._onClicked(r);break}},toolBarP._updateItemGroup=function(n){var t=n.getGroupName();t?(this._Groups[t]?this._Groups[t].indexOf(n)<0&&this._Groups[t].push(n):this._Groups[t]=[n],this.refreshGroup(t)):n.refreshCorners()},toolBarP._addItemIntoMenu=function(n){var i,t;n!==this._OverflowMenuButton&&(n instanceof PP.Ui.ToolBarSeparator?(i=new PP.Ui.Separator,this._ItemsMapping[n.getId()]=i,this._Menu.addItem(i)):(t={Parent:this._Menu},n.getIsToggle()&&(t.Checked=n.getIsChecked()),n.getGroupName()&&(t.GroupName=n.getGroupName(),t.Checked=n.getIsChecked()),this._ImageList&&n.getRowIndex()>-1&&n.getColumnIndex()>-1?(t.RowIndex=n.getRowIndex(),t.ColumnIndex=n.getColumnIndex()):n.getImageUrl()&&(t.ImageUrl=n.getImageUrl()),n.getContent()&&(t.Content=n.getContent()),n.getMenu()&&(t.Menu=n.getMenu()),i=new PP.Ui.MenuItem(t),this._ItemsMapping[n.getId()]=i,this._Menu.addItem(i)))},toolBarP._removeItemFromMenu=function(n,t){this._Menu.removeItemByIndex(this._Menu.getItems().indexOf(this._ItemsMapping[n.getId()]),t)},toolBarP._updateMenuItem=function(n){var t=this._ItemsMapping[n.getId()];t&&(n.getIsChecked()!==t.getChecked()&&t.setChecked(n.getIsChecked()),n.getGroupName()!==t.getGroupName()&&(t.setGroupName=n.getGroupName()),n.getContent()!==t.getContent()&&t.setContent(n.getContent()),n.getMenu()!==t.getMenu()&&t.setMenu(n.getMenu()))},toolBarP._onToolBarButtonClick=function(n){this.Click.fire(this,{Item:n})},toolBarP._onToolBarButtonStateChanged=function(n){var u=n.getGroupName(),r,f,i;if(u)for(r=this._Groups[u],f=r.length,i=0;i<f;i++)n!==r[i]&&!r[i].getIsToggle()&&r[i].getIsChecked()&&r[i].setIsChecked(!1,!1);this.StateChanged.fire(this,{Item:n})},toolBarP.getShowOverflowButton=function(){return this._ShowOverflowButton},toolBarP.getImageList=function(){return this._ImageList},toolBarP.getWidth=function(){if(this._DomNode){var n=this._DomNode.offsetWidth;(this._Width===0||n!=this._Width)&&(this._Width=n)}return this._Width},toolBarP.setWidth=function(){return PP.Ui.ToolBar.base.setWidth.apply(this,arguments),this.refreshItemsVisibility(),this},toolBarP.setIsRTL=function(){var i,t;for(PP.Ui.ToolBar.base.setIsRTL.apply(this,arguments),i=this._Items.length,t=0;t<i;t++)this._Items[t].setIsRTL(this._IsRTL);return this._OverflowMenuButton.setIsRTL(this._IsRTL),this},toolBarP.setEnabled=function(n,t){var r,i;for(PP.Ui.ToolBar.base.setEnabled.apply(this,arguments),r=this._Items.length,i=0;i<r;i++)this._Items[i].setEnabled(n,t);return this._DomNode.removeAttribute("disabled"),this._DomNode.removeAttribute("enabled"),this},toolBarP.addItem=function(n,t){(n instanceof PP.Ui.ToolBarButton||n instanceof PP.Ui.ToolBarSeparator)&&this._Items.indexOf(n)<0&&(t||this._Items.push(n),n._Parent=this,n.addToNode(this._DomNode),n.setEnabled(this._Enabled),n.setIsRTL(this._IsRTL),n instanceof PP.Ui.ToolBarButton&&(n.Click.add(this._onToolBarButtonClick,this),n.StateChanged.add(this._onToolBarButtonStateChanged,this),this._updateItemGroup(n)),this._addItemIntoMenu(n),this.refreshItemsVisibility())},toolBarP.removeItemByIndex=function(n,t){var i,r,u;t=typeof t=="undefined"?!0:t==!0,parseInt(n)>-1&&n<this._Items.length&&(i=this._Items[n],this._removeItemFromMenu(i,t),i instanceof PP.Ui.ToolBarButton&&(r=i.getGroupName(),r&&this._Groups[r]&&(u=this._Groups[r].indexOf(i),u>-1&&this._Groups[r].splice(u,1)),i.Click.remove(this._onToolBarButtonClick,this),i.StateChanged.remove(this._onToolBarButtonStateChanged,this)),t?i.dispose():i.removeFromDOM(),this._Items.splice(n,1),this.refreshItemsVisibility())},toolBarP.removeItem=function(n,t){this.removeItemByIndex(this._Items.indexOf(n),t)},toolBarP.removeItemById=function(n,t){var i=this.getItemById(n);i&&this.removeItemByIndex(this._Items.indexOf(i),t)},toolBarP.getItems=function(){return this._Items},toolBarP.getItem=function(n){return this._Items[n]},toolBarP.getItemById=function(n){for(var i=this._Items.length,t=0;t<i;t++)if(this._Items[t].getId()===n)return this._Items[t];return null},toolBarP.getItemsByGroupName=function(n){return this._Groups[n]},toolBarP.refreshGroup=function(n){var i,u,f;if(!this._onUpdate&&(i=this._Groups[n],i)){var e=i.length,t=-1,r=-1;for(u=0;u<e;u++)PP.isBoolean(i[u]._IsHidden)&&!i[u]._IsHidden&&(f=this._Items.indexOf(i[u]),t<0?t=f:f>-1&&f<t&&(t=f),r<f&&(r=f),i[u].removeClass("Left"),i[u].removeClass("Right"),i[u].addClass("CenterInGroup"));if(t===-1&&r===-1)return;t===r?(this._Items[t].addClass("Left"),this._Items[t].addClass("Right"),this._Items[t].removeClass("CenterInGroup")):(this._Items[t].removeClass(this._Items[t].getIsRTL()?"Left":"Right"),this._Items[t].addClass(this._Items[t].getIsRTL()?"Right":"Left"),this._Items[t].removeClass("CenterInGroup"),this._Items[r].removeClass(this._Items[r].getIsRTL()?"Right":"Left"),this._Items[r].addClass(this._Items[r].getIsRTL()?"Left":"Right"),this._Items[r].removeClass("CenterInGroup"))}},toolBarP.refreshGroups=function(){var r,t,i,n;if(!this._onUpdate){for(r=this._Items.length,i=0;i<r;i++)n=this._Items[i],n instanceof PP.Ui.ToolBarButton&&(t=n.getGroupName(),t||(n.addClass("Left"),n.addClass("Right")));for(t in this._Groups)this.refreshGroup(t)}},toolBarP.refreshItemsVisibility=function(){var r,n;if(this._onUpdate||!this.getWidth()||!this._ShowOverflowButton){this._OverflowMenuButton&&this._OverflowMenuButton.setIsVisible(!1);return}var u=this._Items.length,t=this._OverflowMenuButton.getWidth(),i=!1;for(r=0;r<u;r++)if(n=this._Items[r],n.getIsVisible()){if(i){n.setIsVisible(!1),this._ItemsMapping[n.getId()].setIsVisible(!0);continue}this._ItemsMapping[n.getId()].setIsVisible(!1),t+=n._getMargins(),t+=n.getWidth(),t>this._Width&&(n.setIsVisible(!1),this._ItemsMapping[n.getId()].setIsVisible(!0),i=!0)}else if(PP.isBoolean(n._IsHidden)){if(i){n.setIsVisible(!1),this._ItemsMapping[n.getId()].setIsVisible(!0);continue}n.setIsVisible(!0),this._ItemsMapping[n.getId()].setIsVisible(!1),t+=n._getMargins(),t+=n.getWidth(),t>this._Width&&(n.setIsVisible(!1),this._ItemsMapping[n.getId()].setIsVisible(!0),i=!0)}this._OverflowMenuButton.setIsVisible(i),this.refreshGroups()},toolBarP.beginUpdate=function(){this._onUpdate=!0},toolBarP.endUpdate=function(){this._onUpdate=!1},toolBarP.addToNode=function(){PP.Ui.ToolBar.base.addToNode.apply(this,arguments),this.refreshGroups(),this.refreshItemsVisibility()},toolBarP.dispose=function(){delete this._ImageList;for(var n in this._ItemsMapping)delete this._ItemsMapping[n];PP.Ui.ToolBar.base.dispose.apply(this,arguments)},toolBarP=null,PP.Ui.ColorPanel=function(){var u,t,i,r;for(this._Color=this._Value=new PP.Color("#000000"),this._Mode=PP.Ui.ColorPanel.Mode.Palette,this._SpectrumMode=PP.Ui.ColorPanel.SpectrumMode.RGB,this._defineEvents(["PaletteSelected","ColorChange"]),this._SpectrumCaptionEn=this._SpectrumCaption="Spectrum",this._PaletteCaptionEn=this._PaletteCaption="Palette",this._PresentedColorsCaptionEn=this._PresentedColorsCaption="Presented:",this._UsedColorsCaptionEn=this._UsedColorsCaption="Used:",this._ModelCaptionEn=this._ModelCaption="Model:",this._RedCaptionEn=this._RedCaption="Red:",this._GreenCaptionEn=this._GreenCaption="Green:",this._BlueCaptionEn=this._BlueCaption="Blue:",this._HueCaptionEn=this._HueCaption="Hue:",this._SaturationCaptionEn=this._SaturationCaption="Saturation:",this._BrightnessCaptionEn=this._BrightnessCaption="Brightness:",this._RGBCaptionEn=this._RGBCaption="RGB",this._HSVCaptionEn=this._HSVCaption="HSV",this._PresentedColors=["#ffffff","#727272","#ddd9c4","#dce6f1","#f2dcdb","#ebf1de","#e4dfec","#daeef2","#fde9d9","#fefde5","#e4e4e4","#555555","#c4bd97","#b8cce4","#e6b8b7","#d8e4bc","#ccc0da","#b7dee8","#fcd5b4","#fef9b8","#c7c7c7","#393939","#948a54","#95b3d7","#da9694","#c4d79b","#b1a0c7","#92cddc","#fabf8f","#fdf14d","#ababab","#1c1c1c","#494529","#366092","#963634","#76933c","#60497a","#31869b","#e26B0a","#ffff00","#8e8e8e","#000000","#1d1b10","#244062","#632523","#4f6228","#403151","#215967","#974706","#d1d171"],PP.Ui.ColorPanel.base.constructor.apply(this,arguments),this._Value||this._Color?this._Value?this._Color=this._Value:this._Color&&(this._Value=this._Color):this._Value=this._Color=null,this._presCells=[],this._usedCells=[],this._MAXPRESLEN=50,this._MAXUSEDLEN=20,this._presColorsArr=[],u=this._PresentedColors.length,t=0;t<this._MAXPRESLEN;t++)i=null,u>t&&(i=this._PresentedColors[t]),r=new PP.Color(i),r.Index=t,this._presColorsArr.push(r);this._usedColorsArr=[],this._cssContent="PPCPanel",this._toolBarBlock=null,this._cssToolBarBlock="PPCCToolBarBlock",this._toolBar=null,this._paletteBtn=null,this._spectrumBtn=null,this._modeBlock=null,this._cssModeBlock="PPModeBlock",this._paletteBlock=null,this._cssPaletteBlock="PPCCPaletteBlock",this._presentedLabel=null,this._cssPresentedLabel="PPCCPresentedLabel",this._presentedTab=null,this._cssPresentedTab="PPCCPresentedTab",this._cssPaletteColorBtn="PPCCPaletteColorBtn",this._cssPaletteColorBtnSel="selected",this._cssPaletteColorBtnHov="hovered",this._cssPaletteColorBtnPres="pressed",this._paletteSep=null,this._cssPaletteSep="PPCCPaletteSep",this._usedLabel=null,this._cssUsedLabel="PPCCUsedLabel",this._usedTab=null,this._cssUsedTab="PPCCUsedTab",this._selectedCell="",this._spectrumBlock=null,this._cssSpectrumBlock="PPCCSpectrumBlock",this._spectrumTab=null,this._cssSpectrumTab="PPCCSpectrumTab",this._map=null,this._cssMap="PPCCMap",this._cssMapRGB="RGB",this._cssMapHSV="HSV",this._cross=null,this._cssCross="PPCCCross",this._slider=null,this._cssSlider="PPCCSlider",this._sliderBg=null,this._cssSliderBg="PPCCSliderBg",this._cssSliderRGB="RGB",this._cssSliderHSV="HSV",this._sliderArrow=null,this._cssSliderArrow="PPCCSliderArrow",this._mapCell=null,this._cssMapCell="PPCCMapCell",this._sldCell=null,this._cssSldCell="PPCCSldCell",this._inpCell=null,this._cssInpCell="PPCCInpCell",this._specInpTab=null,this._cssSpecInpTab="PPCCSpecInpTab",this._cssSpecSepCell1="PPCCSpecSepCell1",this._cssSpecSep1="PPCCSpecSep1",this._cssSpecSepCell2="PPCCSpecSepCell2",this._cssSpecSepCell3="PPCCSpecSepCell3",this._cssModelCapCell="PPCCModelCapCell",this._cssModelComboCell="PPCCModelComboCell",this._cssEdit1CapCell="PPCCEdit1CapCell",this._cssEdit1Cell="PPCCEdit1Cell",this._cssEdit2CapCell="PPCCEdit2CapCell",this._cssEdit2Cell="PPCCEdit2Cell",this._cssEdit3CapCell="PPCCEdit3CapCell",this._cssEdit3Cell="PPCCEdit3Cell",this._modelCap=null,this._EditFields=[],this._render(),this._isContentBind=!1,this._isUsedCellsBind=!1},PP.initClass(PP.Ui.ColorPanel,PP.Ui.Control,"ColorPanel"),CPanelP=PP.Ui.ColorPanel.prototype,CPanelP._render=function(){this._initFromHTML("<div class='"+this._cssContent+"'><div class='"+this._cssToolBarBlock+"'></div><div class='"+this._cssModeBlock+"'><div class='"+this._cssPaletteBlock+"'><div class='"+this._cssPresentedLabel+"'></div><table class='"+this._cssPresentedTab+"' border='0' cellspacing='0' cellpadding='0'></table><div class='"+this._cssPaletteSep+"'></div><div class='"+this._cssUsedLabel+"'></div><table class='"+this._cssUsedTab+"' border='0' cellspacing='0' cellpadding='0'></table></div><div class='"+this._cssSpectrumBlock+"'><table class='"+this._cssSpectrumTab+"' border='0' cellspacing='0' cellpadding='0'><tr><td class='"+this._cssMapCell+"'><div class='"+this._cssMap+"'><div class='"+this._cssCross+"'></div></div></td><td class='"+this._cssSldCell+"'><div class='"+this._cssSlider+"'><div class='"+this._cssSliderBg+"'></div><div class='"+this._cssSliderArrow+"'></div></div></td><td class='"+this._cssInpCell+"'><table class='"+this._cssSpecInpTab+"' border='0' cellspacing='0' cellpadding='0'><tr><td class='"+this._cssModelCapCell+"'></td><td class='"+this._cssModelComboCell+"'></td></tr><tr><td class='"+this._cssSpecSepCell1+"' colspan='2'><div class='"+this._cssSpecSep1+"'></div></td></tr><tr><td class='"+this._cssSpecSepCell2+"' colspan='2'></td></tr><tr><td class='"+this._cssSpecSepCell3+"' colspan='2'></td></tr></table></td></tr></table></div></div></div>"),this._toolBarBlock=PP.querySelector(this._DomNode,"."+this._cssToolBarBlock),this._refreshToolBar(),this._modeBlock=PP.querySelector(this._DomNode,"."+this._cssModeBlock),this._paletteBlock=PP.querySelector(this._modeBlock,"."+this._cssPaletteBlock),this._presentedLabelDiv=PP.querySelector(this._paletteBlock,"."+this._cssPresentedLabel),this._presentedLabel=new PP.Ui.Label({ResourceKey:"colorPanelPresentedColors",ParentNode:this._presentedLabelDiv}),this._paletteSep=PP.querySelector(this._paletteBlock,"."+this._cssPaletteSep),this._usedLabelDiv=PP.querySelector(this._paletteBlock,"."+this._cssUsedLabel),this._usedLabel=new PP.Ui.Label({ResourceKey:"colorPanelUsedColors",ParentNode:this._usedLabelDiv}),this.getColorsFromStorage(),this._refreshUsedTab(),this._spectrumBlock=PP.querySelector(this._modeBlock,"."+this._cssSpectrumBlock),this._spectrumTab=PP.querySelector(this._spectrumBlock,"."+this._cssSpectrumTab),this._mapCell=PP.querySelector(this._spectrumTab,"."+this._cssMapCell),this._sldCell=PP.querySelector(this._spectrumTab,"."+this._cssSldCell),this._inpCell=PP.querySelector(this._spectrumTab,"."+this._cssInpCell),this._map=PP.querySelector(this._mapCell,"."+this._cssMap),this._cross=PP.querySelector(this._map,"."+this._cssCross),this._slider=PP.querySelector(this._sldCell,"."+this._cssSlider),this._sliderBg=PP.querySelector(this._slider,"."+this._cssSliderBg),this._sliderArrow=PP.querySelector(this._slider,"."+this._cssSliderArrow),this._specInpTab=PP.querySelector(this._inpCell,"."+this._cssSpecInpTab),this._modelCapCell=PP.querySelector(this._specInpTab,"."+this._cssModelCapCell),this._modelCap=new PP.Ui.Label({ResourceKey:"colorPanelModel",ParentNode:this._modelCapCell}),this._modelComboCell=PP.querySelector(this._specInpTab,"."+this._cssModelComboCell),this._modelCombo=new PP.Ui.ComboBox({Id:this._Id+"_ModelCombo",ParentNode:this._modelComboCell,ListBox:{Items:[{ResourceKey:"colorPanelRGB",Value:PP.Ui.ColorPanel.SpectrumMode.RGB},{ResourceKey:"colorPanelHSV",Value:PP.Ui.ColorPanel.SpectrumMode.HSV}]},DropPanel:{MinDropDownWidth:0,MinDropDownHeight:0,EnableResize:!1,UseScrollBox:!1}}),this._modelCombo.getListBox().ItemSelected.add(this._onModelComboSelect,this),this._modelCombo.setEnableEdit(!1),this._labelsRH={},this._labelsRH[PP.Ui.ColorPanel.SpectrumMode.RGB]=new PP.Ui.Label({ResourceKey:"colorPanelRed"}),this._labelsRH[PP.Ui.ColorPanel.SpectrumMode.HSV]=new PP.Ui.Label({ResourceKey:"colorPanelHue"}),this._tmpObj=this._createEdit(this._cssEdit1CapCell,this._labelsRH,this._cssEdit1Cell,"_Edit1",2),this._Edit1=this._tmpObj.Edit,this._Edit1.AfterValueChange.add(this._onEdit1Change,this),this._labelsGS={},this._labelsGS[PP.Ui.ColorPanel.SpectrumMode.RGB]=new PP.Ui.Label({ResourceKey:"colorPanelGreen"}),this._labelsGS[PP.Ui.ColorPanel.SpectrumMode.HSV]=new PP.Ui.Label({ResourceKey:"colorPanelSaturation"});var n=this._createEdit(this._cssEdit2CapCell,this._labelsGS,this._cssEdit2Cell,"_Edit2",4);this._Edit2=n.Edit,this._Edit2.AfterValueChange.add(this._onEdit2Change,this),this._labelsBB={},this._labelsBB[PP.Ui.ColorPanel.SpectrumMode.RGB]=new PP.Ui.Label({ResourceKey:"colorPanelBlue"}),this._labelsBB[PP.Ui.ColorPanel.SpectrumMode.HSV]=new PP.Ui.Label({ResourceKey:"colorPanelBrightness"}),n=this._createEdit(this._cssEdit3CapCell,this._labelsBB,this._cssEdit3Cell,"_Edit3",6),this._Edit3=n.Edit,this._Edit3.AfterValueChange.add(this._onEdit3Change,this),this._setSpectrumMode(this._SpectrumMode),this.updateSize(),this.setIsRTL(this._IsRTL),this._ParentNode&&this.addToNode(this._ParentNode),this._setButtonsWidth(),PP.Ui.ColorPanel.base._render.call(this)},CPanelP._bindEvents=function(){PP.Ui.ColorPanel.base._bindEvents.call(this);var t,n,i;if(this._isContentBind||(this._content&&this._addEvents(this._content,{contextmenu:this._onDropPanelContextMenu}),this._map&&this._addEvents(this._map,{mousemove:this._onMapMouseMove,mousedown:this._onMapMouseDown,mouseup:this._onMapMouseUp}),this._slider&&this._addEvents(this._slider,{mousemove:this._onSliderMouseMove,mousedown:this._onSliderMouseDown,mouseup:this._onSliderMouseUp})),!this._isContentBind||!this._isUsedCellsBind){for(t=this._usedCells.length,n=0;n<t;n++)i=this._usedCells[n],this._addEvents(i,{click:this._onPaletteColorSelect,mousedown:this._onPaletteColorMouseDown,mouseup:this._onPaletteColorMouseUp,mouseout:this._onPaletteColorMouseOut,mouseover:this._onPaletteColorMouseOver});this._isUsedCellsBind=!0}this._isContentBind=!0},CPanelP._unBindEvents=function(){PP.Ui.ColorPanel.base._unBindEvents.call(this);var t,n,i;if(this._isContentBind&&(this._map&&this._removeAllEvents(this._map),this._slider&&this._removeAllEvents(this._slider)),this._isUsedCellsBind||this._isContentBind){for(t=this._usedCells.length,n=0;n<t;n++)i=this._usedCells[n],this._removeAllEvents(i);this._isUsedCellsBind=!1}this._isContentBind=!1},CPanelP._onModeButtonClick=function(n){if(this._Enabled){var i=n.getData();this._Mode!=i&&(this._Mode=i,this.updateSize())}},CPanelP._onModelComboSelect=function(n){if(this._Enabled){var i=n.getSelectedIndex();this._SpectrumMode!=i&&(this._SpectrumMode=i,this._setSpectrumMode(i))}},CPanelP._onPaletteColorSelect=function(n,t){var i,r,u;this._Enabled&&((i=t.Event.sourceElement,PP.IsIE&&i.LastDownUpWhich!=1)||i.pressed&&(r=new PP.Ui.ColorPanelArgs,u=new PP.Color(i.Color),r.OldColor=this._Color==null?null:this._Color.clone(),r.NewColor=u.clone(),this.updateUsedColors(u),this.PaletteSelected.fire(this,r),r.Cancel||(this._selectedCell!=i&&(this._unSelectCell(),this._selectCell(i)),this._Color=u.clone(),this._refreshAfterPaletteChange())))},CPanelP._onPaletteColorMouseDown=function(n,t){if(this._Enabled){var i=t.Event.sourceElement;(i.LastDownUpWhich=null,i.pressed=null,t.Event.which==1)&&(PP.addClass(i,this._cssPaletteColorBtnPres),i.pressed=!0,i.LastDownUpWhich=t.Event.which)}},CPanelP._onPaletteColorMouseUp=function(n,t){if(this._Enabled){var i=t.Event.sourceElement;if(t.Event.which!=1){i.LastDownUpWhich=null;return}PP.removeClass(i,this._cssPaletteColorBtnPres),i.LastDownUpWhich=t.Event.which,PP.IsOpera&&i.pressed&&this._onPaletteColorSelect(n,t)}},CPanelP._onPaletteColorMouseOut=function(n,t){if(this._Enabled){var i=t.Event.sourceElement;i.pressed=null,PP.removeClass(i,this._cssPaletteColorBtnHov),PP.removeClass(i,this._cssPaletteColorBtnPres)}},CPanelP._onPaletteColorMouseOver=function(n,t){if(this._Enabled){var i=t.Event.sourceElement;i.pressed=null,PP.addClass(i,this._cssPaletteColorBtnHov)}},CPanelP._onMapMouseMove=function(n,t){this._Enabled&&this._isMapMouseDown&&this._onMapChange(t.Event)},CPanelP._onMapMouseDown=function(n,t){if(this._Enabled){if(t.Event.which!=1)return!1;this._isMapMouseDown?this._onMapMouseUp(n,t):(this._isMapMouseDown=!0,this._OldBodySel=document.body.style.MozUserSelect,document.body.style.MozUserSelect="none",PP.setCapture(this._map),this._onMapChange(t.Event))}},CPanelP._onMapMouseUp=function(n,t){if(t.Event.which!=1)return!1;this._isMapMouseDown&&(PP.releaseCapture(this._map),document.body.style.MozUserSelect=this._OldBodySel,this._isMapMouseDown=!1)},CPanelP._onSliderMouseMove=function(n,t){this._Enabled&&this._isSliderMouseDown&&this._onSliderChange(t.Event)},CPanelP._onSliderMouseDown=function(n,t){if(this._Enabled){if(t.Event.which!=1)return!1;this._isSliderMouseDown?this._onSliderMouseUp(n,t):(this._isSliderMouseDown=!0,this._OldBodySel=document.body.style.MozUserSelect,document.body.style.MozUserSelect="none",PP.setCapture(this._slider),this._onSliderChange(t.Event))}},CPanelP._onSliderMouseUp=function(n,t){if(t.Event.which!=1)return!1;this._isSliderMouseDown&&(PP.releaseCapture(this._slider),document.body.style.MozUserSelect=this._OldBodySel,this._isSliderMouseDown=!1)},CPanelP._onEdit1Change=function(n,t){var i=new PP.Ui.ColorPanelArgs;i.OldColor=this._Color==null?null:this._Color.clone(),this._Color==null&&(this._Color=new PP.Color(255,255,255)),this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?this._Color.setR(t.NewValue):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&this._Color.setH(t.NewValue),i.NewColor=this._Color.clone(),i.OldColor&&i.NewColor&&i.NewColor.isEqual(i.OldColor)||this._raiseColorChange(i),this._refreshAfterEditChange()},CPanelP._onEdit2Change=function(n,t){var i=new PP.Ui.ColorPanelArgs;i.OldColor=this._Color==null?null:this._Color.clone(),this._Color==null&&(this._Color=new PP.Color(255,255,255)),this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?this._Color.setG(t.NewValue):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&this._Color.setS(t.NewValue),i.NewColor=this._Color.clone(),i.OldColor&&i.NewColor&&i.NewColor.isEqual(i.OldColor)||this._raiseColorChange(i),this._refreshAfterEditChange()},CPanelP._onEdit3Change=function(n,t){var i=new PP.Ui.ColorPanelArgs;i.OldColor=this._Color==null?null:this._Color.clone(),this._Color==null&&(this._Color=new PP.Color(255,255,255)),this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?this._Color.setB(t.NewValue):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&this._Color.setV(t.NewValue),i.NewColor=this._Color.clone(),i.OldColor&&i.NewColor&&i.NewColor.isEqual(i.OldColor)||this._raiseColorChange(i),this._refreshAfterEditChange()},CPanelP._onMapChange=function(n){var o=this._getMouseCoordsOnElement(n,this._map),t=o.X,i=o.Y,f=this._map.offsetWidth,e=this._map.offsetHeight,r,u;t<0&&i<0||t>=f&&i<0||t>=f&&i>=e||t<0&&i>=e||(t<0&&(t=0),t>=f&&(t=f-1),i<0&&(i=0),i>=e&&(i=e-1),this._setCrossPosition(t,i),r=this._XYZtoHSV(t,i,0),u=new PP.Ui.ColorPanelArgs,u.OldColor=this._Color==null?null:this._Color.clone(),this._Color==null?this._Color=(new PP.Color).setH(r.H).setS(r.S).setV(r.V):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?(this._Color.setH(r.H),this._Color.setS(r.S)):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&(this._Color.setV(r.V),this._Color.setS(r.S)),u.NewColor=this._Color.clone(),u.OldColor&&u.NewColor&&u.NewColor.isEqual(u.OldColor)||this._raiseColorChange(u),this._refreshAfterMapChange())},CPanelP._onSliderChange=function(n){var o=this._getMouseCoordsOnElement(n,this._slider),f=o.X,u=o.Y,s=this._slider.offsetWidth,e=this._slider.offsetHeight,i,r,t;f<0&&u<0||f>=s&&u<0||f>=s&&u>=e||f<0&&u>=e||(r=u,t=new PP.Ui.ColorPanelArgs,this._Color==null&&(i=this._XYZtoHSV(f,u,0),this._Color=(new PP.Color).setH(i.H).setS(i.S).setV(i.V)),t.OldColor=this._Color.clone(),r<0?(r=0,this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?this._Color.setV(100):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&this._Color.setH(360)):r>=e?(r=e-1,this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?this._Color.setV(0):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&this._Color.setH(0)):(i=this._XYZtoHSV(0,0,r),this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?this._Color.setV(i.V):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&this._Color.setH(i.H)),this._setSliderArrowPosition(r),t.NewColor=this._Color.clone(),t.OldColor&&t.NewColor&&t.NewColor.isEqual(t.OldColor)||this._raiseColorChange(t),this._refreshAfterSliderChange())},CPanelP.setIsRTL=function(n){PP.Ui.ColorPanel.base.setIsRTL.call(this,n);var t=this._IsRTL?"rtl":"ltr";return this._content&&(this._content.dir=t),this._toolBar&&this._toolBar.setIsRTL(this._IsRTL),this._modelCombo&&this._modelCombo.setIsRTL(this._IsRTL),this._Edit1&&this._Edit1.setIsRTL(this._IsRTL),this._Edit2&&this._Edit2.setIsRTL(this._IsRTL),this._Edit3&&this._Edit3.setIsRTL(this._IsRTL),this},CPanelP.getColor=function(){return this._Color==null?null:this._Color.clone()},CPanelP.setColor=function(n,t){var r,i;if(t=typeof t=="undefined"?!0:t==!0,typeof n=="undefined"||n==null)n=new PP.Color;else if(typeof n=="string")n=PP.Color.getColor(n);else if(!(n instanceof PP.Color))throw new Error("incorrect type of Color");return this._Color==null&&n==null&&(this._Color==null||n==null||this._Color.isEqual(n))||(r=n==null?null:n.clone(),t?(i=new PP.Ui.ColorPanelArgs,i.OldColor=this._Color==null?null:this._Color.clone(),i.NewColor=n==null?null:n.clone(),this._raiseColorChange(i),i.Cancel||this._changeColor(r),i=new PP.Ui.ColorPanelArgs,i.OldColor=this._Color==null?null:this._Color.clone(),i.NewColor=n==null?null:n.clone(),this._Color=r==null?null:r.clone(),this._raiseColorChanged(i)):(this._changeColor(r),this._Color=r==null?null:r.clone())),this},CPanelP.getValue=function(){return this.getColor()},CPanelP.setValue=function(n,t){return this.setColor(n,t)},CPanelP._findAndSelectCell=function(){if(this._Color){if(this._Color&&(!this._selectedCell||this._selectedCell&&this._selectedCell.Color.toUpperCase()!=this._Color.toString())){var i,n,t;for(this._unSelectCell(),i=this._presCells.length,n=0;n<i;n++)if(t=this._presCells[n],t.Color.toUpperCase()==this._Color.toString()){this._selectCell(t);return}for(i=this._usedCells.length,n=0;n<i;n++)if(t=this._usedCells[n],t.Color.toUpperCase()==this._Color.toString()){this._selectCell(t);return}}}else this._unSelectCell()},CPanelP._refreshToolBar=function(){var r=!0,t,i;this._toolBar||(t=this._Id+"_TB",this._toolBar=new PP.Ui.ToolBar({Id:t,ParentNode:this._toolBarBlock}),i=t+"_radioSet",this._paletteBtn=new PP.Ui.ToolBarButton({Id:this._Id+"_PaletteBtn",ResourceKey:"colorPanelPalette",GroupName:i,Parent:this._toolBar}),this._paletteBtn.setData(PP.Ui.ColorPanel.Mode.Palette),this._paletteBtn.StateChanged.add(this._onModeButtonClick,this),this._toolBar.addItem(this._paletteBtn),this._spectrumBtn=new PP.Ui.ToolBarButton({Id:this._Id+"_spectrumBtn",ResourceKey:"colorPanelSpectrum",GroupName:i,Parent:this._toolBar}),this._spectrumBtn.setData(PP.Ui.ColorPanel.Mode.Spectrum),this._spectrumBtn.StateChanged.add(this._onModeButtonClick,this),this._toolBar.addItem(this._spectrumBtn));switch(this._Mode){case PP.Ui.ColorPanel.Mode.Palette:this._paletteBtn.setIsChecked(!0,!1),this._selectedModeBtn=this._paletteBtn;break;case PP.Ui.ColorPanel.Mode.Spectrum:this._spectrumBtn.setIsChecked(!0,!1),this._selectedModeBtn=this._spectrumBtn}return r},CPanelP._refreshPresentedTab=function(){var r,u,n,s,o,h,f,t,e,i;if(this._presentedTab){for(r=this._presCells.length,n=0;n<r;n++)u=this._presCells[n],this._removeAllEvents(u);this._presentedTab.removeChild(this._presentedTab.firstChild)}for(this._presentedTab=PP.querySelector(this._paletteBlock,"."+this._cssPresentedTab),s=5,o=10,this._presCells=[],n=0;n<s;n++)for(h=this._presentedTab.insertRow(-1),f=0;f<o;f++)t=h.insertCell(-1),t.className=this._cssPaletteColorBtn,e=f+n*o,i="#FFFFFF",e<this._PresentedColors.length?(i=this._PresentedColors[e],this._Color&&i.toUpperCase()==this._Color.toString()&&this._selectCell(t)):t.style.visibility="hidden",t.style.backgroundColor=i,t.Color=i,t.Index=e,t.IsUsed=!1,this._presCells.push(t);for(r=this._presCells.length,n=0;n<r;n++)u=this._presCells[n],this._addEvents(u,{click:this._onPaletteColorSelect,mousedown:this._onPaletteColorMouseDown,mouseup:this._onPaletteColorMouseUp,mouseout:this._onPaletteColorMouseOut,mouseover:this._onPaletteColorMouseOver})},CPanelP._refreshUsedTab=function(){var e,f,i,o,r,n,u,t;if(this._usedTab){for(this._isUsedCellsBind=!1;this._usedTab.rows.length>0;)this._usedTab.deleteRow(0);this._selectedCell&&this._selectedCell.IsUsed&&(this._selectedCell=null),this._usedCells=[]}else this._usedTab=PP.querySelector(this._paletteBlock,"."+this._cssUsedTab);if(this._usedColorsArr&&this._usedColorsArr.length!=0)this._usedTab.style.display="";else{this._usedTab.display="none";return}for(e=2,f=10,i=0;i<e;i++)for(o=this._usedTab.insertRow(-1),r=0;r<f;r++)n=o.insertCell(-1),n.className=this._cssPaletteColorBtn,this._usedColorsArr&&(u=r+i*f,t="#FFFFFF",u<this._usedColorsArr.length?(t=this._usedColorsArr[u].toString(),!this._selectedCell&&this._Color&&t.toUpperCase()==this._Color.toString()&&this._selectCell(n),n.style.backgroundColor=t,n.Index=u,n.Color=t,n.IsUsed=!0,this._addEvents(n,{click:this._onPaletteColorSelect,mousedown:this._onPaletteColorMouseDown,mouseup:this._onPaletteColorMouseUp,mouseout:this._onPaletteColorMouseOut,mouseover:this._onPaletteColorMouseOver}),this._usedCells.push(n)):n.style.visibility="hidden")},CPanelP.getColorsFromStorage=function(){var i=this._getColorsStorageKey(),t,n;if(typeof localStorage!="undefined"&&localStorage&&localStorage.getItem(i))for(t=localStorage.getItem(i).split(" "),this._usedColorsArr=[],n=0;n<t.length;n++)this._usedColorsArr.push(new PP.Color(t[n]))},CPanelP.saveColorsToStorage=function(){var i,t,n;if(typeof localStorage!="undefined"&&localStorage){for(i=this._getColorsStorageKey(),t=[],n=0;n<this._usedColorsArr.length;n++)t.push(this._usedColorsArr[n].toString());localStorage.setItem(i,t.join(" "))}},CPanelP._getColorsStorageKey=function(){return"PPCPUsedColors_"+this._Id},CPanelP._createEdit=function(n,t,i,r,u){var e=this._specInpTab.insertRow(u),o=e.insertCell(-1),s,f,h;o.className=n;for(s in t)t[s].addToNode(o),this._EditFields.push(t);return f=e.insertCell(-1),f.className=i,h=new PP.Ui.NumberEdit({Id:this._Id+r,ParentNode:f,FractionCount:0}),{Edit:h}},CPanelP._setSpectrumMode=function(n){var t,i,r,u;if(typeof n!="number")throw new Error("incorrect type of value");for(t="",i="",this._SpectrumMode=n,r=0;r<this._EditFields.length;r++)for(u in this._EditFields[r])this._EditFields[r][u].setIsVisible(u==n,!0);n==PP.Ui.ColorPanel.SpectrumMode.RGB?(this._Edit1.setMinValue(0),this._Edit1.setValue(this._Color==null?255:this._Color.getR(),!1),this._Edit1.setMaxValue(255),this._Edit2.setMinValue(0),this._Edit2.setMaxValue(255),this._Edit2.setValue(this._Color==null?255:this._Color.getG(),!1),this._Edit3.setMinValue(0),this._Edit3.setMaxValue(255),this._Edit3.setValue(this._Color==null?255:this._Color.getB(),!1),t=[this._cssMap,this._cssMapRGB].join(" "),i=[this._cssSliderBg,this._cssSliderRGB].join(" ")):n==PP.Ui.ColorPanel.SpectrumMode.HSV&&(this._Edit1.setMinValue(0),this._Edit1.setMaxValue(360),this._Edit1.setValue(this._Color==null?0:this._Color.getH(),!1),this._Edit2.setMinValue(0),this._Edit2.setValue(this._Color==null?0:this._Color.getS(),!1),this._Edit2.setMaxValue(100),this._Edit3.setMinValue(0),this._Edit3.setValue(this._Color==null?100:this._Color.getV(),!1),this._Edit3.setMaxValue(100),t=[this._cssMap,this._cssMapHSV].join(" "),i=[this._cssSliderBg,this._cssSliderHSV].join(" ")),t&&this._map.className!=t&&(this._map.className=t),i&&this._sliderBg.className!=i&&(this._sliderBg.className=i),this._setCrossAndSliderByColor(this._Color),this._setButtonsWidth()},CPanelP._selectCell=function(n){n.className=[this._cssPaletteColorBtn,this._cssPaletteColorBtnSel].join(" "),this._selectedCell=n},CPanelP._unSelectCell=function(){this._selectedCell&&(this._selectedCell.className=this._cssPaletteColorBtn),this._selectedCell=null},CPanelP._setCrossAndSliderByColor=function(n){var i=this._HSVtoXYZ(n.getH(),n.getS(),n.getV()),t,r,u;this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?(t=n.clone(),r=t.setV(100).toString(),this._sliderBg.style.backgroundColor=r):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&(t=n.clone(),u=t.setV(100).setS(100).toString(),this._map.style.backgroundColor=u),this._setCrossPosition(i.X,i.Y),this._setSliderArrowPosition(i.Z)},CPanelP._setCrossPosition=function(n,t){this._cross&&(n<0&&(n=0),t<0&&(t=0),n>=this._map.offsetWidth&&(n=this._map.offsetWidth-1),t>=this._map.offsetHeight&&(t=this._map.offsetHeight-1),this._cross.style.left=n+"px",this._cross.style.top=t+"px")},CPanelP._setSliderArrowPosition=function(n){this._sliderArrow&&(n<0&&(n=0),n>=this._slider.offsetHeight&&(n=this._slider.offsetHeight-1),this._sliderArrow.style.top=n+"px")},CPanelP._setEditorsValues=function(n){this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?(this._Edit1.setValue(n.getR(),!1),this._Edit2.setValue(n.getG(),!1),this._Edit3.setValue(n.getB(),!1)):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&(this._Edit1.setValue(n.getH(),!1),this._Edit2.setValue(n.getS(),!1),this._Edit3.setValue(n.getV(),!1))},CPanelP._getMouseCoordsOnElement=function(n,t){var i=PP.calculateOffset(t),r=PP.calculateMouseX(n),u=PP.calculateMouseY(n),f=r-i.X,e=u-i.Y;return{X:f,Y:e}},CPanelP._refreshAfterEditChange=function(){this._unSelectCell(),this._setCrossAndSliderByColor(this._Color)},CPanelP._refreshAfterMapChange=function(){if(this._unSelectCell(),this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB){this._Edit1.setValue(this._Color.getR(),!1),this._Edit2.setValue(this._Color.getG(),!1),this._Edit3.setValue(this._Color.getB(),!1);var n=this._Color.clone().setV(100);this._sliderBg.style.backgroundColor=n.toString()}else this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&(this._Edit2.setValue(this._Color.getS(),!1),this._Edit3.setValue(this._Color.getV(),!1))},CPanelP._refreshAfterSliderChange=function(){if(this._unSelectCell(),this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB)this._Edit1.setValue(this._Color.getR(),!1),this._Edit2.setValue(this._Color.getG(),!1),this._Edit3.setValue(this._Color.getB(),!1);else if(this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV){this._Edit1.setValue(this._Color.getH(),!1);var n=this._Color.clone().setV(100).setS(100).toString();this._map.style.backgroundColor=n}},CPanelP._refreshAfterPaletteChange=function(){},CPanelP._raiseColorChanged=function(n){this.ColorChanged.fire(this,n)},CPanelP._raiseColorChange=function(n){this.ColorChange.fire(this,n)},CPanelP._HSVtoXYZ=function(n,t,i){var s=this._map.offsetWidth,r=this._map.offsetHeight,u=this._slider.offsetHeight,f=0,e=0,o=0;return this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?(f=Math.round(n*s/360),e=r-1-Math.round(t*r/101),o=u-1-Math.round(i*u/101)):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&(f=Math.round(t*s/101),e=r-1-Math.round(i*r/101),o=u-1-Math.round(n*u/360)),{X:f,Y:e,Z:o}},CPanelP._XYZtoHSV=function(n,t,i){var s=this._map.offsetWidth,r=this._map.offsetHeight,u=this._slider.offsetHeight,f=0,e=0,o=0;return this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.RGB?(f=Math.round(n*360/s),e=Math.round((r-1-t)*101/r),o=Math.round((u-1-i)*101/u)):this._SpectrumMode==PP.Ui.ColorPanel.SpectrumMode.HSV&&(e=Math.round(n*101/s),o=Math.round((r-1-t)*101/r),f=Math.round((u-1-i)*360/u)),{H:f,S:e,V:o}},CPanelP._setButtonsWidth=function(){if(!this._isFirstOpen){this._setButtonsWidthByMax(this._toolBar);var n=this._getSummButtonsWidth(this._toolBar);n<this._modeBlock.offsetWidth&&this._setButtonsWidthEqual(this._toolBar,this._modeBlock),this._refreshToolBar()}},CPanelP._setButtonsWidthByMax=function(n){var o,s,h,u;if(n){for(var f=0,i=n.getItems(),e=i.length,r,t=0;t<e;t++)o=i[t]._DomNode,i[t].setWidth(""),s=i[t].getIsChecked(),i[t].setIsChecked(!0,!1),r=o.offsetWidth,r>f&&(f=r),i[t].setIsChecked(s,!1);for(i=n.getItems(),e=i.length,t=0;t<e;t++)h=i[t]._DomNode,r=this._getOffsetWidthNoMargins(i[t]._DomNode),u=f-h.offsetWidth,u=u<0?0:u,r=r+u,i[t].setWidth(r)}},CPanelP._getSummButtonsWidth=function(n){for(var i=n.getItems(),u=i.length,r=0,t=0;t<u;t++)r+=i[t]._DomNode.offsetWidth;return r},CPanelP._setButtonsWidthEqual=function(n,t){for(var f=this._getOffsetWidthNoMargins(t),r=n.getItems(),u=r.length,e=Math.floor(f/u),i=0;i<u;i++)this._setButtonWidth(r[i],e)},CPanelP._getOffsetWidthNoMargins=function(n){return n.offsetWidth-this._getMarginsWidth(n)},CPanelP._getMarginsWidth=function(n){var t=this._getPixelSize(n,"padding-left"),i=this._getPixelSize(n,"margin-left"),r=this._getPixelSize(n,"border-left-width"),u=this._getPixelSize(n,"padding-right"),f=this._getPixelSize(n,"margin-right"),e=this._getPixelSize(n,"border-right-width");return t+i+r+u+f+e},CPanelP._getPixelSize=function(n,t){var i=PP.getStyle(n,t);return i=PP.widthToPixel(i),i=i?i:0},CPanelP._setButtonWidth=function(n,t){var i=t-this._getMarginsWidth(n._DomNode);i=i<0?0:i,n.setWidth(i)},CPanelP.addToNode=function(){PP.Ui.ColorPanel.base.addToNode.apply(this,arguments),this.updateSize()},CPanelP._adjustMarkup=function(){PP.Ui.ColorPanel.base._adjustMarkup.call(this),this._DomNode&&(this._DomNode.dir=this._IsRTL?"rtl":"ltr")},CPanelP.setEnabled=function(n,t){n=n==!0,this._paletteBtn.setEnabled(n),this._spectrumBtn.setEnabled(n),this._Edit1.setEnabled(n),this._Edit2.setEnabled(n),this._Edit3.setEnabled(n),this._modelCombo.setEnabled(n),PP.Ui.ColorPanel.base.setEnabled.call(this,n,t)},CPanelP.updateSize=function(){if(this._refreshToolBar(),this._refreshPresentedTab(),this.getColorsFromStorage(),this._refreshUsedTab(),this._usedColorsArr&&this._usedColorsArr.length!=0?(this._usedTab.style.display="",this._paletteSep.style.display="",this._usedLabelDiv.style.display=""):(this._usedLabelDiv.style.display="none",this._paletteSep.style.display="none",this._usedTab.style.display="none"),this._Mode==PP.Ui.ColorPanel.Mode.Palette)this._findAndSelectCell(),PP.show(this._paletteBlock),PP.hide(this._spectrumBlock);else if(this._Mode==PP.Ui.ColorPanel.Mode.Spectrum){PP.hide(this._paletteBlock),PP.show(this._spectrumBlock),this._modelCombo.getDropPanel().setWidth(this._modelCombo._DomNode.offsetWidth+2);var n=this._modelCombo.getListBox();n.setSelectedIndex(this._SpectrumMode,!1),this._modelCombo.setContent(n.getSelectedItem().toString()),this._setCrossAndSliderByColor(this._Color),this._setEditorsValues(this._Color)}this._setButtonsWidth()},CPanelP.updateUsedColors=function(n){var r,t,i;if(this._Enabled){if(r=!1,n&&(t=new PP.Ui.ColorPanelArgs,t.OldColor=this._Color==null?null:this._Color.clone(),t.NewColor=n.clone(),this._Color=n.clone(),!t.Cancel)){for(i=0;i<this._usedColorsArr.length;i++)if(this._usedColorsArr[i].isEqual(this._Color)){this._usedColorsArr.splice(i,1);break}this._usedColorsArr.unshift(this._Color.clone()),this._usedColorsArr.length>this._MAXUSEDLEN&&this._usedColorsArr.splice(-1,1),this.saveColorsToStorage(),r=!0}r&&this._raiseColorChange(t)}},CPanelP.setWidth=function(){},CPanelP.setHeight=function(){},CPanelP.setPresentedColors=function(n){if(typeof n=="string"&&n.indexOf("#")==0)this._PresentedColors=[n],this._refreshPresentedTab();else if(Array.isArray(n))this._PresentedColors=n,this._refreshPresentedTab();else if(n===null||n===undefined)this._PresentedColors=["#ffffff","#727272","#ddd9c4","#dce6f1","#f2dcdb","#ebf1de","#e4dfec","#daeef2","#fde9d9","#fefde5","#e4e4e4","#555555","#c4bd97","#b8cce4","#e6b8b7","#d8e4bc","#ccc0da","#b7dee8","#fcd5b4","#fef9b8","#c7c7c7","#393939","#948a54","#95b3d7","#da9694","#c4d79b","#b1a0c7","#92cddc","#fabf8f","#fdf14d","#ababab","#1c1c1c","#494529","#366092","#963634","#76933c","#60497a","#31869b","#e26B0a","#ffff00","#8e8e8e","#000000","#1d1b10","#244062","#632523","#4f6228","#403151","#215967","#974706","#d1d171"],this._refreshPresentedTab();else throw PP.ArgumentException(this);},CPanelP.getPresentedColors=function(){return this._PresentedColors},CPanelP.setColor=CPanelP.setValue=function(n){n instanceof PP.Color&&(this._Color=n),this.updateSize()},CPanelP.getColor=CPanelP.getValue=function(){return this._Color},CPanelP.setMode=function(n){(n==PP.Ui.ColorPanel.Mode.Palette||n==PP.Ui.ColorPanel.Mode.Spectrum)&&this._Mode!=n&&(this._Mode=n,this.updateSize())},CPanelP.getMode=function(){return this._Mode},CPanelP.setSpectrumMode=function(n){this._setSpectrumMode(n),(n==PP.Ui.ColorPanel.SpectrumMode.RGB||n==PP.Ui.ColorPanel.SpectrumMode.HSV)&&this._modelCombo.setValue(n)},CPanelP.getSpectrumMode=function(){return this._SpectrumMode},CPanelP.dispose=function(){this.isLive()&&(this._DomNode.innerHTML="",this._labelsRH[PP.Ui.ColorPanel.SpectrumMode.RGB].dispose(),this._labelsGS[PP.Ui.ColorPanel.SpectrumMode.RGB].dispose(),this._labelsBB[PP.Ui.ColorPanel.SpectrumMode.RGB].dispose(),this._labelsRH[PP.Ui.ColorPanel.SpectrumMode.HSV].dispose(),this._labelsGS[PP.Ui.ColorPanel.SpectrumMode.HSV].dispose(),this._labelsBB[PP.Ui.ColorPanel.SpectrumMode.HSV].dispose(),PP.Ui.ColorPanel.base.dispose.call(this))},CPanelP=null,PP.Ui.ColorPanel.Mode={Palette:0,Spectrum:1},PP.Ui.ColorPanel.SpectrumMode={RGB:0,HSV:1},PP.Ui.ColorPanelArgs=function(){PP.Ui.ColorPanelArgs.base.constructor.apply(this,arguments),this.OldColor=null,this.NewColor=null,this.Cancel=!1},PP.initClass(PP.Ui.ColorPanelArgs,PP.EventArgs,"ColorPanelArgs"),PP.Ui.LayoutPanel=function(){this._Name=null,this._Content=null,this._RowSpan=1,this._ColSpan=1,this._Owner=null,this._defineEvents(["Resizing","Resized"]),PP.Ui.LayoutPanel.base.constructor.apply(this,arguments),this._Items=[],this._GridRow=null,this._GridCol=null,this._render()},PP.initClass(PP.Ui.LayoutPanel,PP.Ui.Container,"LayoutPanel"),panelP=PP.Ui.LayoutPanel.prototype,panelP._render=function(){this._DomNode=document.createElement("div"),this._DomNode.className="PPLayoutPanel",this.setContent(this._Content),this._ParentNode&&this.addToNode(this._ParentNode),this.updateSize()},panelP.add=function(n){n instanceof PP.Ui.Control?(this._Items.push(n),n.addClass("PPLayoutPanelContent"),n.addToNode(this._DomNode)):this._DomNode.innerHTML+=n,this.updateSize()},panelP.updateSize=function(){var u,n,r,t,i;for(this._DomNode.style.width=this._checkValue(this._Width)+"px",this._DomNode.style.height=this._checkValue(this._Height)+"px",u=this._Items.length,n=null,r=0;r<u;r++)n=this._Items[r],PP.isObject(n)&&n instanceof PP.Ui.Control&&(t=n.getAnchorFlags(),i=n instanceof PP.Ui.ProxyControl?n.getControl()._DomNode:n._DomNode,t.Left&&t.Right&&n.setWidth(this._Width-n.getLeft()-n.getRight()),i.style.left=t.Left?this._checkValue(n.getLeft())+"px":t.Right?this._checkValue(this._Width-n.getWidth()-n.getRight())+"px":this._checkValue((this._Width-n.getWidth())/2)+"px",t.Top&&t.Bottom&&n.setHeight(this._Height-n.getTop()-n.getBottom()),i.style.top=t.Top?this._checkValue(n.getTop())+"px":t.Bottom?this._checkValue(this._Height-n.getHeight()-n.getBottom())+"px":this._checkValue((this._Height-n.getHeight())/2)+"px")},panelP.getName=function(){return this._Name},panelP.setName=function(n){this._Name=n},panelP.getContent=function(){return this._Items},panelP.setContent=function(n){var i,t;if(this.clear(),n!==null)if(Array.isArray(n))for(i=n.length,t=0;t<i;t++)this.add(n[t]);else this.add(n)},panelP.getRowSpan=function(){return this._RowSpan},panelP.setRowSpan=function(n){this._RowSpan=n,this.updateSize()},panelP.getColSpan=function(){return this._ColSpan},panelP.setColSpan=function(n){var t,i;this._ColSpan>n&&this._Owner&&this._Owner._addCell(t,i),this._ColSpan<n&&this._Owner&&this._Owner._deleteCell(t,i),this._ColSpan=n,this._Owner.updateSize()},panelP.setWidth=function(n,t){this.Resizing.fire(this,{}),this.Width!=n&&(this._Width=n,t!=!1&&this.updateSize(),this.Resized.fire(this,{Width:this._Width,Height:this._Height,WidthChanged:!0,HeightChanged:!1}))},panelP.setHeight=function(n,t){this.Resizing.fire(this,{}),this.Height!=n&&(this._Height=n,t!=!1&&this.updateSize(),this.Resized.fire(this,{Width:this._Width,Height:this._Height,WidthChanged:!1,HeightChanged:!0}))},panelP.setEnabled=function(n){var r,t,i;for(this._Enabled=!!n,r=this._Items.length,t=null,i=0;i<r;i++)t=this._Items[i],PP.isObject(t)&&t instanceof PP.Ui.Control&&t.setEnabled(this._Enabled)},panelP.getOwner=function(){return this._Owner},panelP.setOwner=function(n){this._Owner=n},panelP.getJSON=function(){return{Name:this._Name,RowSpan:this._RowSpan,ColSpan:this._ColSpan,Content:this.getItems()}},panelP.splitVertical=function(n){var r,t,u;this._Owner.GridChanging.fire(this._Owner,{}),n||(n=2);for(var o=this._GridRow,s=this._GridCol,i=this._TableCol,f=this._Owner._Widths[i]-this._Owner._DraggerSize*(n-this._ColSpan),e=0;n>1;){if(this._ColSpan>1)this._ColSpan-=1,this._Owner._Grid[o].splice(parseInt(s)+1,0,{Name:null,RowSpan:this._RowSpan}),i+=1;else{e=Math.floor(f/n+.5),f-=e,this._Owner._Widths.splice(i+1,0,e),this._Owner._Widths[i]=f,r=null;for(t in this._Owner._Grid)if(this._Owner._Grid.hasOwnProperty(t)){r=null;for(u in this._Owner._Grid[t])if(this._Owner._Grid[t].hasOwnProperty(u)&&this._Owner._Grid[t][u]._TableCol<=i&&this._Owner._Grid[t][u]._TableCol+this._Owner._Grid[t][u]._ColSpan>i){r=this._Owner._Grid[t][u];break}r&&(r._ColSpan+=1,console.log(r._Name))}this._ColSpan=1,this._Owner._Grid[o].splice(parseInt(s)+1,0,{Name:null,RowSpan:this._RowSpan})}n-=1}this._Owner._updateGrid(),this._Owner.GridChanged.fire(this._Owner,{})},panelP.splitHorizontal=function(n){this._Owner.GridChanging.fire(this._Owner,{}),n||(n=2);for(var i=this._GridRow,o=this._TableCol,f=this._Owner._Heights[i]-this._Owner._DraggerSize*(n-this._RowSpan),e=0,t,r,u;n>1;){if(this._RowSpan>1){this._RowSpan-=1,u=null,t=parseInt(i)+1;for(r in this._Owner._Grid[t])if(this._Owner._Grid[t].hasOwnProperty(r)&&this._Owner._Grid[t][r]._TableCol>=o){u=this._Owner._Grid[t][r];break}u?this._Owner._Grid[i+1].splice(u._GridCol,0,{Name:null,ColSpan:this._ColSpan}):this._Owner._Grid[i+1].push({Name:null,ColSpan:this._ColSpan})}else{e=Math.floor(f/n+.5),f-=e,this._Owner._Heights.splice(parseInt(i)+1,0,e),this._Owner._Heights[i]=f;for(t in this._Owner._Grid)if(this._Owner._Grid.hasOwnProperty(t))for(r in this._Owner._Grid[t])this._Owner._Grid[t].hasOwnProperty(r)&&this._Owner._Grid[t][r]._GridRow<=i&&this._Owner._Grid[t][r]._GridRow+this._Owner._Grid[t][r]._RowSpan>i&&(this._Owner._Grid[t][r]._RowSpan+=1);this._RowSpan=1,this._Owner._Grid.splice(parseInt(i)+1,0,[]),this._Owner._Grid[parseInt(i)+1].push({Name:null,ColSpan:this._ColSpan})}n-=1}this._Owner._updateGrid(),this._Owner.GridChanged.fire(this._Owner,{})},panelP=null,PP.Ui.LayoutGrid=function(){this._Grid=[],this._Rows=null,this._Columns=null,this._Heights=[],this._Widths=[],this._IsResizable=!0,this._IsDraggerVisible=!0,this._defineEvents(["GridChanging","GridChanged"]),PP.Ui.LayoutGrid.base.constructor.apply(this,arguments),this._DomNode=null,this._DomColgroup=null,this._DomTBody=null,this._BordersSize=0,this._DraggerSize=3,this._AbsHeights=[],this._RelHeights=[],this._AbsWidths=[],this._RelWidths=[],this._Coord=[],this._Names={},this._render()},PP.initClass(PP.Ui.LayoutGrid,PP.Ui.Control,"LayoutGrid"),gridP=PP.Ui.LayoutGrid.prototype,gridP._render=function(){this._DomNode=document.createElement("div");var n=document.createElement("table");this._DomNode.className="PPLayoutGrid PPNoSelect",this._DomColgroup=document.createElement("colgroup"),this._DomTBody=document.createElement("tbody"),this._DomNode.appendChild(n),n.appendChild(this._DomColgroup),n.appendChild(this._DomTBody),this._DomScreen=document.createElement("div"),this._DomDragger=document.createElement("div"),this._DomScreen.className="PPLayoutGridScreen",this._DomDragger.className="PPLayoutGridDragger",this._bindEvents(),this._ParentNode&&this._ParentNode.appendChild(this._DomNode),this.setIsResizable(this._IsResizable),this.setIsDraggerVisible(this._IsDraggerVisible),this._updateGrid()},gridP._bindEvents=function(){this._addEvent(this._DomNode,"mousedown",this._onMouseDown),this._addEvent(this._DomNode,"mouseover",this._onMouseOver)},gridP._unBindEvents=function(){this._removeEvent(this._DomNode,"mousedown",this._onMouseDown),this._removeEvent(this._DomNode,"mouseover",this._onMouseOver)},gridP._onMouseOver=function(n,t){if(this._IsResizable){this._Hovered&&PP.removeClass(this._Hovered,"hover");var i=t.Event.target;(i.className==="vdragger"||i.className==="hdragger")&&(i.firstChild&&(i=i.firstChild),PP.addClass(i,"hover"),this._Hovered=i)}},gridP._onMouseDown=function(n,t){if(this._Enabled){var i=t.Event.target;i==this._Hovered&&PP.removeClass(this._Hovered,"hover"),i.className==="vdragger"&&this._startVDrag(n,t),i.className==="hdragger"&&this._startHDrag(n,t)}},gridP._startHDrag=function(n,t){var r,u,i;if(this._IsResizable&&(r=PP.calculateOffset(this._DomNode),u=this._getColumnByX(t.Event.clientX-r.X),u>=0)){if(this._addEvent(this._DomNode,"mouseup",this._stopHDrag),this._addEvent(this._DomNode,"mousemove",this._moveHDrag),PP.setCapture(this._DomNode),this._DragCol=parseInt(u),this._IsRTL){for(this._DragCol--,this._MaxX=r.X+this._Width-2,i=0;i<this._DragCol;i++)this._MaxX-=this._Widths[i]+this._DraggerSize;this._MinX=this._MaxX-this._Widths[this._DragCol]-this._Widths[this._DragCol+1]}else{for(this._MinX=r.X+1,i=0;i<this._DragCol;i++)this._MinX+=this._Widths[i]+this._DraggerSize;this._MaxX=this._MinX+this._Widths[this._DragCol]+this._Widths[this._DragCol+1]}this._DomScreen.style.top=r.Y+"px",this._DomScreen.style.left=r.X+"px",this._DomScreen.style.width=this._Width+"px",this._DomScreen.style.height=this._Height+"px",this._DomDragger.style.left=t.Event.clientX+"px",this._DomDragger.style.top=r.Y+"px",this._DomDragger.style.width="1px",this._DomDragger.style.height=this._Height+"px",this._DomNode.appendChild(this._DomScreen),this._DomNode.appendChild(this._DomDragger),this._DomScreen.className="PPLayoutGridScreen nresize",this._DomDragger.className="PPLayoutGridDragger nresize"}},gridP._moveHDrag=function(n,t){var i=t.Event.clientX;i<this._MinX&&(i=this._MinX),i>this._MaxX&&(i=this._MaxX),this._DomDragger.style.left=i+"px"},gridP._stopHDrag=function(n,t){var u=t.Event.clientX,r,i;PP.releaseCapture(this._DomNode),this._removeEvent(this._DomNode,"mouseup",this._stopHDrag),this._removeEvent(this._DomNode,"mousemove",this._moveHDrag),this._DomNode.removeChild(this._DomScreen),this._DomNode.removeChild(this._DomDragger),r=this._Widths[this._DragCol]+this._Widths[this._DragCol+1],i=this._IsRTL?this._MaxX-u:u-this._MinX,i<1&&(i=1),i>r-1&&(i=r-1),this._AbsWidths[this._DragCol]!==null?this.setColumnWidth(this._DragCol,i,!1):this.setColumnWidth(this._DragCol,i/(this._Width-this._DraggerSize*(this._Columns-1))*100+"%",!1),this._AbsWidths[this._DragCol+1]!==null?this.setColumnWidth(this._DragCol+1,r-i,!1):this.setColumnWidth(this._DragCol+1,(r-i)/(this._Width-this._DraggerSize*(this._Columns-1))*100+"%",!1),this._adjustCols(),this._updateSize()},gridP._startVDrag=function(n,t){var i,r,u;if(this._IsResizable&&(i=PP.calculateOffset(this._DomNode),r=this._getRowByY(t.Event.clientY-i.Y),r>=0)){for(this._addEvent(this._DomNode,"mouseup",this._stopVDrag),this._addEvent(this._DomNode,"mousemove",this._moveVDrag),PP.setCapture(this._DomNode),this._DragRow=parseInt(r),this._MinY=i.Y+1,u=0;u<r;u++)this._MinY+=this._Heights[u]+this._DraggerSize;this._MaxY=this._MinY+this._Heights[this._DragRow]+this._Heights[this._DragRow+1],this._DomScreen.style.top=i.Y+"px",this._DomScreen.style.left=i.X+"px",this._DomScreen.style.width=this._Width+"px",this._DomScreen.style.height=this._Height+"px",this._DomDragger.style.left=i.X+"px",this._DomDragger.style.top=t.Event.clientY+"px",this._DomDragger.style.width=this._Width+"px",this._DomDragger.style.height="1px",this._DomNode.appendChild(this._DomScreen),this._DomNode.appendChild(this._DomDragger),this._DomScreen.className="PPLayoutGridScreen eresize",this._DomDragger.className="PPLayoutGridDragger eresize"}},gridP._moveVDrag=function(n,t){var i=t.Event.clientY;i<this._MinY&&(i=this._MinY),i>this._MaxY&&(i=this._MaxY),this._DomDragger.style.top=i+"px"},gridP._stopVDrag=function(n,t){var u=t.Event.clientY,r,i;PP.releaseCapture(this._DomNode),this._removeEvent(this._DomNode,"mouseup",this._stopVDrag),this._removeEvent(this._DomNode,"mousemove",this._moveVDrag),this._DomNode.removeChild(this._DomScreen),this._DomNode.removeChild(this._DomDragger),r=this._Heights[this._DragRow]+this._Heights[this._DragRow+1],i=u-this._MinY,i<1&&(i=1),i>r-1&&(i=r-1),this._AbsHeights[this._DragRow]!==null?this.setRowHeight(this._DragRow,i,!1):this.setRowHeight(this._DragRow,i/(this._Height-this._DraggerSize*(this._Rows-1))*100+"%",!1),this._AbsHeights[this._DragRow+1]!==null?this.setRowHeight(this._DragRow+1,r-i,!1):this.setRowHeight(this._DragRow+1,(r-i)/(this._Height-this._DraggerSize*(this._Rows-1))*100+"%",!1),this._adjustRows(),this._updateSize()},gridP._getColumnByX=function(n){var i=0,t;if(this._IsRTL)for(t=this._Columns-1;t>=0;t--){if(i+=this._Widths[t],n>=i&&n<=i+this._DraggerSize)return t;i+=this._DraggerSize}else for(t=0;t<this._Columns;t++){if(i+=this._Widths[t],n>=i&&n<=i+this._DraggerSize)return t;i+=this._DraggerSize}return-1},gridP._getRowByY=function(n){for(var i=0,t=0;t<this._Rows;t++){if(i+=this._Heights[t],n>=i&&n<=i+this._DraggerSize)return t;i+=this._DraggerSize}return-1},gridP._createPanelName=function(){return"created"},gridP._updatePanel=function(n,t){var r=this._Grid[n][t],i;return i=r instanceof PP.Ui.LayoutPanel?r:new PP.Ui.LayoutPanel(r),i.setOwner(this),i._ColSpan||(i._ColSpan=1),i._RowSpan||(i._RowSpan=1),i._GridRow=n,i._GridCol=t,this._Grid[n][t]=i,i},gridP._clearGrid=function(){while(this._DomColgroup.firstChild)this._DomColgroup.removeChild(this._DomColgroup.firstChild);while(this._DomTBody.firstChild)this._DomTBody.removeChild(this._DomTBody.firstChild)},gridP._updateGrid=function(){var v,i,r,u,y,c,n,o,f,s=[],p={},t,l,e,a,h;if(this._DomColgroup.innerHTML="",f=[],y=!0,this._Grid[0])for(r in this._Grid[0])if(this._Grid[0].hasOwnProperty(r))for(t=this._updatePanel(0,r,0),v=0;v<t._ColSpan;v++)y?y=!1:(n=document.createElement("col"),n.style.width="3px",this._DomColgroup.appendChild(n)),n=document.createElement("col"),this._DomColgroup.appendChild(n);this._DomTBody.innerHTML="",l=0;for(i in this._Grid)if(this._Grid.hasOwnProperty(i)){i=parseInt(i),i>0&&(o=document.createElement("tr"),o.className="dragger",this._DomTBody.appendChild(o)),c=document.createElement("tr"),this._DomTBody.appendChild(c),i==0&&(o=c),u=0;for(r in this._Grid[i])if(this._Grid[i].hasOwnProperty(r)){for(t=this._updatePanel(i,r,u),(!t.getName()||p[t.getName()])&&t.setName(this._createPanelName(i,r)),p[t.getName()]=t,e=0;e<t._RowSpan;e++)for(Array.isArray(s[i+e])||(s[i+e]=[]),a=0,h=0;h<t._ColSpan;h++){while(s[i+e][u+h+a])a+=1;s[i+e][u+h+a]=t}r>0||l>0?(n=document.createElement("td"),f=document.createElement("div"),n.className="hdragger",f.className="hdragger",n.setAttribute("rowSpan",t._RowSpan*2-(i==0)),n.appendChild(f),o.appendChild(n),r==0&&l--):t._RowSpan>1&&(l=t._RowSpan-1),n=document.createElement("td"),n.setAttribute("colSpan",t._ColSpan*2-1),n.setAttribute("rowSpan",t._RowSpan*2-1),c.appendChild(n),t.addToNode(n),i>0&&(n=document.createElement("td"),f=document.createElement("div"),n.colSpan=t._ColSpan*2-1,n.className="vdragger",f.className="vdragger",n.appendChild(f),o.appendChild(n)),u+=t._ColSpan,u>this._Columns&&(this._Columns=u)}this._Rows=i}this._Rows++,this._Names=p,this._Coord=s,this._setWidths(),this._setHeights(),this._adjustRows(),this._adjustCols(),this._updateSize()},gridP._adjustRows=function(){if(!(this._Rows<1)){var n,t=this._Height-this._BordersSize-(this._DraggerSize+1)*(this._Rows-1),i,r=0;for(this._Heights=[],n=0;n<this._Rows;n++)this._RelHeights[n]!==null?i=Math.max(Math.floor((this._Height-this._DraggerSize*(this._Rows-1))*this._RelHeights[n]/100+.5),1):this._AbsHeights[n]!==null?i=this._AbsHeights[n]:(i=1,r++),i>t&&(i=t),this._Heights[n]=i,t=t-i+1;if(r)for(n=0;n<this._Rows;n++)this._RelHeights[n]===null&&this._AbsHeights[n]===null&&(this._Heights[n]=Math.max(Math.floor(t/r),1)+(r>1),r--,t-=this._Heights[n]-1);else this._Heights[this._Rows-1]+=t-1}},gridP._adjustCols=function(){if(!(this._Columns<1)){var n,t=this._Width-this._BordersSize-(this._DraggerSize+1)*(this._Columns-1),i,r=0;for(this._Widths=[],n=0;n<this._Columns;n++)this._RelWidths[n]!==null?i=Math.max(Math.floor((this._Width-this._DraggerSize*(this._Columns-1))*this._RelWidths[n]/100+.5),1):this._AbsWidths[n]!==null?i=this._AbsWidths[n]:(i=1,r++),i>t&&(i=t),this._Widths[n]=i,t=t-i+1;if(r)for(n=0;n<this._Columns;n++)this._RelWidths[n]===null&&this._AbsWidths[n]===null&&(this._Widths[n]=Math.max(Math.floor(t/r),1)+ +(r>1),r--,t-=this._Widths[n]-1);else this._Widths[this._Columns-1]+=t-1}},gridP._updateSize=function(){for(var n,u,r,o,t,f,e,i=0;i<this._Columns;i++)this._DomColgroup.childNodes[i*2].style.width=this._Widths[i]+"px";f=[];for(u in this._Grid)if(this._Grid.hasOwnProperty(u)){r=0;for(i in this._Grid[u])if(this._Grid[u].hasOwnProperty(i)){for(t=this._Grid[u][i],e=0,o=0;f[r];)f[r]--,r++;if(t._TableCol=r,t._RowSpan>1){for(n=0;n<t._ColSpan;n++)f[r+n]=t._RowSpan-1;for(n=0;n<t._RowSpan;n++)e+=this._Heights[parseInt(u)+n]+(n?this._DraggerSize:0)}else e=this._Heights[u];for(n=0;n<t._ColSpan;n++)o+=this._Widths[r]+(n?this._DraggerSize:0),r++;t.setWidth(o,!1),t.setHeight(e)}}this._DomNode.style.width=this._Width+"px",this._DomNode.style.height=this._Height+"px"},gridP._setWidths=function(){for(var n=0;n<this._Columns;n++)this.setColumnWidth(n,this._Widths[n],!1)},gridP._setHeights=function(){for(var n=0;n<this._Rows;n++)this.setRowHeight(n,this._Heights[n],!1)},gridP._deleteCell=function(n,t){var i=this._Coord[n][t];i._RowSpan===1&&i._ColSpan===1&&(delete this._Grid[i._GridRow][i._GridCol],i.dispose()),this._RowSpan>1&&this._RowSpan--,this._ColSpan>1&&this._ColSpan--},gridP.getRowsHeights=function(){return this._Heights},gridP.setRowsHeights=function(n){this._Heights=n,this._adjustRows(),this._updateSize()},gridP.getRowHeight=function(n){return this._Heights[n]},gridP.setRowHeight=function(n,t,i){typeof t=="string"&&t.indexOf("%")?(this._AbsHeights[n]=null,this._RelHeights[n]=parseFloat(t)):(this._AbsHeights[n]=t,this._RelHeights[n]=null),i!==!1&&(this._adjustRows(),this._updateSize())},gridP.getColumnsWidths=function(){return this._Widths},gridP.setColumnsWidths=function(n){this._Widths=n,this._adjustCols(),this._updateSize()},gridP.getColumnWidth=function(n){return this._Widths[n]},gridP.setColumnWidth=function(n,t,i){typeof t=="string"&&t.indexOf("%")?(this._AbsWidths[n]=null,this._RelWidths[n]=parseFloat(t)):(this._AbsWidths[n]=t,this._RelWidths[n]=null),i!==!1&&(this._adjustCols(),this._updateSize())},gridP.setHeight=function(n){n<this._BordersSize+(this._DraggerSize+1)*(this._Rows-1)+1&&(n=this._BordersSize+(this._DraggerSize+1)*(this._Rows-1)+1),this._Height=n,this._adjustRows(),this._updateSize()},gridP.setWidth=function(n){n<this._BordersSize+(this._DraggerSize+1)*(this._Columns-1)+1&&(n=this._BordersSize+(this._DraggerSize+1)*(this._Columns-1)+1),this._Width=n,this._adjustCols(),this._updateSize()},gridP.setEnabled=function(){var t,i,r;PP.Ui.LayoutGrid.base.setEnabled.apply(this,arguments);for(t in this._Grid)if(this._Grid.hasOwnProperty(t))for(i in this._Grid[t])this._Grid[t].hasOwnProperty(i)&&(r=this._Grid[t][i],r.setEnabled(this._Enabled))},gridP.getGrid=function(){var t=[],n,i;for(n in this._Grid)if(this._Grid.hasOwnProperty(n)){Array.isArray(t[n])||(t[n]=[]);for(i in this._Grid[n])this._Grid[n].hasOwnProperty(i)&&(t[n][i]=this._Grid[n][i].getJSON())}return t},gridP.setGrid=function(n){this.GridChanging(this,{}),this._clearGrid(),this._Grid=n,this._updateGrid(),this.GridChanged(this,{})},gridP.getPanel=function(n,t){return this._Coord[n][t]},gridP.getPanelByName=function(n){return this._Names[n]},gridP.getIsResizable=function(){return this._IsResizable},gridP.setIsResizable=function(n){this._IsResizable=!!n,this._IsResizable?(this.removeClass("PPNotResizableLayout"),this.addClass("PPResizableLayout")):(this.removeClass("PPResizableLayout"),this.addClass("PPNotResizableLayout"))},gridP.getIsDraggerVisible=function(){return this._IsDraggerVisible},gridP.setIsDraggerVisible=function(n){this._IsDraggerVisible=!!n,this._IsDraggerVisible?(this.removeClass("PPInvisibleLayoutDragger"),this.addClass("PPVisibleLayoutDragger")):(this.removeClass("PPVisibleLayoutDragger"),this.addClass("PPInvisibleLayoutDragger"))},gridP=null,PP.Ui.NumberOrderEdit=function(n){n=n||{},n.ShowButtons=!1,this._Array=[],PP.Ui.NumberOrderEdit.base.constructor.apply(this,arguments),this.setArray(n.Array),this._IsValid=!0},PP.initClass(PP.Ui.NumberOrderEdit,PP.Ui.SpinEdit,"NumberOrderEdit"),NumOrdEdP=PP.Ui.NumberOrderEdit.prototype,NumOrdEdP._sortFunc=function(n,t){return n-t},NumOrdEdP._deleteDublicates=function(n){for(var t=0;t<n.length;t++)typeof n[t+1]!="undefined"&&n[t]===n[t+1]&&(n.splice(t,1),t--)},NumOrdEdP._arrayToStr=function(n){var i="",t,r;if(n&&Array.isArray(n)&&n.length>0)for(n.sort(this._sortFunc),this._deleteDublicates(n),i=n[0].toString(),t=1;t<n.length;){for(r=!1;n[t]-n[t-1]==1;)r=!0,t++;r?i+="-"+n[t-1].toString():(i+=", "+n[t].toString(),t++)}return i},NumOrdEdP._isDigit=function(n){var t=!1;return(typeof n=="string"||n.length==1)&&(t="0123456789".indexOf(n)>=0),t},NumOrdEdP.parse=function(n){for(var i=[],e=n.split(","),t,f,u,o,r=0;r<e.length;r++)if(e[r])if(t=e[r].trim(),t.indexOf("-")>-1){if(f=t.split("-"),f.length==2&&(u=parseInt(f[0].trim()),o=parseInt(f[1].trim()),!isNaN(u)&&!isNaN(o)))while(u<=o)i.push(u),u++}else t=parseInt(t),isNaN(t)||i.push(t);return i.sort(this._sortFunc),this._deleteDublicates(i),i},NumOrdEdP._validate=function(n){for(var e=n.split(","),t,i,r,u,f=0;f<e.length;f++)if(e[f])if(t=e[f].trim(),t.indexOf("-")>-1){if((i=t.split("-"),i.length!=2||!i[0]||!i[1])||(r=i[0].trim(),u=i[1].trim(),r.indexOf(" ")>-1||u.indexOf(" ")>-1)||(r=parseInt(r),u=parseInt(u),isNaN(r)||isNaN(u)||r>u))return!1}else if((t=t.trim(),t.indexOf(" ")>-1)||(t=parseInt(t),isNaN(t)))return!1;return!0},NumOrdEdP._onKeyDownInput=function(n,t){PP.Ui.NumberOrderEdit.base._onKeyDownInput.call(this,n,t);var i=t.Event,r=i.keyCode?i.keyCode:i.which;r==32&&i.ctrlKey&&i.preventDefault()},NumOrdEdP._onKeyPressInput=function(n,t){var i=t.Event,s=i.keyCode?i.keyCode:i.which,f=new PP.EventArgs(i),e=this.getContent(),o,r;f.OldValue=e,o=this._getSelection(),r=!0;switch(s){case 9:case 8:case 13:r=!1;break;default:if(i.charCode===0||i.which===0||i.ctrlKey){r=!1;break}var h=e.substring(0,o.Start),c=e.substring(o.End),u=String.fromCharCode(s);f.NewValue=h+u+c,this._isDigit(u)||u==","||u=="-"||u==" "||(r=!1,i.preventDefault(),i.stopPropagation())}return r&&(this._raiseBeforeChangeEvent(f),f.Cancel?(i.preventDefault(),i.stopPropagation()):this._setTimeoutAfterChange(i)),!0},NumOrdEdP._raiseAfterChangeEvent=function(n,t){t=typeof t=="undefined"?!0:t==!0,t&&this.AfterChange.fire(this,n),t&&(this._inputInterval&&PP.clearTimeout(this._inputInterval),this._inputInterval=PP.setTimeout(this._raiseTimeoutEvent,1e3,this)),this._IsValid=this._validate(n.NewValue),this._IsValid?this.applyValidCSS():this.applyNotValidCSS()},NumOrdEdP._raiseTextChangedEvent=function(n){var t=this._IsValid;t&&(this._Array=this.parse(this._input.value),PP.Ui.NumberOrderEdit.base._raiseTextChangedEvent.call(this,n)),this._input.value=this._arrayToStr(this.getArray()),this.applyValidCSS()},NumOrdEdP.getArray=function(){return this._Array},NumOrdEdP.setArray=function(n){Array.isArray(n)&&(this._Array=n.slice(0),this._input.value=this._arrayToStr(this._Array),this.applyValidCSS())},NumOrdEdP=null,PP.Ui.Slider=function(){this._Template="",this._Width=200,this._Height=15,this._Orientation=PP.Ui.Slider.Orientation.Horizontal,this._Ticks=[],this._AttachToTicks=!1,this._Axis=null,this._CanCross=!0,this._LabelPosition=PP.LTRB.Bottom,this._LabelMargin=5,this._ItemWidth=25,this._ItemHeight=15,this._Items=[],PP.Ui.Slider.base.constructor.apply(this,arguments),this._minValue=0,this._maxValue=1,this._refreshTicksCount=0,this._canCrossItemOrder=[],this._render()},(PP.Ui.Slider.Orientation=function(){var n=PP.Ui.Slider.Orientation;n.Vertical="Vertical",n.Horizontal="Horizontal",PP.initEnum(n,"PP.Ui.Slider.Orientation")})(),PP.initClass(PP.Ui.Slider,PP.Ui.Control,"Slider"),sliderP=PP.Ui.Slider.prototype,sliderP._render=function(){var n=this._Axis,t,i;this._Axis=null,t=this._Items,this._Items=[],i=this._Ticks,this._Ticks=[],this._initFromHTML("<div class='PPSlider PPNoSelect'>"+this._Template+"</div>"),n instanceof PP.Ui.SliderAxis?this._Axis=n:(n||(n={}),n.PPType||(n.PPType="SliderAxis"),this._Axis=PP.create(n)),this._Axis.addToNode(this._DomNode),this._Axis.setParent(this),this.setItems(t),this.setTicks(i),this.setCanCross(this._CanCross),this.addClass(this._Orientation),PP.Ui.Slider.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),this._refreshTicks()},sliderP._compareItems=function(n,t){return n.getValue()-t.getValue()},sliderP._compareTicks=function(n,t){return n.Value-t.Value},sliderP._refreshItemsPosition=function(){for(var n=0;n<this._Items.length;n++)this._Items[n].refreshPosition&&this._Items[n].refreshPosition()},sliderP._refreshItemsValue=function(){for(var n=0;n<this._Items.length;n++)this._Items[n].refreshValue&&this._Items[n].refreshValue()},sliderP._defaultTickValue=function(n){return this._Ticks.length>1?n/(this._Ticks.length-1):.5},sliderP._refreshTicksPosition=function(){for(var i=0,r=0,t=this.getTicks(),o=t.length,e=0,u,f,n=0;n<t.length;n++)t[n].Control.show();switch(this.getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:for(i=this.getWidth()-this.getItemWidth(),n=0;n<t.length;n++)e+=t[n].Control.getWidth();switch(this.getLabelPosition()){case PP.LTRB.Left:case PP.LTRB.Top:for(n=0;n<t.length;n++)r=(this.getItemWidth()-t[n].Control.getWidth())/2,u=i*t[n].Value+r,this.getIsRTL()&&(u=i-u),t[n].Control.getDomNode().style.position="absolute",t[n].Control.getDomNode().style.left=u+"px",t[n].Control.getDomNode().style.top=this.getHeight()-this.getItemHeight()-t[n].Control.getHeight()-this._LabelMargin+"px";break;case PP.LTRB.Right:case PP.LTRB.Bottom:for(n=0;n<t.length;n++)r=(this.getItemWidth()-t[n].Control.getWidth())/2,u=i*t[n].Value+r,this.getIsRTL()&&(u=i-u),t[n].Control.getDomNode().style.position="absolute",t[n].Control.getDomNode().style.left=u+"px",t[n].Control.getDomNode().style.top=this.getItemHeight()+this._LabelMargin+"px"}break;case PP.Ui.Slider.Orientation.Vertical:for(i=this.getHeight()-this.getItemHeight(),n=0;n<t.length;n++)e+=t[n].Control.getHeight();switch(this.getLabelPosition()){case PP.LTRB.Left:case PP.LTRB.Top:for(n=0;n<t.length;n++)r=(this.getItemHeight()-t[n].Control.getHeight())/2,t[n].Control.getDomNode().style.position="absolute",t[n].Control.getDomNode().style.top=i-i*t[n].Value+r+"px",t[n].Control.getDomNode().style.left=this.getWidth()-this.getItemWidth()-t[n].Control.getWidth()-this._LabelMargin+"px";break;case PP.LTRB.Right:case PP.LTRB.Bottom:for(n=0;n<t.length;n++)r=(this.getItemHeight()-t[n].Control.getHeight())/2,t[n].Control.getDomNode().style.position="absolute",t[n].Control.getDomNode().style.top=i-i*t[n].Value+r+"px",t[n].Control.getDomNode().style.left=this.getItemWidth()+this._LabelMargin+"px"}}if(i<e&&(o=Math.max(1,Math.floor(i/(e/t.length)))),f=Math.ceil(t.length/o),f>1){for(n=1;n<t.length-1;n++)t[n].Control.hide();for(n=f;n<t.length-f;n+=f)t[n].Control.show()}},sliderP._beginRefreshTicks=function(){this._refreshTicksCount++},sliderP._endRefreshTicks=function(){this._refreshTicksCount--,this._refreshTicks()},sliderP._refreshTicks=function(){var n;if(this._refreshTicksCount===0){var t=0,i=0,r=this.getTicks();for(n=0;n<r.length;n++)t=Math.max(t,r[n].Control.getWidth()),i=Math.max(i,r[n].Control.getHeight());switch(this.getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:this.setHeight(Math.max(this.getHeight(),this.getItemHeight()+i+this._LabelMargin));break;case PP.Ui.Slider.Orientation.Vertical:this.setWidth(Math.max(this.getWidth(),this.getItemWidth()+t+this._LabelMargin))}}},sliderP._onItemChange=function(){this._Axis&&this._Axis.refreshStruct()},sliderP._onMouseDown=function(n,t){if(this._Items.length===1){var r=0,i=0,u=PP.calculateOffset(this._DomNode),f=PP.calculateMouseCoords(t.Event);switch(this._Orientation){case PP.Ui.Slider.Orientation.Horizontal:r=this._Width-this._ItemWidth,i=this._IsRTL?this._Width-(f.X-u.X)-this._ItemWidth/2:f.X-u.X-this._ItemWidth/2;break;case PP.Ui.Slider.Orientation.Vertical:r=this._Height-this._ItemHeight,i=this._Height-(f.Y-u.Y)-this._ItemHeight/2}this._Items[0].setValue(i/r)}},sliderP.getLabelPosition=function(){return this._LabelPosition},sliderP.setLabelPosition=function(n){return this._LabelPosition=n,this._refreshTicks(),this._Axis&&this._Axis.refreshSize(),this._refreshItemsPosition(),this},sliderP.getLabelMargin=function(){return this._LabelMargin},sliderP.setLabelMargin=function(n){return this._LabelMargin=n,this._refreshTicks(),this},sliderP.getCanCross=function(){return this._CanCross},sliderP.setCanCross=function(n){return this._canCrossItemOrder=n?[]:this.getItems(),this._CanCross=n,this},sliderP.setIsRTL=function(n,t){var i,r;if(n!==this.getIsRTL()||t){switch(this.getLabelPosition()){case PP.LTRB.Left:this.setLabelPosition(PP.LTRB.Right);break;case PP.LTRB.Right:this.setLabelPosition(PP.LTRB.Left)}for(PP.Ui.Slider.base.setIsRTL.apply(this,arguments),i=0;i<this._Items.length;i++)this._Items[i].setIsRTL&&this._Items[i].setIsRTL(n);for(r=0;r<this._Ticks.length;r++)this._Ticks[r].Control.setIsRTL(n,t);this._Axis&&this._Axis.setIsRTL(n),this._refreshTicks()}return this},sliderP.setEnabled=function(n,t){var i,r;if(this.getEnabled()!==n||t){for(PP.Ui.Slider.base.setEnabled.apply(this,arguments),i=0;i<this._Items.length;i++)this._Items[i].setEnabled(n,t);for(r=0;r<this._Ticks.length;r++)this._Ticks[r].Control.setEnabled(n,t)}return this},sliderP.setWidth=function(n){return PP.Ui.Slider.base.setWidth.apply(this,arguments),n<this.getItemWidth()&&this.setItemWidth(n),this._refreshItemsPosition(),this._refreshTicksPosition(),this._Axis&&this._Axis.refreshSize(),this},sliderP.setHeight=function(n){return PP.Ui.Slider.base.setHeight.apply(this,arguments),n<this.getItemHeight()&&this.setItemHeight(n),this._refreshItemsPosition(),this._refreshTicksPosition(),this._Axis&&this._Axis.refreshSize(),this},sliderP.getItems=function(n){var i,t;if(typeof n!="undefined")return this._Items[n];if(!this._CanCross)return this._canCrossItemOrder;for(i=[],t=0;t<this._Items.length;t++)i.push(this._Items[t]);return i.sort(this._compareItems)},sliderP.setItems=function(n){this.removeItems(),n=n||[],this._Items=[],this._canCrossItemOrder=[];for(var t=0;t<n.length;t++)this.addItem(n[t]);return this._Axis&&this._Axis.resetStruct(),this},sliderP.getItemWidth=function(){return this._ItemWidth},sliderP.setItemWidth=function(n){this._ItemWidth=n,n>this.getWidth()&&this.setWidth(n);for(var t=0;t<this._Items.length;t++)this._Items[t]instanceof PP.Ui.SliderItem&&this._Items[t].setWidth(n);return this._Axis&&this._Axis.refreshSize(),this},sliderP.getItemHeight=function(){return this._ItemHeight},sliderP.setItemHeight=function(n){this._ItemHeight=n,n>this.getHeight()&&this.setHeight(n);for(var t=0;t<this._Items.length;t++)this._Items[t]instanceof PP.Ui.SliderItem&&this._Items[t].setHeight(n);return this._Axis&&this._Axis.refreshSize(),this},sliderP.getOrientation=function(){return this._Orientation},sliderP.setOrientation=function(n){var i,r,t;if(this._Orientation===n)return this;i=this.getWidth(),r=this.getHeight();switch(n){case PP.Ui.Slider.Orientation.Horizontal:i=this.getItemHeight();break;case PP.Ui.Slider.Orientation.Vertical:r=this.getItemWidth()}for(this._Orientation=n,this.removeClass(PP.Ui.Slider.Orientation.Horizontal),this.removeClass(PP.Ui.Slider.Orientation.Vertical),this.addClass(this._Orientation),PP.Ui.Slider.base.setWidth.call(this,r),PP.Ui.Slider.base.setHeight.call(this,i),t=0;t<this._Items.length;t++)this._Items[t]instanceof PP.Ui.SliderItem&&(this._Items[t].setWidth(this.getItemWidth()),this._Items[t].setHeight(this.getItemHeight()));return this._refreshTicks(),this._Axis&&(this._Axis.refreshSize(),this._Axis.resetStruct()),this._refreshItemsPosition(),this},sliderP.getTicks=function(){for(var i=[],t,n=0;n<this._Ticks.length;n++)t={},t.Control=this._Ticks[n].Control,t.Value=PP.isDefined(this._Ticks[n].Value)?this._Ticks[n].Value:this._defaultTickValue(n),i.push(t);return i.sort(this._compareTicks)},sliderP.setTicks=function(n){if(this.removeTicks(),!n)return this;this._Ticks=[],this._beginRefreshTicks();for(var t=0;t<n.length;t++)PP.isPrimitive(n[t])||n[t]instanceof PP.Ui.Control?this.addTick(n[t]):PP.isObject(n[t])&&this.addTick(n[t].Control,n[t].Value);return this._endRefreshTicks(),this.getAttachToTicks()&&this._refreshItemsValue(),this},sliderP.getAttachToTicks=function(){return this._AttachToTicks},sliderP.setAttachToTicks=function(n){return this._AttachToTicks=n,this._AttachToTicks&&this._refreshItemsValue(),this},sliderP.getAxis=function(){return this._Axis},sliderP.addItem=function(n){n instanceof PP.Ui.SliderAxis||(n||(n={}),n.PPType||(n.PPType="SliderItem"),n=PP.create(n)),n.addToNode(this._DomNode),n.setWidth(this.getItemWidth()),n.setHeight(this.getItemHeight()),n.setParent(this),this._Items.push(n),this._CanCross||(this._canCrossItemOrder.push(n),this._canCrossItemOrder.sort(this._compareItems)),n.refreshValue(),this._Axis&&this._Axis.resetStruct()},sliderP.getItemByIndex=function(n){return this._Items&&this._Items.length?this._Items[n]:null},sliderP.getItemById=function(n){if(this._Items&&this._Items.length)for(var t=0;t<this._Items.length;t++)if(this._Items[t].getId()==n)return this._Items[t];return null},sliderP.removeItemByIndex=function(n,t){var r,i;if(t=PP.isDefined(t)?t:!0,this._Items&&this._Items.length&&this._Items[n]){for(r=this._Items[n],this._Items.splice(n,1),i=0;i<this._canCrossItemOrder.length;i++)if(this._canCrossItemOrder[i]==r){this._canCrossItemOrder.splice(i,1);break}this._Axis&&this._Axis.resetStruct(),t&&r.dispose()}},sliderP.removeItemById=function(n,t){if(t=PP.isDefined(t)?t:!0,this._Items&&this._Items.length)for(var i=0;i<this._Items.length;i++)if(this._Items[i].getId()==n){this.removeItemByIndex(i,t);break}},sliderP.removeItems=function(n){n=PP.isDefined(n)?n:!0;for(var t=this._Items.length-1;t>=0;t--)this.removeItemByIndex(t,n)},sliderP.addTick=function(n,t){var i={};PP.isDefined(t)&&(i.Value=t),PP.isPrimitive(n)?i.Control=new PP.Ui.Label({Content:n.toString()}):n instanceof PP.Ui.Control?i.Control=n:PP.isObject(n)&&(n.PPType||(n.PPType="Label"),i.Control=PP.create(n)),i.Control.addToNode(this._DomNode),this._Ticks.push(i),this._refreshTicks()},sliderP.getTickByIndex=function(n){return this._Ticks&&this._Ticks.length?this._Ticks[n]:null},sliderP.getTickByControlId=function(n){if(this._Ticks)for(var t=0;t<this._Ticks.length;t++)if(this._Ticks[t].Control.getId()==n)return this._Ticks[t];return null},sliderP.removeTickByIndex=function(n,t){if(t=PP.isDefined(t)?t:!0,this._Ticks&&this._Ticks.length&&this._Ticks[n]){var i=this._Ticks[n];this._Ticks.splice(n,1),t&&i.Control.dispose(),this._refreshTicks()}},sliderP.removeTickByControlId=function(n,t){if(t=PP.isDefined(t)?t:!0,this._Ticks)for(var i=0;i<this._Ticks.length;i++)if(this._Ticks[i].Control.getId()==n){this.removeTickByIndex(i,t);break}},sliderP.removeTicks=function(n){n=PP.isDefined(n)?n:!0;for(var t=this._Ticks.length-1;t>=0;t--)this.removeTickByIndex(t,n)},sliderP.refreshView=function(){this._Axis&&this._Axis.refreshView();for(var n=0;n<this._Items.length;n++)this._Items[n].refreshView();this._refreshItemsPosition(),this._refreshTicksPosition()},sliderP.refreshStruct=function(){this._Axis&&this._Axis.resetStruct(),this._refreshItemsValue(),this._refreshTicks()},sliderP.updateSize=function(){this._refreshTicks()},sliderP.dispose=function(){var i,n,t;if(this.isLive()){for(i=this._Ticks.length,n=0;n<i;n++){for(t in this._Ticks[n])this._Ticks[n][t].dispose&&this._Ticks[n][t].isLive()&&this._Ticks[n][t].dispose(),delete this._Ticks[n][t];delete this._Ticks[n]}PP.Ui.Slider.base.dispose.apply(this,arguments)}},sliderP=null,PP.Ui.SliderAxis=function(){this._Parent=null,this._Template="<table cellpadding='0' cellspacing='0' border='0'><tbody><tr class='PPTop'><td class='PPLeft'></td><td class='PPCenter'></td><td class='PPRight'></td></tr><tr class='PPMiddle'><td class='PPLeft'></td><td class='PPCenter'><div class='PPSliderAxisSlots'></div></td><td class='PPRight'></td></tr><tr class='PPBottom'><td class='PPLeft'></td><td class='PPCenter'></td><td class='PPRight'></td></tr></tbody></table><div class='PPTop PPLeft'></div><div class='PPTop PPRight'></div><div class='PPBottom PPLeft'></div><div class='PPBottom PPRight'></div>",this._Weight=9,this._BorderWeight=1,this._Orientation=PP.Ui.Slider.Orientation.Horizontal,PP.Ui.SliderAxis.base.constructor.apply(this,arguments),this._slotsNode=null,this._slots=[],this._slotTemplate="<div class='PPSliderAxisSlot PPSliderAxisSlot_{i}'><div class='PPSliderAxisSlotContent'></div></div>",this._render()},PP.initClass(PP.Ui.SliderAxis,PP.Ui.Control,"SliderAxis"),sliderAxisP=PP.Ui.SliderAxis.prototype,sliderAxisP._render=function(){this._initFromHTML("<div class='PPSliderAxis'>"+this._Template+"</div>"),this._slotsNode=PP.querySelector(this._DomNode,".PPSliderAxisSlots"),this.refreshSize(),this.resetStruct(),PP.Ui.SliderAxis.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode)},sliderAxisP._setSlotSize=function(n,t,i){if(!(n>=this._slots.length)){var u=Math.max(0,this.getWidth()-2*this._BorderWeight),f=Math.max(0,this.getHeight()-2*this._BorderWeight),r=null;switch(this.getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:r=this._slots[n],r.style.width=Math.round(i*u)-Math.round(t*u)+"px",r.style.height=f+"px";break;case PP.Ui.Slider.Orientation.Vertical:r=this._slots[this._slots.length-n-1],r.style.width=u+"px",r.style.height=Math.round(i*f)-Math.round(t*f)+"px"}}},sliderAxisP.getWeight=function(){return this._Weight},sliderAxisP.setWeight=function(n){this._Weight=n,this.refreshSize()},sliderAxisP.getBorderWeight=function(){return this._BorderWeight},sliderAxisP.setIsRTL=function(){PP.Ui.SliderAxis.base.setIsRTL.apply(this,arguments),this.refreshView()},sliderAxisP.getParent=function(){return this._Parent},sliderAxisP.setParent=function(n){return this._Parent=n,this.refreshSize(),this.resetStruct(),this},sliderAxisP._setWidth=function(n){return PP.Ui.SliderAxis.base.setWidth.call(this,n),this.getOrientation()===PP.Ui.Slider.Orientation.Vertical&&(this._Weight=n),this},sliderAxisP.setWidth=function(n){return this._setWidth(n),this.refreshSize(),this},sliderAxisP._setHeight=function(n){return PP.Ui.SliderAxis.base.setHeight.call(this,n),this.getOrientation()===PP.Ui.Slider.Orientation.Horizontal&&(this._Weight=n),this},sliderAxisP.setHeight=function(n){return this._setHeight(n),this.refreshSize(),this},sliderAxisP.getOrientation=function(){return this._Parent&&this._Parent.getOrientation?this._Parent.getOrientation():this._Orientation},sliderAxisP.setOrientation=function(n){return this._Orientation=n,this.resetStruct(),this},sliderAxisP.refreshSize=function(){if(this._Parent){switch(this._Parent.getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:this._setWidth(this._Parent.getWidth()-this._Parent.getItemWidth()),this._setHeight(Math.min(this._Weight,this._Parent.getHeight())),this._DomNode.style.left=(this._Parent.getWidth()-this.getWidth())/2+"px";switch(this.getParent().getLabelPosition()){case PP.LTRB.Left:case PP.LTRB.Top:this._DomNode.style.top=this._checkValue(this._Parent.getHeight()-(this.getHeight()+this._Parent.getItemHeight())/2)+"px";break;case PP.LTRB.Right:case PP.LTRB.Bottom:this._DomNode.style.top=this._checkValue((this._Parent.getItemHeight()-this.getHeight())/2)+"px";break;default:this._DomNode.style.top=this._checkValue((this._Parent.getHeight()-this.getHeight())/2)+"px"}break;case PP.Ui.Slider.Orientation.Vertical:this._setWidth(Math.min(this._Weight,this._Parent.getWidth())),this._setHeight(this._Parent.getHeight()-this._Parent.getItemHeight()),this._DomNode.style.top=(this._Parent.getHeight()-this.getHeight())/2+"px";switch(this.getParent().getLabelPosition()){case PP.LTRB.Left:case PP.LTRB.Top:this._DomNode.style.left=this._checkValue(this._Parent.getWidth()-(this.getWidth()+this._Parent.getItemWidth())/2)+"px";break;case PP.LTRB.Right:case PP.LTRB.Bottom:this._DomNode.style.left=this._checkValue((this._Parent.getItemWidth()-this.getWidth())/2)+"px";break;default:this._DomNode.style.left=this._checkValue((this._Parent.getWidth()-this.getWidth())/2)+"px"}}this.refreshStruct()}},sliderAxisP.resetStruct=function(){var t,n,i,r;if((this._slots=[],this._slotsNode)&&(PP.removeChildren(this._slotsNode),this._Parent&&this._Parent.getItems)){for(t=this._Parent.getItems(),n=0;n<=t.length;n++)i=n,this._Parent.getOrientation()===PP.Ui.Slider.Orientation.Vertical&&(i=t.length-n),r=PP.htmlToDOM(this._slotTemplate.replace("{i}",i)),this._slotsNode.appendChild(r),this._slots.push(r);this.refreshStruct()}},sliderAxisP.refreshStruct=function(){var n;if(this._slotsNode&&this._Parent&&this._Parent.getItems){var t=this._Parent.getItems(),i=0,r=0;for(n=0;n<t.length;n++)r=t[n].getValue(),this._setSlotSize(n,i,r),i=r;this._setSlotSize(t.length,i,1),this.refreshView()}},sliderAxisP.refreshView=function(){},sliderAxisP.dispose=function(){delete this._Parent,PP.Ui.SliderAxis.base.dispose.apply(this,arguments)},sliderAxisP=null,PP.Ui.SliderAxisGradient=function(){this._StartColor="#FF0000",this._EndColor="#FF0000",this._Colors=["#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF"],this._IsStatic=!1,PP.Ui.SliderAxisGradient.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.SliderAxisGradient,PP.Ui.SliderAxis,"SliderAxisGradient"),sliderAxisGradientP=PP.Ui.SliderAxisGradient.prototype,sliderAxisGradientP._fillGradient=function(n,t,i){if(n&&t&&i)switch(this.getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:PP.IsIE?PP.IEVer<10?(n.style.filter="progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t+"', endColorstr='"+i+"', GradientType=1 )",n.style["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t+"', endColorstr='"+i+"', GradientType=1 )"):n.style.background="-ms-linear-gradient(left center ,"+t+" 0%, "+i+" 100%) repeat scroll 0% 0% transparent":PP.IsFF?n.style.background="-moz-linear-gradient(left center ,"+t+" 0%, "+i+" 100%) repeat scroll 0% 0% transparent":PP.IsChrome?n.style.background="-webkit-linear-gradient(left, "+t+" 0%,"+i+" 100%)":PP.IsOpera?n.style.background="-o-linear-gradient(left, "+t+" 0%,"+i+" 100%)":PP.IsSafari&&(n.style.background="-webkit-gradient(linear, left top, right top,  color-stop(0%,"+t+"), color-stop(100%,"+i+"))");break;case PP.Ui.Slider.Orientation.Vertical:PP.IsIE?PP.IEVer<10?(n.style.filter="progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t+"', endColorstr='"+i+"')",n.style["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t+"', endColorstr='"+i+")"):n.style.background="-ms-linear-gradient("+t+" 0%, "+i+" 100%) repeat scroll 0% 0% transparent":PP.IsFF?n.style.background="-moz-linear-gradient("+t+" 0%, "+i+" 100%) repeat scroll 0% 0% transparent":PP.IsChrome?n.style.background="-webkit-linear-gradient("+t+" 0%,"+i+" 100%)":PP.IsOpera?n.style.background="-o-linear-gradient("+t+" 0%,"+i+" 100%)":PP.IsSafari&&(n.style.background="-webkit-gradient(linear, left top, left bottom,  color-stop(0%,"+t+"), color-stop(100%,"+i+"))")}},sliderAxisGradientP.getStartColor=function(){return this._StartColor&&this._StartColor instanceof PP.Color?this._StartColor:this._StartColor?new PP.Color(this._StartColor):null},sliderAxisGradientP.setStartColor=function(n){return this._StartColor=n instanceof PP.Color?n:new PP.Color(n),this.refreshView(),this},sliderAxisGradientP.getEndColor=function(){return this._EndColor&&this._EndColor instanceof PP.Color?this._EndColor:this._EndColor?new PP.Color(this._EndColor):null},sliderAxisGradientP.setEndColor=function(n){return this._EndColor=n instanceof PP.Color?n:new PP.Color(n),this.refreshView(),this},sliderAxisGradientP.getIsStatic=function(){return this._IsStatic},sliderAxisGradientP.setIsStatic=function(n){this._IsStatic=n,this.resetStruct()},sliderAxisGradientP.getColors=function(){return this._Colors},sliderAxisGradientP.setColors=function(n){this._Colors=n,this.resetStruct()},sliderAxisGradientP.refreshView=function(){var i,n,t,r;if(this._Parent||this._IsStatic){for(i=this._IsStatic?this._Colors:this._Parent.getItems(),n=[],n.push(this.getStartColor()),t=0;t<i.length;t++)this._IsStatic?n.push(i[t]):i[t].getColor?n.push(i[t].getColor()):n.push(new PP.Color);for(n.push(this.getEndColor()),this.getOrientation()===PP.Ui.Slider.Orientation.Vertical&&(n=n.reverse()),r=0;r<this._slots.length;r++)this.getIsRTL()&&this.getOrientation()===PP.Ui.Slider.Orientation.Horizontal?this._fillGradient(this._slots[r],n[r+1],n[r]):this._fillGradient(this._slots[r],n[r],n[r+1]);if(this._IsStatic&&this._Parent)for(i=this._Parent.getItems(),t=0;t<i.length;t++)i[t].setColor&&i[t].setColor(this.getColorByValue(i[t].getValue()),!1)}},sliderAxisGradientP.getColorByValue=function(n){var u,t,e,o;if(this._Parent||this._IsStatic){var f=this._IsStatic?this._Colors:this._Parent.getItems(),i=[],r=[];for(i.push(this.getStartColor()),r.push(0),u=0;u<f.length;u++)this._IsStatic?(i.push(new PP.Color(f[u])),r.push((u+1)/(f.length+1))):(f[u].getColor?i.push(f[u].getColor()):i.push(new PP.Color),r.push(f[u].getValue()));for(i.push(this.getEndColor()),r.push(1),t=0;t<r.length-1;t++){if(n===r[t])return i[t];if(n===r[t+1])return i[t+1];if(n>r[t]&&n<r[t+1])return e=(n-r[t])/(r[t+1]-r[t]),o=1-e,new PP.Color(Math.floor(i[t].getR()*o+i[t+1].getR()*e),Math.floor(i[t].getG()*o+i[t+1].getG()*e),Math.floor(i[t].getB()*o+i[t+1].getB()*e))}}},sliderAxisGradientP.resetStruct=function(){var t,n,i,r;if(!this._IsStatic)return PP.Ui.SliderAxisGradient.base.resetStruct.apply(this,arguments);if(this._slots=[],this._slotsNode){for(PP.removeChildren(this._slotsNode),t=this._Colors,n=0;n<=t.length;n++)i=n,this._Parent&&this._Parent.getOrientation()===PP.Ui.Slider.Orientation.Vertical&&(i=t.length-n),r=PP.htmlToDOM(this._slotTemplate.replace("{i}",i)),this._slotsNode.appendChild(r),this._slots.push(r);this.refreshStruct()}},sliderAxisGradientP.refreshStruct=function(){var t,i,n;if(!this._IsStatic)return PP.Ui.SliderAxisGradient.base.refreshStruct.apply(this,arguments);for(t=this._Colors,i=t.length+1,n=0;n<t.length;n++)this._setSlotSize(n,n/i,(n+1)/i);this._setSlotSize(t.length,t.length/i,1),this.refreshView()},sliderAxisGradientP=null,PP.Ui.SliderItem=function(n){n=n||{},n.AnimationState=PP.Ui.SliderItem.AnimationState.Stop,this._Parent=null,this._Template="<table class='WrapperTable' cellpadding='0' cellspacing='0' border='0'><tbody class='Wrapper'><tr class='Top'><td class='Left' colspan='2'></td><td class='Center'><div class='First'></div></td><td class='Right' colspan='2'></td></tr><tr class='Middle'><td class='First'></td><td class='Second'></td><td class='Center PPSliderItemContent'><div class='Lines'></div><div class='Top Left'></div><div class='Top Right'></div><div class='Bottom Left'></div><div class='Bottom Right'></div></td><td class='Second'></td><td class='First'></td></tr><tr class='Bottom'><td class='Left' colspan='2'></td><td class='Center'><div class='First'></div></td><td class='Right' colspan='2'></td></tr></tbody></table>",this._Color=null,this._MinValue=0,this._MaxValue=1,this._StepDuration=1e3,this._DelayDuration=1e3,this._ReturnToInitialState=!0,this._AnimationState=PP.Ui.SliderItem.AnimationState.Stop,this._FPS=20,this._defineEvents(["ValueChanging","ValueChanged","AnimationStateChanged"]),PP.Ui.SliderItem.base.constructor.apply(this,arguments),this._startCoords=null,this._startValue=this.getValue(),this.MouseDown.add(this._onItemMouseDown,this),this.MouseOver.add(this._onItemMouseOver,this),this.MouseOut.add(this._onItemMouseOut,this),this._moveTimeout=null,this._moveParams=null,this._contentNode=null,this._render()},PP.initClass(PP.Ui.SliderItem,PP.Ui.Control,"SliderItem"),(PP.Ui.SliderItem.AnimationState=function(){var n=PP.Ui.SliderItem.AnimationState;n.Play="Play",n.Stop="Stop",n.Pause="Pause",PP.initEnum(n,"PP.Ui.SliderItem.AnimationState")})(),sliderItemP=PP.Ui.SliderItem.prototype,sliderItemP._render=function(){this._initFromHTML("<div class='PPSliderItem PPNoSelect'>"+this._Template+"</div>"),this._contentNode=PP.querySelector(this._DomNode,".PPSliderItemContent"),this.refreshView(),this.refreshValue(),this.refreshPosition(),PP.Ui.SliderItem.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},sliderItemP._onItemMouseDown=function(n,t){if(this._Enabled)return this._getMouseButton(t.Event)!==1?void 0:(this.stop(this,!1),PP.setCapture(this._DomNode),this._startCoords=PP.calculateMouseCoords(t.Event),this._startValue=this.getValue(),this._addEvent(document.body,"mousemove",this._onItemMouseMove),this._addEvent(document.body,"mouseup",this._onItemMouseUp),this.removeClass("Hover"),this.addClass("Active"),!1)},sliderItemP._onItemMouseUp=function(n,t){if(this._Enabled){PP.releaseCapture(this._DomNode),this._removeEvent(document.body,"mousemove",this._onItemMouseMove),this._removeEvent(document.body,"mouseup",this._onItemMouseUp),this.removeClass("Active");var i=PP.calculateOffset(this._DomNode),r=PP.calculateMouseCoords(t.Event);r.X>=i.X&&r.X<=i.X+this.getWidth()&&r.Y>=i.Y&&r.Y<=i.Y+this.getHeight()?this.addClass("Hover"):this.removeClass("Hover"),this.refreshValue()||this.setValue(this._calculateValue(PP.calculateMouseCoords(t.Event)))}},sliderItemP._onItemMouseMove=function(n,t){this._Enabled&&this._stepTo(this._calculateValue(PP.calculateMouseCoords(t.Event)))},sliderItemP._onItemMouseOver=function(){this._Enabled&&this.addClass("Hover")},sliderItemP._onItemMouseOut=function(){this._Enabled&&this.removeClass("Hover")},sliderItemP._calculateValue=function(n){var i=this.getParent().getWidth()-this.getWidth(),r=this.getParent().getHeight()-this.getHeight(),t=0;switch(this.getParent().getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:t=n.X-this._startCoords.X,this._IsRTL&&(t*=-1),t/=i;break;case PP.Ui.Slider.Orientation.Vertical:t=this._startCoords.Y-n.Y,t/=r}return this._startValue+t},sliderItemP._attachToTicks=function(n,t){var r,i;if(!t||!t.length)return n;for(r=0,i=0;i<t.length;i++)Math.abs(n-t[r].Value)>Math.abs(n-t[i].Value)&&(r=i);return t[r].Value},sliderItemP._stepTo=function(n){this.setValue(n,!1,!1),this.ValueChanging.fire(this,{Value:this.getValue()})},sliderItemP._startMakeSteps=function(n){n.ValueChanging.fire(n,{Value:n.getValue(),TickIndex:n.getTickIndex()}),n._moveTimeout=PP.setTimeout(n._makeSteps,n._moveParams.StepTime,n)},sliderItemP._makeSteps=function(n){var t=n.getValue()+n._moveParams.StepValue,i;if(t=n._moveParams.StepValue>0?Math.min(t,n._moveParams.EndValue):Math.max(t,n._moveParams.EndValue),t===n._moveParams.EndValue){i=n._moveParams.Callback,n._moveParams=null,n.setValue(t,!0,!1),i&&i(n);return}n._stepTo(t),n._moveTimeout=PP.setTimeout(n._makeSteps,n._moveParams.StepTime,n)},sliderItemP._pause=function(){this._setAnimationState(PP.Ui.SliderItem.AnimationState.Pause)},sliderItemP.getFPS=function(){return this._FPS},sliderItemP.getAnimationState=function(){return this._AnimationState},sliderItemP._setAnimationState=function(n){return this._AnimationState==n?this:(this._AnimationState=n,this.AnimationStateChanged.fire(this,{AnimationState:n}),this)},sliderItemP.getReturnToInitialState=function(){return this._ReturnToInitialState},sliderItemP.setReturnToInitialState=function(n){return this._ReturnToInitialState=n,this},sliderItemP.getStepDuration=function(){return this._StepDuration},sliderItemP.setStepDuration=function(n){return this._StepDuration=n,this},sliderItemP.getDelayDuration=function(){return this._DelayDuration},sliderItemP.setDelayDuration=function(n){return this._DelayDuration=n,this},sliderItemP.setIsRTL=function(n){PP.Ui.SliderItem.base.setIsRTL.call(this,n),this.refreshPosition()},sliderItemP.setWidth=function(n){var t=this.getParent();return t&&t.getItemWidth&&t.getItemWidth()!==n&&t.setItemWidth?(t.setItemWidth(n),this):(PP.Ui.SliderItem.base.setWidth.call(this,n),this.refreshPosition(),this)},sliderItemP.setHeight=function(n){var i=this.getParent(),u,f,r,t;return i&&i.getItemHeight&&i.getItemHeight()!==n&&i.setItemHeight?(i.setItemHeight(n),this):(PP.Ui.SliderItem.base.setHeight.call(this,n),PP.IsIE&&PP.IEVer===7&&(u=PP.querySelector(this._DomNode,".Top > .Left"),f=PP.querySelector(this._DomNode,".Bottom > .Left"),u&&f&&(r=0,t=parseInt(PP.getStyle(u,"height")),isNaN(t)||(r+=t),t=parseInt(PP.getStyle(f,"height")),isNaN(t)||(r+=t),this._contentNode.style.height=this._checkValue(this.getHeight()-(r?r:4))+"px")),this.refreshPosition(),this)},sliderItemP.setValue=function(n,t,i){var r,u,f,e,o;if(t=typeof t=="undefined"?!0:t==!0,i=typeof i=="undefined"?!0:i==!0,t&&this.getParent()&&this.getParent().getTicks()&&this.getParent().getAttachToTicks()&&(n=this._attachToTicks(n,this.getParent().getTicks())),this.getParent()&&!this.getParent().getCanCross()){for(r=this.getParent().getItems(),u=0,f=0;f<r.length;f++)if(r[f]===this){u=f;break}e=0,o=1,u>0&&(e=r[u-1].getValue()),u+1<r.length&&(o=r[u+1].getValue()),n=Math.max(e,n),n=Math.min(o,n)}return this._Value=Math.max(this.getMinValue(),Math.min(this.getMaxValue(),n)),this.refreshPosition(),this._Parent._onItemChange(),t&&this.ValueChanged.fire(this,{TickIndex:this.getTickIndex(),Value:this.getValue()}),i&&this.getAnimationState()!==PP.Ui.SliderItem.AnimationState.Stop&&this.stop(this,!1),this},sliderItemP.getTickIndex=function(){var i=0,t,n;if(this.getParent()&&this.getParent().getTicks)for(t=this.getParent().getTicks(),n=0;n<t.length;n++)Math.abs(this.getValue()-t[n].Value)<Math.abs(this.getValue()-t[i].Value)&&(i=n);return i},sliderItemP.setTickIndex=function(n,t,i){if(this.getParent()&&this.getParent().getTicks){var r=this.getParent().getTicks();r&&r[n]&&this.setValue(r[n].Value,t,i)}return this},sliderItemP.getParent=function(){return this._Parent},sliderItemP.setParent=function(n){return this._Parent=n,this.refreshPosition(),this},sliderItemP.getMinValue=function(){return this._MinValue},sliderItemP.setMinValue=function(n){return this._MinValue=Math.max(0,Math.min(this.getMaxValue(),n)),this.refreshValue(),this},sliderItemP.getMaxValue=function(){return this._MaxValue},sliderItemP.setMaxValue=function(n){return this._MaxValue=Math.max(this.getMinValue(),Math.min(1,n)),this.refreshValue(),this},sliderItemP.refreshPosition=function(){if(this._Parent){var t=this._Parent.getWidth()-this.getWidth(),i=this._Parent.getHeight()-this.getHeight(),n=this.getValue()*t,r=i-this.getValue()*i;this._IsRTL&&(n=t-n);switch(this.getParent().getOrientation()){case PP.Ui.Slider.Orientation.Horizontal:switch(this.getParent().getLabelPosition()){case PP.LTRB.Left:case PP.LTRB.Top:this._DomNode.style.top=this._Parent.getHeight()-this.getHeight()+"px";break;case PP.LTRB.Right:case PP.LTRB.Bottom:this._DomNode.style.top="0px";break;default:this._DomNode.style.top=(this._Parent.getHeight()-this.getHeight())/2+"px"}this._DomNode.style.left=n+"px";break;case PP.Ui.Slider.Orientation.Vertical:switch(this.getParent().getLabelPosition()){case PP.LTRB.Left:case PP.LTRB.Top:this._DomNode.style.left=this._Parent.getWidth()-this.getWidth()+"px";break;case PP.LTRB.Right:case PP.LTRB.Bottom:this._DomNode.style.left="0px";break;default:this._DomNode.style.left=(this._Parent.getWidth()-this.getWidth())/2+"px"}this._DomNode.style.top=r+"px"}}},sliderItemP.refreshValue=function(){var n,t,i,r,u;if((this.getValue()<this.getMinValue()&&this.setValue(this.getMinValue()),this.getValue()>this.getMaxValue()&&this.setValue(this.getMaxValue()),!this._Parent||!this._Parent.getTicks||!this._Parent.getAttachToTicks||!this._Parent.getAttachToTicks())||(n=this._Parent.getTicks(),!n.length))return!1;for(t=-1,i=0;i<n.length;i++)if(n[i].Value>=this.getMinValue()&&n[i].Value<=this.getMaxValue()&&(t=i,n[i].Value>=this.getValue()))break;return t&&(r=this.getValue()-n[t-1].Value,u=n[t].Value-this.getValue(),r<u&&t--),this.setValue(n[t].Value),!0},sliderItemP.refreshView=function(){},sliderItemP.play=function(n){var t,i,u,r,f;if(n=n||this,t=n.getMinValue(),i=n.getMaxValue(),n.getParent())for(u=n.getParent().getTicks(),r=0;r<u.length;r++){if(u[r].Value>n.getValue()){i=Math.min(u[r].Value,i);break}t=Math.max(u[r].Value,t)}var e=Math.floor(n.getStepDuration()/1e3*n._FPS),s=n.getStepDuration()/e,o=Math.abs(i-t)/e,h=n.play;n._moveParams={StartValue:t,EndValue:i,StepValue:o,StepTime:s,Callback:h},PP.clearTimeout(n._moveTimeout),n.getValue()===i?n._moveTimeout=PP.setTimeout(n.stop,n.getDelayDuration(),n):(f=n.getDelayDuration(),n.getAnimationState()!==PP.Ui.SliderItem.AnimationState.Play&&(f=0),n.getValue()-t>o&&(f=0),n._moveTimeout=PP.setTimeout(n._startMakeSteps,f,n)),n._setAnimationState(PP.Ui.SliderItem.AnimationState.Play)},sliderItemP.pause=function(){this._moveParams&&(this.getValue()===this._moveParams.StartValue?(PP.clearTimeout(this._moveTimeout),this._pause()):this._moveParams.Callback=this._pause.bind(this))},sliderItemP.resume=function(){this.play()},sliderItemP.stop=function(n,t){n=n||this,t=PP.isDefined(t)?t==!0:n.getReturnToInitialState(),PP.clearTimeout(n._moveTimeout),n._moveParams=null,t&&n.setValue(n.getMinValue(),!0,!1),n._setAnimationState(PP.Ui.SliderItem.AnimationState.Stop)},sliderItemP.dispose=function(){delete this._Parent,PP.Ui.SliderItem.base.dispose.apply(this,arguments)},sliderItemP=null,PP.Ui.SliderItemColor=function(){this._Color=null,PP.Ui.SliderItemColor.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.SliderItemColor,PP.Ui.SliderItem,"SliderItemColor"),sliderItemColorP=PP.Ui.SliderItemColor.prototype,sliderItemColorP._render=function(){PP.Ui.SliderItemColor.base._render.apply(this,arguments),this.refreshView()},sliderItemColorP.getColor=function(){return this._Color&&this._Color instanceof PP.Color?this._Color:this._Color?new PP.Color(this._Color):null},sliderItemColorP.setColor=function(n,t){t=t===undefined?!0:t,this._Color=n instanceof PP.Color?n:new PP.Color(n),this.getParent()&&t?this.getParent().refreshView():this.refreshView()},sliderItemColorP.refreshView=function(){this._Color&&this._contentNode&&(this._contentNode.style.filter="",this._contentNode.style["-ms-filter"]="",this._contentNode.style.background="",this.getColor()&&(this._contentNode.style.background=this.getColor().toString()))},sliderItemColorP=null,PP.Ui.Splitter=function(){this._Orientation=PP.Orientation.Horizontal,this._SplitterPosition=0,this._Content1=null,this._Content2=null,this._MinPanelSize=1,this._ResizeHTMLContent=!0,this._EnableResize=!0,this._defineEvents(["SplitterPositionChanged"]),PP.Ui.Splitter.base.constructor.apply(this,arguments),this._percentPosition=0,this._minSize=5,this._render(),this.setEnableResize(this._EnableResize)},PP.initClass(PP.Ui.Splitter,PP.Ui.Control,"Splitter"),splitterPr=PP.Ui.Splitter.prototype,splitterPr._render=function(){var n="<div class='PPSplitter'><div class='PPSplitterPanel'></div><div class='PPSplitterResizer'></div><div class='PPSplitterPanel'></div></div>";this._initFromHTML(n),this._Panel1DomNode=this._DomNode.firstChild,this._Panel2DomNode=this._DomNode.lastChild,this._ResizerDomNode=this._DomNode.childNodes[1],PP.Ui.Splitter.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),this._Content1&&this.setContent(this._Content1,1),this._Content2&&this.setContent(this._Content2,2),this.setOrientation(this._Orientation),this.updateSize()},splitterPr._bindEvents=function(){this._addEvent(this._ResizerDomNode,"mouseover",this._onResizerMouseOver),this._addEvent(this._ResizerDomNode,"mousedown",this._onResizerMouseDown),this._addEvent(this._ResizerDomNode,"mouseup",this._onResizerMouseUp),this._addEvent(this._ResizerDomNode,"mousemove",this._onResizerMouseMove),this._addEvent(this._ResizerDomNode,"mouseout",this._onResizerMouseOut)},splitterPr._unBindEvents=function(){this._removeEvent(this._ResizerDomNode,"mouseover",this._onResizerMouseOver),this._removeEvent(this._ResizerDomNode,"mousedown",this._onResizerMouseDown),this._removeEvent(this._ResizerDomNode,"mouseup",this._onResizerMouseUp),this._removeEvent(this._ResizerDomNode,"mousemove",this._onResizerMouseMove),this._removeEvent(this._ResizerDomNode,"mouseout",this._onResizerMouseOut)},splitterPr._onResizerMouseOver=function(){if(this._isResizing===!0||!this._EnableResize)return!1;PP.addClass(this._ResizerDomNode,"Hover")},splitterPr._onResizerMouseOut=function(){PP.removeClass(this._ResizerDomNode,"Hover")},splitterPr._onResizerMouseDown=function(n,t){if(this._EnableResize&&t.Event.which===1){this._isResizing=!0,PP.setCapture(this._ResizerDomNode),this._fixPosition=this._Orientation==PP.Orientation.Horizontal?t.Event.pageX:t.Event.pageY,this._phantom=PP.createElement(this._DomNode,"PPSplitterPhantomResizer"),this._layer=PP.createElement(this._DomNode,"PPSplitterLayer"),this._layer.style.top=0,this._layer.style.left=0,this._layer.style.width=this._Width+"px",this._layer.style.height=this._Height+"px";var i=this._DomNode.getBoundingClientRect();this._phantom.style.top=this._Orientation==PP.Orientation.Horizontal?"0px":this._fixPosition-i.top+"px",this._phantom.style.left=this._Orientation==PP.Orientation.Horizontal?this._fixPosition-i.left+"px":"0px",this._phantom.style.width=this._Orientation==PP.Orientation.Horizontal?"1px":this._Width+"px",this._phantom.style.height=this._Orientation==PP.Orientation.Horizontal?this._Height+"px":"1px",document.body.style.cursor=this._Orientation==PP.Orientation.Horizontal?"e-resize":"n-resize"}},splitterPr._onResizerMouseUp=function(){if(!this._isResizing)return!1;this._isResizing=!1;var i=parseInt(this._Orientation==PP.Orientation.Horizontal?this._phantom.style.left:this._phantom.style.top,10);i=this._IsRTL&&this._Orientation==PP.Orientation.Horizontal?this._Width-i:i,this._phantom.parentNode.removeChild(this._phantom),this._phantom=null,this._layer.parentNode.removeChild(this._layer),this._layer=null,document.body.style.cursor="",PP.releaseCapture(this._ResizerDomNode),this._Orientation==PP.Orientation.Horizontal?this.setSplitterPosition(i):this.setSplitterPosition(i)},splitterPr._onResizerMouseMove=function(n,t){if(!this._isResizing)return!1;if(this._phantom){var r=this._DomNode.getBoundingClientRect(),i={top:r.top,left:r.left};i.width=r.left+this._DomNode.offsetWidth-1,i.height=r.top+this._DomNode.offsetHeight-1,i.left+=1,i.top+=1,this._Orientation==PP.Orientation.Horizontal?t.Event.pageX>i.left+this._MinPanelSize&&t.Event.pageX<i.width-this._MinPanelSize&&(this._phantom.style.left=t.Event.pageX-i.left+"px"):t.Event.pageY>i.top+this._MinPanelSize&&t.Event.pageY<i.height-this._MinPanelSize&&(this._phantom.style.top=t.Event.pageY-i.top+"px")}},splitterPr.setWidth=function(n){if(!n&&this._ParentNode&&(n=this._ParentNode.offsetWidth),this._Width=this._checkValue(n),this._DomNode.style.width=this._Width+"px",this._Orientation==PP.Orientation.Vertical)this._Panel1DomNode.style.width=this._Width+"px",this._Panel2DomNode.style.width=this._Width+"px",this._ResizerDomNode.style.width=this._Width+"px",this._Content1&&(this._Content1 instanceof PP.Ui.Control?this._Content1.setWidth(this._Width-this._getContentSpaces(this._Content1,!1)):this._Content1.tagName&&this._ResizeHTMLContent&&(this._Content1.style.width=this._checkValue(this._Width-this._getContentSpaces(this._Content1,!1))+"px")),this._Content2&&(this._Content2 instanceof PP.Ui.Control?this._Content2.setWidth(this._Width-this._getContentSpaces(this._Content2,!1)):this._Content2.tagName&&this._ResizeHTMLContent&&(this._Content2.style.width=this._checkValue(this._Width-this._getContentSpaces(this._Content2,!1))+"px"));else if(this._Collapsed){var i=this._Collapsed===1?2:1,t=this["_Content"+i];this["_Panel"+i+"DomNode"].style.width=this._Width+"px",t&&(t instanceof PP.Ui.Control?t.setWidth(this._Width-this._getContentSpaces(t,!1)):t.tagName&&this._ResizeHTMLContent&&(t.style.width=this._checkValue(this._Width-this._getContentSpaces(t,!1))+"px")),this._SplitterPosition=this._Collapsed===1?0:this._Width}this._updatePosition()},splitterPr.setHeight=function(n){if(!n&&this._ParentNode&&(n=this._ParentNode.offsetHeight),this._Height=this._checkValue(n),this._DomNode.style.height=this._Height+"px",this._Orientation==PP.Orientation.Horizontal)this._Panel1DomNode.style.height=this._Height+"px",this._Panel2DomNode.style.height=this._Height+"px",this._ResizerDomNode.style.height=this._Height+"px",this._Content1&&(this._Content1 instanceof PP.Ui.Control?this._Content1.setHeight(this._Height-this._getContentSpaces(this._Content1,!0)):this._Content1.tagName&&this._ResizeHTMLContent&&(this._Content1.style.height=this._checkValue(this._Height-this._getContentSpaces(this._Content1,!0))+"px")),this._Content2&&(this._Content2 instanceof PP.Ui.Control?this._Content2.setHeight(this._Height-this._getContentSpaces(this._Content2,!0)):this._Content2.tagName&&this._ResizeHTMLContent&&(this._Content2.style.height=this._checkValue(this._Height-this._getContentSpaces(this._Content2,!0))+"px"));else if(this._Collapsed){var i=this._Collapsed===1?2:1,t=this["_Content"+i];this["_Panel"+i+"DomNode"].style.height=this._Height+"px",t&&(t instanceof PP.Ui.Control?t.setHeight(this._Height-this._getContentSpaces(t,!0)):t.tagName&&this._ResizeHTMLContent&&(t.style.height=this._checkValue(this._Height-this._getContentSpaces(t,!0))+"px")),this._SplitterPosition=this._Height}this._updatePosition()},splitterPr.setEnabled=function(n,t){n=!!n,n!==this._Enabled&&(n?this._bindEvents():this._unBindEvents()),PP.Ui.Splitter.base.setEnabled.call(this,n,t),this._Content1&&(this._Content1 instanceof PP.Ui.Control?this._Content1.setEnabled(this._Enabled):this._Content1.tagName&&this._Content1.setAttribute(this._Enabled?"enabled":"disabled",this._Enabled?"enabled":"disabled")),this._Content2&&(this._Content2 instanceof PP.Ui.Control?this._Content2.setEnabled(this._Enabled):this._Content2.tagName&&this._Content2.setAttribute(this._Enabled?"enabled":"disabled",this._Enabled?"enabled":"disabled"))},splitterPr.setOrientation=function(n){if(n==PP.Orientation.Horizontal)this._Orientation=PP.Orientation.Horizontal,PP.removeClass(this._DomNode,"Vertical"),PP.addClass(this._DomNode,"Horizontal"),this._Panel1DomNode.style.height=this._Height+"px",this._Panel2DomNode.style.height=this._Height+"px",this._ResizerDomNode.style.width="",this._ResizerDomNode.style.height=this._Height+"px",this.setSplitterPosition(this._SplitterPosition);else if(n==PP.Orientation.Vertical)this._Orientation=PP.Orientation.Vertical,PP.removeClass(this._DomNode,"Horizontal"),PP.addClass(this._DomNode,"Vertical"),this._Panel1DomNode.style.width="",this._Panel2DomNode.style.width="",this._ResizerDomNode.style.height="",this.setSplitterPosition(this._SplitterPosition);else throw PP.ArgumentException(this);this.updateSize()},splitterPr.getOrientation=function(){return this._Orientation},splitterPr.setMinPanelSize=function(n){n<1&&(n=1),this._SplitterPosition<n&&this.setSplitterPosition(n);var t=this._Orientation==PP.Orientation.Horizontal?this._Width:this._Height;t-this._SplitterPosition-this._getResizerSize()<n&&this.setSplitterPosition(t-n),this._MinPanelSize=n},splitterPr.getMinPanelSize=function(){return this._MinPanelSize},splitterPr.setIsRTL=function(n){PP.Ui.Splitter.base.setIsRTL.call(this,n),this._Content1 instanceof PP.Ui.Control&&this._Content1.setIsRTL(n),this._Content2 instanceof PP.Ui.Control&&this._Content2.setIsRTL(n)},splitterPr.setResizeHTMLContent=function(n){this._ResizeHTMLContent=!!n},splitterPr.getResizeHTMLContent=function(){return this._ResizeHTMLContent},splitterPr.setContent=function(n,t){var u,r,i;t||(t=1),t>2&&(t=2),u=t===1?this._Panel1DomNode:this._Panel2DomNode,this._setContentToNode(n,u,"Content"+t,!0),r=this._getUsefulSize(),this._Orientation===PP.Orientation.Vertical?(this._Content1&&(i=this._getContentSpaces(this._Content1,!0),this._Content1 instanceof PP.Ui.Control?(this._Content1.setHeight(this._checkValue(this._SplitterPosition-i)),this._Content1.setWidth(this._Width-i)):this._Content1.tagName&&this._ResizeHTMLContent&&(this._Content1.style.height=this._checkValue(this._SplitterPosition-i)+"px",this._Content1.style.width=this._checkValue(this._Width-i)+"px")),this._Content2&&(i=this._getContentSpaces(this._Content2,!0),this._Content2 instanceof PP.Ui.Control?(this._Content2.setHeight(this._checkValue(r-i)),this._Content2.setWidth(this._Width-i)):this._Content2.tagName&&this._ResizeHTMLContent&&(this._Content2.style.height=this._checkValue(r-i)+"px",this._Content2.style.width=this._checkValue(this._Width-i)+"px"))):(this._Content1&&(i=this._getContentSpaces(this._Content1,!0),this._Content1 instanceof PP.Ui.Control?(this._Content1.setWidth(this._checkValue(this._SplitterPosition-i)),this._Content1.setHeight(this._Height-i)):this._Content1.tagName&&this._ResizeHTMLContent&&(this._Content1.style.width=this._checkValue(this._SplitterPosition-i)+"px",this._Content1.style.height=this._checkValue(this._Height-i)+"px")),this._Content2&&(i=this._getContentSpaces(this._Content2,!0),this._Content2 instanceof PP.Ui.Control?(this._Content2.setWidth(this._checkValue(r-this._SplitterPosition-i)),this._Content2.setHeight(this._Height-i)):this._Content2.tagName&&this._ResizeHTMLContent&&(this._Content2.style.width=this._checkValue(r-this._SplitterPosition-i)+"px",this._Content2.style.height=this._checkValue(this._Height-i)+"px")))},splitterPr.getContent=function(n){return n||(n=1),n>2&&(n=2),this["_Content"+n]},splitterPr.setSplitterPosition=function(n,t){if(this._Collapsed)return!1;t=t===undefined?!0:!!t,n=this._checkValue(parseInt(n));var i=this._getUsefulSize();this._Orientation==PP.Orientation.Vertical?((!n||n<1)&&(n=this._Height/2),n>i-1&&(n=this._checkValue(i-1)),this._Panel1DomNode.style.height=this._checkValue(n)+"px",this._Panel2DomNode.style.height=this._checkValue(i-n)+"px",this._percentPosition=this._checkValue(n/i),this._SplitterPosition=this._checkValue(n),this._Content1&&(this._Content1 instanceof PP.Ui.Control?this._Content1.setHeight(this._checkValue(n-this._getContentSpaces(this._Content1,!0))):this._Content1.tagName&&this._ResizeHTMLContent&&(this._Content1.style.height=this._checkValue(n-this._getContentSpaces(this._Content1,!0))+"px")),this._Content2&&(this._Content2 instanceof PP.Ui.Control?this._Content2.setHeight(this._checkValue(i-n-this._getContentSpaces(this._Content2,!0))):this._Content2.tagName&&this._ResizeHTMLContent&&(this._Content2.style.height=this._checkValue(i-n-this._getContentSpaces(this._Content2,!0))+"px"))):((!n||n<1)&&(n=this._checkValue(this._Width/2)),n>i-1&&(n=this._checkValue(i-1)),this._Panel1DomNode.style.width=this._checkValue(n)+"px",this._Panel2DomNode.style.width=this._checkValue(i-n)+"px",this._percentPosition=this._checkValue(n/i),this._SplitterPosition=this._checkValue(n),this._Content1&&(this._Content1 instanceof PP.Ui.Control?this._Content1.setWidth(this._checkValue(n-this._getContentSpaces(this._Content1,!1))):this._Content1.tagName&&this._ResizeHTMLContent&&(this._Content1.style.width=this._checkValue(n-this._getContentSpaces(this._Content1,!1))+"px")),this._Content2&&(this._Content2 instanceof PP.Ui.Control?this._Content2.setWidth(this._checkValue(i-n-this._getContentSpaces(this._Content2,!1))):this._Content2.tagName&&this._ResizeHTMLContent&&(this._Content2.style.width=this._checkValue(i-n-this._getContentSpaces(this._Content2,!1))+"px"))),t&&this.SplitterPositionChanged.fire(this,{Position:this._SplitterPosition})},splitterPr.getSplitterPosition=function(){return this._SplitterPosition},splitterPr._getResizerSize=function(){var n;return this._Orientation==PP.Orientation.Vertical?(n=parseInt(PP.getStyle(this._ResizerDomNode,"borderTopWidth")),n+=parseInt(PP.getStyle(this._ResizerDomNode,"borderBottomWidth")),n+=parseInt(PP.getStyle(this._ResizerDomNode,"height")),n===this._Height&&(n=0)):(n=parseInt(PP.getStyle(this._ResizerDomNode,"borderLeftWidth")),n+=parseInt(PP.getStyle(this._ResizerDomNode,"borderRightWidth")),n+=parseInt(PP.getStyle(this._ResizerDomNode,"width")),n===this._Width&&(n=0)),n?n:3},splitterPr._getUsefulSize=function(){var t=this._getResizerSize(),n;return n=this._Orientation==PP.Orientation.Vertical?this._checkValue(this._Height-t):this._checkValue(this._Width-t)},splitterPr._updatePosition=function(){var n=this._getUsefulSize();this._percentPosition||(this._percentPosition=this._checkValue(this._SplitterPosition/n)),this._Orientation==PP.Orientation.Vertical?this.setSplitterPosition(n*this._percentPosition,!1):this.setSplitterPosition(n*this._percentPosition,!1)},splitterPr._getContentSpaces=function(n,t){var r=0,u,i;if(n instanceof PP.Ui.Control)u=n.getDomNode();else if(n.tagName)u=n;else return 0;return i=0,i=parseInt(PP.getStyle(u,t?"margin-top":"margin-left")),r+=isNaN(i)?0:i,i=parseInt(PP.getStyle(u,t?"margin-bottom":"margin-right")),r+=isNaN(i)?0:i,i=parseInt(PP.getStyle(u,t?"padding-top":"padding-left")),r+=isNaN(i)?0:i,i=parseInt(PP.getStyle(u,t?"padding-bottom":"padding-right")),r+=isNaN(i)?0:i,i=parseInt(PP.getStyle(u,t?"border-top-width":"border-left-width")),r+=isNaN(i)?0:i,i=parseInt(PP.getStyle(u,t?"border-bottom-width":"border-right-width")),r+=isNaN(i)?0:i,isNaN(r)&&(r=0),r},splitterPr.updateSize=function(){this.setWidth(this._Width),this.setHeight(this._Height),this.setSplitterPosition(this._SplitterPosition,!1)},splitterPr.expand=function(n){if(n||(n=1),n>2&&(n=2),!this._Collapsed||this._Collapsed!==n)return!1;this._Collapsed=null,this._SplitterPosition=this._oldSplitterPosition,PP.show(this["_Panel"+n+"DomNode"]),PP.show(this._ResizerDomNode),this.updateSize()},splitterPr.collapse=function(n){if(n||(n=1),n>2&&(n=2),this._Collapsed&&this._Collapsed===n)return!1;this._Collapsed&&this._Collapsed!==n&&this.expand(this._Collapsed),this._Collapsed=n,this._oldSplitterPosition=this._SplitterPosition,this._SplitterPosition=n===1?0:this._Orientation===PP.Orientation.Horizontal?this._Width:this._Height,PP.hide(this["_Panel"+n+"DomNode"]),PP.hide(this._ResizerDomNode),this.updateSize()},splitterPr.getCollapsed=function(){return this._Collapsed},splitterPr.addToNode=function(){PP.Ui.Splitter.base.addToNode.apply(this,arguments),this.updateSize()},splitterPr.getPanel=function(n){return this["_Panel"+n+"DomNode"]},splitterPr.getEnableResize=function(){return this._EnableResize},splitterPr.setEnableResize=function(n){this._EnableResize=n,n?PP.removeClass(this._ResizerDomNode,"NotResize"):PP.hasClass(this._ResizerDomNode,"NotResize")||PP.addClass(this._ResizerDomNode,"NotResize")},splitterPr=null,PP.Font=function(){this._FontFamily="Calibri",this._Dictionary=null,this._Size=12,this._Color="#000000",this._UseAutoColor=!1,this._IsBold=!1,this._IsItalic=!1,this._IsStriken=!1,this._IsUnderline=!1,this._IsSuperior=!1,this._IsInferior=!1,this._IsLowerCapitalized=!1,this._IsCapitalized=!1,PP.Font.base.constructor.apply(this,arguments)},PP.initClass(PP.Font,PP.Object,"Font"),iFntP=PP.Font.prototype,(PP.Font.Family=function(){PP.Font.Family.Arial="Arial",PP.Font.Family.Calibri="Calibri",PP.Font.Family.ComicSans="Comic Sans MS",PP.Font.Family.Courier="Courier",PP.Font.Family.Georgia="Georgia",PP.Font.Family.Helvetica="Helvetica",PP.Font.Family.Impact="Impact",PP.Font.Family.Modern="Modern",PP.Font.Family.Roman="Roman",PP.Font.Family.Script="Script",PP.Font.Family.Tahoma="Tahoma",PP.Font.Family.TimesNewRoman="Times New Roman",PP.Font.Family.Verdana="Verdana",PP.initEnum(PP.Font.Family,"PP.Font.Family")})(),iFntP._initFields=function(){if(PP.Font.base._initFields.apply(this,arguments),this._Size&&(this._Size=parseFloat(this._Size)),this._Color){var t=PP.Color.parseARGB(this._Color);t!=null&&(this._Color=t.toString(),this._Opacity=t.getOpacity())}},iFntP.getColor=function(){return this._Color},iFntP.setColor=function(n){this._Color=n},iFntP.getUseAutoColor=function(){return this._UseAutoColor},iFntP.setUseAutoColor=function(n){this._UseAutoColor=n},iFntP.getFontFamily=function(){return this._FontFamily},iFntP.setFontFamily=function(n){this._FontFamily=n},iFntP.getIsBold=function(){return this._IsBold},iFntP.setIsBold=function(n){this._IsBold=n},iFntP.getIsItalic=function(){return this._IsItalic},iFntP.setIsItalic=function(n){this._IsItalic=n},iFntP.getSize=function(){return this._Size},iFntP.setSize=function(n){this._Size=n},iFntP.getIsStriken=function(){return this._IsStriken},iFntP.setIsStriken=function(n){this._IsStriken=n},iFntP.getIsUnderline=function(){return this._IsUnderline},iFntP.setIsUnderline=function(n){this._IsUnderline=n},iFntP.getIsSuperior=function(){return this._IsSuperior},iFntP.setIsSuperior=function(n){this._IsSuperior=n},iFntP.getIsInferior=function(){return this._IsInferior},iFntP.setIsInferior=function(n){this._IsInferior=n},iFntP.getIsLowerCapitalized=function(){return this._IsLowerCapitalized},iFntP.setIsLowerCapitalized=function(n){this._IsLowerCapitalized=n},iFntP.getIsCapitalized=function(){return this._IsCapitalized},iFntP.setIsCapitalized=function(n){this._IsCapitalized=n},iFntP.toRaphaelFormat=function(n){if(!n||!n.attr)throw new Error("ArgumentExeption");n.attr({fill:this.getColor(),"font-family":this.getFontFamily(),"font-size":this.getSize(),"font-weight":this.getIsBold()==!0?"bold":"","font-style":this.getIsItalic()==!0?"italic":"","text-anchor":"start"})},iFntP.toSVGFormat=function(){},iFntP.toVMLFormat=function(){},iFntP.toCSSFormat=function(){var n="color:"+this.getColor();return n+=";font-size:"+this.getSize()+"px;",n+="font-family:"+this.getFontFamily()+", Helvetica",n+=";font-weight:"+(this.getIsBold()?"bold":"normal"),n+=";font-style:"+(this.getIsItalic()?"italic":"normal"),n+=";text-decoration:"+(this.getIsUnderline()?"underline":"none")},iFntP.dispose=function(){delete this._Dictionary,PP.Font.base.dispose.apply(this,arguments)},iFntP=null,PP.Ui.DataEditDialog=function(n){this._LabelContent="Данные в таблице были изменены. Сохранить изменения перед выполнением операции?",this._defineEvents(["NoButtonClicked"]),PP.Ui.DataEditDialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.DataEditDialog,PP.Ui.Dialog,"DataEditDialog"),deDlg=PP.Ui.DataEditDialog.prototype,deDlg._render=function(){PP.Ui.DataEditDialog.base._render.call(this),this._NoButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,Content:"Нет",ParentNode:this._DialogButtonsDomNode}),this._NoButton.Click.add(this._onNoButtonClick,this),this._OkButton.setContent("Да"),this._CancelButton.addClass("PPRibbonDataEditCancelButton"),this._DescriptionLabel=new PP.Ui.Label({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogDescriptionLable",Content:this._LabelContent})},deDlg._onNoButtonClick=function(){this.NoButtonClicked.fire(this,{}),this.close()},deDlg._onKeyDown=function(){},deDlg._onClickCloseButton=function(n,t){PP.Ui.DataEditDialog.base._onClickCloseButton.call(this,n,t),this.CancelButtonClicked.fire(this,{})},PP.Ui.ExportDialog=function(n){PP.Ui.ExportDialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.ExportDialog,PP.Ui.Dialog,"ExportDialog"),expDlg=PP.Ui.ExportDialog.prototype,expDlg._render=function(){PP.Ui.ExportDialog.base._render.call(this),this._exportContent=PP.htmlToDOM("<div class='PPExportDlgContent'></div>"),this._DialogContentDomNode.appendChild(this._exportContent),this._renderBody(this._exportContent),this._CancelButton.addClass("PPRibbonDataEditCancelButton")},expDlg._onOpened=function(){PP.Ui.ExportDialog.base._onOpened.apply(this,arguments);var r=this._DialogContentDomNode.clientHeight,i=this._parseOffset(PP.getStyle(this._exportContent,"margin-top"));i+=this._parseOffset(PP.getStyle(this._exportContent,"margin-bottom")),i+=this._parseOffset(PP.getStyle(this._exportContent,"padding-top")),i+=this._parseOffset(PP.getStyle(this._exportContent,"padding-bottom")),this._exportContent.style.height=r-i-2+"px"},expDlg._parseOffset=function(n){return isNaN(parseInt(n))?0:parseInt(n)},expDlg._onKeyDown=function(){},expDlg._onClickCloseButton=function(n,t){PP.Ui.ExportDialog.base._onClickCloseButton.call(this,n,t),this.CancelButtonClicked.fire(this,{})},expDlg._onOkButtonClick=function(n,t){t=t||{},t.exportData=this._gatherSettings(),this.OkButtonClicked.fire(this,t),this.close()},expDlg._renderBody=function(n){n.innerHTML="";var t={ParentNode:n,Checked:!0,Style:"padding:2px"},i={ParentNode:n,Content:"Диаграмма как изображение",Style:"vertical-align:middle"};this.cb=new PP.Ui.CheckBox(t),this.lb=new PP.Ui.Label(i)},expDlg._gatherSettings=function(){return{format:PP.Mb.ExportFormat.HTML}},expDlg=null,PP.Ui.ParetoDialog=function(n){this._DescriptionResourceKey="",this._LabelResourceKey="",this._Type="",this._Id="",this._EditBoxValue=null,this._InitValue=null,PP.Ui.ParetoDialog.base.constructor.call(this,n),this._MinValueEdit=-999999999999999934463,this._MaxValueEdit=999999999999999934463,this._FractionCount=0},PP.initClass(PP.Ui.ParetoDialog,PP.Ui.Dialog,"ParetoDialog"),paretoDlg=PP.Ui.ParetoDialog.prototype,paretoDlg._render=function(){PP.Ui.ParetoDialog.base._render.call(this),this._DescriptionLabel=new PP.Ui.Label({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogDescriptionLable",ResourceKey:this._DescriptionResourceKey}),this._Label=new PP.Ui.Label({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogLable",ResourceKey:this._LabelResourceKey}),this._analyzeInterval(),this._EditBox=new PP.Ui.NumberEdit({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogNumberEdit",Width:"80px",Height:"20px",MinValue:this._MinValueEdit,MaxValue:this._MaxValueEdit}),this._EditBox.setFractionCount(this._FractionCount),this._EditBox.setValue(this._InitValue),this._EditBox.Validate.add(this._onEditValidate,this),this._EditBox.Blur.add(this._onEditBlur,this)},paretoDlg._analyzeInterval=function(){switch(this._Type){case"int":this._MinValueEdit=1;break;case"float":this._FractionCount=2;break;case"percent":this._MinValueEdit=0,this._MaxValueEdit=100,this._FractionCount=2}},paretoDlg._onEditValidate=function(n,t){t.IsValid?this._paretoItemsValidate(t.TextValue)?this._OkButton.setEnabled(!0):this._OkButton.setEnabled(!1):this._OkButton.setEnabled(!1)},paretoDlg._onEditBlur=function(){this._paretoItemsValidate(this._EditBox.getValue().toString())?this._OkButton.setEnabled(!0):this._OkButton.setEnabled(!1)},paretoDlg._paretoItemsValidate=function(n){var t=n;switch(this._Type){case"int":if(this._numberType(t)=="int"&&parseInt(t)>0)return!0;break;case"float":if((this._numberType(t)=="float"||this._numberType(t)=="int")&&this._digitsAfterPoint(t)<=2)return!0;break;case"percent":if((this._numberType(t)=="float"||this._numberType(t)=="int")&&parseFloat(t)>=0&&parseFloat(t)<=100&&this._digitsAfterPoint(t)<=2)return!0}return!1},paretoDlg._digitsAfterPoint=function(n){for(var t=0;t<n.length;t++)if(n[t]==",")break;return n.length-t-1},paretoDlg._numberType=function(n){if(n=n.replace(/ /g,""),n=n.replace(/,/g,"."),isNaN(parseFloat(n)))return null;var t=n.toString();return/\./.test(t)?"float":"int"},paretoDlg._onOkButtonClick=function(){var i={};i.EditBoxValue=this._EditBox.getValue(),i.Id=this._Id,this.OkButtonClicked.fire(this,i),this.close()},paretoDlg._onKeyDown=function(){},paretoDlg._onClickCloseButton=function(n,t){PP.Ui.ParetoDialog.base._onClickCloseButton.call(this,n,t),this.CancelButtonClicked.fire(this,{})},PP.isInterfaceOf=function(n,t,i){var e,u,f,r;if(!n||!t)throw PP.ArgumentNullException();for(e=PP.isInterfaceOf.getArrayIntf(t),u=!1,f=0;f<e.length;f++){if(t=e[f],t._Type!==PP.Entity.Interface)throw PP.ArgumentException();for(r in t)if(r.indexOf("_")!=0){switch(t[r]){case PP.ClassMembers.Property:PP.isFunction(n["get"+r])||(u=!0);break;case PP.ClassMembers.Method:PP.isFunction(n[r])||(u=!0);break;case PP.ClassMembers.Event:n[r]instanceof PP.Delegate||(u=!0)}if(u)if(i)throw PP.Exception(n.getTypeName()+" is not implemented "+r.toString());else return!1}if(t._base&&!PP.isInterfaceOf(n,t._base,i))if(i)throw PP.Exception(n.getTypeName()+" is not implemented "+t.toString());else return!1}return!0},PP.checkInterface=function(n,t){n&&PP.isInterfaceOf(n,t,!0)},PP.isInterfaceOf.getArrayIntf=function(n){for(var i=Array.isArray(n)?n:[n],r=[],t=0;t<i.length;t++)r.push(i[t]),i[t]._base&&(r=r.concat(PP.isInterfaceOf.getArrayIntf(i[t]._base)));return r},(PP.INotifyPropertyChanged=function(){PP.initInterface(PP.INotifyPropertyChanged,"INotifyPropertyChanged"),PP.INotifyPropertyChanged.PropertyChanged=PP.ClassMembers.Event})(),PP.INotifyPropertyChanged._implement=function(n,t){var r,i,u;typeof t=="undefined"&&(t=!0),r=n.prototype;for(i in r)i.indexOf("set")!==0||r[i]._isINotifyImpl||(!t||PP.isBaseMemberOf(n,i))&&t||(u=r[i]=function(n,t){return function(){if(n.apply(this,arguments),this.PropertyChanged)this.PropertyChanged.fire(this,{Name:t.replace("set","")});else throw PP.ArgumentException();}}(r[i],i),u._isINotifyImpl=!0)},(PP.IDisposable=function(){PP.initInterface(PP.IDisposable,"IDisposable"),PP.IDisposable.dispose=PP.ClassMembers.Method})(),PP.IDisposable._implement=function(){},(PP.IMapMilestone=function(){PP.initInterface(PP.IMapMilestone,"IMapMilestone"),PP.IMapMilestone.Animationn=PP.ClassMembers.Property,PP.IMapMilestone.startAnimation=PP.ClassMembers.Method,PP.IMapMilestone.stopAnimation=PP.ClassMembers.Method})(),PP.Ui.FontComboBox=function(){PP.Ui.FontComboBox.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.FontComboBox,PP.Ui.ComboBox,"FontComboBox"),fontComboBoxP=PP.Ui.FontComboBox.prototype,fontComboBoxP._render=function(){var t,n;PP.Ui.FontComboBox.base._render.apply(this,arguments);for(t in PP.getEnumInterfMembers(PP.Font.Family))n=new PP.Ui.ListItem({Content:PP.Font.Family[t],Value:PP.Font.Family[t]}),this.addItem(n),n.getDomNode().style.fontFamily=n.getContent()},fontComboBoxP._onDropPanelClosed=function(){this._checkContent(),PP.Ui.FontComboBox.base._onDropPanelClosed.apply(this,arguments)},fontComboBoxP._checkContent=function(){var t,i;if(!this._UseMask){var n=this._EditControl.getContent(),r=this.getItems(),f=r.length,u=!1;for(t=0;t<f;t++)if(r[t].getContent()===n){u=!0;break}i=this.getSelectedItem(),u||(n=i?i.getContent():""),this._EditControl.setContent(n,!1)}},fontComboBoxP=null,PP.Ui.FontBox=function(n){n=n||{},this._ImagePath="",this._IsJustifyVisible=!0,this._IsAlignmentVisible=!0,this._Alignment=PP.HorizontalAlignment.Left,this._Font=null,this._defineEvents(["PropertyChanged"]),PP.Ui.FontBox.base.constructor.call(this,n),this._render()},PP.initClass(PP.Ui.FontBox,PP.Ui.Control,"FontBox"),textSettingsP=PP.Ui.FontBox.prototype,textSettingsP._render=function(){this._initFromHTML("<div class='PPTextSettings'><div class='PPTextSettings_Container'></div><div class='PPTextSettings_Container'></div></div>",!0),this._FontFamilyComboBox=new PP.Ui.FontComboBox({ParentNode:this._DomNode.firstChild,EnableEdit:!0,Height:21,Width:this._IsJustifyVisible?163:140,DropPanel:{MinDropDownWidth:this._IsJustifyVisible?163:140},ListBox:{ItemSelected:PP.Delegate(this._setFontFamily,this)}}),this._FontSizeComboBox=new PP.Ui.NumComboBox({ParentNode:this._DomNode.firstChild,EnableEdit:!0,Height:21,Width:57,DropPanel:{MinDropDownWidth:57},TextChanged:PP.Delegate(this._setFontSizeManual,this),ListBox:{Items:[{Content:"8",Value:8,Data:1},{Content:"10",Value:10,Data:2},{Content:"12",Value:12,Data:3},{Content:"14",Value:14,Data:4},{Content:"18",Value:18,Data:5},{Content:"24",Value:24,Data:6},{Content:"36",Value:36,Data:7}],ItemSelected:PP.Delegate(this._setFontSize,this)},NumberEdit:{MinValue:1,MaxValue:72}}),this._ImageList=new PP.ImageList({Source:this._ImagePath+"fb_icons.png",IconHeight:16,IconWidth:16}),this._Toolbar=new PP.Ui.ToolBar({ParentNode:this._DomNode.lastChild,ImageList:this._ImageList,Class:"TextSettingsToolbar"});var n;this._IsAlignmentVisible&&(n=PP.Delegate(this._setTextAlignment,this),this._AlignmentLeftButton=new PP.Ui.ToolBarButton({RowIndex:0,ColumnIndex:2,Parent:this._Toolbar,GroupName:"alignmentGroup",Id:"alignLeft",StateChanged:n}),this._AlignmentCenterButton=new PP.Ui.ToolBarButton({RowIndex:0,ColumnIndex:1,Parent:this._Toolbar,GroupName:"alignmentGroup",Id:"alignCenter",StateChanged:n}),this._AlignmentRightButton=new PP.Ui.ToolBarButton({RowIndex:0,ColumnIndex:0,Parent:this._Toolbar,GroupName:"alignmentGroup",Id:"alignRight",StateChanged:n}),this._IsJustifyVisible&&(this._AlignmentJustifyButton=new PP.Ui.ToolBarButton({RowIndex:0,ColumnIndex:6,Parent:this._Toolbar,GroupName:"alignmentGroup",Id:"alignJustify",StateChanged:n})),this._Toolbar.addItem(this._AlignmentLeftButton),this._Toolbar.addItem(this._AlignmentCenterButton),this._Toolbar.addItem(this._AlignmentRightButton),this._IsJustifyVisible&&this._Toolbar.addItem(this._AlignmentJustifyButton)),n=PP.Delegate(this._setFontStyle,this),this._StyleBoldButton=new PP.Ui.ToolBarButton({Parent:this._Toolbar,Id:"styleBold",IsToggle:!0,ResourceKey:"fontBoxStyleBold",Class:"PPStyleBold",StateChanged:n}),this._StyleItalicButton=new PP.Ui.ToolBarButton({Parent:this._Toolbar,Id:"styleItalic",IsToggle:!0,ResourceKey:"fontBoxStyleItalic",Class:"PPStyleItalic",StateChanged:n}),this._StyleUnderlineButton=new PP.Ui.ToolBarButton({Parent:this._Toolbar,Id:"styleUnderline",IsToggle:!0,ResourceKey:"fontBoxStyleUnderline",Class:"PPStyleUnderline",StateChanged:n}),this._Toolbar.addItem(this._StyleBoldButton),this._Toolbar.addItem(this._StyleItalicButton),this._Toolbar.addItem(this._StyleUnderlineButton),this._FontColorCombo=new PP.Ui.ColorCombo({ParentNode:this._DomNode.lastChild,Class:"TextSettingsColorCombo",ColorChanged:PP.Delegate(this._setFontColor,this)}),this._Font?this._Font instanceof PP.Font||(this._Font=new PP.Font(this._Font)):this._Font=new PP.Font,this.setFont(this._Font),this.setAlignment(this._Alignment),PP.Ui.FontBox.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},textSettingsP._setTextAlignment=function(n){if(this._IsAlignmentVisible){var i=-1;n==this._AlignmentLeftButton&&(i=PP.HorizontalAlignment.Left),n==this._AlignmentCenterButton&&(i=PP.HorizontalAlignment.Center),n==this._AlignmentRightButton&&(i=PP.HorizontalAlignment.Right),n==this._AlignmentJustifyButton&&(i=PP.HorizontalAlignment.Justify),this._Alignment=i,this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Alignment,Font:this._Font,Alignment:this._Alignment})}return this},textSettingsP._setFontStyle=function(n){var i=null;return n==this._StyleBoldButton&&(i=PP.Ui.FontBox.PropertyName.IsBold,this._Font.setIsBold(n.getIsChecked())),n==this._StyleUnderlineButton&&(i=PP.Ui.FontBox.PropertyName.IsUnderline,this._Font.setIsUnderline(n.getIsChecked())),n==this._StyleItalicButton&&(i=PP.Ui.FontBox.PropertyName.IsItalic,this._Font.setIsItalic(n.getIsChecked())),this.PropertyChanged.fire(this,{PropertyName:i,Font:this._Font,Alignment:this._Alignment}),this},textSettingsP._setFontSize=function(n,t){return this._Font.setSize(t.ListItem.getValue()),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Size,Font:this._Font,Alignment:this._Alignment}),this},textSettingsP._setFontSizeManual=function(n){var i=parseInt(n.getContent());return!i||i===this._Font.getSize()?!1:(this._Font.setSize(i),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Size,Font:this._Font,Alignment:this._Alignment}),this)},textSettingsP._setFontFamily=function(n,t){return this._Font.setFontFamily(t.ListItem.getContent()),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.FontFamily,Font:this._Font,Alignment:this._Alignment}),this},textSettingsP._setFontColor=function(n){return this._Font.setColor(n.getColor()),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Color,Font:this._Font,Alignment:this._Alignment}),this},textSettingsP.getFont=function(){return this._Font},textSettingsP.setFont=function(n){return n&&n instanceof PP.Font&&(this._Font=n,this._FontFamilyComboBox.setValue(this._Font.getFontFamily(),!1),this._FontSizeComboBox.setValue(Math.round(this._Font.getSize()*100)/100,!1),this._StyleBoldButton.setIsChecked(this._Font.getIsBold(),!1),this._StyleItalicButton.setIsChecked(this._Font.getIsItalic(),!1),this._StyleUnderlineButton.setIsChecked(this._Font.getIsUnderline(),!1),this._FontColorCombo.setColor(this._Font.getColor(),!1)),this},textSettingsP.getAlignment=function(){return this._Alignment},textSettingsP.setAlignment=function(n){return n&&PP.isMemberOf(PP.HorizontalAlignment,n)&&(this._Alignment=n,this._IsAlignmentVisible&&(this._AlignmentLeftButton.setIsChecked(this._Alignment==PP.HorizontalAlignment.Left,!1),this._AlignmentCenterButton.setIsChecked(this._Alignment==PP.HorizontalAlignment.Center,!1),this._AlignmentRightButton.setIsChecked(this._Alignment==PP.HorizontalAlignment.Right,!1),this._IsJustifyVisible&&this._AlignmentJustifyButton.setIsChecked(this._Alignment==PP.HorizontalAlignment.Justify,!1))),this},textSettingsP.setIsRTL=function(){return PP.Ui.FontBox.base.setIsRTL.apply(this,arguments),this._FontFamilyComboBox.setIsRTL(this._IsRTL),this._FontSizeComboBox.setIsRTL(this._IsRTL),this._Toolbar.setIsRTL(this._IsRTL),this._FontColorCombo.setIsRTL(this._IsRTL),this},textSettingsP.setEnabled=function(){return PP.Ui.FontBox.base.setEnabled.apply(this,arguments),this._FontFamilyComboBox.setEnabled(this._Enabled),this._FontSizeComboBox.setEnabled(this._Enabled),this._Toolbar.setEnabled(this._Enabled),this._FontColorCombo.setEnabled(this._Enabled),this},textSettingsP.getFontFamilyComboBox=function(){return this._FontFamilyComboBox},textSettingsP.getFontSizeComboBox=function(){return this._FontSizeComboBox},textSettingsP.getToolbar=function(){return this._Toolbar},textSettingsP.getColorCombo=function(){return this._FontColorCombo},textSettingsP.setControlsGroupVisibility=function(n,t){n=!!n;switch(t){case PP.Ui.FontBox.ControlsGroups.FontFamily:n?this._FontFamilyComboBox.show():this._FontFamilyComboBox.hide();break;case PP.Ui.FontBox.ControlsGroups.FontSize:n?this._FontSizeComboBox.show():this._FontSizeComboBox.hide();break;case PP.Ui.FontBox.ControlsGroups.TextAlignment:this._IsAlignmentVisible&&(n?(this._AlignmentLeftButton.show(),this._AlignmentCenterButton.show(),this._AlignmentRightButton.show(),this._IsJustifyVisible&&this._AlignmentJustifyButton.show()):(this._AlignmentLeftButton.hide(),this._AlignmentCenterButton.hide(),this._AlignmentRightButton.hide(),this._IsJustifyVisible&&this._AlignmentJustifyButton.hide()));break;case PP.Ui.FontBox.ControlsGroups.FontStyle:n?(this._StyleBoldButton.show(),this._StyleItalicButton.show(),this._StyleUnderlineButton.show()):(this._StyleBoldButton.hide(),this._StyleItalicButton.hide(),this._StyleUnderlineButton.hide());break;case PP.Ui.FontBox.ControlsGroups.FontColor:n?this._FontColorCombo.show():this._FontColorCombo.hide()}return this},(PP.Ui.FontBox.ControlsGroups=function(){var n=PP.Ui.FontBox.ControlsGroups;PP.Ui.FontBox.ControlsGroups.FontFamily="FontFamily",PP.Ui.FontBox.ControlsGroups.FontSize="FontSize",PP.Ui.FontBox.ControlsGroups.TextAlignment="TextAlignment",PP.Ui.FontBox.ControlsGroups.FontStyle="FontStyle",PP.Ui.FontBox.ControlsGroups.FontColor="FontColor",PP.initEnum(n,"PP.Ui.FontBox.ControlsGroups")})(),textSettingsP=null,(PP.Ui.FontBox.PropertyName=function(){var n=PP.Ui.FontBox.PropertyName;n.Size="Size",n.FontFamily="FontFamily",n.Alignment="Alignment",n.IsBold="IsBold",n.IsItalic="IsItalic",n.IsUnderline="IsUnderline",n.Color="Color",n.BackgroundColor="BackgroundColor",PP.initEnum(n,"PP.Ui.FontBox.PropertyName")})(),PP.Ui.ChangePasswordDialog=function(n){this._Width=330,this._Height=200,this._OldPass=null,this._ShowError=!0,this._ShowOldPass=!0,this._ImagePath="",this._AutoClose=!0,this._Text=null,PP.Ui.ChangePasswordDialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.ChangePasswordDialog,PP.Ui.Dialog,"ChangePasswordDialog"),cpDialogP=PP.Ui.ChangePasswordDialog.prototype,cpDialogP._render=function(){PP.Ui.ChangePasswordDialog.base._render.call(this),this.addClass("PPChangePasswordDialog"),this._Caption||this.setResourceKey("ChangePasswordDialog");var n=[];n.push(new PP.Ui.Label({Content:this._Text,Class:"PPChangePasswordText"})),this._ShowOldPass&&(this.setHeight(250),n.push(new PP.Ui.Label({ResourceKey:"ChangePasswordOldPass"})),n.push(new PP.Ui.TextBox({IsPassword:!0}))),n.push(new PP.Ui.Label({ResourceKey:"ChangePasswordNewPass"})),n.push(new PP.Ui.TextBox({IsPassword:!0})),n.push(new PP.Ui.Label({ResourceKey:"ChangePasswordConfirmPass"})),n.push(new PP.Ui.TextBox({IsPassword:!0})),this._Panel=new PP.Ui.StackPanel({Items:n}),this._Panel.addToNode(this._DialogContentDomNode)},cpDialogP._onOkButtonClick=function(){this.OkButtonClicked.fire(this,{}),this._AutoClose&&this.close()},cpDialogP._showError=function(n){this._ErrorMessage=new PP.Ui.Message({Type:PP.Ui.MessageType.Error,ResourceKey:n,ImagePath:this._ImagePath}),this._ErrorMessage.show()},cpDialogP.getOldPass=function(){return this._ShowOldPass?this._Panel.getItem(2).getValue():""},cpDialogP.getNewPass=function(){return this._Panel.getItem(this._ShowOldPass?4:2).getValue()},cpDialogP.getConfirmPass=function(){return this._Panel.getItem(this._ShowOldPass?6:4).getValue()},cpDialogP.checkConfirmPass=function(){return this.getNewPass()===this.getConfirmPass()},PP.Ui.ConfirmSaveDialog=function(n){n=n||{},n.ResourceKey||(this._ResourceKey="ConfirmSaveDialog"),this._defineEvents(["NoButtonClicked"]),typeof n.Width=="undefined"&&(this._Width=410),typeof n.Height=="undefined"&&(this._Height=171),this._TriState=!0,this._ContentAlign=PP.HorizontalAlignment.Center,PP.Ui.ConfirmSaveDialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.ConfirmSaveDialog,PP.Ui.Dialog,"ConfirmSaveDialog"),confirmSaveDlgP=PP.Ui.ConfirmSaveDialog.prototype,confirmSaveDlgP._render=function(){var n=PP.htmlToDOM("<table cellpadding='0' cellspacing='0' class='PPDialog'><tbody><tr><td class='PPDialogContent'><div class='Content'></div></td></tr><tr><td class='PPDialogButtons'></td></tr></tbody></table>");this._DialogContentDomNode=n.rows[0].cells[0],this._DialogButtonsDomNode=n.rows[1].cells[0],this._DialogContentDomNode=this._DialogContentDomNode.firstChild,PP.addClass(this._DialogContentDomNode,"PPMbConfirmSaveDlg"),PP.addClass(this._DialogContentDomNode,"PPMbConfirmSaveDlg"+this._ContentAlign+"Align"),this._OkButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"ConfirmSaveDlgOkButton",ParentNode:this._DialogButtonsDomNode}),this._NoButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"ConfirmSaveDlgNoButton",ParentNode:this._DialogButtonsDomNode}),this._TriState&&(this._CancelButton=new PP.Ui.Button({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"ConfirmSaveDlgCancelButton",ParentNode:this._DialogButtonsDomNode}),this._CancelButton.Click.add(this._onCancelButtonClick,this)),this._OkButton.Click.add(this._onOkButtonClick,this),this._NoButton.Click.add(this._onNoButtonClick,this),this._OkButton&&this._OkButton.setTabIndex(0),this._NoButton&&this._NoButton.setTabIndex(0),this._CancelButton&&this._CancelButton.setTabIndex(0),this._tmpContent=this._Content,this._Content=null,PP.Ui.Dialog.base._render.call(this),this._tmpContent&&this.setContent(this._tmpContent),this.setEnableResize(!1),this._WindowContentDomNode.appendChild(n),this._DefaultButton=this._OkButton},confirmSaveDlgP._onNoButtonClick=function(){this.NoButtonClicked.fire(this,{}),this.close()},confirmSaveDlgP.getNoButton=function(){return this._NoButton},confirmSaveDlgP.setIsRTL=function(n){return PP.Ui.ConfirmSaveDialog.base.setIsRTL.call(this,n),this._NoButton.setIsRTL(n),this},confirmSaveDlgP.show=function(){PP.Ui.ConfirmSaveDialog.base.show.call(this);var n=this._WindowContentDomNode.offsetHeight-this._DialogButtonsDomNode.offsetHeight-parseInt(PP.getStyle(this._DialogContentDomNode,"paddingTop"),10)-parseInt(PP.getStyle(this._DialogContentDomNode,"paddingBottom"),10)-1;this._DialogContentDomNode.style.height=n+"px"},confirmSaveDlgP.setEnabledOkButton=function(n){this._OkButton.setEnabled(n)},confirmSaveDlgP.setEnabledNoButton=function(n){this._NoButton.setEnabled(n)},confirmSaveDlgP=null,PP.Ui.CopyDialog=function(n){n=n||{},PP.isDefined(n.ResourceKey)||(n.ResourceKey="copyDialog"),PP.isDefined(n.Width)||(n.Width=360),this._ObjectName="",this._ObjectId="",this._ObjectNameSuffix="",this._ObjectIdSuffix="",this._inputName=null,this._inputId=null,PP.Ui.CopyDialog.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.CopyDialog,PP.Ui.Dialog,"CopyDialog"),copyDialogP=PP.Ui.CopyDialog.prototype,copyDialogP._render=function(){PP.Ui.CopyDialog.base._render.apply(this,arguments);var n={Name:PP.createElement(this._DialogContentDomNode,"PPCopyDialogName"),Id:PP.createElement(this._DialogContentDomNode,"PPCopyDialogId"),Sep1:PP.createElement(this._DialogContentDomNode,"PPCopyDialogSeparator"),NameNew:PP.createElement(this._DialogContentDomNode,"PPCopyDialogNameNew"),NameInput:PP.createElement(this._DialogContentDomNode,"PPCopyDialogNameInput"),IdNew:PP.createElement(this._DialogContentDomNode,"PPCopyDialogIdNew"),IdInput:PP.createElement(this._DialogContentDomNode,"PPCopyDialogIdInput"),Sep2:PP.createElement(this._DialogContentDomNode,"PPCopyDialogSeparator")};new PP.Ui.Label({ResourceKey:"copyDialogName",ParentNode:n.Name}),new PP.Ui.Label({Content:this._ObjectName,ParentNode:n.Name}),new PP.Ui.Label({ResourceKey:"copyDialogId",ParentNode:n.Id}),new PP.Ui.Label({Content:this._ObjectId,ParentNode:n.Id}),new PP.Ui.Label({ResourceKey:"copyDialogNameNew",ParentNode:n.NameNew}),this._inputName=new PP.Ui.TextBox({ParentNode:n.NameInput,Class:"PPCopyDialogInput",Content:this._ObjectName+this._ObjectNameSuffix}),new PP.Ui.Label({ResourceKey:"copyDialogIdNew",ParentNode:n.IdNew}),this._inputId=new PP.Ui.TextBox({ParentNode:n.IdInput,Class:"PPCopyDialogInput",Content:this._ObjectId+this._ObjectIdSuffix}),this.addClass("PPCopyDialog")},copyDialogP._onOkButtonClick=function(){this.OkButtonClicked.fire(this,{Name:this.getObjectNameNew(),Id:this.getObjectIdNew()}),this.close()},copyDialogP.getObjectName=function(){return this._ObjectName},copyDialogP.getObjectId=function(){return this._ObjectId},copyDialogP.getObjectNameSuffix=function(){return this._ObjectNameSuffix},copyDialogP.setObjectNameSuffix=function(n){return this._ObjectNameSuffix=n,this},copyDialogP.getObjectIdSuffix=function(){return this._ObjectIdSuffix},copyDialogP.setObjectIdSuffix=function(n){return this._ObjectIdSuffix=n,this},copyDialogP.getObjectNameNew=function(){return this._inputName.getValue()},copyDialogP.getObjectIdNew=function(){return this._inputId.getValue()},copyDialogP=null,PP.Ui.Hyperlink=function(){PP.Ui.Hyperlink.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.Hyperlink,PP.Ui.Label,"Hyperlink"),hyperlinkP=PP.Ui.Hyperlink.prototype,hyperlinkP._render=function(){PP.Ui.Hyperlink.base._render.apply(this,arguments),this.addClass("PPHyperlink")},hyperlinkP=null,PP.Ui.ErrorDialog=function(n){this._Message="",this._Detail="",this._OkButton=null,this._CancelButton=null,this._Width=400,this._Height=250,this._Caption="Prognoz Platform 7",n||(n={}),this._OkButtonSettings=n.OkButton,this._CancelButtonSettings=n.CancelButton,this._defineEvents(["CloseButtonClicked"]),PP.Ui.ErrorDialog.base.constructor.call(this,n)},PP.initClass(PP.Ui.ErrorDialog,PP.Ui.Dialog,"ErrorDialog"),errdproto=PP.Ui.ErrorDialog.prototype,errdproto._render=function(){var t,n,u,f;if(PP.Ui.ErrorDialog.base._render.call(this),this._OkButtonSettings&&this._OkButton.setSettings(this._OkButtonSettings),this._CancelButtonSettings||(this._CancelButtonSettings={IsVisible:!1}),this._CancelButton.setSettings(this._CancelButtonSettings),t=this._getValue(this._Message,""),t.Class="PPErrorDialogMessage",this._messageLabel=new PP.Ui.Label(t),n=this._messageLabel,this._Detail){this._detailPanel&&this._detailPanel.dispose();var e=this._getValue(this._Detail,""),i=new PP.Ui.Label(e),r=new PP.Ui.Label({Class:"PPErrorDialogDetail"});this._DetailsScroll=new PP.Ui.ScrollBox({Content:i}),r.setContent(this._DetailsScroll),this._detailMessageContent=i.getContent(),this._iframe=PP.htmlToDOM("<iframe></iframe>"),this._iframe.scrolling="no",this._iframe.frameBorder=0,i.setContent(this._iframe),u={ResourceKey:"ErrorDialogDetail",Content:"Detail",Click:PP.Delegate(this._onDetailClick,this,{Detail:this._DetailsScroll})},f=new PP.Ui.Hyperlink(u),this._detailPanel=new PP.Ui.StackPanel({Items:[n,f,r],Width:this._Width}),n=this._detailPanel}this.setContent(n)},errdproto._getValue=function(n,t){return PP.isObject(n)?n:{Content:n||t}},errdproto._onFrameLoaded=function(){var t=PP.IsIE&&PP.IEVer==7?this._iframe.contentWindow.document:this._iframe.contentDocument||this._iframe.contentWindow.document,r="<head><style type='text/css'>body { margin: 0; font-family: Calibri, Helvetica; font-size: 12px; }</style></head><body></body>",i;t.write(r),t.close(),t.body.style.direction=this._IsRTL?"rtl":"ltr",i=PP.htmlToDOM("<div></div>"),i.innerHTML=this._detailMessageContent,this._iframeContentSize=PP.getSizeOf(i),t.body.appendChild(i),this._iframe.style.height=this._iframeContentSize.Height+"px",this._iframe.style.width=this._iframeContentSize.Width+"px"},errdproto._initDetailArea=function(){var n,t;if(this._IframeWindow)return!0;try{this._IframeWindow=this._iframe.contentWindow}catch(i){this._IframeWindow=null}return this._IframeWindow?(n=PP.htmlToDOM("<div></div>"),n.innerHTML=this._detailMessageContent,this._iframeContentSize=PP.getSizeOf(n),this._IframeWindow.document.designMode="on",this._IframeWindow.document.open(),t="<head><style type='text/css'>body { margin: 0; font-family: Calibri; font-size: 12px; color: #000000; background: #FFFFFF; }</style></head><body>"+n.innerHTML+"</body>",this._IframeWindow.document.write(t),this._IframeWindow.document.close(),this._IframeWindow.document.body.style.direction=this._IsRTL?"rtl":"ltr",this._iframe.style.height=this._iframeContentSize.Height+"px",this._iframe.style.width=this._iframeContentSize.Width+"px",this._IframeWindow.document.designMode="off",!0):!1},errdproto._onDetailClick=function(){this._resizeDetailMessage()},errdproto._onClickCloseButton=function(n,t){PP.Ui.ErrorDialog.base._onClickCloseButton.call(this,n,t),this.CloseButtonClicked.fire(this,t)},errdproto.show=function(){PP.Ui.ErrorDialog.base.show.apply(this,arguments),this._resizeDetailMessage()},errdproto._resizeDetailMessage=function(){var n,t,u,i,s,f,r,h,e,o;if(this._detailPanel){for(n=this._messageLabel.getDomNode(),t=this._detailPanel.getItem(2),n.offsetHeight>40&&!t.getIsVisible()?(n.style.overflow="hidden",n.style.height="40px"):(n.style.overflow="",n.style.height=""),u=PP.querySelector(this._DomNode,"div.Content"),i=u.clientWidth-this._getOffsetWidth(u),this._detailPanel.getDomNode().style.width=i+"px",s=i,f=this._DialogContentDomNode.clientHeight,r=0,h=this._detailPanel.getCount()-1;r<h;r++)e=this._detailPanel.getItem(r),o=e.getDomNode(),f-=o.clientHeight+this._getOffsetHeight(o),e.setWidth(i);this._DetailsScroll.setHeight(f),this._DetailsScroll.setWidth(s-this._getOffsetWidth(this._DetailsScroll.getDomNode())-10),t.setWidth(this._DetailsScroll.getWidth()),this._initDetailArea(),t.setIsVisible(!t.getIsVisible(),!1),this._DetailsScroll.updateSize()}},errdproto._getOffsetHeight=function(n){var t=this._parseOffset(PP.getStyle(n,"margin-top"));return t+=this._parseOffset(PP.getStyle(n,"margin-bottom")),t+=this._parseOffset(PP.getStyle(n,"padding-top")),t+=this._parseOffset(PP.getStyle(n,"padding-bottom"))},errdproto._getOffsetWidth=function(n){var t=this._parseOffset(PP.getStyle(n,"margin-left"));return t+=this._parseOffset(PP.getStyle(n,"margin-right")),t+=this._parseOffset(PP.getStyle(n,"padding-left")),t+=this._parseOffset(PP.getStyle(n,"padding-right"))},errdproto._parseOffset=function(n){return isNaN(parseInt(n))?0:parseInt(n)},errdproto.setMessage=function(n){var t=this._getValue(n);this._messageLabel.setSettings(t),this._resizeDetailMessage()},errdproto.getMessage=function(){return this._messageLabel.getContent()},errdproto.setDetail=function(n){var t;if(this._detailPanel&&this._detailPanel.dispose(),t=this._messageLabel,n){var r=this._getValue(n,""),u=new PP.Ui.Label(r),i=new PP.Ui.Panel({Class:"PPErrorDialogDetail",Items:[u]}),f={ResourceKey:"ErrorDialogDetail",Click:PP.Delegate(this._onDetailClick,this,{Detail:i})},e=new PP.Ui.Hyperlink(f);this._detailPanel=new PP.Ui.StackPanel({Items:[t,e,i]}),t=this._detailPanel}this.setContent(t)},errdproto.getDetail=function(){return this._detailPanel?this._DetailsScroll.getContent():""},errdproto.getOkButton=function(){return this._OkButton},errdproto.getCancelButton=function(){return this._CancelButton},errdproto=null,PP.Ui.TreeCombo=function(n){var t=n?n.TreeList:null;t||(t={}),t.ParentNode=null,this._TreeList=null,this._TreeList=n&&n.TreeList instanceof PP.Ui.TreeList?n.TreeList:new PP.Ui.TreeList(t),this._TreeList.setEnableEdit(!1),this._TreeList.setEnableSearch(!1),n&&delete n.TreeList,n&&(n.DropPanel||(n.DropPanel={}),n.DropPanel.UseScrollBox=!1,typeof n.DropPanel.MaxDropDownWidth=="undefined"&&(n.DropPanel.MaxDropDownWidth=Number.MAX_VALUE),typeof n.DropPanel.MinDropDownWidth=="undefined"&&(n.DropPanel.MinDropDownWidth=50),typeof n.DropPanel.MaxDropDownHeight=="undefined"&&(n.DropPanel.MaxDropDownHeight=Number.MAX_VALUE),typeof n.DropPanel.MinDropDownHeight=="undefined"&&(n.DropPanel.MinDropDownHeight=50),typeof n.DropPanel.Height=="undefined"&&(n.DropPanel.Height=230)),this._HideOnNodeClick=!1,this._OpenToFocused=!1,this._OpenToSelected=!1,this._DropClass="PPTreeComboDrop",this._cssTreeCombo="PPTreeCombo",this._AutoFillCaption=!0,this._ResourceKey="TreeComboSelectedCount",this._CaptionStringNothing="",this._ImagePath="",PP.Ui.TreeCombo.base.constructor.apply(this,arguments),this._IconImageListFind=new PP.ImageList({Source:this._ImagePath+"tc_find.png",IconHeight:18,IconWidth:18}),this._IconImageListCross=new PP.ImageList({Source:this._ImagePath+"tc_cross.png",IconHeight:18,IconWidth:18}),this.setIconImageList(this._IconImageListFind),this._TreeList.setIsRTL(this._IsRTL),this._DropPanel.addClass(this._DropClass),this._DropPanel.setContent(this._TreeList),this._DropPanel.Opened.add(this._onOpened,this),this._DropPanel.SizeChanging.add(this._onResize,this),this._DropPanel.SizeChanged.add(this._onResizeCompleted,this),this._bindTreeEvents(),this.updateCaption(),PP.addClass(this._DomNode,this._cssTreeCombo),this._isCreated=!0},PP.initClass(PP.Ui.TreeCombo,PP.Ui.Combo,"TreeCombo"),TreeComboP=PP.Ui.TreeCombo.prototype,TreeComboP._onCultureChanged=function(n,t){PP.Ui.TreeCombo.base._onCultureChanged.call(this,n,t),this.updateCaption()},TreeComboP._onOpened=function(){if(this._onResizeCompleted(),this._TreeList.setFocus(!0),this._TreeList.getFullTreeHeight(),this._OpenToFocused&&this._TreeList.getFocusedNode())this._TreeList.scrollToNode(this._TreeList.getFocusedNode());else if(this._OpenToSelected){var i=this._TreeList.getSelectedNodes();i[0]&&this._TreeList.scrollToNode(i[0])}},TreeComboP._onResize=function(){this._TreeList.setSize(this._DropPanel.getWidth()-7,this._DropPanel.getHeight()-10),this._TreeList.updateSize()},TreeComboP._onResizeCompleted=function(){this._TreeList.setSize(this._DropPanel.getWidth()-7,this._DropPanel.getHeight()-10),this._TreeList.updateSize()},TreeComboP._onNodeClick=function(){this._HideOnNodeClick&&this._DropPanel.hide()},TreeComboP._onSelectionChanged=function(){this._AutoFillCaption&&this.updateCaption()},TreeComboP._bindTreeEvents=function(){this._TreeList.SelectionChanging.add(this._onNodeClick,this),this._TreeList.SelectionChanged.add(this._onSelectionChanged,this)},TreeComboP._unBindTreeEvents=function(){this._TreeList.NodeClick&&(this._TreeList.NodeClick.remove(this._onNodeClick,this),this._TreeList.SelectionChanged.remove(this._onSelectionChanged,this))},TreeComboP._onIconMouseUp=function(n,t){if(PP.Ui.TreeCombo.base._onIconMouseUp.apply(this,arguments),!this._EditorMode&&t.Event.which===PP.MouseButton.Left){this.showSearch();return}this._EditorMode=="cross"&&(this.getEditControl().setValue(""),this.setIconImageList(this._IconImageListFind),this._EditorMode="find")},TreeComboP._onCaptionAfterChange=function(){var i=this.getEditControl().getValue();i&&this._EditorMode!=="cross"&&(this._EditorMode="cross",this.setIconImageList(this._IconImageListCross)),i||this._EditorMode==="find"||(this._EditorMode="find",this.setIconImageList(this._IconImageListFind)),this._EditorTimeout&&PP.clearTimeout(this._EditorTimeout),this._EditorTimeout=PP.setTimeout(this._onCaptionTimeout,500,{self:this,value:i})},TreeComboP._onCaptionTimeout=function(n){var t=n.self;delete t._EditorTimeout,t._TreeList.find(n.value,0,!0)},TreeComboP._onCaptionKeyDown=function(n,t){switch(t.Event.keyCode){case PP.Key.Enter:this._EditorTimeout&&PP.clearTimeout(this._EditorTimeout),this._TreeList.find(this.getEditControl().getValue(),0,!0);break;case PP.Key.Esc:this._TreeList.find(null,0,!0),this.stopCaptionEditing()}},TreeComboP._onDocumentMouseDown=function(n,t){var i=this._DropPanel.getDomNode(),r=PP.calculateMouseCoords(t.Event),u=parseInt(i.style.left),f=parseInt(i.style.top),e=i.offsetWidth,o=i.offsetHeight;r.X>=u&&r.X<=u+e&&r.Y>=f&&r.Y<=f+o||this._DropPanel._ContextMenu&&this._DropPanel._ContextMenu.getIsVisible()?PP.setTimeout(function(n){n.self.getEditControl().setFocus()},0,{self:this}):this._DropPanel.hide()},TreeComboP._onContentCellMouseDown=function(){return PP.Ui.TreeCombo.base._onContentCellMouseDown.apply(this,arguments),this._EditorMode?!1:void 0},TreeComboP.showSearch=function(){this.getDropPanel().getDroppedDown()||this.showDropPanel(),this.setContent(""),this.setEnableEdit(!0);var n=this.getEditControl();n.setValue(""),n.setFocus(),n.AfterChange.add(this._onCaptionAfterChange,this),n.KeyDown.add(this._onCaptionKeyDown,this),this.setIconImageList(this._IconImageListFind),this._EditorMode="find"},TreeComboP._onDropPanelClosed=function(){PP.Ui.TreeCombo.base._onDropPanelClosed.apply(this,arguments),this._EditorMode&&this.stopCaptionEditing()},TreeComboP.stopCaptionEditing=function(){this._EditorMode&&(this._EditorTimeout&&PP.clearTimeout(this._EditorTimeout),this.setEnableEdit(!1),this.getEditControl().AfterChange.remove(this._onCaptionAfterChange,this),this._EditorMode=!1,this.setIconImageList(this._IconImageListFind),this.updateCaption())},TreeComboP.setCaptionString=function(n){this._CaptionString!==n&&(this._CaptionString=n,this.updateCaption())},TreeComboP.getCaptionString=function(){return this._CaptionString},TreeComboP.updateCaption=function(n){var t,i,r;if(this.stopCaptionEditing(),n||n==="")this.setContent(n);else if(this.__OwnerProxy)this.__OwnerProxy.refresh(!1);else if(t=this._TreeList.getSelectedNodes(),this._ContentDomNode)return i=t[0]?t[0].getText():"",r=t.length>1&&t[t.length-1]?t[t.length-1].getText():"",i||r?this.setContent(PP.Ui.getComboCaption(i,r,this._ContentDomNode.offsetWidth,this._IsRTL,t.length)):this.setContent(this._CaptionStringNothing?this._CaptionStringNothing:"Ничего не выбрано"),t.length>0},TreeComboP.setIsRTL=function(n){return n=n==!0,PP.Ui.TreeCombo.base.setIsRTL.call(this,n),this._TreeList.setIsRTL(n),this.updateCaption(this.getContent()),this},TreeComboP.setWidth=function(n){return PP.Ui.TreeCombo.base.setWidth.call(this,n),this._isCreated&&this.updateCaption(),this},TreeComboP.getAutoFillCaption=function(){return this._AutoFillCaption},TreeComboP.setAutoFillCaption=function(n){this._AutoFillCaption=n},TreeComboP.getCaptionStringNothing=function(){return this._CaptionStringNothing},TreeComboP.setCaptionStringNothing=function(n){this._CaptionStringNothing=n},TreeComboP.getTreeList=function(){return this._TreeList},TreeComboP.setTreeList=function(n,t){n!==this._TreeList&&(this._unBindTreeEvents(),t&&this._TreeList.dispose(),this._TreeList=n,this._DropPanel.setContent(this._TreeList),this._bindTreeEvents(),this._onResizeCompleted(),this.updateCaption())},TreeComboP.getHideOnNodeClick=function(){return this._HideOnNodeClick},TreeComboP.setHideOnNodeClick=function(n){return this._HideOnNodeClick=n==!0,this},TreeComboP.getOpenToFocused=function(){return this._OpenToFocused},TreeComboP.setOpenToFocused=function(n){this._OpenToFocused=!!n},TreeComboP.getOpenToSelected=function(){return this._OpenToSelected},TreeComboP.setOpenToSelected=function(n){this._OpenToSelected=!!n},TreeComboP=null,PP.Ui.RadioButton=function(n){this._CSSCBImg="RBImg",n&&(n.ThreeState=!1),this._GroupName="",PP.Ui.RadioButton.base.constructor.apply(this,arguments),this.addClass("PPRadioButton"),this.setGroupName(this._GroupName?this._GroupName:"MainGroup",!0)},PP.initClass(PP.Ui.RadioButton,PP.Ui.CheckBox,"RadioButton"),radioProto=PP.Ui.RadioButton.prototype,PP.Ui.RadioButton.Groups={},radioProto._onClicked=function(n,t){if(!this.getEnabled())return!1;this.Click.fire(this,t),this.getChecked()||this.setChecked(!0)},radioProto.setGroupName=function(n,t){var i,f,r,u;if(t||this._GroupName!==n){if(this._GroupName&&(i=PP.Ui.RadioButton.Groups[this._GroupName],i&&i.Controls.indexOf(this)>-1&&i.Controls.splice(i.Controls.indexOf(this),1)),PP.Ui.RadioButton.Groups[n]){if(r=PP.Ui.RadioButton.Groups[n].Controls,this._Checked)for(u=0;u<r.length;u++)if(r[u].getChecked()){r[u].setChecked(!1,!1);break}r.push(this)}else f={},f.Controls=[],f.Controls.push(this),PP.Ui.RadioButton.Groups[n]=f;this._GroupName=n}},radioProto.getGroupName=function(){return this._GroupName},radioProto.setThreeState=function(){throw new Error("NotImplementedException");},radioProto.setChecked=function(n,t,i,r){var f,u;if(n=!!n,t=typeof t=="undefined"?!0:t==!0,this._Checked!=n||i){if(this._GroupName&&!r)for(f=PP.Ui.RadioButton.Groups[this._GroupName].Controls,u=0;u<f.length;u++)f[u].setChecked(!1,!1,!1,!0);this._Checked=n,this.setCheckedState(this._Checked,t,i)}return this},radioProto.dispose=function(){var n,t;if(this.isLive()){for(n=PP.Ui.RadioButton.Groups[this._GroupName],n.Controls.splice(n.Controls.indexOf(this),1),PP.Ui.RadioButton.base.dispose.call(this,arguments),t=0;t<n.Controls.length;t++)return;delete PP.Ui.RadioButton.Groups[this._GroupName]}},radioProto=null,PP.Ui.NavigationBar=function(){this._Title="",this._VisibleAreaHeight=200,this._panelsButton=null,this._panelsMenu=null,this._Items=null,this._ShowBorders=!1,this._IsAlwaysExpanded=!0,this._Template=PP.Templates.Radius2,this._defineEvents(["Collapsed","Expanded"]),this._Width=200,this._Height=400,this._Animation=new PP.AnimationSettings,PP.Ui.NavigationBar.base.constructor.apply(this,arguments),this._collapsedAreaHeight=this._layoutHeight=0,this._expandedAreaHeight=100,this._doSaveActiveItem=!1,this._firstVisItem=null,this._forScrollNode=this._expandedItem=this._layoutDomNode=this._footerDomNode=null;try{this._storage=window.localStorage}catch(t){}this._render()},PP.initClass(PP.Ui.NavigationBar,PP.Ui.Control,"NavigationBar"),navigationBarP=PP.Ui.NavigationBar.prototype,navigationBarP._getBorderSize=function(){return this._ShowBorders?2:0},navigationBarP._onStepAnimation=function(n,t){if(this.isLive()){var i=t.Args.toExpand,r=t.Args.toCollapse;if(t.IsEnd)r&&r._contentDomNode&&(r.setHeight(0,!0),r.Toggled.fire(r,{IsExpanded:!1}),this.Collapsed.fire(this,{Item:r})),i&&i._contentDomNode&&(i.setHeight(n.end,!0,!1),i.Toggled.fire(i,{IsExpanded:!0}),this.Expanded.fire(this,{Item:i})),this._AnimationP.dispose(),delete this._AnimationP;else{if(i){if(!i._contentDomNode)return;i.setHeight(n.now,!1,!0)}if(r){if(!r._contentDomNode)return;r.setHeight(n.end-n.now,!1,!0)}}}},navigationBarP._onStepAnimationScrl=function(n,t){var i=t.Args;t.IsEnd?(i.scrollTop=n.end,this._AnimationS.dispose(),delete this._AnimationS):i.scrollTop=n.now},navigationBarP._changeViewPanel=function(n,t,i,r,u,f){var e,o,s;f=f==undefined?!0:f,i&&this._Animation.UseAnimation?(e=this._Animation.AnimationTime,o=this._AnimationP=new PP.Ui.Animation(e,0,this._expandedAreaHeight),o.animate(PP.Delegate(this._onStepAnimation,this,{toCollapse:n,toExpand:t})),r?(s=this._AnimationS=new PP.Ui.Animation(e,this._layoutDomNode.scrollTop,u),s.animate(PP.Delegate(this._onStepAnimationScrl,this,this._layoutDomNode))):this._layoutDomNode.scrollTop=u):(this._layoutDomNode.scrollTop=u,n&&(n.setHeight(0),f&&(this.Collapsed.fire(this,{Item:n}),n._contentDomNode&&n.Toggled.fire(n,{IsExpanded:!1}))),t&&(t.setHeight(this._expandedAreaHeight),f&&(t.getIsCollapsed()&&this.Expanded.fire(this,{Item:t}),t._contentDomNode&&t.Toggled.fire(t,{IsExpanded:!0}))))},navigationBarP._render=function(){var e="<div class='Layout'><div></div></div><div class='Footer'></div>",r,n,t,f,i,u,o;if(this._ShowBorders?(r=this._Template,r=r.replace("{Content}",e),this._initFromHTML("<div class='PPNavigationBar'>"+r+"</div>",!0)):this._initFromHTML("<div class='PPNavigationBar'>"+e,!0),this._layoutDomNode=PP.querySelector(this._DomNode,".Layout"),this._forScrollNode=this._layoutDomNode.firstChild,this._footerDomNode=PP.querySelector(this._DomNode,".Footer"),this._footerLabel=new PP.Ui.Label({ParentNode:this._footerDomNode,ResourceKey:"nbPanelsColon"}),n=document.createElement("div"),n.style.width="18px",n.style.height="12px",this._IsRTL?PP.addClass(n,"LeftButtonImg"):PP.addClass(n,"RightButtonImg"),this._panelsMenu=new PP.Ui.Menu,this._panelsMenu.ItemSelected.add(this._onMenuItemSelected,this),this._panelsButton=new PP.Ui.RibbonButton({ParentNode:this._footerDomNode,Menu:this._panelsMenu,MenuDropPosition:null,Width:22,Height:16,Content:n,IsRTL:this._IsRTL}),t=-1,this.beginUpdate(),this._Items){if(!Array.isArray(this._Items))throw PP.ArgumentException(this);for(f=this._Items,this._Items=[],i=0;i<f.length;i++)u=new PP.Ui.NavigationItem(f[i]),u.getEnabled()&&t<0&&(t=i),u.setIsRTL(this._IsRTL),this.addItem(u)}else this._Items=[];this._ParentNode&&this.addToNode(this._ParentNode),this._IsAlwaysExpanded&&t>-1&&(o=this._Items[t],o.expand(!1)),this._DomNode.dir=this._IsRTL?"rtl":"ltr",this._Enabled||this.setEnabled(!1,!0),this._IsVisible||this.setIsVisible(!1),this.endUpdate()},navigationBarP.isAnimation=function(){return this._AnimationS!=undefined||this._AnimationP!=undefined},navigationBarP.stopAnimation=function(){this._AnimationS&&(this._AnimationS.stopToEnd(),delete this._AnimationS),this._AnimationP&&(this._AnimationP.stopToEnd(),delete this._AnimationP)},navigationBarP.addToNode=function(){PP.Ui.NavigationBar.base.addToNode.apply(this,arguments),this.updateSize()},navigationBarP._setPanelsVisibility=function(n,t,i){var b=this._collapsedAreaHeight,e=PP.Ui.NavigationItem.BarHeight,u,s,o;if(!e||!this._Items||this._Items.length==0){PP.hide(this._footerDomNode);return}var v=Math.floor(b/e),a=0,w=0;if(this._expandedItem==null||v>=this._Items.length)this._forScrollNode.style.height=this._Items.length*e+this._VisibleAreaHeight+"px",PP.hide(this._footerDomNode),this._firstVisItem=this._Items[0];else{for(var l=!0,c=[],y=[],f=0,r=0;r<this._Items.length;r++)this._Items[r].getIsVisible()&&(f++,l?c.push(this._Items[r]):y.push(this._Items[r]),l&&!this._Items[r].getIsCollapsed()&&(l=!1));for(this._forScrollNode.style.height=f*e+this._VisibleAreaHeight+"px",u=[],r=y.length-1;f>v&&r>=0;r--)w++,f--,u.push(y[r]);for(s=[],r=0;f>v&&r<c.length;r++)r==0&&w>0&&u.push("-"),a++,f--,s.push(c[r]);for(this._firstVisItem=this._Items[a],s.reverse(),u=u.concat(s),o=this._panelsMenu,o.clearItems(),r=u.length-1;r>=0;r--)if(u[r]==="-")o.addItem(new PP.Ui.Separator);else{var h=u[r].getHeaderControl(),p=null,k=u[r].getEnabled();u[r].getIsHeaderControlVisible()&&h&&h.getChecked&&(p=h.getChecked()),o.addItem(u[r].getTitle()).setData(u[r]).setChecked(p).setEnabled(k)}}this._changeViewPanel(this._OldEpandedItem,this._expandedItem,n,t,a*e,i),delete this._OldEpandedItem},navigationBarP._onMenuItemSelected=function(n){n.getData().expand()},navigationBarP._onCollapsed=function(n,t){this._expandedItem==n&&(this.stopAnimation(),this._OldEpandedItem=this._expandedItem,this._expandedItem=null,this._setPanelsVisibility(t.UseAnimation,t.UseAnimation),this._updateHeight())},navigationBarP._onExpanded=function(n,t){if(this.stopAnimation(),this._expandedItem){var i=this._OldEpandedItem=this._expandedItem;this._expandedItem=n,i.collapse()}this._expandedItem=n,this._updateHeight(),this._setPanelsVisibility(t.UseAnimation,t.UseAnimation)},navigationBarP._getUniqueKey=function(){return"NavigationBar_"+this._Id},navigationBarP._updateHeight=function(){var n,i,r,u;if(this._layoutDomNode&&!(this._BeginUpdate>0)){this._layoutHeight=parseInt(this._Height)-2*this._getBorderSize();var t=PP.Ui.NavigationItem.BarHeight,f=t,e=this._layoutHeight-f,o=0;if(this._expandedItem){for(n=this._expandedItem.getContentSize().Height,n<this._VisibleAreaHeight&&(n=this._VisibleAreaHeight),n>e&&(n=e),this._collapsedAreaHeight=this._layoutHeight-n,i=Math.floor(this._collapsedAreaHeight/t),this._expandedAreaHeight=this._layoutHeight-i*t,r=0,u=0;u<this._Items.length;u++)this._Items[u].getIsVisible()&&r++;i<r?(PP.show(this._footerDomNode),o=this._footerDomNode.offsetHeight,this._layoutHeight-=o,this._collapsedAreaHeight=this._layoutHeight-n,i=Math.floor(this._collapsedAreaHeight/t),i<2?(this._collapsedAreaHeight=f,this._expandedAreaHeight=this._layoutHeight-f-1):this._expandedAreaHeight=this._layoutHeight-i*t-1):this._expandedAreaHeight=this._layoutHeight-t*r-1}else this._collapsedAreaHeight=this._layoutHeight,this._expandedAreaHeight=0;this._layoutDomNode.style.height=this._checkValue(this._layoutHeight)+"px"}},navigationBarP._onToggling=function(n,t){!t.IsExpanding&&this._IsAlwaysExpanded&&n==this._expandedItem&&(t.Cancel=!0)},navigationBarP._onItemEnableChanged=function(n){var r,i;if(this._BeginUpdate==0&&this._panelsMenu)for(r=this._panelsMenu.getItems(),i=0;i<r.length;i++)if(r[i].getData()==n){r[i].setEnabled(n.getEnabled());break}},navigationBarP._oItemVisChanged=function(){this.updateSize(),this._IsAlwaysExpanded&&!this._BeginUpdate&&this._expandFirstItem()},navigationBarP._expandFirstItem=function(n){if(!this.getActiveItem())for(var t=0,i=this._Items.length;t<i;t++)if(this._Items[t].getIsVisible()){this._Items[t].expand(n);return}},navigationBarP.setIsRTL=function(n){var i,t;if(this._IsRTL!==n)for(PP.Ui.NavigationBar.base.setIsRTL.call(this,n),i=0;i<this._Items.length;i++)this._Items[i].setIsRTL(this._IsRTL);t=this._panelsButton,t&&(t.setIsRTL(n),n?PP.addClass(t.getContent(),"FlippedImg"):PP.removeClass(t.getContent(),"FlippedImg"))},navigationBarP.setEnabled=function(n,t){return(this._Enabled!==n||t)&&(PP.Ui.NavigationBar.base.setEnabled.call(this,n,t),n?this._disableDiv&&(this._DomNode.style.position=this._disableDiv.oldPosa,this._DomNode.removeChild(this._disableDiv),delete this._disableDiv):(this._disableDiv=PP.htmlToDOM("<div class='Disable'></div>"),this._disableDiv.oldPosa=this._DomNode.style.position,this._disableDiv.style.width=this._Width+"px",this._disableDiv.style.height=this._Height+"px",this._DomNode.style.position="relative",this._DomNode.appendChild(this._disableDiv))),this},navigationBarP.setHeight=function(n){return this._Height!==n&&(PP.Ui.NavigationBar.base.setHeight.call(this,n),this.updateSize()),this},navigationBarP.setWidth=function(){var i,t;for(PP.Ui.NavigationBar.base.setWidth.apply(this,arguments),i=this._Items.length,t=0;t<i;t++)this._Items[t].setWidth(this._Width-2*this._getBorderSize());return this._disableDiv&&(this._disableDiv.style.width=this._checkValue(this._Width)+"px"),this},navigationBarP.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},navigationBarP.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this.updateSize(),!this.getActiveItem()&&this._IsAlwaysExpanded&&this._expandFirstItem()):this._BeginUpdate--},navigationBarP.getDoSaveActiveItem=function(){return this._doSaveActiveItem},navigationBarP.setDoSaveActiveItem=function(n){return this._doSaveActiveItem=n,this},navigationBarP.getVisibleAreaHeight=function(){return this._VisibleAreaHeight},navigationBarP.setVisibleAreaHeight=function(n){return this._VisibleAreaHeight=n,this},navigationBarP.getIsAlwaysExpanded=function(){return this._IsAlwaysExpanded},navigationBarP.setIsAlwaysExpanded=function(n){return PP.isBoolean(n)&&n!=this._IsAlwaysExpanded&&(this._IsAlwaysExpanded=n,this._IsAlwaysExpanded&&!this._expandedItem&&this._expandFirstItem()),this},navigationBarP.addItem=function(n,t){var i,r,u;if(!n)throw new Error("ArgumentNullException");return n instanceof PP.Ui.NavigationItem||(n=new PP.Ui.NavigationItem(n)),n.getAnimation().UseAnimation=this._Animation.UseAnimation,typeof t=="undefined"||t>=this._Items.length?(this._layoutDomNode.insertBefore(n._DomNode,this._forScrollNode),this._Items.push(n)):PP.isNumber(t)?(t<0&&(t=0),PP.arrInsertBefore(this._Items,n,this._Items[t]),this._layoutDomNode.insertBefore(n._DomNode,this._layoutDomNode.childNodes[t])):t instanceof PP.Ui.NavigationItem&&(i=t,PP.arrInsertBefore(this._Items,n,i),this._layoutDomNode.insertBefore(n._DomNode,i._DomNode)),n.getIsCollapsed()||(this._expandedItem=n),n._bindEvents(),n._ParentNode=this._layoutDomNode,n.Collapsing.add(this._onCollapsed,this),n.Expanding.add(this._onExpanded,this),n.Toggling.add(this._onToggling,this),n.VisibleChanged.add(this._oItemVisChanged,this),n.EnableChanged.add(this._onItemEnableChanged,this),n.setWidth(this._Width-2*this._getBorderSize()),r=this._IsRTL,r!=n.getIsRTL()&&(n._IsRendered?n.setIsRTL(this._IsRTL):PP.Ui.NavigationItem.prototype.setIsRTL.call(n,r)),n.__oldVisible!=undefined&&(n._IsVisible=n.__oldVisible),delete n.__oldVisible,this._BeginUpdate||(this.stopAnimation(),this._IsAlwaysExpanded&&this._expandedItem<0&&n.getEnabled()&&(u=this._Animation.UseAnimation,this._Animation.UseAnimation=!1,n.expand(!1),this._Animation.UseAnimation=u),this.updateSize()),this},navigationBarP.removeItem=function(n,t){var i=this._Items.indexOf(n);return n===this._firstVisItem&&(this._firstVisItem=null),this._expandedItem==n&&(this._expandedItem=null),this.removeItemByIndex(i,t)},navigationBarP.removeItemByIndex=function(n,t){var i,u,r;if(n=parseInt(n),n>-1&&n<this._Items.length){if(i=this._Items[n],t?(i.__oldVisible=i._IsVisible,i._IsCollapsed||(i.collapse(!1,!1),i.setHeight(0)),i.removeFromDOM(!0),i.removeAllEvents(this)):i.dispose(),this._Items.splice(n,1),i===this._expandedItem&&(this._expandedItem===this._firstVisItem&&(this._firstVisItem=null),this._expandedItem=null,this._IsAlwaysExpanded))for(u=this._Items.length,r=0;r<u;r++)if(this._Items[r].getIsVisible()){this._Items[r].expand(!1);break}this._updateHeight()}return this},navigationBarP.getItem=function(n){if(PP.isNumber(n))return this._Items[n];if(PP.isString(n))for(var t=0;t<this._Items.length;t++)if(n===this._Items[t].getId())return this._Items[t]},navigationBarP.getItems=function(){return this._Items},navigationBarP.restoreState=function(){if(!this._storage)return this;var n=this._getUniqueKey(),t=0;this._storage[n]&&(t=parseInt(this._storage[n])),this._Items[t].expand()},navigationBarP.updateSize=function(){this._BeginUpdate==0&&(this._updateHeight(),this._disableDiv&&(this._disableDiv.style.width=this._checkValue(this._Width)+"px",this._disableDiv.style.height=this._checkValue(this._Height)+"px"),this._setPanelsVisibility(!1,!1,!1))},navigationBarP.getActiveItem=function(){return this._expandedItem},navigationBarP=null,PP.Ui.TabControl=function(n){if(this._SettingsItems=n?n.Items:null,this._Items=null,this._defineEvents(["ItemSelected","ItemDeselected","ItemMoved","BeforeAddItem","AfterAddItem","TabEditing","TabEdited","TabDeleted","TextEdited"]),this._SelectedIndex=-1,this._DragDropEnabled=!0,this._BlockUpdateSize=!1,this._ButtonWidth="22px",this._ButtonHeight="16px",this._ImagePath="",this._MenuButtonHorizontalImageUrl="tabcontrol_btn_menu.png",this._MenuButtonVerticalImageUrl="tabcontrol_btn_menu_v.png",this._LeftButtonImageUrl="tabcontrol_arrow_left.png",this._RightButtonImageUrl="tabcontrol_arrow_right.png",this._UpButtonImageUrl="tabcontrol_arrow_up.png",this._DownButtonImageUrl="tabcontrol_arrow_down.png",this._Background=null,this._EnableEdit=!1,this._EnableDelete=!1,this._NewTabCaption="New Tab",PP.Ui.TabControl.base.constructor.apply(this,arguments),this._ScrollHeight=30,this._ScrollWidth=100,this._TabItemsLeftPanel=null,this._TabItemsTopPanel=null,this._TabItemsRightPanel=null,this._TabItemsBottomPanel=null,this._TabItemsLeftPanelHidden=!0,this._TabItemsTopPanelHidden=!0,this._TabItemsRightPanelHidden=!0,this._TabItemsBottomPanelHidden=!0,this._TabContentPanel=null,this._ScrollingMouseDown=!1,this._buttonsToolBars={},this._toolBarButtons={},this._ItemsLists={},this._XItems={},typeof this._ImagePath!="string")throw PP.ArgumentException("incorrect type of ImagePath");this._ImagePath.length>0&&this._ImagePath.charAt(this._ImagePath.length-1)!="/"&&(this._ImagePath+="/"),this._render(),this._Enabled||this.setEnabled(!1)},PP.initClass(PP.Ui.TabControl,PP.Ui.Control,"TabControl"),tabControlP=PP.Ui.TabControl.prototype,tabControlP._render=function(){var r=this._BlockUpdateSize,t,i,n;if(this._initFromHTML("<div class='PPTabControl'></div>",!0),this._Items=[],this._createHeaders(),this._createContent(),this._BlockUpdateSize=!1,this._createXItem(PP.LTRB.Top),this._createXItem(PP.LTRB.Left),this._createXItem(PP.LTRB.Right),this._createXItem(PP.LTRB.Bottom),t=this._IsRTL,this._IsRTL=!1,i=this._SelectedIndex,this._SettingsItems)for(n=0;n<this._SettingsItems.length;n++)this._SettingsItems[n]&&(this._SettingsItems[n].IsRTL=t,this._addItem(new PP.Ui.TabItem(this._SettingsItems[n]),!0,!0));this._IsRTL=t,delete this._SettingsItems,this._IsRTL&&this.setIsRTL(!0),i>-1&&this.setSelectedIndex(i),this._ParentNode&&this.addToNode(this._ParentNode),this._Background&&this.setBackground(this._Background),this.updateSize(),this._BlockUpdateSize=r},tabControlP.setIsRTL=function(n){var o,s,t,r,f,h,e,u,i;if(this._IsRTL!=n){PP.Ui.TabControl.base.setIsRTL.call(this,n),o={Top:PP.LTRB.Top,Bottom:PP.LTRB.Bottom};for(s in o){for(t=this._getTabItemsPanel(s),r=t.parentNode,r.removeChild(t),this._IsRTL?r.appendChild(t):r.insertBefore(t,r.childNodes[0]),f=[],h=t.childNodes.length;t.childNodes.length>0;)e=t.childNodes[0],t.removeChild(e),f.push(e);for(u=h-1;u>=0;u--)t.appendChild(f[u])}for(i=0;i<this._Items.length;i++)this._Items[i].setIsRTL(n);for(i in this._XItems)this._XItems[i].setIsRTL(n);for(i=0;i<this._ItemsLists.length;i++)this._ItemsLists[i].setIsRTL(n)}return this},tabControlP._createHeaders=function(){this._createHeader(PP.LTRB.Left),this._createHeader(PP.LTRB.Top),this._createHeader(PP.LTRB.Right),this._createHeader(PP.LTRB.Bottom)},tabControlP._createHeader=function(n){var h=n,i=PP.htmlToDOM("<div class='PPTabControlItems'></div>"),t=PP.htmlToDOM("<div class='PPTabControlHeadersPanel'></div>"),u,c,l,a,f,e,r,v,o,s,y;t.className=t.className+h,f=this._ButtonWidth,u=this._ButtonHeight,c=this._ImagePath+this._LeftButtonImageUrl,l=this._ImagePath+this._MenuButtonHorizontalImageUrl,a=this._ImagePath+this._RightButtonImageUrl,e=this._Id+"_tb"+n,r=PP.createElement(t,"ToolBar"),this._buttonsToolBars[n]=r,v=new PP.Ui.Button({Id:e+"_lbtn",ParentNode:r,ImageUrl:c,Data:n,Width:f,Height:u,MouseDown:PP.Delegate(this._onScrollLeftMouseDown,this)}),o=new PP.Ui.TabsComboBox({Id:e+"_dbtn",ParentNode:r,Width:f,Height:u,Button:{ImageUrl:l},DropPanel:{Opened:PP.Delegate(this._onTCBOpened,this),Data:h}}),o.setIsRTL(this._IsRTL),s=o.getListBox(),this._ItemsLists[n]=s,s.ItemSelected.add(this._onComboItemSelected,this),y=new PP.Ui.Button({Id:e+"_rbtn",ParentNode:r,ImageUrl:a,Data:n,Width:f,Height:u,MouseDown:PP.Delegate(this._onScrollRightMouseDown,this)});switch(n){case PP.LTRB.Left:this._TabItemsLeftPanel=i,this._TabItemsLeftPanelHidden=!0;break;case PP.LTRB.Right:this._TabItemsRightPanel=i,this._TabItemsRightPanelHidden=!0;break;case PP.LTRB.Top:this._TabItemsTopPanel=i,this._TabItemsTopPanelHidden=!0;break;case PP.LTRB.Bottom:this._TabItemsBottomPanel=i,this._TabItemsBottomPanelHidden=!0}this._IsRTL?t.appendChild(i):t.insertBefore(i,t.childNodes[0]),this._toolBarButtons[n]={Left:v,Center:o,Right:y},this._DomNode.appendChild(t)},tabControlP._onTCBOpened=function(n){if(PP.IsIE&&PP.IEVer<9){var f=n.getData(),i,u,r;switch(f){case PP.LTRB.Bottom:i=n.getCoords(),n.setCoords(i.X-this._TabItemsBottomPanel.offsetWidth,i.Y-n.getHeight());break;case PP.LTRB.Right:i=n.getCoords(),u=this._TabItemsRightPanel.offsetWidth,r=this._TabItemsRightPanel.offsetHeight,n.setCoords(i.X-u-r,i.Y+u+r-n.getHeight());break;case PP.LTRB.Left:i=n.getCoords(),r=this._TabItemsLeftPanel.offsetHeight,n.setCoords(i.X-this._TabItemsLeftPanel.offsetWidth-r,i.Y+r)}}},tabControlP._onComboItemSelected=function(n,t){for(var i=0;i<this._Items.length;i++)this._Items[i]==t.ListItem.getData()&&(this.setSelectedIndex(i),this._setListItemSelectedByItemIndex(i),this._scrollToItem(this._Items[i]))},tabControlP._onScrollLeftMouseDown=function(n,t){this._onScrollMouseDown(n,t,!0)},tabControlP._onScrollRightMouseDown=function(n,t){this._onScrollMouseDown(n,t,!1)},tabControlP._onScrollMouseDown=function(n,t,i){if(this._Enabled){if(t.Event.type=="mousedown"){this._ScrollingMouseDown=!0,this._addEvent(document,"mouseup",this._scrollMouseUp);var r=this,u=n.getData();r._scroll(i,u),this._xTimer=setTimeout(function(){r._checkRepeatScroll(i,u)},500)}t.Event.type=="mouseup"&&(this._ScrollingMouseDown=!1)}},tabControlP._scrollMouseUp=function(){this._removeEvent(document,"mouseup",this._scrollMouseUp),clearTimeout(this._xTimer),this._ScrollingMouseDown=!1},tabControlP._scroll=function(n,t){if(this._ScrollingMouseDown){var i=this._getTabItemsPanel(t);n?i.scrollLeft-=this._ScrollWidth:i.scrollLeft+=this._ScrollWidth}},tabControlP._checkRepeatScroll=function(n,t){clearTimeout(this._xTimer),this._scroll(n,t);var i=this;this._xTimer=setTimeout(function(){i._checkRepeatScroll(n,t)},100)},tabControlP._createContent=function(){this._TabContentPanel=PP.htmlToDOM("<div class='PPTabContent'></div>"),this._DomNode.appendChild(this._TabContentPanel)},tabControlP._scrollToItem=function(n){var h=n._Position,t=this._getTabItemsPanel(h),r=t.clientWidth,i=this._calculateHorizontalOffset(n._DomNode),u=n.getDomNode().offsetWidth;if(u>r)t.scrollLeft=i;else{var f=20,e=t.scrollLeft>i,o=t.scrollLeft>i+u||t.scrollLeft+r<i+u,c=i+u<r,s=i>=t.scrollWidth-r;e&&o?t.scrollLeft=c?0:s?t.scrollWidth-r:i-f:(e?t.scrollLeft=i-f:o&&(t.scrollLeft+=i+u-t.scrollLeft-r+f),s&&(t.scrollLeft=t.scrollWidth))}},tabControlP._calculateHorizontalOffset=function(n){for(var t=0;n.previousSibling;)n=n.previousSibling,t+=n.offsetWidth;return t},tabControlP.isElementVisible=function(n){return PP.getStyle(n,"display")!="none"},tabControlP._refreshHeaderSize=function(n){var a=this._getTabItemsPanel(n),t=a.parentNode,f=this._buttonsToolBars[n],r=this._Width,u,i,c,h;f.style.visibility="hidden";var e=this._TabItemsLeftPanel.offsetWidth,o=this._TabItemsLeftPanel.offsetHeight,l=this._DomNode.offsetWidth,v=t.offsetWidth,s=t.offsetHeight;for(n==PP.LTRB.Top?(e&&(t.style.left=o+"px"),PP.IsIE&&PP.IEVer<9&&(r=e?o:0,r+=this._TabItemsRightPanel.offsetWidth?this._TabItemsRightPanel.offsetHeight:0,r=(this._Width||l)-r,t.style.width=r+"px")):n==PP.LTRB.Left?(i=0,this._TabItemsTopPanel.offsetWidth&&(i+=this._TabItemsTopPanel.offsetHeight),i+=v,t.style.top=i/2+"px",(!PP.IsIE||PP.IsIE&&PP.IEVer>8)&&(t.style.left="-"+(v-s)/2+"px")):n==PP.LTRB.Right?(i=0,this._TabItemsTopPanel.offsetWidth&&(i+=this._TabItemsTopPanel.offsetHeight),u=0,e&&(u+=o),u+=this._TabContentPanel.offsetWidth,u+=s,t.style.top=(i+v)/2+"px",t.style.left=(u-s)/2+"px",PP.IsIE&&PP.IEVer<9&&(t.style.left=(this._Width||l)-(e?o:0)+"px")):n==PP.LTRB.Bottom&&(i=0,this._TabItemsTopPanel.offsetWidth&&(i+=this._TabItemsTopPanel.offsetHeight),i+=this._TabContentPanel.offsetHeight,i+=s,u=0,e&&(u+=o),u+=this._TabContentPanel.offsetWidth,t.style.top=i-s+"px",t.style.left=u-v+"px",PP.IsIE&&PP.IEVer<9&&(r=e?o:0,r+=this._TabItemsRightPanel.offsetWidth?this._TabItemsRightPanel.offsetHeight:0,r=(this._Width||l)-r,t.style.width=r+"px")),c=0,h=0;h<a.childNodes.length;h++)c+=a.childNodes[h].offsetWidth;var p=n==PP.LTRB.Top||n==PP.LTRB.Bottom?this._TabItemsRightPanel:this._TabItemsBottomPanel,w=n==PP.LTRB.Top||n==PP.LTRB.Bottom?this._TabItemsLeftPanel:this._TabItemsTopPanel,b=w.offsetWidth>0?w.offsetHeight:0,k=p.offsetWidth>0?p.offsetHeight:0,y=n==PP.LTRB.Top||n==PP.LTRB.Bottom?this._Width||l:this._Height||this._DomNode.offsetHeight,d=c>0&&c>=y-b-k;d&&!this.isElementVisible(f)?this._setElVis(f,!0):!d&&this.isElementVisible(f)&&this._setElVis(f,!1),a.style.width=this._checkValue(y-b-k-f.offsetWidth)+"px",f.style.visibility=""},tabControlP._getTabItemsPanel=function(n){switch(n){case PP.LTRB.Left:return this._TabItemsLeftPanel;case PP.LTRB.Top:return this._TabItemsTopPanel;case PP.LTRB.Right:return this._TabItemsRightPanel;case PP.LTRB.Bottom:return this._TabItemsBottomPanel}},tabControlP._raiseBeforeAddItem=function(n){this.BeforeAddItem.fire(this,n)},tabControlP._raiseAfterAddItem=function(n){this.AfterAddItem.fire(this,n)},tabControlP._raiseItemMoved=function(n){this.ItemMoved.fire(this,n)},tabControlP._setElVis=function(n,t){n.style.display=t==!0?"":"none"},tabControlP.getItems=function(){return this._Items},tabControlP.setBackground=function(n){n?n instanceof PP.Color?(PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundColor=n.toString(),PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundColor=n.toString(),PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundColor=n.toString(),PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundColor=n.toString(),this._buttonsToolBars[PP.LTRB.Top].style.backgroundColor=n.toString(),this._buttonsToolBars[PP.LTRB.Bottom].style.backgroundColor=n.toString(),this._buttonsToolBars[PP.LTRB.Left].style.backgroundColor=n.toString(),this._buttonsToolBars[PP.LTRB.Right].style.backgroundColor=n.toString(),this._Background=n.toString()):PP.isString(n)&&(n.indexOf("#")===0&&(n.length===7||n.length===9)?(PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundColor=n,PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundColor=n,PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundColor=n,PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundColor=n,this._buttonsToolBars[PP.LTRB.Top].style.backgroundColor=n,this._buttonsToolBars[PP.LTRB.Bottom].style.backgroundColor=n,this._buttonsToolBars[PP.LTRB.Left].style.backgroundColor=n,this._buttonsToolBars[PP.LTRB.Right].style.backgroundColor=n,this._Background=n):(PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundImage="url("+n+")",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundImage="url("+n+")",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundImage="url("+n+")",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundImage="url("+n+")",this._buttonsToolBars[PP.LTRB.Top].style.backgroundImage="url("+n+")",this._buttonsToolBars[PP.LTRB.Bottom].style.backgroundImage="url("+n+")",this._buttonsToolBars[PP.LTRB.Left].style.backgroundImage="url("+n+")",this._buttonsToolBars[PP.LTRB.Right].style.backgroundImage="url("+n+")",this._Background=n)):(PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundColor="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelLeft").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundColor="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelRight").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundColor="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelTop").style.backgroundImage="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundColor="",PP.querySelector(this._DomNode,".PPTabControlHeadersPanelBottom").style.backgroundImage="",this._buttonsToolBars[PP.LTRB.Top].style.backgroundColor="",this._buttonsToolBars[PP.LTRB.Top].style.backgroundImage="",this._buttonsToolBars[PP.LTRB.Bottom].style.backgroundColor="",this._buttonsToolBars[PP.LTRB.Bottom].style.backgroundImage="",this._buttonsToolBars[PP.LTRB.Left].style.backgroundColor="",this._buttonsToolBars[PP.LTRB.Left].style.backgroundImage="",this._buttonsToolBars[PP.LTRB.Right].style.backgroundColor="",this._buttonsToolBars[PP.LTRB.Right].style.backgroundImage="",this._Background=null)},tabControlP.getBackground=function(){return this._Background},tabControlP.setSelectedItem=function(n){if(n&&n instanceof PP.Ui.TabItem)for(var t=0;t<this._Items.length;t++)this._Items[t]==n&&this.setSelectedIndex(t);return this},tabControlP.getSelectedItem=function(){return this._SelectedIndex>-1&&this._SelectedIndex<this._Items.length?this._Items[this._SelectedIndex]:null},tabControlP.setSelectedIndex=function(n,t,i){var u,r,f;if(t=typeof t=="undefined"?!0:t==!0,parseInt(n)>-1&&n<this._Items.length&&(n!=this._SelectedIndex||i)){if(!this._Items[n].getIsVisible()||!this._Items[n].getEnabled())return this;for(this._TabContentPanel.childNodes.length&&(PP.hide(this._TabContentPanel.firstChild),this._TabContentPanel.removeChild(this._TabContentPanel.firstChild)),u=0;u<this._Items.length;u++)r=this._Items[u],f=r._DomNode,u==n?(t&&this.ItemDeselected.fire(r,{Index:this._SelectedIndex}),f.className=r._CSSName+"HeaderSelected",this._SelectedIndex=n,this._TabContentPanel.appendChild(r._ContentDomNode),PP.show(this._TabContentPanel.firstChild),r._ContentDomNode.style.width=PP.getStyle(this._TabContentPanel,"width"),r._ContentDomNode.style.height=PP.getStyle(this._TabContentPanel,"height"),this._scrollToItem(r),t&&this.ItemSelected.fire(r,{Index:this._SelectedIndex})):f.className=f.className.replace(this._Items[u]._CSSName+"HeaderSelected",this._Items[u]._CSSName+"Header");this._setListItemSelectedByItemIndex(n)}return this},tabControlP._setListItemSelectedByItemIndex=function(n){var f=this._Items[n],u,i,r,t;for(u in this._ItemsLists)for(i=this._ItemsLists[u],r=i.getItems(),i.clearSelection(),t=0;t<r.length;t++)if(r[t].getData()==f){i.setSelectedIndex(t,!1);break}},tabControlP.getSelectedIndex=function(){return this._SelectedIndex},tabControlP.setDragDropEnabled=function(n){return n!=this._DragDropEnabled&&(this._DragDropEnabled=n==!0),this},tabControlP.getDragDropEnabled=function(){return this._DragDropEnabled},tabControlP.getItemsList=function(n){return this._ItemsLists[n]},tabControlP.setWidth=function(n){PP.Ui.TabControl.base.setWidth.call(this,n),this.updateSize()},tabControlP.setHeight=function(n){PP.Ui.TabControl.base.setHeight.call(this,n),this.updateSize()},tabControlP.setEnabled=function(n){var t,r,i;if(!!n===this._Enabled)return!1;if(PP.Ui.TabControl.base.setEnabled.call(this,n),this._Items)for(r=n==!0,t=0;t<this._Items.length;t++)this._Items[t]instanceof PP.Ui.TabItem&&(typeof this._Items[t]._oldValue=="undefined"?this._Items[t]._oldValue=this._Items[t].getEnabled():(r=this._Items[t]._oldValue,delete this._Items[t]._oldValue),this._Items[t].setEnabled(r));for(t in this._toolBarButtons)i=this._toolBarButtons[t],i&&(i.Left.setEnabled(n),i.Center.setEnabled(n),i.Right.setEnabled(n));for(t in this._XItems)this._XItems[t]&&this._XItems[t].setEnabled(n);return this},tabControlP.getImagePath=function(){return this._ImagePath},tabControlP.getBlockUpdateSize=function(){return this._BlockUpdateSize},tabControlP.setBlockUpdateSize=function(n){this._BlockUpdateSize=n==!0},tabControlP.getContentPanel=function(){return this._TabContentPanel},tabControlP.showAddTab=function(n,t){var i,r;if(n=n==!0,i=null,typeof t=="undefined"||t==null)for(r in this._XItems)i=this._XItems[r]._DomNode,n?PP.show(i):PP.hide(i);else if(t==PP.LTRB.Left||t==PP.LTRB.Top||t==PP.LTRB.Bottom||t==PP.LTRB.Right)i=this._XItems[t]._DomNode,n?PP.show(i):PP.hide(i);else throw PP.ArgumentException("Incorrect type of position");},tabControlP.addItem=function(n,t){return this._addItem(n,!1,!t)},tabControlP._addItem=function(n,t,i,r){var u,f,e,s,h,o;if(n instanceof PP.Ui.TabItem)return(i=i==!0,u=new PP.Ui.TabControlArgs,u.Item=n,u.IsAddTabClicked=r==!0,i||this._raiseBeforeAddItem(u),u.Cancel)?!1:(n._Parent||(n._Parent=this),this._IsRTL&&n.setIsRTL(!0),this._Items.push(n),f=this._getTabItemsPanel(n._Position),n._ParentNode=f,e=this._XItems[n._Position]._DomNode,this._IsRTL&&n._Position!=PP.LTRB.Left&&n._Position!=PP.LTRB.Right?e.nextSibling?f.insertBefore(n._DomNode,e.nextSibling):f.appendChild(n._DomNode):f.insertBefore(n._DomNode,e),s=this._ItemsLists[n._Position],h=new PP.Ui.ListItem({Parent:s,Content:n.getCaption()}),h.setData(n),s.addItem(h),n._displayDelButton(),this._Items.length==1?this.setSelectedIndex(0,!1):PP.hide(n._ContentDomNode),t||this.updateSize(),o=new PP.Ui.TabControlArgs,o.Item=n,o.IsAddTabClicked=r==!0,i||this._raiseAfterAddItem(o),!0);throw PP.ArgumentException("Incorrect type of value");},tabControlP._createXItem=function(n){if(n!=PP.LTRB.Left&&n!=PP.LTRB.Top&&n!=PP.LTRB.Right&&n!=PP.LTRB.Bottom)throw PP.ArgumentException("incorrect type of position");var t=new PP.Ui.TabItem({Caption:"+",Position:n,Parent:this,IsAddItem:!0,IsRTL:this._IsRTL});this._XItems[n]=t,this._getTabItemsPanel(n).appendChild(t._DomNode)},tabControlP.removeItem=function(n){var i,r,t,u;if(parseInt(n)>-1&&n<this._Items.length){for(i=this._Items[n],r=this._ItemsLists[i._Position],t=0;t<r.getItems().length;t++)if(u=r.getItems()[t],u.getData()==i){u.setData(null),r.removeItem(t);break}i.dispose(),this._Items.splice(n,1),this._SelectedIndex==n?this._Items.length>0?this.setSelectedIndex(0,!1,!0):this._SelectedIndex=-1:this._SelectedIndex>n&&this.setSelectedIndex(this._SelectedIndex-1,!1,!0),this.updateSize()}},tabControlP.updateSize=function(){var n,t,i,r;if(!this._BlockUpdateSize){for(n={},n[PP.LTRB.Left]=n[PP.LTRB.Top]=n[PP.LTRB.Right]=n[PP.LTRB.Bottom]=0,t=0;t<this._Items.length;t++)n[this._Items[t]._Position]++;n[PP.LTRB.Left]!=0&&(this._TabItemsLeftPanelHidden=!1),n[PP.LTRB.Right]!=0&&(this._TabItemsRightPanelHidden=!1),n[PP.LTRB.Top]!=0&&(this._TabItemsTopPanelHidden=!1),n[PP.LTRB.Bottom]!=0&&(this._TabItemsBottomPanelHidden=!1),this._TabItemsLeftPanelHidden?PP.hide(this._TabItemsLeftPanel.parentNode):PP.show(this._TabItemsLeftPanel.parentNode),this._TabItemsRightPanelHidden?PP.hide(this._TabItemsRightPanel.parentNode):PP.show(this._TabItemsRightPanel.parentNode),this._TabItemsTopPanelHidden?PP.hide(this._TabItemsTopPanel.parentNode):PP.show(this._TabItemsTopPanel.parentNode),this._TabItemsBottomPanelHidden?PP.hide(this._TabItemsBottomPanel.parentNode):PP.show(this._TabItemsBottomPanel.parentNode);var u=this._TabItemsLeftPanel.parentNode.offsetHeight,f=this._TabItemsTopPanel.parentNode.offsetHeight,e=this._TabItemsRightPanel.parentNode.offsetHeight,o=this._TabItemsBottomPanel.parentNode.offsetHeight;for(this._TabContentPanel.style.left=u+"px",this._TabContentPanel.style.top=f+"px",i=(this._Width||this._DomNode.offsetWidth)-u-e,i<0&&(i=0,this._DomNode.style.width=u+e+"px"),this._TabContentPanel.style.width=this._TabItemsTopPanel.parentNode.style.width=this._TabItemsBottomPanel.parentNode.style.width=i+"px",r=(this._Height||this._DomNode.offsetHeight)-f-o,r<0&&(r=0,this._DomNode.style.height=f+o+"px"),this._TabContentPanel.style.height=this._TabItemsLeftPanel.parentNode.style.width=this._TabItemsRightPanel.parentNode.style.width=r+"px",this._refreshHeaderSize(PP.LTRB.Left),this._refreshHeaderSize(PP.LTRB.Right),this._refreshHeaderSize(PP.LTRB.Top),this._refreshHeaderSize(PP.LTRB.Bottom),t=0;t<this._Items.length;t++)this._Items[t].refreshSize(),this._Items[t]._ContentDomNode.style.width=i+"px",this._Items[t]._ContentDomNode.style.height=r+"px";this.SizeChanged.fire(this,{ContentWidth:i,ContentHeight:r})}},tabControlP.clear=function(){while(this._Items.length>0)this.removeItem(0)},tabControlP.getEnableEdit=function(){return this._EnableEdit},tabControlP.setEnableEdit=function(n){this._EnableEdit===!n&&(this._EnableEdit=!!n)},tabControlP.getEnableDelete=function(){return this._EnableDelete},tabControlP.setEnableDelete=function(n){this._EnableDelete===!n&&(this._EnableDelete=!!n,this.updateSize())},tabControlP.hideContent=function(){PP.hide(this._TabContentPanel)},tabControlP.showContent=function(){PP.show(this._TabContentPanel)},tabControlP.dispose=function(){this.isLive()&&(this._toolBarButtons[PP.LTRB.Top].Left.dispose(),this._toolBarButtons[PP.LTRB.Top].Center.dispose(),this._toolBarButtons[PP.LTRB.Top].Right.dispose(),this._toolBarButtons[PP.LTRB.Bottom].Left.dispose(),this._toolBarButtons[PP.LTRB.Bottom].Center.dispose(),this._toolBarButtons[PP.LTRB.Bottom].Right.dispose(),this._toolBarButtons[PP.LTRB.Left].Left.dispose(),this._toolBarButtons[PP.LTRB.Left].Center.dispose(),this._toolBarButtons[PP.LTRB.Left].Right.dispose(),this._toolBarButtons[PP.LTRB.Right].Left.dispose(),this._toolBarButtons[PP.LTRB.Right].Center.dispose(),this._toolBarButtons[PP.LTRB.Right].Right.dispose(),this._XItems[PP.LTRB.Top].dispose(),this._XItems[PP.LTRB.Bottom].dispose(),this._XItems[PP.LTRB.Left].dispose(),this._XItems[PP.LTRB.Right].dispose(),this._ItemsLists[PP.LTRB.Top].dispose(),this._ItemsLists[PP.LTRB.Bottom].dispose(),this._ItemsLists[PP.LTRB.Left].dispose(),this._ItemsLists[PP.LTRB.Right].dispose(),PP.Ui.TabControl.base.dispose.call(this))},tabControlP=null,PP.Ui.TabControlArgs=function(){PP.Ui.TabControlArgs.base.constructor.apply(this,arguments),this.Item=null,this.Cancel=!1,this.IsAddTabClicked=!1},PP.initClass(PP.Ui.TabControlArgs,PP.EventArgs,"TabControlArgs"),PP.NumberFormat=function(){var t=PP.getCurrentCulture();this._Culture=t?t:PP.Cultures.ru,this._DecimalPartLength=4,this._DecimalSeparator=PP.resourceManager.getString("DecimalSeparator","NumberFormat"),this._GroupSeparator=PP.resourceManager.getString("GroupSeparator","NumberFormat"),this._LabelNaN=PP.resourceManager.getString("LabelNaN","NumberFormat"),this._LabelPositiveInfinity=PP.resourceManager.getString("LabelPositiveInfinity","NumberFormat"),this._LabelNegativeInfinity=PP.resourceManager.getString("LabelNegativeInfinity","NumberFormat"),PP.NumberFormat.base.constructor.apply(this,arguments)},PP.initClass(PP.NumberFormat,PP.Object,"NumberFormat"),nfProto=PP.NumberFormat.prototype,nfProto.format=function(n){var t,e,r;if(n==null||isNaN(n)||n==="NaN"||n==="")return this._LabelNaN;if(n==+Infinity)return this._LabelPositiveInfinity;if(n==-Infinity)return this._LabelNegativeInfinity;var o=n<0?"-":"",s=Math.abs(n).toFixed(this._DecimalPartLength),u=s.split("."),f=u[1],i=[];for(t=u[0];t.length>0;)t.length>3?(i.push(t.substr(t.length-3)),t=t.slice(0,t.length-3)):(i.push(t),t="");return e=i.reverse().join(this._GroupSeparator),r=o+e+"",f!=undefined&&(r+=this._DecimalSeparator+f),r},nfProto.formatTableValue=function(n){var t=parseFloat(new String(n).replace(" ","").replace(",","."));return isNaN(t)?"":this.format(t)},nfProto=null,PP.NumberFormat.maskFormat=function(n,t){for(var h=new RegExp('(@)|(;)|([$¢£¥€]?)([#?0]([#?0\\s]*[#?0])?)(,([#?0]*))?(E\\+([#?0]*))?(%)?|"(([^\\\\"]*(\\\\.)*)*)"|.',"gi"),r=null,e=[],u=[],i;r=h.exec(n);)r[2]?(u.push(e),e=[]):e.push({Value:r[0],At:r[1],Money:r[3],Aliquot:r[4],Fractional:r[7],Exponent:r[9],Percent:r[10],Text:r[11]});if(u.push(e),i=t,PP.isString(i)){var o=PP.resourceManager.getString("DecimalSeparator","NumberFormat"),s=PP.resourceManager.getString("GroupSeparator","NumberFormat"),c="\\u"+PP.String.leftPad(o.charCodeAt(0).toString(16),4,"0"),l="\\u"+PP.String.leftPad(s.charCodeAt(0).toString(16),4,"0"),a=new RegExp("^[-+]?\\d+("+l+"\\d+)*("+c+"\\d*)?(e[-+]?\\d+)?$","i"),f=i;a.test(f)&&(f=f.split(s).join(""),f=f.split(o).join("."),i=f*1)}return isNaN(i)||!PP.isNumber(i)?u[3]?PP.NumberFormat._templateFormat(u[3],t):t+"":u[2]&&i==0?PP.NumberFormat._templateFormat(u[2],i):u[1]&&i<0?PP.NumberFormat._templateFormat(u[1],Math.abs(i)):PP.NumberFormat._templateFormat(u[0],i)},PP.NumberFormat._templateFormat=function(n,t){var r,l,i,e,o,a,h,c;if(n.length===0)return t+"";for(r="",l=new RegExp("\\\\(.)","gi"),i=0;i<n.length;i++){if(n[i].At){r+=PP.isNumber(t)?t.toString().replace(".",PP.resourceManager.getString("DecimalSeparator","NumberFormat")):t;continue}if(n[i].Text){r+=n[i].Text.replace(l,"$1");continue}if((n[i].Aliquot||n[i].Fractional)&&PP.isNumber(t)){var u=parseFloat(t),s=n[i].Fractional?n[i].Fractional.length:0,f=0;if(n[i].Percent&&(u*=100),u<0&&(r+="-",u=Math.abs(u)),n[i].Money&&(r+=n[i].Money),n[i].Exponent&&u){for(e=u,o=1;parseFloat(e.toFixed(s))<=1;)f--,o=Math.pow(10,f),e=u/o;while(parseFloat(e.toFixed(s))>=10)f++,o=Math.pow(10,f),e=u/o;u=e}if(n[i].Exponent)for(a=3-PP.NumberFormat._countOfSymbols(n[i].Exponent,"0"),h=0;h<a;h++)n[i].Exponent+="0";c=Math.pow(10,s),u=Math.round(u*c)/c;var y=PP.NumberFormat._aliquotFormat(n[i].Aliquot,u),v=PP.NumberFormat._fractionalFormat(n[i].Fractional,u),p=PP.NumberFormat._aliquotFormat(n[i].Exponent,Math.abs(f));r+=y,n[i].Fractional&&v.length&&(r+=PP.resourceManager.getString("DecimalSeparator","NumberFormat"),r+=v),n[i].Exponent&&(r+="E",r+=f<0?"-":"+",r+=p),n[i].Percent&&(r+="%");continue}r+=n[i].Value}return r},PP.NumberFormat._aliquotFormat=function(n,t){var i,f,e,h,o,r,u;if(!PP.isDefined(n))return"";i=t+"",f=i.indexOf("."),f>=0&&(i=i.substr(0,f));var s=PP.NumberFormat._countOfSymbols(n,"0"),c=PP.NumberFormat._countOfSymbols(n,"?"),l=n.indexOf(" ")>=0,a=s-i.length;for(e=0;e<a;e++)i="0"+i;for(h=c+s-i.length,o=0;o<h;o++)i=" "+i;if(l){for(r="",u=i.length-3;u>0;u-=3)r=PP.resourceManager.getString("GroupSeparator","NumberFormat")+i.substr(u,3)+r;r=i.substr(0,3+u)+r,i=r}return i},PP.NumberFormat._fractionalFormat=function(n,t){var i,r,s,f,h,e;if(!PP.isDefined(n))return"";i=t+"",r=i.indexOf("."),i=r>=0?i.substr(r+1,i.length):"";var u=PP.NumberFormat._countOfSymbols(n,"0"),o=PP.NumberFormat._countOfSymbols(n,"?"),c=PP.NumberFormat._countOfSymbols(n,"#");for(i=i.substr(0,u+o+c),s=u-i.length,f=0;f<s;f++)i+="0";for(h=o+u-i.length,e=0;e<h;e++)i+=" ";return i},PP.NumberFormat._countOfSymbols=function(n,t){var r,i;if(!n)return 0;for(r=0,i=0;i<n.length;i++)n.charAt(i)===t&&r++;return r},PP.Ui.MetabaseDialogBase=function(n){n=n||{},this._RootKey=0,this._ImagePath="",this._Metabase=null,this._Width=780,this._Height=530,this._ShowEmptyFolder=!0,this._ShowOnlyFolders=null,PP.isDefined(n.MinDropDownWidth)||(n.MinDropDownWidth=400),PP.isDefined(n.MinDropDownHeight)||(n.MinDropDownHeight=300),this._BaseHeightDec=140,this._AdditionalHeightDec=0,this._BaseWidthDec=50,this._CurrentFilter=null,this._MultiSelect=!1,this._Collapsed=!1,this._OpenToKey=!1,this._DisplayMode=PP.Mb.Ui.MetabaseDisplayMode.Names,this._FiltersSet=[],this._FolderTreeFilter=null,this._navigatorBoxContainer=null,this._toolbarContainer=null,this._bottomToolbarContainer=null,this._collapsibleContainer=null,PP.Ui.MetabaseDialogBase.base.constructor.call(this,n),this._itemsToOpen=[]},PP.initClass(PP.Ui.MetabaseDialogBase,PP.Ui.Dialog,"MetabaseDialogBase"),PP.Ui.MetabaseDialogBase.createSortMenu=function(){return new PP.Ui.Menu({Width:177,Items:[{MenuItem:{ResourceKey:"navSortingAsc",Id:"SortingAsc",Data:PP.Mb.OrderBy.Asc}},{MenuItem:{ResourceKey:"navSortingDesc",Id:"SortingDesc",Data:PP.Mb.OrderBy.Desc}},{MenuItem:{ResourceKey:"navSortingDefault",Id:"SortingDefault",Data:PP.Mb.OrderBy.Default}},{Separator:{Content:new PP.Ui.Separator}},{MenuItem:{ResourceKey:"navSortingName",Id:"SortingName",Data:PP.Mb.ObjectAttribute.Name}},{MenuItem:{ResourceKey:"navSortingId",Id:"SortingId",Data:PP.Mb.ObjectAttribute.Id}},{MenuItem:{ResourceKey:"navSortingChangeDate",Id:"SortingChangeDate",Data:PP.Mb.ObjectAttribute.Timestamp}},{MenuItem:{ResourceKey:"navSortingType",Id:"SortingType",Data:PP.Mb.ObjectAttribute.Key}},{MenuItem:{ResourceKey:"navSortingDescription",Id:"SortingDescription",Data:PP.Mb.ObjectAttribute.Descr}}]})},dialogBaseProto=PP.Ui.MetabaseDialogBase.prototype,dialogBaseProto._render=function(){var n,r,u,t,i;for(this._smallIcons=new PP.ImageList({Source:this._ImagePath+"metabase/GlbClsImg16.png",IconHeight:16,IconWidth:16}),n=PP.htmlToDOM("<div style='margin:0 11px;'><div class='Collapsible' "+(this._Collapsed?"style='dislpay:none;'":"")+"><div class='ToolbarContainer'></div><div class='NavigatorBoxContainer'></div></div><div class='BottomToolbarContainer'></div></div>"),this._navigatorBoxContainer=PP.querySelector(n,".NavigatorBoxContainer"),this._toolbarContainer=PP.querySelector(n,".ToolbarContainer"),this._bottomToolbarContainer=PP.querySelector(n,".BottomToolbarContainer"),this._collapsibleContainer=PP.querySelector(n,".Collapsible"),this._filterCombo=new PP.Ui.ComboBox({ListBox:{Items:[],ImageList:this._smallIcons}}),this._initFiltersSet(),this._filterCombo.addClass("FilterSelect"),this._filterCombo.getDropPanel().addClass("FilterSelect"),r={RootKey:this._RootKey,Metabase:this._Metabase,ParentNode:this._navigatorBoxContainer,ImagePath:this._ImagePath,ShowEmptyFolder:this._ShowEmptyFolder,ShowOnlyFolders:this._ShowOnlyFolders,OpenToKey:this._OpenToKey,ObjectListDisplayMode:this._DisplayMode,ObjectListMultiSelect:this._MultiSelect,ObjectListFilters:this._CurrentFilter==null?[]:this._CurrentFilter.Filters},this._FolderTreeFilter&&(r.FolderTreeFilter=this._FolderTreeFilter),this._navigatorBox=new PP.Mb.Ui.NavigatorBox(r),u=this._navigatorBox._splitter,u.setSplitterPosition(u.getWidth()/4),t=new PP.Ui.Menu({ParentNode:document.body,Items:[{MenuItem:{Data:PP.Mb.Ui.NavigatorBox.ObjectListMode.Small,GroupName:"navViewView",ResourceKey:"navViewViewSmallIconControl"}},{MenuItem:{Data:PP.Mb.Ui.NavigatorBox.ObjectListMode.Large,GroupName:"navViewView",ResourceKey:"navViewViewLargeIconControl"}},{MenuItem:{Data:PP.Mb.Ui.NavigatorBox.ObjectListMode.Table,GroupName:"navViewView",Checked:!0,ResourceKey:"navViewViewTableControl"}}]}),i=0;i<t.getItems().length;i++)t.getItems()[i].Click.add(this.changeObjectListMode,this);this._viewBtn=new PP.Ui.Button({ResourceKey:"MetabaseDialogBaseViewButton",ParentNode:this._toolbarContainer,MenuArrowPosition:PP.LTRB.Right,ImagePosition:PP.LTRB.Left,Menu:t}),this._upButton=new PP.Ui.Button({ResourceKey:"MetabaseDialogBaseUpButton",ParentNode:this._toolbarContainer,Enabled:!1}),PP.Ui.MetabaseDialogBase.base._render.call(this),this._DialogContentDomNode.appendChild(n),this.addClass("PPMetabaseDialogBase"),this.setWidth(this._Width),this.setHeight(this._Height),this.setEnableResize(!0)},dialogBaseProto._onUpButtonClick=function(){this._navigatorBox.openParentFolder(),this._upButton.setEnabled(!1)},dialogBaseProto._onObjectListObjectsLoadedBase=function(){var i=this._navigatorBox.getRootKey(),r=this._navigatorBox.getObjectsListRootKey();this._upButton.setEnabled(i!==r)},dialogBaseProto._onSizeChanged=function(){this.recalcSize(this.getWidth(),this.getHeight())},dialogBaseProto.changeObjectListMode=function(n){this._navigatorBox.setObjectListMode(n.getData())},dialogBaseProto.getParentKey=function(){return this._navigatorBox.getObjectsListRootKey()},dialogBaseProto.getParentMbObject=function(){return this._navigatorBox.getObjectsListRootMbObject()},dialogBaseProto.setCollapsed=function(n){this._Collapsed=n,this._collapsibleContainer.style.display=n?"none":"block",n?PP.Ui.MetabaseDialogBase.base.setHeight.call(this,this._BaseHeightDec+this._AdditionalHeightDec-54):PP.Ui.MetabaseDialogBase.base.setHeight.call(this,this._navigatorBox.getHeight()+this._BaseHeightDec+this._AdditionalHeightDec)},dialogBaseProto._bindEvents=function(){PP.Ui.MetabaseDialogBase.base._bindEvents.call(this),this._filterCombo.getListBox().ItemSelected.add(this._onFilterSelected,this),this.SizeChanged.add(this._onSizeChanged,this),this._upButton.Click.add(this._onUpButtonClick,this),this._navigatorBox.ObjectListObjectsLoaded.add(this._onObjectListObjectsLoadedBase,this)},dialogBaseProto._unBindEvents=function(){this._filterCombo.getListBox().ItemSelected.remove(this._onFilterSelected,this),this.SizeChanged.remove(this._onSizeChanged,this),this._upButton.Click.remove(this._onUpButtonClick,this),this._navigatorBox.ObjectListObjectsLoaded.remove(this._onObjectListObjectsLoadedBase,this),PP.Ui.MetabaseDialogBase.base._unBindEvents.call(this)},dialogBaseProto._initFiltersSet=function(){var t,n;for(this._CurrentFilter==null&&(this._CurrentFilter=this._FiltersSet.length>0?this._FiltersSet[0]:null),t=this._filterCombo.getListBox(),t.clear(),n=0;n<this._FiltersSet.length;n++)this._addFilters(this._FiltersSet[n])},dialogBaseProto._addFilters=function(n,t){var s=this._filterCombo.getListBox(),i={Value:n},u,r,o,f,e;if(n.ResourceKey&&(i.ResourceKey=n.ResourceKey),n.Content&&(i.Content=n.Content),!i.Content&&!i.ResourceKey)for(u=n.Filters,i.Content="",r=0,o=u.length;r<o;r++)u[r]!=0&&(i.Content+=(r==0?"":", ")+PP.resourceManager.getString("navClassDesc")[PP.Mb.Ui.getClassNameById(u[r]).replace(/_/g,"")]);f=n.IconIndex,f||n.Filters&&n.Filters.length>0&&(f=PP.Mb.Ui.getClassIconIndex(n.Filters[0])),i.Selected=n==this._CurrentFilter,e=s.insertItem(new PP.Ui.ListItem(i),t),e.setColumnIndex(f),e.setRowIndex(0),n==this._CurrentFilter&&this._filterCombo.setSelectedItem(e)},dialogBaseProto._onFilterSelected=function(n,t){this._CurentFilter=t.ListItem.getValue(),this._navigatorBox.setObjectListFilters(t.ListItem.getValue().Filters)},dialogBaseProto.getImagePath=function(){return this._ImagePath},dialogBaseProto.getNavigatorBox=function(){return this._navigatorBox},dialogBaseProto.setIsRTL=function(n,t){this._filterCombo.setIsRTL(n,t),this._navigatorBox.setIsRTL(n,t),this._viewBtn.setIsRTL(n,t),PP.Ui.MetabaseDialogBase.base.setIsRTL.apply(this,arguments)},dialogBaseProto.setHeight=function(n,t){PP.isDefined(t)||(t=!0),this._Collapsed||PP.Ui.MetabaseDialogBase.base.setHeight.call(this,n),t&&this.recalcSize(undefined,n)},dialogBaseProto.setWidth=function(n,t){PP.isDefined(t)||(t=!0),this._Collapsed||PP.Ui.MetabaseDialogBase.base.setWidth.call(this,n),t&&this.recalcSize(this.getWidth(),undefined)},dialogBaseProto.recalcSize=function(n,t){var i,r;this._navigatorBox&&(n!==undefined&&(i=n-this._BaseWidthDec-1,this._navigatorBox.setWidth(i)),t!==undefined&&(r=t-this._BaseHeightDec-this._AdditionalHeightDec,this._navigatorBox.setHeight(r)))},dialogBaseProto.setFiltersSet=function(n,t){if(n.length==0)throw PP.ArgumentException("setFiltersSet: FilterSet can't be empty",this);this._FiltersSet=n,this._CurentFilter=n[t?t:0],this._navigatorBox.setObjectListFilters(this._CurentFilter.Filters)},dialogBaseProto.getFiltersSet=function(){return this._FiltersSet},dialogBaseProto.addFilter=function(n,t,i){if(Array.isArray(n)&&(n={Filters:n}),i&&(this._CurrentFilter=n,this._navigatorBox.setObjectListFilters(n.Filters)),t){var r=this._FiltersSet.slice(0,t),u=this._FiltersSet.slice(t);this._FiltersSet=r.concat(n,u)}else this._FiltersSet.push(n);this._addFilters(n,t)},dialogBaseProto.getCurrentFilter=function(){return this._CurrentFilter},dialogBaseProto.removeFilter=function(n){var t,i;if(n<0||n>=this._FiltersSet.length)throw PP.ArgumentException("removeFilter: index can't be < 0 and >filterSet.length");t=this._FiltersSet[n],this._CurrentFilter==t&&(this._CurrentFilter=this._FiltersSet.length>0?this._FiltersSet[0]:null),this._FiltersSet.splice(n,1),i=this._filterCombo.getListBox(),i.removeItem(n,!0)},dialogBaseProto.clearFiltersSet=function(){this._FiltersSet=[],this._CurentFilter=null,this._filterCombo.getListBox().clear()},dialogBaseProto.selectFilter=function(n){var r,i,t;for(PP.isNumber(n)&&(n=this._FiltersSet[n]),r=this._filterCombo.getListBox(),i=r.getItems(),t=0;t<i.length;t++)i[t].getValue()==n&&this._filterCombo.setSelectedItem(i[t])},dialogBaseProto.getPathToRoot=function(){return this._navigatorBox.getPathToRoot()},dialogBaseProto.refresh=function(n,t){this._navigatorBox.refreshForKey(n,!t)},dialogBaseProto.openFoldersTo=function(n){this._navigatorBox.getObjectsListRootKey()!=n&&PP.isNumber(n)&&this._navigatorBox.openFoldersTo(n)},dialogBaseProto.show=function(n){PP.isDefined(n)&&this.openFoldersTo(n),PP.Ui.MetabaseDialogBase.base.show.call(this),this._navigatorBox.updateSize()},dialogBaseProto.dispose=function(){delete this._Metabase,PP.Ui.MetabaseDialogBase.base.dispose.apply(this,arguments)},dialogBaseProto.setShowOnlyFolders=function(n){this._ShowOnlyFolders!==n&&(this._ShowOnlyFolders=n,this._navigatorBox.setShowOnlyFolders(this._ShowOnlyFolders))},dialogBaseProto.getShowOnlyFolders=function(){return this._ShowOnlyFolders},dialogBaseProto=null,PP.Ui.Animation=function(n,t,i){this.duration=n,this.start=t,this.end=i,this.now=0},PP.initClass(PP.Ui.Animation,PP.Object,"Animation"),animPr=PP.Ui.Animation.prototype,animPr.step=function(){var n=new Date-this.startTime,t=n/this.duration,i=this.easeOutQuad(t,n,0,1,this.duration);return this.now=Math.round(this.start+i*(this.end-this.start))},animPr.easeOutQuad=function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},animPr._clearAnim=function(){delete this._CurrentPars,delete this._AnimationType},animPr._innerAnimate=function(n){var t=n.AnimationObject,i;t._AnimationType&&(i=new Date-t.startTime,i<t.duration?(PP.setTimeout(t._innerAnimate,13,n),PP.Delegate.fire(n.Callback,t,{Value:t.step()})):(t._clearAnim(),PP.Delegate.fire(n.Callback,t,{Value:t.end,IsEnd:!0}),n.Callback.clear&&n.Callback.clear()))},animPr._innerAnimateProperty=function(n){var t=n.AnimationObject,i;t._AnimationType&&(i=+new Date,i-t.startTime<t.duration?(n.Context["set"+n.PropName](t.step()),PP.setTimeout(t._innerAnimateProperty,13,n)):(t._clearAnim(),n.Context["set"+n.PropName](t.end),n.Callback&&PP.Delegate.fire(n.Callback,t)))},animPr._innerAnimateDomNodeProperty=function(n){var t=n.AnimationObject,i;t._AnimationType&&(i=+new Date,i-t.startTime<t.duration?(n.Context[n.PropName]=t.step(),PP.setTimeout(t._innerAnimateDomNodeProperty,13,n)):(t._clearAnim(),n.Context[n.PropName]=t.end,n.Callback&&PP.Delegate.fire(n.Callback,t,{IsEnd:!0})))},animPr._innerAnimateCSS=function(n){var t=n.AnimationObject,i;t._AnimationType&&(i=+new Date,i-t.startTime<t.duration?(n.DomNode.style[n.PropName]=t.step()>0?t.step()+"px":"0",PP.setTimeout(t._innerAnimateCSS,13,n)):(t._clearAnim(),n.DomNode.style[n.PropName]=t.end>0?t.end+"px":"0",n.Callback&&PP.Delegate.fire(n.Callback,t)))},animPr.animate=function(n){if(this._AnimationType)throw new PP.Exception(this);this._AnimationType=PP.Ui.AnimationType.Base,this.startTime=new Date,this._CurrentPars={AnimationObject:this,Callback:n},this._innerAnimate(this._CurrentPars)},animPr.animateProp=function(n,t,i){if(this._AnimationType)throw new PP.Exception(this);this._AnimationType=PP.Ui.AnimationType.PPProp,this.startTime=new Date,this._CurrentPars={AnimationObject:this,Context:n,PropName:t,Callback:i},this._innerAnimateProperty(this._CurrentPars)},animPr.animateDomNodeProp=function(n,t,i){if(this._AnimationType)throw new PP.Exception(this);this._AnimationType=PP.Ui.AnimationType.DOMProp,this.startTime=new Date,this._CurrentPars={AnimationObject:this,Context:n,PropName:t,Callback:i},this._innerAnimateDomNodeProperty(this._CurrentPars)},animPr.animateCSS=function(n,t,i){if(this._AnimationType)throw new PP.Exception(this);this._AnimationType=PP.Ui.AnimationType.CSS,this.startTime=new Date;var r=parseInt(PP.getStyle(n,t));return this.start!==this.end?(this._CurrentPars={AnimationObject:this,DomNode:n,PropName:t,Callback:i},this._innerAnimateCSS(this._CurrentPars),!0):!1},animPr.stopToEnd=function(){var n=this.duration;this.duration=0;switch(this._AnimationType){case PP.Ui.AnimationType.CSS:this._innerAnimateCSS(this._CurrentPars);break;case PP.Ui.AnimationType.DOMProp:this._innerAnimateDomNodeProperty(this._CurrentPars);break;case PP.Ui.AnimationType.PPProp:this._innerAnimateProperty(this._CurrentPars);break;case PP.Ui.AnimationType.Base:this._innerAnimate(this._CurrentPars)}this.duration=n},animPr.stopToStart=function(){var t=this.duration,n;this.duration=0,n=this.end,this.end=this.start;switch(this._AnimationType){case PP.Ui.AnimationType.CSS:this._innerAnimateCSS(this._CurrentPars);break;case PP.Ui.AnimationType.DOMProp:this._innerAnimateDomNodeProperty(this._CurrentPars);break;case PP.Ui.AnimationType.PPProp:this._innerAnimateProperty(this._CurrentPars);break;case PP.Ui.AnimationType.Base:this._innerAnimate(this._CurrentPars)}this.end=n,this.duration=t},animPr=null,(PP.Ui.AnimationType=function(){var n=PP.Ui.AnimationType;n.CSS="CSS",n.DOMProp="DOMProp",n.PPProp="PPProp",n.Base="Base",PP.initEnum(PP.Ui.AnimationType,"PP.Ui.AnimationType")})(),PP.SVG={VML_PRECISION:1e4,init:function(){PP.IsSVG||PP.SVG.isInit||(document.createStyleSheet().addRule(".v","behavior:url(#default#VML); position:absolute; height:"+PP.SVG.VML_PRECISION+"px; width:"+PP.SVG.VML_PRECISION+"px; left:0px; top:0px; "),document.namespaces.add("v","urn:schemas-microsoft-com:vml"),PP.SVG.isInit=!0)},removeChildren:function(n){for(var t=n.childNodes,i=t.length-1;t.length>0;i--)n.removeChild(t[i])},removeElement:function(n){n.parentNode&&n.parentNode.removeChild(n)},back:function(n){n.parentNode&&n.parentNode.firstChild!=n&&n.parentNode.insertBefore(n,n.parentNode.firstChild)},svg:function(n){var t,i;return PP.IsSVG?(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),n&&n.appendChild(t),t):(i=document.createElement("div"),n&&n.appendChild(i),i)},group:function(n,t){var i=PP.IsSVG?document.createElementNS("http://www.w3.org/2000/svg","g"):document.createElement("v:group"),r,u;if(PP.IsSVG||(i.coordorigin="0,0",i.coordsize=PP.SVG.VML_PRECISION+","+PP.SVG.VML_PRECISION,i.style.width=PP.SVG.VML_PRECISION+"px",i.style.height=PP.SVG.VML_PRECISION+"px"),n&&n.appendChild(i),t)for(r=0;r<t.length;r++)u=t[r],i.appendChild(u);return i},image:function(n){var t=PP.IsSVG?document.createElementNS("http://www.w3.org/2000/svg","image"):document.createElement("v:image");return n&&n.appendChild(t),t},rect:function(n){var t=PP.IsSVG?document.createElementNS("http://www.w3.org/2000/svg","rect"):document.createElement("v:rect");return PP.IsSVG||(t.setAttribute("class","v"),t.strokecolor="none"),n&&n.appendChild(t),t},circle:function(n){var t=PP.IsSVG?document.createElementNS("http://www.w3.org/2000/svg","circle"):document.createElement("v:oval");return PP.IsSVG||(t.setAttribute("class","v"),t.strokecolor="none"),n&&n.appendChild(t),t},path:function(n){var t=PP.IsSVG?document.createElementNS("http://www.w3.org/2000/svg","path"):document.createElement("v:shape");return PP.IsSVG||(t.setAttribute("class","v"),t.coordorigin="0,0",t.coordsize=PP.SVG.VML_PRECISION+","+PP.SVG.VML_PRECISION,t.style.width=PP.SVG.VML_PRECISION+"px",t.style.height=PP.SVG.VML_PRECISION+"px"),n&&n.appendChild(t),t},brush:function(n,t){var i=t.brush,s,h,c,f,e,o,l,a,u,r;if(PP.IsSVG)if(h=n.parentNode,h&&(s=h.getElementsByTagNameNS("http://www.w3.org/2000/svg","defs")[0],s&&h.removeChild(s)),i["@Color"]||i.Color)this._setSolidFill(i,t);else{for(s=document.createElementNS("http://www.w3.org/2000/svg","defs"),h.appendChild(s),c="",f=0;f<=5;f++)c+="QWERTYUIOPASDFGHJKLZXCVBNM0123456789".charAt(Math.floor(Math.random()*37));for(e=new PP.Point(PP.getProperty(i,"StartPoint")),e.setX(e.getX()*100),e.setY(e.getY()*100),o=new PP.Point(PP.getProperty(i,"EndPoint")),o.setX(o.getX()*100),o.setY(o.getY()*100),t.fill="url(#"+c+")",t["fill-opacity"]=this._getNumberValueFromSettings(i,"Opacity"),i["LinearGradientBrush.GradientStops"]?(l=i["LinearGradientBrush.GradientStops"].GradientStop,a="linearGradient"):(l=i["RadialGradientBrush.GradientStops"].GradientStop,a="radialGradient"),u=document.createElementNS("http://www.w3.org/2000/svg",a),u.setAttribute("id",c),u.setAttribute("x1",e.getX()+"%"),u.setAttribute("y1",e.getY()+"%"),u.setAttribute("x2",o.getX()+"%"),u.setAttribute("y2",o.getX()+"%"),f=0;f<l.length;f++){var y=document.createElementNS("http://www.w3.org/2000/svg","stop"),v=l[f],w=this._getNumberValueFromSettings(v,"Offset").toFixed(2)*100+"%",p=new PP.Color(v["@Color"]||v.Color).toString();PP.SVG.setAttr(y,{offset:w,"stop-color":p}),u.appendChild(y)}s.appendChild(u)}else i["@Color"]||i.Color?this._setSolidFill(i,t):(r=document.createElement("v:fill"),r.type=i["LinearGradientBrush.GradientStops"]?"gradient":"gradientradial",r.color="#F60",r.color2="#FF6",r.opacity="1.0",r.angle="270",r.colors="25% #F60, 50% #00ff00, 75% #FF6",n.appendChild(r));delete t.brush},_setSolidFill:function(n,t){var r=n["@Color"]||n.Color,u,f,i;r=="Transparent"||r=="transparent"?t["fill-opacity"]=0:(u=new PP.Color(r),t.fill=u.toString(),f=u.getOpacity(),i=PP.IsOpera?this._getNumberValueFromSettings(n,"Opacity").toFixed(8):this._getNumberValueFromSettings(n,"Opacity"),t["fill-opacity"]=f!=undefined?i*f:i)},span:function(n){var t=PP.IsSVG?document.createElementNS("http://www.w3.org/2000/svg","tspan"):document.createElement("span");return n&&n.appendChild(t),t},text:function(n){var t;if(PP.IsSVG)t=document.createElementNS("http://www.w3.org/2000/svg","text"),n&&n.appendChild(t);else throw PP.NotImplementedException();return t},_getInNew:function(n,t,i){return(n-t)/i+t},scale:function(n,t,i,r,u,f){var e,o,s;if(PP.IsSVG)e=n.scaleData,typeof e=="undefined"&&(e={},e.y=e.x=e.dy=e.dx=e.offLeft=e.offTop=0,e.factor=1),u==undefined&&(u=e.offLeft),f==undefined&&(f=e.offTop),o="",i||r?(e.offLeft=u,e.offTop=f):(e.dy=e.dx=e.y=e.x=i=r=0,e.factor=1,e.offLeft=u=u/t,e.offTop=f=f/t),e.x=PP.SVG._getInNew(i,e.x,e.factor),e.y=PP.SVG._getInNew(r,e.y,e.factor),e.dx+=(i-e.x)/t,e.dy+=(r-e.y)/t,o="translate("+e.x+","+e.y+") scale("+t+") translate("+(-e.x+e.dx+u)+","+(-e.y+e.dy+f)+")",e.factor=t,n.setAttribute("transform",o),n.scaleData=e;else{e=n.scaleData,typeof e=="undefined"&&(e={},e.offLeft=e.offTop=e.x=e.y=0,e.origSize=n.coordsize.x,e.multiplier=e.origSize/PP.SVG.VML_PRECISION,e.factor=1),u==undefined||u<0?u=e.offLeft:e.offLeft=u,f==undefined||f<0?f=e.offTop:e.offTop=f,i||r||(e.factor=1,e.x=-u*e.multiplier/t,e.y=-f*e.multiplier/t,i=r=0);var h=1/e.factor-1/t,c=i*h,l=r*h;e.x+=c*e.multiplier,e.y+=l*e.multiplier,e.coordSize=e.origSize/t,e.factor=t,s=e.coordSize,n.coordsize=s+","+s,n.coordorigin=e.x+","+e.y,n.scaleData=e}},rotate:function(n,t,i,r){var u,f,e;i?(f=i,u=r):PP.IsSVG&&(e=n.getBBox(),f=e.width,u=e.height),n.setAttribute("transform","rotate("+t+","+f+","+u+")")},translate:function(n,t,i){n.setAttribute("transform","translate("+t+","+i+")")},getBoundsRect:function(n,t){if(PP.IsSVG){if(t)return this._getSafeBBox(n);try{return n.getBBox()}catch(r){return{x:0,y:0,width:0,height:0}}}else{var i=n.getBoundingClientRect();return{x:i.left,y:i.top,width:i.right-i.left,height:i.bottom-i.top}}},_attr:{id:null,x:"style.left",y:"style.top",cx:"style.left",cy:"style.top",r:null,width:"style.width",height:"style.height",fill:"fill.color","fill-opacity":"fill.opacity","stroke-width":"stroke.weight",stroke:"stroke.color","stroke-opacity":"stroke.opacity","stroke-dasharray":null,"stroke-linejoin":null,offset:null,"stop-color":null,rx:null,ry:null,d:null,style:"style",transform:null,"font-family":null,"font-size":null,"font-weight":null,"font-style":null,"text-anchor":null,"xlink:href":"src"},_getAttr:function(n){return PP.IsSVG?n:PP.SVG._attr[n]},setAttr:function(n,t){var u,i,r;if(n){if(t.brush&&PP.SVG.brush(n,t),t["xlink:href"]&&(!t.width||!t.height)){PP.SVG._loadImage(n,t);return}PP.isNumber(t.roundedge)&&t.roundedge>=0&&(t.rx=t.ry=PP.IsSVG?t.roundedge:parseFloat(t.roundedge)/50,delete t.roundedge),t.r&&!PP.IsSVG&&(t.width=t.height=parseFloat(t.r)*2,delete t.cr),n.tagName.toUpperCase()==="G"&&((t["stroke-width"]||PP.isNumber(t["stroke-width"]))&&(n.style.strokeWidth=t["stroke-width"],delete t["stroke-width"]),t.fill&&(n.style.fill=t.fill,delete t.fill),t.stroke&&(n.style.stroke=t.stroke,delete t.stroke)),t.d&&!PP.IsSVG&&(t.path=t.d,delete t.d);for(u in t)i=t[u],r=PP.SVG._getAttr(u),PP.IsSVG?i||PP.isNumber(i)?u=="xlink:href"?n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i):n.setAttribute(r,i):n.removeAttribute(r):r&&PP.SVG._setAttrForVml(n,r,i)}},_setAttrForVml:function(n,t,i){var u,c,r,o,h;if(!PP.SVG.isSupportVMLAttr(n.tagName.toUpperCase(),t)&&n.childNodes.length>0&&n.scopeName==="v")for(u=0,c=n.childNodes.length;u<c;u++)PP.SVG._setAttrForVml(n.childNodes[u],t,i);else{var l=t.split("."),f=l[0],s=l[1],e=n[f];e?((f==="stroke"||f==="fill")&&(e.on=!!i),i&&(r=e[s],typeof r=="object"?f=="stroke"&&s=="color"?(o=new PP.Color(i),r.R=o.getR(),r.G=o.getG(),r.B=o.getB()):r.value=i:e[s]=i)):(h=t.replace(".",""),i?n.setAttribute(h,i):n.removeAttribute(h))}},isSupportVMLAttr:function(n,t){return PP.SVG._supportVmlAttr[n]&&PP.SVG._supportVmlAttr[n][t]},_supportVmlAttr:{GROUP:{flip:!0,height:!0,left:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,position:!0,rotation:!0,top:!0,visibility:!0,width:!0,"z-index":!0},SHAPE:{flip:!0,height:!0,left:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,position:!0,rotation:!0,top:!0,visibility:!0,width:!0,"z-index":!0,"fill.color":!0,"stroke.weight":!0,"stroke.color":!0,"stroke.opacity":!0,path:!0},RECT:{"fill.color":!0,"fill.opacity":!0,"stroke.weight":!0,"stroke.color":!0,"stroke.opacity":!0,"style.width":!0,"style.height":!0}},getAttr:function(n,t){var r={},f,i;if(n)for(f=0;f<t.length;f++)if(i=t[f],PP.IsSVG)r[i]=n.getAttribute(i);else{var o=PP.SVG._getAttr(i),e=o.split("."),u=n[e[0]];r[i]=u?i=="stroke"||i=="fill"?u.on?u[e[1]].value:null:i=="style"?u[e[1]].replace("px",""):u[e[1]]:n.getAttribute(i)}return r},getStroke:function(n){return n.tagName.toUpperCase()==="G"?{stroke:n.style.stroke,"stroke-width":n.style.strokeWidth,"stroke-opacity":n.style.strokeOpacity}:PP.SVG.getAttr(n,["stroke","stroke-width","stroke-opacity"])},getSize:function(n){return PP.SVG.getAttr(n,["width","height"])},_loadImage:function(n,t){var i=PP.htmlToDOM('<img src="'+t["xlink:href"]+'" onload="PP.SVG._initImage(this);" style="position: absolute; top: -1000px; left: -1000px; visibility: hidden;"/>');i.settings=t,i.node=n,document.body.appendChild(i)},_initImage:function(n){n.removeAttribute("onload"),n.onload=null;var t=n.settings,i=n.node;delete n.settings,delete n.node,t.width=n.offsetWidth,t.height=n.offsetHeight,PP.SVG.setAttr(i,t)},_getSafeBBox:function(n){var r=null,t,i,u;return n.parentNode?(t=n.parentNode,i=!0):(t=null,i=!1),u=this.svg(document.body),u.appendChild(n),n.getBBox&&(r=n.getBBox()),i?t.appendChild(n):document.documentElement.removeChild(n),r},_getNumberValueFromSettings:function(n,t){var i=null;return PP.isNumber(n["@"+t])?i=n["@"+t]:PP.isNumber(n[t])&&(i=n[t]),i}},PP.Ui.BorderCombo=function(n){this._Color=this._Value=null,this._Mode=null,this._TypesMode="Services",this._BorderTypeOnlt=!1,this._LineType=null,this._BorderType=null,this._BorderWidthVisible=!1,this._LineColorVisible=!0,this._LineWidth=0,this._HiddenBorderTypes=[],this._defineEvents(["BorderTypeChanged","LineTypeChanged","ColorChanged","ModeChanged","LineWidthChanged","ValueChanged"],"BorderCombo"),PP.Ui.BorderCombo.base.constructor.apply(this,arguments);var t=n&&n.DropPanel?n.DropPanel:{};t.UseScrollBox=!1,this._DropPanel=new PP.Ui.DropPanel(t),this._mode1Btn=new PP.Ui.ToolBarButton({ResourceKey:"borderComboLineColor",GroupName:"ModeGroup",Value:0}),this._mode2Btn=new PP.Ui.ToolBarButton({ResourceKey:"borderComboLineType",GroupName:"ModeGroup",Value:1}),this._mode3Btn=new PP.Ui.ToolBarButton({ResourceKey:"thickness",GroupName:"ModeGroup",Value:2}),this._Template=PP.Templates.Radius2,this._PresentedColors=["#f2f2f2","#808080","#ddd9c4","#dce6f1","#f2dcdb","#ebf1de","#e4dfec","#daeef2","#fde9d9","#d9d9d9","#595959","#c4bd97","#b8cce4","#e6b8b7","#d8e4bc","#ccc0da","#b7dee8","#fcd5b4","#a6a6a6","#404040","#948a54","#95b3d7","#da9694","#c4d79b","#b1a0c7","#92cddc","#fabf8f","#a6a6a6","#262626","#494529","#366092","#963634","#76933c","#60497a","#31869b","#e26B0a","#909090","#0d0d0d","#1d1b10","#244062","#632523","#4f6228","#403151","#215967","#974706"],this._Color=this._Color||"#000000",this._borderTypes=[],this._lineTypes=[],this._colors=[],this._render()},PP.initClass(PP.Ui.BorderCombo,PP.Ui.Control,"BorderCombo"),(PP.Ui.BorderCombo.TypesMode=function(){var n=PP.Ui.BorderCombo.TypesMode;n.SVG="SVG",n.CSS="CSS",n.Services="Services",PP.initEnum(PP.Ui.BorderCombo.TypesMode,"PP.Ui.BorderCombo.TypesMode")})(),(PP.Ui.BorderCombo.PropertyName=function(){var n=PP.Ui.BorderCombo.PropertyName;n.LineWidth="LineWidth",n.Color="Color",n.LineType="LineType",PP.initEnum(PP.Ui.BorderCombo.PropertyName,"PP.Ui.BorderCombo.PropertyName")})(),BCProto=PP.Ui.BorderCombo.prototype,BCProto._render=function(){var n,t,i,r;this._DropPanel.setEnableResize(!1),this._Mode===null&&(this._Mode=0),this._bordersImList=new PP.ImageList({Source:"img/bordertype.png",IconHeight:16,IconWidth:16}),this._typesImList=new PP.ImageList({Source:"img/linetype.png",IconHeight:22,IconWidth:156}),this._DomNode||this._initFromHTML("<div class='PPBorderCombo'><div class='BCIcon'></div><div class='BCArrow'></div></div>"),this._IconDomNode=this._DomNode.firstChild,n=!1;for(t in PP.getEnumInterfMembers(PP.Ui.BorderCombo.BorderType))this._BorderType==PP.Ui.BorderCombo.BorderType[t]&&(i=this._BorderType>8?this._BorderType-9:this._BorderType,r=this._BorderType>8?1:0,this._IconDomNode.style.backgroundPosition=this._bordersImList.getIcon(r,i),n=!0);n||(this._IconDomNode.style.backgroundPosition=this._bordersImList.getIcon(0,4)),PP.Ui.BorderCombo.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),this._renderBodyContent()},BCProto._bindEvents=function(){PP.Ui.BorderCombo.base._bindEvents.apply(this,arguments),this._content&&this._addEvents(this._content,{contextmenu:this._onDropPanelContextMenu});for(var i=this._colors.length,t,n=0;n<i;n++)t=this._colors[n],this._addEvents(t,{click:this._onColorSelect,mousedown:this._onColorMouseDown,mouseup:this._onColorMouseUp,mouseout:this._onColorMouseOut,mouseover:this._onColorMouseOver});for(i=this._borderTypes.length,n=0;n<i;n++)t=this._borderTypes[n],this._addEvents(t,{click:this._onBTSelect,mousedown:this._onBTMouseDown,mouseup:this._onBTMouseUp,mouseout:this._onBTMouseOut,mouseover:this._onBTMouseOver});for(i=this._lineTypes.length,n=0;n<i;n++)t=this._lineTypes[n],this._addEvents(t,{click:this._onLTSelect,mousedown:this._onLTMouseDown,mouseup:this._onLTMouseUp,mouseout:this._onLTMouseOut,mouseover:this._onLTMouseOver});this._DropPanel.Closed.add(this._onDropPanelClose,this)},BCProto._unBindEvents=function(){PP.Ui.BorderCombo.base._unBindEvents.apply(this,arguments),this._content&&this._removeEvent(this._content,"contextmenu",this._onDropPanelContextMenu);for(var i=this._colors.length,n,t=0;t<i;t++)n=this._colors[t],this._removeEvent(n,"click",this._onColorSelect),this._removeEvent(n,"mousedown",this._onColorMouseDown),this._removeEvent(n,"mouseup",this._onColorMouseUp),this._removeEvent(n,"mouseout",this._onColorMouseOut),this._removeEvent(n,"mouseover",this._onColorMouseOver);for(i=this._borderTypes.length,t=0;t<i;t++)n=this._borderTypes[t],this._removeEvent(n,"click",this._onBTSelect),this._removeEvent(n,"mousedown",this._onBTMouseDown),this._removeEvent(n,"mouseup",this._onBTMouseUp),this._removeEvent(n,"mouseout",this._onBTMouseOut),this._removeEvent(n,"mouseover",this._onBTMouseOver);for(i=this._lineTypes.length,t=0;t<i;t++)n=this._lineTypes[t],this._removeEvent(n,"click",this._onLTSelect),this._removeEvent(n,"mousedown",this._onLTMouseDown),this._removeEvent(n,"mouseup",this._onLTMouseUp),this._removeEvent(n,"mouseout",this._onLTMouseOut),this._removeEvent(n,"mouseover",this._onLTMouseOver);this._DropPanel.Closed.remove(this._onDropPanelClose,this)},BCProto._renderBodyContent=function(){var n=!1,t;this._content||(n=!0,this._content=PP.createElement(null,"BCPanel"),this._DropPanel.setContent(this._content),this._isContentBind=!1),t=this._content.style.visibility,this._content.style.visibility="hidden",this._borderBlock||(this._borderBlock=PP.createElement(this._content,"BCBorderBlock")),this._refreshBorders(),this._separator||(this._separator=PP.createElement(this._content,"BCSeparator")),this._modeBlock||(this._modeBlock=PP.createElement(this._content,"BCModeBlock")),this._refreshMode(),this._paletteBlock||(this._paletteBlock=PP.createElement(this._content,"BCPaletteBlock")),this._refreshPalette(),this._lineBlock||(this._lineBlock=PP.createElement(this._content,"BCLineBlock")),this._widthBlock||(this._widthBlock=PP.createElement(this._content,"BCWidthBlock")),this._refreshTypes(),this._refreshWidth(),this._adjustTypes(),this._adjustSizes(),this._bindEvents(),n&&this.setIsRTL(this._IsRTL),this._content.style.visibility=t,this._bindEvents()},BCProto._refreshPalette=function(){var e,u,t,f,i,r,n;if(!this._palette)for(this._palette=PP.createElement(this._paletteBlock,"BCPalette","TABLE"),e=5,u=9,t=0;t<e;t++)for(f=document.createElement("tr"),this._palette.appendChild(f),i=0;i<u;i++)this._tmpcell=document.createElement("td"),f.appendChild(this._tmpcell),this._tmpcell.className="BCPaletteCell",this._tmpcell.innerHTML="&nbsp;",r=i+t*u,n="#FFFFFF",r<this._PresentedColors.length?(n=this._PresentedColors[r],!this._selectedCell&&this._Color&&n.toUpperCase()==this._Color.toString()&&this._selectCell(this._tmpcell)):this._tmpcell.style.visibility="hidden",this._tmpcell.style.backgroundColor=n,this._tmpcell.Color=n,this._tmpcell.Index=r,this._tmpcell.IsUsed=!1,this._colors.push(this._tmpcell)},BCProto._refreshWidth=function(){this._WidthGridPanel||(this._WidthGridPanel=new PP.Ui.GridPanel({ParentNode:this._widthBlock,Items:[new PP.Ui.Label({Top:0,Left:0,ResourceKey:"thicknessColon"}),this._widthNumberEdit=new PP.Ui.NumberEdit({Top:0,Left:1,Width:60,Value:this._LineWidth,MinValue:0,MaxValue:5,AfterChange:PP.Delegate(this._onWidthNumberEditAfterChange,this)})]}))},BCProto._onWidthNumberEditAfterChange=function(n,t){var r=PP.Ui.BorderCombo.PropertyName.LineWidth,i=t.NewValue;this.setLineWidth(i,!1),this.LineWidthChanged.fire(this,{LineWidth:i}),this.ValueChanged.fire(this,{PropertyName:r,Value:i})},BCProto._refreshMode=function(){if(this._toolBar)return!0;this._toolBar=new PP.Ui.ToolBar({ParentNode:this._modeBlock}),this._toolBar.addItem(this._mode1Btn),this._mode1Btn.setResourceKey("borderComboLineColor"),this._toolBar.addItem(this._mode2Btn),this._mode2Btn.setResourceKey("borderComboLineType"),this._mode3Btn.setResourceKey("thickness"),this._toolBar.addItem(this._mode3Btn),this._mode1Btn.StateChanged.add(this._onModeChange,this),this._mode2Btn.StateChanged.add(this._onModeChange,this),this._mode3Btn.StateChanged.add(this._onModeChange,this),this._LineColorVisible||(this._mode1Btn.hide(),this._Mode==PP.Ui.BorderCombo.Mode.Color&&(this._Mode=PP.Ui.BorderCombo.Mode.Type)),this._BorderWidthVisible||(this._mode3Btn.hide(),this._LineColorVisible?this._Mode=PP.Ui.BorderCombo.Mode.Color:(this._Mode=PP.Ui.BorderCombo.Mode.Type,PP.hide(this._modeBlock)));for(var n in PP.getEnumInterfMembers(PP.Ui.BorderCombo.Mode))this._Mode==PP.Ui.BorderCombo.Mode[n]&&this._toolBar.getItem(this._Mode).setIsChecked(!0,!1)},BCProto._refreshBorders=function(){var e,i,n,r,t,u,f,o;if(this._bordersList)return!0;for(this._bordersList=PP.createElement(this._borderBlock,"BCBordersList","TABLE"),e=2,i=9,n=0;n<e;n++)for(r=document.createElement("tr"),this._bordersList.appendChild(r),t=0;t<i;t++){if(n==1&&t==4)break;this._tmpcell=document.createElement("td"),r.appendChild(this._tmpcell),this._tmpcell.className="BCBorderOuter",this._tmpcell.innerHTML="<div class='BCBorderCell'></div>",u=t+n*i,this._tmpcell.firstChild.style.backgroundPosition=this._bordersImList.getIcon(n,t),this._tmpcell.Index=u,this._borderTypes.push(this._tmpcell),this._HiddenBorderTypes.indexOf(u)>-1&&PP.hide(this._tmpcell)}f=!1;for(o in PP.getEnumInterfMembers(PP.Ui.BorderCombo.BorderType))PP.Ui.BorderCombo.BorderType[o]==this._BorderType&&(this._selectCell(this._borderTypes[this._BorderType]),f=!0);f||(this._selectCell(this._borderTypes[4]),this._BorderType=4)},BCProto._refreshTypes=function(){var u,i,n,r,t,f,e;if(this._typesList)return!0;for(this._typesList=PP.createElement(this._lineBlock,"BCTypesList","TABLE"),u=10,i=1,n=0;n<u;n++)for(r=document.createElement("tr"),this._typesList.appendChild(r),t=0;t<i;t++)this._tmpcell=document.createElement("td"),r.appendChild(this._tmpcell),this._tmpcell.className="BCTypeOuter",this._tmpcell.innerHTML="<div class='BCTypeCell'></div>",f=t+n*i,this._tmpcell.firstChild.style.backgroundPosition=this._typesImList.getIcon(n,t),this._tmpcell.Index=f,this._lineTypes.push(this._tmpcell);for(e in PP.getEnumInterfMembers(PP.Ui.BorderCombo.LineType))PP.Ui.BorderCombo.LineType[e]===this._LineType&&this._selectCell(this._lineTypes[this._LineType])},BCProto._selectCell=function(n){PP.addClass(n,"Selected")},BCProto._adjustSizes=function(){var i=0,t,n;this._TypesMode==PP.Ui.BorderCombo.TypesMode.CSS&&(i=this._PANELHEIGHT_CSS),this._TypesMode==PP.Ui.BorderCombo.TypesMode.SVG&&(i=this._PANELHEIGHT_SVG),t=this._Mode,n=PP.Ui.BorderCombo.Mode,this._BorderTypeOnlt?(PP.show(this._borderBlock),PP.show(this._separator)):(PP.hide(this._borderBlock),PP.hide(this._separator));switch(t){case n.Color:PP.show(this._paletteBlock),PP.hide(this._lineBlock),PP.hide(this._widthBlock);break;case n.Type:PP.hide(this._paletteBlock),PP.show(this._lineBlock),PP.hide(this._widthBlock);break;case n.Width:PP.hide(this._paletteBlock),PP.hide(this._lineBlock),PP.show(this._widthBlock)}},BCProto._adjustTypes=function(){var n;if(this._TypesMode==PP.Ui.BorderCombo.TypesMode.Services)for(n=0;n<this._lineTypes.length;n++)PP.show(this._lineTypes[n],!0);if(this._TypesMode==PP.Ui.BorderCombo.TypesMode.SVG||this._TypesMode==PP.Ui.BorderCombo.TypesMode.CSS){for(n=0;n<this._lineTypes.length;n++)PP.hide(this._lineTypes[n]);this._TypesMode==PP.Ui.BorderCombo.TypesMode.CSS?(PP.show(this._lineTypes[0],!0),PP.show(this._lineTypes[1],!0),PP.show(this._lineTypes[4],!0)):(PP.show(this._lineTypes[0],!0),PP.show(this._lineTypes[1],!0),PP.show(this._lineTypes[2],!0),PP.show(this._lineTypes[3],!0),PP.show(this._lineTypes[4],!0),PP.show(this._lineTypes[5],!0),PP.show(this._lineTypes[6],!0),PP.show(this._lineTypes[7],!0),PP.show(this._lineTypes[8],!0),PP.show(this._lineTypes[9],!0))}},BCProto._onModeChange=function(n){this._Mode=n.getValue(),this._adjustTypes(),this._adjustSizes(),this.ModeChanged.fire(this,{})},BCProto._onDropPanelContextMenu=function(){return!1},BCProto._onColorSelect=function(n,t){var r=t.FireEvent,i;for(r=typeof r=="undefined"?!0:r==!0,this._Color=this.Value=this._PresentedColors[t.Element.Index],i=0;i<this._colors.length;i++)PP.removeClass(this._colors[i],"Hover"),PP.removeClass(this._colors[i],"Selected");PP.addClass(t.Element,"Selected"),r&&(this.ColorChanged.fire(this,{Color:this._Color}),this.ValueChanged.fire(this,{PropertyName:PP.Ui.BorderCombo.PropertyName.Color,Value:this._Color}),this._DropPanel.hide())},BCProto._onColorMouseOver=function(n,t){PP.addClass(t.Element,"Hover")},BCProto._onColorMouseOut=function(n,t){PP.removeClass(t.Element,"Hover")},BCProto._onColorMouseDown=function(n,t){PP.addClass(t.Element,"Press")},BCProto._onColorMouseUp=function(n,t){PP.removeClass(t.Element,"Press")},BCProto._onBTSelect=function(n,t){var r=t.FireEvent,i,u;for(r=typeof r=="undefined"?!0:r==!0,this._BorderType=t.Element.Index,i=0;i<this._borderTypes.length;i++)PP.removeClass(this._borderTypes[i],"Hover"),PP.removeClass(this._borderTypes[i],"Selected");PP.addClass(t.Element,"Selected"),i=t.Element.Index>8?t.Element.Index-9:t.Element.Index,u=t.Element.Index>8?1:0,this._IconDomNode.style.backgroundPosition=this._bordersImList.getIcon(u,i),r&&(this.BorderTypeChanged.fire(this,{BorderType:this._BorderType}),this._DropPanel.hide())},BCProto._onBTMouseOver=function(n,t){PP.addClass(t.Element,"Hover")},BCProto._onBTMouseOut=function(n,t){PP.removeClass(t.Element,"Hover")},BCProto._onBTMouseDown=function(n,t){PP.addClass(t.Element,"Press")},BCProto._onBTMouseUp=function(n,t){PP.removeClass(t.Element,"Press")},BCProto._onLTSelect=function(n,t){var r=t.FireEvent,i;for(r=typeof r=="undefined"?!0:r==!0,this._LineType=t.Element.Index,i=0;i<this._lineTypes.length;i++)PP.removeClass(this._lineTypes[i],"Hover"),PP.removeClass(this._lineTypes[i],"Selected");PP.addClass(t.Element,"Selected"),r&&(this.LineTypeChanged.fire(this,{LineType:this._LineType}),this.ValueChanged.fire(this,{PropertyName:PP.Ui.BorderCombo.PropertyName.LineType,Value:this._LineType}),this._DropPanel.hide())},BCProto._onLTMouseOver=function(n,t){PP.addClass(t.Element,"Hover")},BCProto._onLTMouseOut=function(n,t){PP.removeClass(t.Element,"Hover")},BCProto._onLTMouseDown=function(n,t){PP.addClass(t.Element,"Press")},BCProto._onLTMouseUp=function(n,t){PP.removeClass(t.Element,"Press")},BCProto._onMouseDown=function(n,t){if(this._Enabled)return PP.Ui.BorderCombo.base._onMouseDown.call(this,n,t),PP.addClass(this._DomNode,"Pressed"),this._DropPanel.getDroppedDown()?this._DropPanel.hide():this.showDropPanel(),!1},BCProto._onMouseOver=function(){if(this._Enabled)return PP.addClass(this._DomNode,"Hover"),!1},BCProto._onMouseOut=function(){return PP.removeClass(this._DomNode,"Hover"),!1},BCProto._onDropPanelClose=function(){PP.removeClass(this._DomNode,"Pressed")},BCProto.setTypesMode=function(n){this._TypesMode=n,this._adjustTypes(),this._adjustSizes()},BCProto.getTypesMode=function(){return this._TypesMode},BCProto.setBorderTypeOnlt=function(n){this._BorderTypeOnlt=!!n,this._adjustSizes()},BCProto.getBorderTypeOnlt=function(){return this._BorderTypeOnlt},BCProto.getBorderWidthVisible=function(){return this._BorderWidthVisible},BCProto.setBorderWidthVisible=function(n){this._BorderWidthVisible=!!n,this._adjustSizes()},BCProto.getLineColorVisible=function(){return this._LineColorVisible},BCProto.setLineColorVisible=function(n){this._LineColorVisible=!!n,this._adjustSizes()},BCProto.showDropPanel=function(){var n,f,i,t,r,e,u;if(this._Enabled){if(this._DropPanel.getDroppedDown())return!1;this._isFirstOpen&&(this._renderBodyContent(),this._isFirstOpen=!1),n=this._DropPanel.isVisibleArea(0,0),f=PP.calculateOffset(this._DomNode),this._Height=this._DomNode.offsetHeight,i=f.Y+this._Height+1,t=0,this._Width=this._DomNode.offsetWidth,t=this._IsRTL?f.X+this._Width-n.Width+1:f.X-1,n=this._DropPanel.isVisibleArea(i,t),r=null,n.VisibleByHeight||(e=f.Y-n.Height,e>-1?(r=this._DropPanel.isVisibleArea(e,t),r.VisibleByHeight&&(i=e)):i=document.documentElement.clientHeight-n.Height>-1?document.documentElement.clientHeight-n.Height:0),n.VisibleByWidth||(this._IsRTL?(u=t+n.Width-this._Width-2,r=this._DropPanel.isVisibleArea(i,u),r.VisibleByWidth&&(t=u)):(u=t+this._Width-n.Width+2,r=this._DropPanel.isVisibleArea(i,u),r.VisibleByWidth&&(t=u))),this._DropPanel.show(t,i),this._renderBodyContent()}},BCProto.setColor=function(n,t){t=typeof t=="undefined"?!0:t==!0,this._Color=n instanceof PP.Color?n.toString():PP.isString(n)&&n.length==7?n:PP.isString(n)&&n.length==9?PP.Color.parseARGB().toString():"#000000",this._PresentedColors.indexOf(this._Color.toLowerCase())>-1&&this._colors.length>0?this._onColorSelect(this,{Element:this._colors[this._PresentedColors.indexOf(this._Color.toLowerCase())],FireEvent:t}):t&&(this.ColorChanged.fire(this,{Color:this._Color}),this.ValueChanged.fire(this,{PropertyName:PP.Ui.BorderCombo.PropertyName.Color,Value:this._Color}))},BCProto.getColor=function(){return this._Color},BCProto.setBorderType=function(n,t){var i,r,u,f;t=typeof t=="undefined"?!0:t==!0,i=!1;for(r in PP.getEnumInterfMembers(PP.Ui.BorderCombo.BorderType))PP.Ui.BorderCombo.BorderType[r]==n&&(this._BorderType=n,this._borderTypes.length>0?this._onBTSelect(this,{Element:this._borderTypes[n],FireEvent:t}):(u=this._BorderType>8?this._BorderType-9:this._BorderType,f=this._BorderType>8?1:0,this._IconDomNode.style.backgroundPosition=this._bordersImList.getIcon(f,u),t&&this.BorderTypeChanged.fire(this,{BorderType:this._BorderType})),i=!0);i||(this._BorderType=PP.Ui.BorderCombo.BorderType.None,this._borderTypes.length>0?this._onBTSelect(this,{Element:this._borderTypes[4],FireEvent:t}):(this._IconDomNode.style.backgroundPosition=this._bordersImList.getIcon(0,4),t&&this.BorderTypeChanged.fire(this,{BorderType:this._BorderType})))},BCProto.getBorderType=function(){return this._BorderType},BCProto.setLineType=function(n,t){var i,r=!1;for(i in PP.getEnumInterfMembers(PP.Ui.BorderCombo.LineType))PP.Ui.BorderCombo.LineType[i]==n&&(this._LineType=n,this._lineTypes.length>0&&this._onLTSelect(this,{Element:this._lineTypes[n],FireEvent:t}),r=!0);if(!r)for(this._LineType=-1,t&&(this.LineTypeChanged.fire(this,{LineType:this._LineType}),this.ValueChanged.fire(this,{PropertyName:PP.Ui.BorderCombo.PropertyName.LineType,Value:this._LineType})),i=0;i<this._lineTypes.length;i++)PP.removeClass(this._lineTypes[i],"Selected"),PP.removeClass(this._lineTypes[i],"Hover")},BCProto.getLineType=function(){return this._LineType},BCProto.getLineWidth=function(){return this._LineWidth},BCProto.setLineWidth=function(n,t){t=typeof t=="undefined"?!0:t==!0,n=this._checkValue(n),this._LineWidth=n,this._widthNumberEdit.setValue(n,t),t&&(this.LineWidthChanged.fire(this,{LineWidth:this._LineWidth}),this.ValueChanged.fire(this,{PropertyName:PP.Ui.BorderCombo.PropertyName.LineWidth,Value:this._LineWidth}))},BCProto.setMode=function(n){PP.isMemberOf(PP.Ui.BorderCombo.Mode,n)&&(this._toolBar&&this._toolBar.getItem(n).setIsChecked(!0),this._Mode=n,this.ModeChanged.fire(this,{}))},BCProto.getMode=function(){return this._Mode},BCProto.getDropPanel=function(){return this._DropPanel},BCProto.setDefault=function(){this.setColor("#000000",!1),this.setLineWidth(0,!1),this.setLineType(-1,!1)},BCProto.dispose=function(){this.isLive()&&(this._DomNode.innerHTML="",PP.Ui.BorderCombo.base.dispose.call(this))},(PP.Ui.BorderCombo.Mode=function(){PP.Ui.BorderCombo.Mode.Color=0,PP.Ui.BorderCombo.Mode.Type=1,PP.Ui.BorderCombo.Mode.Width=2,PP.initEnum(PP.Ui.BorderCombo.Mode,"PP.Ui.BorderCombo.Mode")})(),(PP.Ui.BorderCombo.BorderType=function(){var n=PP.Ui.BorderCombo.BorderType;n.BottomSingle=0,n.TopSingle=1,n.LeftSingle=2,n.RightSingle=3,n.None=4,n.FullSingle=5,n.OuterSingle=6,n.OuterBold=7,n.BottomDouble=8,n.BottomBold=9,n.TopBottomSingle=10,n.TopSingleBottomBold=11,n.TopSingleBottomDouble=12,PP.initEnum(PP.Ui.BorderCombo.BorderType,"PP.Ui.BorderCombo.BorderType")})(),(PP.Ui.BorderCombo.LineType=function(){var n=PP.Ui.BorderCombo.LineType;n.Solid=0,n.Dots=1,n.WideDots=2,n.Dash=3,n.WideDash=4,n.DashDot=5,n.WideDashDot=6,n.SpaceDashDot=7,n.DoubleDotDash=8,n.WideDoubleDotDash=9,PP.initEnum(PP.Ui.BorderCombo.LineType,"PP.Ui.BorderCombo.LineType")})(),PP.Ui.ActiveMenuItem=function(){PP.Ui.ActiveMenuItem.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.ActiveMenuItem,PP.Ui.MenuItem,"ActiveMenuItem"),activeMenuItemP=PP.Ui.ActiveMenuItem.prototype,activeMenuItemP._render=function(){var n="<table border='0' cellspacing='0' cellpadding='0' class='PPMenuItemTable'><tr>"+this._getLeftPart()+"<td class='PPMenuItemContentPart'></td></tr></table>";this._initFromHTML("<div class='PPActiveMenuItem'>"+n+"</div>"),this._ContentDomNode=PP.querySelector(this._DomNode,".PPMenuItemContentPart"),this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),this._Visible||PP.hide(this._DomNode),PP.Ui.MenuItem.base._render.call(this)},activeMenuItemP._onClicked=activeMenuItemP._onMouseDown=function(){return!1},activeMenuItemP=null,PP.Ui.SimpleSeparator=function(){PP.Ui.SimpleSeparator.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.SimpleSeparator,PP.Ui.ActiveMenuItem,"SimpleSeparator"),simpleSepP=PP.Ui.SimpleSeparator.prototype,simpleSepP._render=function(){PP.Ui.SimpleSeparator.base._render.call(this),PP.removeClass(this._ContentDomNode,"PPMenuItemContentPart"),this.setContent("<div class='PPSimpleSeparator'></div>")},simpleSepP=null,PP.Ui.Waiter=function(n){n=n||{},this._ParentNode=n.ParentNode||document.body,this._IsVisible=!1,this._render(),this._addEvent(this._DomNode,"contextmenu",this._onWaiterContextMenu)},PP.initClass(PP.Ui.Waiter,PP.Ui.Control,"Waiter"),waiterP=PP.Ui.Waiter.prototype,waiterP._render=function(){this._initFromHTML("<div class='PPWaitProgressBackground'></div>")},waiterP._unBindEvents=waiterP._bindEvents=function(){},waiterP._onWaiterContextMenu=function(n,t){t.Event.preventDefault(),t.Event.stopPropagation()},waiterP.show=function(){this.addToNode(this._ParentNode),this._IsVisible=!0},waiterP.hide=function(){var n=this._ParentNode;this.removeFromDOM(),this._ParentNode=n},waiterP=null,PP.Ui.FontDialog=function(n){n=n||{},this._Font=null,this._SampleTextString=null,n.ResourceKey||(n.ResourceKey="fd"),n.Width||(n.Width=440),n.Height||(n.Height=432),PP.Ui.FontDialog.base.constructor.call(this,n),this._DialogResult=this._Font,delete this._Font},PP.initClass(PP.Ui.FontDialog,PP.Ui.Dialog,"FontDialog"),fontDialogP=PP.Ui.FontDialog.prototype,fontDialogP._render=function(){var t,n;this._Font?this._Font instanceof PP.Font||(this._Font=new PP.Font(this._Font)):this._Font=new PP.Font,this._SizeNames=["8","9","10","11","12","14","16","18","20","22","24","26","28","36","48","72"],this._fontSampleText="Calibri",this._ContentPanel=new PP.Ui.GridPanel({Items:[this._TopPanel=new PP.Ui.GridPanel({Left:0,Top:0,Items:[this._fontNameLabel=new PP.Ui.Label({Left:0,Top:0,ResourceKey:"fdNameColon"}),this._familyInput=new PP.Ui.TextBox({Left:0,Top:0,Width:181,KeyUp:PP.Delegate(this._OnFamilyInputKeyUp,this)}),this._familyList=new PP.Ui.ListBox({Left:0,Top:0,Height:76,Width:179,ItemSelected:PP.Delegate(this._OnFamilySelected,this)}),this._fontTypeLabel=new PP.Ui.Label({Left:1,Top:0,ResourceKey:"fdStyleColon"}),this._typeInput=new PP.Ui.TextBox({Left:1,Top:0,Width:139,KeyUp:PP.Delegate(this._OnTypeInputKeyUp,this)}),this._typeList=new PP.Ui.ListBox({Left:1,Top:0,Height:76,Width:137,ItemSelected:PP.Delegate(this._OnTypeSelected,this),Items:[{ResourceKey:"fdN"},{ResourceKey:"fdI"},{ResourceKey:"fdB"},{ResourceKey:"fdBI"}]}),this._fontSizeLabel=new PP.Ui.Label({Left:2,Top:0,ResourceKey:"fdSizeColon"}),this._sizeInput=new PP.Ui.TextBox({Left:2,Top:0,Width:49,KeyUp:PP.Delegate(this._OnSizeInputKeyUp,this)}),this._sizeList=new PP.Ui.ListBox({Left:2,Top:0,Height:76,Width:47,ItemSelected:PP.Delegate(this._OnSizeSelected,this)})]}),this._useColorCheck=new PP.Ui.CheckBox({Left:0,Top:1,Checked:!this._Font.getUseAutoColor(),ResourceKey:"fdColorColon",CheckedChanged:PP.Delegate(this._OnUseColorCheckedChanged,this)}),this._colorCombo=new PP.Ui.ColorCombo({Left:0,Top:1,Color:new PP.Color(this._Font.getColor()),Enabled:!this._Font.getUseAutoColor(),ColorChanged:PP.Delegate(this._OnColorChanged,this)}),this._miscsLabel=new PP.Ui.Label({Left:0,Top:2,ResourceKey:"fdMiscColon"}),this._SeparatorLabel=new PP.Ui.Label({Left:0,Top:2,Class:"Separator"}),this._MiddlePanel=new PP.Ui.GridPanel({Left:0,Top:3,Items:[this._strikenCheck=new PP.Ui.CheckBox({Left:0,Top:0,ResourceKey:"fdStr",CheckedChanged:PP.Delegate(this._OnStrikenCheckedChanged,this)}),this._underlinedCheck=new PP.Ui.CheckBox({Left:0,Top:0,ResourceKey:"fdU",CheckedChanged:PP.Delegate(this._OnUnderlinedCheckedChanged,this)}),this._superiorCheck=new PP.Ui.CheckBox({Left:0,Top:0,ResourceKey:"fdSup",CheckedChanged:PP.Delegate(this._OnSuperiorCheckedChanged,this)}),this._inferiorCheck=new PP.Ui.CheckBox({Left:0,Top:0,ResourceKey:"fdInf",CheckedChanged:PP.Delegate(this._OnInferiorCheckedChanged,this)}),this._lowerCapitalizedCheck=new PP.Ui.CheckBox({Left:1,Top:0,ResourceKey:"fdLow",CheckedChanged:PP.Delegate(this._OnLowerCapitalizedCheckedChanged,this)}),this._capitalizedCheck=new PP.Ui.CheckBox({Left:1,Top:0,ResourceKey:"fdCap",CheckedChanged:PP.Delegate(this._OnCapitalizedCheckedChanged,this)})]}),this._sampleLabel=new PP.Ui.Label({Left:0,Top:4,ResourceKey:"fdSampleColon"}),this._sampleFrame=new PP.Ui.Label({Left:0,Top:5,Class:"FontSample",Content:PP.htmlToDOM("<div class='FontSampleText'>Calibri</div>"),Height:39,Width:389})]});for(t in PP.getEnumInterfMembers(PP.Font.Family))this._familyList.addItem(PP.Font.Family[t]);for(n=0;n<this._SizeNames.length;n++)this._sizeList.addItem(this._SizeNames[n]);this._fontSampleTextNode=this._sampleFrame.getContent(),PP.resourceManager.ResourcesLoaded.add(this._onResourcesLoaded,this),this.setFont(this._Font),PP.Ui.FontDialog.base._render.apply(this,arguments),this.addClass("PPFontDialog"),this._ContentPanel.addToNode(this._DialogContentDomNode)},fontDialogP._OnFamilyInputKeyUp=function(){for(var u=this._familyInput.value,r=this._familyList.getItems(),i=0;i<r.length;i++)if(r[i].getContent().toString().toLowerCase()===u.toLowerCase()){this._familyList.setSelectedIndex(i);break}},fontDialogP._OnFamilySelected=function(){var i=this._familyList.getSelectedItem().getContent();this._DialogResult.setFontFamily(i),this._familyInput.value=i,this._fontSampleText=this._SampleTextString||i,this._renderFontSample()},fontDialogP._OnTypeInputKeyUp=function(){for(var u=this._typeInput.getContent(),r=this._typeList.getItems(),i=0;i<r.length;i++)if(r[i].getContent().toString().toLowerCase()===u.toLowerCase()){this._typeList.setSelectedIndex(i);break}},fontDialogP._OnTypeSelected=function(){var i=this._typeList.getSelectedIndex();this._DialogResult.setIsBold(i===2||i===3),this._DialogResult.setIsItalic(i===1||i===3),this._typeInput.setContent(this._typeList.getSelectedItem().getContent()),this._renderFontSample()},fontDialogP._OnSizeInputKeyUp=function(){var f=this._sizeInput.getContent(),r,u,i;if(parseInt(f)){for(r=parseInt(f),u=this._sizeList.getItems(),i=0;i<u.length;i++)if(parseInt(u[i].getContent())===r){this._sizeList.setSelectedIndex(i);break}this._DialogResult.setSize(r)}},fontDialogP._OnSizeSelected=function(){var i=this._sizeList.getSelectedItem().getContent();this._DialogResult.setSize(parseInt(i)),this._sizeInput.setContent(this._sizeList.getSelectedItem().getContent()),this._renderFontSample()},fontDialogP._OnColorChanged=function(){this._DialogResult.setColor(this._colorCombo.getColor().toString()),this._renderFontSample()},fontDialogP._OnUseColorCheckedChanged=function(){var i=this._useColorCheck.getChecked();this._colorCombo.setEnabled(i),this._DialogResult.setUseAutoColor(!i),this._renderFontSample()},fontDialogP._OnStrikenCheckedChanged=function(){this._DialogResult.setIsStriken(this._strikenCheck.getChecked()),this._renderFontSample()},fontDialogP._OnUnderlinedCheckedChanged=function(){this._DialogResult.setIsUnderline(this._underlinedCheck.getChecked()),this._renderFontSample()},fontDialogP._OnSuperiorCheckedChanged=function(){this._DialogResult.setIsSuperior(this._superiorCheck.getChecked()),this._DialogResult.getIsSuperior()&&(this._DialogResult.setIsInferior(!this._DialogResult.getIsSuperior()),this._inferiorCheck.setChecked(this._DialogResult.getIsInferior())),this._renderFontSample()},fontDialogP._OnInferiorCheckedChanged=function(){this._DialogResult.setIsInferior(this._inferiorCheck.getChecked()),this._DialogResult.getIsInferior()&&(this._DialogResult.setIsSuperior(!this._DialogResult.getIsInferior()),this._superiorCheck.setChecked(this._DialogResult.getIsSuperior())),this._renderFontSample()},fontDialogP._OnLowerCapitalizedCheckedChanged=function(){this._DialogResult.setIsLowerCapitalized(this._lowerCapitalizedCheck.getChecked()),this._DialogResult.getIsLowerCapitalized()&&(this._DialogResult.setIsCapitalized(!this._DialogResult.getIsLowerCapitalized()),this._capitalizedCheck.setChecked(this._DialogResult.getIsCapitalized())),this._renderFontSample()},fontDialogP._OnCapitalizedCheckedChanged=function(){this._DialogResult.setIsCapitalized(this._capitalizedCheck.getChecked()),this._DialogResult.getIsCapitalized()&&(this._DialogResult.setIsLowerCapitalized(!this._DialogResult.getIsCapitalized()),this._lowerCapitalizedCheck.setChecked(this._DialogResult.getIsLowerCapitalized())),this._renderFontSample()},fontDialogP._onOpened=function(){PP.Ui.FontDialog.base._onOpened.apply(this,arguments),this._familyList.updateSize(),this._typeList.updateSize(),this._sizeList.updateSize(),this._renderFontSample()},fontDialogP._renderFontSample=function(){var t,n,u,f,i;this._fontSampleTextNode.style.fontFamily=this._DialogResult.getFontFamily(),this._fontSampleTextNode.style.fontSize=this._DialogResult.getSize()+"pt",this._fontSampleTextNode.style.color=this._DialogResult.getUseAutoColor()?"":this._DialogResult.getColor(),this._fontSampleTextNode.style.fontStyle=this._DialogResult.getIsItalic()?"italic":"",this._fontSampleTextNode.style.fontWeight=this._DialogResult.getIsBold()?"bold":"normal",this._fontSampleTextNode.style.textTransform=this._DialogResult.getIsCapitalized()?"uppercase":"",this._fontSampleTextNode.style.fontVariant=this._DialogResult.getIsLowerCapitalized()?"small-caps":"",this._fontSampleTextNode.style.lineHeight=this._fontSampleTextNode.style.fontSize,PP.removeChildren(this._fontSampleTextNode),n=this._fontSampleText.replace(" ","&nbsp;"),this._DialogResult.getIsStriken()&&(n="<s>"+n+"</s>"),this._DialogResult.getIsUnderline()&&(n="<u>"+n+"</u>"),this._DialogResult.getIsSuperior()?n="<sup>"+n+"</sup>":this._DialogResult.getIsInferior()&&(n="<sub>"+n+"</sub>"),n=PP.htmlToDOM("<div>"+n+"</div>"),n.style.fontFamily=this._fontSampleTextNode.style.fontFamily,n.style.fontSize=this._fontSampleTextNode.style.fontSize,n.style.fontStyle=this._fontSampleTextNode.style.fontStyle,n.style.fontWeight=this._fontSampleTextNode.style.fontWeight,n.style.textTransform=this._fontSampleTextNode.style.textTransform,n.style.fontVariant=this._fontSampleTextNode.style.fontVariant,n.style.position="absolute",n.style.left="-1000px",t=PP.htmlToDOM("<div><u>&nbsp;</u></div>"),t.style.fontFamily=this._fontSampleTextNode.style.fontFamily,t.style.fontSize=this._fontSampleTextNode.style.fontSize,t.style.fontStyle=this._fontSampleTextNode.style.fontStyle,t.style.fontWeight=this._fontSampleTextNode.style.fontWeight,t.style.textTransform=this._fontSampleTextNode.style.textTransform,t.style.fontVariant=this._fontSampleTextNode.style.fontVariant,t.style.position="absolute",t.style.left="-1000px",document.body.appendChild(t),u=t.offsetWidth,document.body.removeChild(t),document.body.appendChild(n),f=n.offsetWidth,document.body.removeChild(n);var s=this._sampleFrame.getWidth(),h=(s-f)/2,c=Math.ceil(h/u);for(t="",i=0;i<c-5;i++)t+="&nbsp;";t+="</u>",this._fontSampleTextNode.innerHTML=PP.IsIE&&PP.IEVer==7?"<u style='text-align: left; display: inline; zoom: 1;'>"+t+n.innerHTML+"<u style='text-align: right; display: inline; zoom: 1;'>"+t:"<u style='text-align: left; float: left; display: inline-block;'>"+t+n.innerHTML+"<u style='text-align: right; float: right; display: inline-block;'>"+t;var e=this._sampleFrame.getHeight(),o=this._fontSampleTextNode.offsetHeight,r=(e-o)/2;r<0&&(r=e-o),this._fontSampleTextNode.style.top=r+"px"},fontDialogP._onResourcesLoaded=function(n,t){PP.resourceManager.ResourcesLoaded.remove(this._onResourcesLoaded,this),this._onCultureChanged(n,t)},fontDialogP._onCultureChanged=function(){this._typeInput.setContent(this._typeList.getSelectedItem().getContent())},fontDialogP.getFont=function(){return this._DialogResult},fontDialogP.setFont=function(n){var i,t,r;if(!n instanceof PP.Font)return this;for(this._DialogResult=n,this._familyInput.setContent(this._DialogResult.getFontFamily()),i=this._familyList.getItems(),t=0;t<i.length;t++)if(i[t].getContent().toString().toLowerCase()===this._DialogResult.getFontFamily().toLowerCase()){this._familyList.setSelectedIndex(t);break}for(this._DialogResult.getIsBold()&&this._DialogResult.getIsItalic()?this._typeList.setSelectedIndex(3):this._DialogResult.getIsBold()?this._typeList.setSelectedIndex(2):this._DialogResult.getIsItalic()?this._typeList.setSelectedIndex(1):this._typeList.setSelectedIndex(0),this._sizeInput.setContent(this._DialogResult.getSize()),r=this._sizeList.getItems(),t=0;t<r.length;t++)if(parseInt(r[t].getContent())===this._DialogResult.getSize()){this._sizeList.setSelectedIndex(t);break}this._colorCombo.setColor(new PP.Color(this._DialogResult.getColor())),this._strikenCheck.setChecked(this._DialogResult.getIsStriken()),this._underlinedCheck.setChecked(this._DialogResult.getIsUnderline()),this._superiorCheck.setChecked(this._DialogResult.getIsSuperior()),this._inferiorCheck.setChecked(this._DialogResult.getIsInferior()),this._lowerCapitalizedCheck.setChecked(this._DialogResult.getIsLowerCapitalized())},fontDialogP.setSampleTextString=function(n){return!PP.isString(n)||n==""?this:(this._SampleTextString=n,this._fontSampleText=n,this._renderFontSample(),this)},fontDialogP.getSampleTextString=function(){return this._SampleTextString},fontDialogP.setIsRTL=function(){return PP.Ui.FontDialog.base.setIsRTL.apply(this,arguments),this._ContentPanel.setIsRTL(this._IsRTL),this},fontDialogP.dispose=function(){this.isLive()&&(PP.resourceManager.ResourcesLoaded.remove(this._onResourcesLoaded,this),PP.Ui.FontDialog.base.dispose.apply(this,arguments))},fontDialogP=null,PP.Ui.InfoWindowPanel=function(){this._Items=[],PP.Ui.InfoWindowPanel.base.constructor.apply(this,arguments),this._Template&&this._Template!=null||(this._Template='<div class="PPInfoWindowContentPanel"><div class="Content"></div></div>'),this._render()},PP.initClass(PP.Ui.InfoWindowPanel,PP.Ui.Control,"InfoWindowPanel"),InfoWinPanelP=PP.Ui.InfoWindowPanel.prototype,InfoWinPanelP._render=function(){this._initFromHTML(this._Template),this._ContentDomNode=PP.querySelector(this._DomNode,".Content"),this._Content&&this._ContentDomNode.appendChild(PP.htmlToDOM(this._Content)),PP.Ui.InfoWindowPanel.base._render.call(this);for(var n=0,t=this._Items.length;n<t;n++)this._Items[n].addToNode(this._DomNode)},InfoWinPanelP.setWidth=function(){PP.Ui.InfoWindowPanel.base.setWidth.apply(this,arguments),this._ContentDomNode.style.width=arguments[0]-62+"px",this._DomNode.style.width=arguments[0]-62+"px"},InfoWinPanelP=null,PP.Ui.InfoWindow=function(){this._CloseOnFrameMouseDown=!0,this._MinDropDownWidth=this._MinDropDownHeight=100,this._MaxDropDownHeight=this._MaxDropDownWidth=1e3,this._EnableResize=!1,this._PanelContainer=null,this._Panels=[],PP.Ui.InfoWindow.base.constructor.apply(this,arguments),this._SeparatorHtml='<div class="PPInfoWindowContentSeparator"><div class="Left"></div><div class="Center"></div><div class="Right"></div></div>',this._CloseOnDocumentMouseDown=!1,this._EnableEscapeClose=!1,this._FocusOnOpen=!1},PP.initClass(PP.Ui.InfoWindow,PP.Ui.DropPanel,"InfoWindow"),InfoWinP=PP.Ui.InfoWindow.prototype,InfoWinP._render=function(){var n=this._Template,t;n=n.replace("{Content}","<div class='ContentBody' ></div>"),n+='<div class="PPInfoWindowContent" style=""></div>',n+='<div class="PPInfoWindowButtons" style="left:0px;bottom:0px;"><div class="PPInfoWindowButtonsContent"></div></div>',this._initFromHTML("<DIV class='PPDropPanel' >"+n+"</div>"),this.addClass("PPInfoWindow"),this._setStructure(),t=PP.htmlToDOM("<div class='Content'></div>"),this._ContentDomNode.appendChild(t),this.setEnableResize(!1),PP.Ui.DropPanel.base._render.call(this),this._leftCenter=PP.querySelector(this._DomNode,".PPDropPanelMiddleLeft"),this._rightCenter=PP.querySelector(this._DomNode,".PPDropPanelMiddleRight"),this._PanelContainer=PP.querySelector(this._DomNode,".PPInfoWindowContent"),this._ButtonContentDomNode=PP.querySelector(this._DomNode,".PPInfoWindowButtonsContent"),this._refreshHeight()},InfoWinP._refreshHeight=function(){this._DomNode!=null&&(this._rightCenter||(this._rightCenter=PP.querySelector(this._DomNode,".PPDropPanelMiddleLeft")),this._leftCenter||(this._leftCenter=PP.querySelector(this._DomNode,".PPDropPanelMiddleRight")),this._leftCenter.style.height=this.getHeight()-95+"px",this._rightCenter.style.height=this.getHeight()-95+"px")},InfoWinP._refreshWidth=function(){var n,r,i,t;if(this._DomNode!=null){for(n=this.getWidth()-62,r=PP.querySelector(this._DomNode,".PPDropPanelTopCenter"),r.style.width=n+"px",i=PP.querySelectorAll(this._DomNode,".PPInfoWindowContentSeparator .Center"),t=0;t<i.length;t++)i[t].style.width=n+"px";this._ButtonContentDomNode&&(this._ButtonContentDomNode.style.width=n+8+"px",this._ButtonContentDomNode.parentNode.style.width=n+8+"px"),this._PanelContainer.style.width=this._checkValue(this.getWidth())+"px",this._DomNode.firstChild.style.width=this._checkValue(this.getWidth())+"px"}},InfoWinP.setHeight=function(){PP.Ui.InfoWindow.base.setHeight.apply(this,arguments),this._refreshHeight()},InfoWinP.setWidth=function(){PP.Ui.InfoWindow.base.setWidth.apply(this,arguments),this._refreshWidth();for(var n=0,t=this._Panels.length;n<t;n++)this._Panels[n].setWidth(this.getWidth())},InfoWinP.showCenter=function(n){n=typeof n!="undefined"&&n!=null?n:this;var r=document.documentElement.scrollWidth<document.documentElement.clientWidth?document.documentElement.clientWidth:document.documentElement.scrollWidth,u=document.documentElement.scrollHeight<document.documentElement.clientHeight?document.documentElement.clientHeight:document.documentElement.scrollHeight,t=(r-n.getWidth())/2,i=(u-n.getHeight())/2;this._DroppedDown?(n._DomNode.style.left=t+"px",n._DomNode.style.top=i+"px"):(n.show(t,i),this._CloseOnFrameMouseDown=!1)},InfoWinP.removePanel=function(n){var i,t,r;if(n instanceof PP.Ui.InfoWindowPanel)for(t=0,r=this._Panels.length;t<r;t++)if(this._Panels[t]==n){n=t;break}if(typeof n=="number"){if(n>0)i=PP.querySelectorAll(this._DomNode,".PPInfoWindowContentSeparator"),this._PanelContainer.removeChild(i[n-1]);else if(n==0)i=PP.querySelectorAll(this._DomNode,".PPInfoWindowContentSeparator"),i.length>1&&this._PanelContainer.removeChild(i[0]);else if(this._Panels.length<0)for(i=PP.querySelectorAll(this._DomNode,".PPInfoWindowContentSeparator"),t=0,r=i.length;t<r;t++)this._PanelContainer.removeChild(i[t]);this._Panels.splice(n,1)[0].dispose()}this._refreshWidth()},InfoWinP.addPanel=function(n){if(typeof n=="string"){var t=n;n=new PP.Ui.InfoWindowPanel({Content:t})}n instanceof PP.Ui.InfoWindowPanel&&(this._Panels.push(n),this._PanelContainer&&this._PanelContainer!=null&&(this._Panels.length>1&&this._PanelContainer.appendChild(PP.htmlToDOM(this._SeparatorHtml)),n.addToNode(this._PanelContainer),n.setWidth(this.getWidth())),this._refreshWidth())},InfoWinP.addToButtonContent=function(n){n.addToNode(this._ButtonContentDomNode)},InfoWinP=null,PP.ScriptManager=function(){},PP.initClass(PP.ScriptManager,PP.Ui.Control,"ScriptManager"),scriptMp=PP.ScriptManager.prototype,scriptMp.loadScript=function(n,t){if(this._checkIsLoaded(n))return!1;var i=document.createElement("script");return i.setAttribute("src",n),t&&(PP.IsIE?this._addEvent(i,"readystatechange",t):this._addEvent(i,"load",t)),document.getElementsByTagName("head")[0].appendChild(i),this},scriptMp.loadScripts=function(n,t){for(var i=0;i<n.length;i++)i===n.length-1&&t&&PP.isFunction(t)?this.loadScript(n[i],t):this.loadScript(n[i])},scriptMp._checkIsLoaded=function(n){for(var i=document.getElementsByTagName("script"),t=0;t<i.length;t++)if(i[t].getAttribute("src")===n)return!0;return!1},scriptMp=null,PP.scriptManager=new PP.ScriptManager,PP.Ui.MapSlider=function(){this._ImagePath="",this._defineEvents(["ValueChanged","ValueChanging","Finished","Started","Paused"]),this._Slider=null,PP.Ui.MapSlider.base.constructor.apply(this,arguments),this._render()},PP.initClass(PP.Ui.MapSlider,PP.Ui.Control,"MapSlider"),mapSliderP=PP.Ui.MapSlider.prototype,mapSliderP._render=function(){this._initFromHTML("<div class='PPMapSlider'></div>"),this._Slider instanceof PP.Ui.Slider||(PP.isDefined(this._Slider)||(this._Slider={}),PP.isDefined(this._Slider.PPType)||(this._Slider.PPType="Slider"),PP.isDefined(this._Slider.AttachToTicks)||(this._Slider.AttachToTicks=!0),PP.isDefined(this._Slider.Items)||(this._Slider.Items=[{}]),this._Slider=PP.create(this._Slider)),this._imageList=new PP.ImageList({Source:this._ImagePath+"ms_imagelist.png",IconWidth:6,IconHeight:9}),this._ContentGridPanel=new PP.Ui.GridPanel({ParentNode:this._DomNode,Items:[this._PlayButton=new PP.Ui.Button({Left:0,Top:0,ImageList:this._imageList,ColumnIndex:0,RowIndex:0,ParentNode:this._DomNode,Height:21,Width:26,Click:PP.Delegate(this.play,this)})]}),this._ContentGridPanel.add(this._Slider,1,0),PP.addClass(this._ContentGridPanel.getTable().rows[0].cells[0],"PPMapSliderButtonContainer"),PP.addClass(this._ContentGridPanel.getTable().rows[0].cells[1],"PPMapSliderSliderContainer"),PP.Ui.MapSlider.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode),this.updateSize(),PP.IsIE&&PP.IEVer===7&&PP.setTimeout(this._IEHack,0,{Button:this._PlayButton})},mapSliderP._IEHack=function(n){var t=n.Button.getDomNode();t.className=t.className},mapSliderP._bindEvents=function(){this._Slider.getItemByIndex(0).AnimationStateChanged.add(this._onAnimationStateChanged,this),this._Slider.getItemByIndex(0).ValueChanged.add(this._onSliderItemValueChanged,this),this._Slider.getItemByIndex(0).ValueChanging.add(this._onSliderItemValueChanging,this)},mapSliderP._unBindEvents=function(){this._Slider.getItemByIndex(0).AnimationStateChanged.remove(this._onAnimationStateChanged,this),this._Slider.getItemByIndex(0).ValueChanged.remove(this._onSliderItemValueChanged,this),this._Slider.getItemByIndex(0).ValueChanging.remove(this._onSliderItemValueChanging,this)},mapSliderP._onAnimationStateChanged=function(n,t){this._PlayButton.Click.remove(this.play,this),this._PlayButton.Click.remove(this.pause,this),this._PlayButton.Click.remove(this.resume,this);switch(n.getAnimationState()){case PP.Ui.SliderItem.AnimationState.Pause:this._PlayButton.Click.add(this.resume,this),this._PlayButton.setRowIndex(0),this.Paused.fire(this,t);break;case PP.Ui.SliderItem.AnimationState.Play:this._PlayButton.Click.add(this.pause,this),this._PlayButton.setRowIndex(1),this.Started.fire(this,t);break;case PP.Ui.SliderItem.AnimationState.Stop:this._PlayButton.Click.add(this.play,this),this._PlayButton.setRowIndex(0),this.Finished.fire(this,t)}},mapSliderP._onSliderItemValueChanged=function(n,t){this.ValueChanged.fire(this,t)},mapSliderP._onSliderItemValueChanging=function(n,t){PP.isDefined(t.TickIndex)&&this.ValueChanging.fire(this,t)},mapSliderP.getSlider=function(){return this._Slider},mapSliderP.setWidth=function(n){return n!==this._Width&&(PP.Ui.MapSlider.base.setWidth.apply(this,arguments),this.updateSize()),this},mapSliderP.setIsRTL=function(n,t){return(n!==this._IsRTL||t)&&(this._PlayButton.setIsRTL(n,t),this._Slider.setIsRTL(n,t),n?PP.addClass(this._PlayButton.getDomNode(),"FlippedImg"):PP.removeClass(this._PlayButton.getDomNode(),"FlippedImg"),PP.Ui.MapSlider.base.setIsRTL.call(this,n,t)),this},mapSliderP.setEnabled=function(n,t){return(n!==this._Enabled||t)&&(PP.Ui.MapSlider.base.setEnabled.call(this,n,t),this._Slider.setEnabled(n,t),this._PlayButton.setEnabled(n,t)),this},mapSliderP.play=function(){this._Slider.getItemByIndex(0).play()},mapSliderP.resume=function(){this._Slider.getItemByIndex(0).resume()},mapSliderP.pause=function(){this._Slider.getItemByIndex(0).pause(!1)},mapSliderP.stop=function(){this._Slider.getItemByIndex(0).stop()},mapSliderP.updateSize=function(){var t,n,i;if(this._PlayButton){if(t=0,n=parseInt(PP.getStyle(this._PlayButton.getDomNode(),"marginLeft")),isNaN(n)||(t+=n),n=parseInt(PP.getStyle(this._PlayButton.getDomNode(),"marginRight")),isNaN(n)||(t+=n),this._Slider.updateSize(),this.setHeight(this._Slider.getHeight()+(this._PlayButton.getHeight()-this._Slider.getItemHeight())/2),i=this._Width-this._PlayButton.getWidth()-t,i<=0)return;this._Slider.setWidth(i)}},mapSliderP.dispose=function(){if(this.isLive()){if(this._Slider){var n=this._Slider.getItemByIndex(0);n.getAnimationState()!=PP.Ui.SliderItem.AnimationState.Stop&&n.stop(n,!1)}PP.removeChildren(this._DomNode),PP.Ui.MapSlider.base.dispose.apply(this,arguments)}},mapSliderP=null,PP.Ui.ProgressBar=function(n){this._defineEvents(["ValueChanged","MinValueReached","MaxValueReached"]),this._IsPrecision=!1,this._IsVertical=!1,this._DisplayValue=!1,PP.Ui.ProgressBar.base.constructor.apply(this,arguments),this._Animation=new PP.AnimationSettings,this._MinWidth=13,this._MinHeight=13,this._DoneRender=!1,this._render(),!n||n&&n.Value==null?this.setValue(0):this.setValue(n.Value)},PP.initClass(PP.Ui.ProgressBar,PP.Ui.Control,"ProgressBar"),PbarPr=PP.Ui.ProgressBar.prototype,PbarPr._render=function(){var n="";n=this._IsVertical?"<div class='PPProgressBarV'>":"<div class='PPProgressBar'>",n+="<div class='PBLeftBorder'><div class='PBBorderLeftFirst'></div><div class='PBBorderLeftSecond'></div><div class='PBBorderLeftThird'></div><div class='PBBorderLeftMiddle'></div><div class='PBBorderLeftThird'></div><div class='PBBorderLeftSecond'></div><div class='PBBorderLeftFirst'></div></div><div class='PBMiddle'><span class='PBBarContainer'><div class='PBLeftBar'><div class='PBBarLeftFirst'></div><div class='PBBarLeftSecond'></div><div class='PBBarLeftMiddle'></div><div class='PBBarLeftThird'></div><div class='PBBarLeftFourth'></div></div><div class='PBMiddleBar'></div><div class='PBRightBar'><div class='PBBarRightFirst'></div><div class='PBBarRightSecond'></div><div class='PBBarRightMiddle'></div><div class='PBBarRightThird'></div><div class='PBBarRightFourth'></div></div></span><div class='PPBarIndicator'></div><div class='PPBarIndicatorDouble'></div></div><div class='PBRightBorder'><div class='PBBorderRightFirst'></div><div class='PBBorderRightSecond'></div><div class='PBBorderRightThird'></div><div class='PBBorderRightMiddle'></div><div class='PBBorderRightThird'></div><div class='PBBorderRightSecond'></div><div class='PBBorderRightFirst'></div></div></div>",this._initFromHTML(n),this._initNodes(),PP.Ui.ProgressBar.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode),this._DoneRender=!0,this.setWidth(this._Width||this._MinWidth),this.setHeight(this._Height||this._MinHeight)},PbarPr._initNodes=function(){this._BorderMiddle=PP.querySelector(this._DomNode,".PBMiddle"),this._BorderLeft=PP.querySelector(this._DomNode,".PBLeftBorder"),this._BorderLeftMiddle=PP.querySelector(this._DomNode,".PBBorderLeftMiddle"),this._BorderRight=PP.querySelector(this._DomNode,".PBRightBorder"),this._BorderRightMiddle=PP.querySelector(this._DomNode,".PBBorderRightMiddle"),this._BarNode=PP.querySelector(this._DomNode,".PBBarContainer"),this._BarMiddle=PP.querySelector(this._DomNode,".PBMiddleBar"),this._BarLeft=PP.querySelector(this._DomNode,".PBLeftBar"),this._BarLeftMiddle=PP.querySelector(this._DomNode,".PBBarLeftMiddle"),this._BarRight=PP.querySelector(this._DomNode,".PBRightBar"),this._BarRightMiddle=PP.querySelector(this._DomNode,".PBBarRightMiddle"),this._Indicator=PP.querySelector(this._DomNode,".PPBarIndicator"),this._IndicatorDouble=PP.querySelector(this._DomNode,".PPBarIndicatorDouble"),this._IsVertical?(this._BarSidesWidth=(parseInt(PP.getStyle(this._BarLeft,"height"))||0)+(parseInt(PP.getStyle(this._BarRight,"height"))||0),this._BorderSidesWidth=(parseInt(PP.getStyle(this._BorderLeft,"height"))||0)+(parseInt(PP.getStyle(this._BorderRight,"height"))||0)-2):(this._BarSidesWidth=(parseInt(PP.getStyle(this._BarLeft,"width"))||0)+(parseInt(PP.getStyle(this._BarRight,"width"))||0),this._BorderSidesWidth=(parseInt(PP.getStyle(this._BorderLeft,"width"))||0)+(parseInt(PP.getStyle(this._BorderRight,"width"))||0)-Math.abs(parseInt(PP.getStyle(this._BarNode,"left"))||0)*2)},PbarPr._updateValues=function(){this.setValue(this._Value),this.setWidth(this._Width),this.setHeight(this._Height)},PbarPr.setWidth=function(n){var f,i,t,r,u;if(this._DoneRender!==!0)return this._Width=n,this;if(this._initNodes(),f=this._IsPrecision?1e3:100,i=0,!n)throw PP.ArgumentNullException(this);return typeof n=="string"&&(n=parseInt(n)||0),n=n<this._MinWidth?this._MinWidth:n,this._DomNode.style.width=this._checkValue(n)+"px",this._IsVertical?(this._BorderMiddle.style.width=this._checkValue(n-(parseInt(PP.getStyle(this._BorderMiddle,"border-right-width"))||0)-(parseInt(PP.getStyle(this._BorderMiddle,"border-left-width"))||0))+"px",this._BarNode.style.width=this._checkValue(n-this._BorderSidesWidth)+"px",t=this._BorderLeftMiddle.previousSibling.offsetWidth,t+=this._BorderLeftMiddle.previousSibling.previousSibling.offsetWidth,t+=this._BorderLeftMiddle.previousSibling.previousSibling.previousSibling.offsetWidth,this._BorderLeftMiddle.style.width=this._checkValue(n-t*2)+"px",this._BorderLeftMiddle.style.height="",this._BorderRightMiddle.style.width=this._checkValue(n-t*2)+"px",this._BorderRightMiddle.style.height="",r=(parseInt(PP.getStyle(this._BorderMiddle,"border-right-width"))||0)+(parseInt(PP.getStyle(this._BarMiddle,"margin-right"))||0),this._BarMiddle.style.width=this._checkValue(n-r*2-(parseInt(PP.getStyle(this._BarMiddle,"border-right-width"))||0)-(parseInt(PP.getStyle(this._BarMiddle,"border-left-width"))||0))+"px",u=this._BarLeftMiddle.previousSibling.offsetWidth,u+=this._BarLeftMiddle.previousSibling.previousSibling.offsetWidth,this._BarLeftMiddle.style.width=this._checkValue(n-r*2-u*2)+"px",this._BarLeftMiddle.style.height="",this._BarRightMiddle.style.width=this._checkValue(n-r*2-u*2)+"px",this._BarRightMiddle.style.height=""):(i=Math.round((n-this._BorderSidesWidth)/f*this._Value),i<this._BarSidesWidth||!this._Enabled?this._BarNode.style.display="none":(this._BarNode.style.display="block",this._BarMiddle.style.width=this._checkValue(i-this._BarSidesWidth)+"px"),this._BorderMiddle.style.width=this._checkValue(n-this._BorderSidesWidth)-2+"px",this._BarNode.style.width=this._checkValue(n-this._BarSidesWidth)+"px"),PP.Ui.ProgressBar.base.setWidth.call(this,n),this},PbarPr.setHeight=function(n){var u,t,i,f,r,e;if(this._DoneRender!==!0)return this._Height=n,this;if(this._initNodes(),u=this._IsPrecision?1e3:100,t=0,!n)throw PP.ArgumentNullException(this);typeof n=="string"&&(n=parseInt(n)||0),n=n<this._MinHeight?this._MinHeight:n,this._DomNode.style.height=this._checkValue(n)+"px",PP.Ui.ProgressBar.base.setHeight.call(this,n),this._IsVertical?(t=Math.round((n-this._BarSidesWidth)/u*this._Value),f=Math.round(n-this._BorderSidesWidth),t<this._BarSidesWidth||!this._Enabled?this._BarNode.style.display="none":(this._BarNode.style.display="block",this._BarNode.style.top=this._checkValue(f-t-this._BarSidesWidth/2)+"px",this._BarMiddle.style.height=this._checkValue(t-this._BorderSidesWidth)+"px"),this._BorderMiddle.style.height=this._checkValue(n-this._BarSidesWidth)+"px"):(this._BorderMiddle.style.height=this._checkValue(n-(parseInt(PP.getStyle(this._BorderMiddle,"border-top-width"))||0)-(parseInt(PP.getStyle(this._BorderMiddle,"border-bottom-width"))||0))+"px",this._BorderLeftMiddle.style.height=this._checkValue(n-6)+"px",this._BorderLeftMiddle.style.width="",this._BorderRightMiddle.style.height=this._checkValue(n-6)+"px",this._BorderRightMiddle.style.width="",i=(parseInt(PP.getStyle(this._BorderMiddle,"border-top-width"))||0)+(parseInt(PP.getStyle(this._BarMiddle,"margin-top"))||0),this._BarMiddle.style.height=this._checkValue(n-i*2-(parseInt(PP.getStyle(this._BarMiddle,"border-top-width"))||0)-(parseInt(PP.getStyle(this._BarMiddle,"border-bottom-width"))||0))+"px",this._BarLeftMiddle.style.height=this._checkValue(n-i*2-4)+"px",this._BarLeftMiddle.style.width="",this._BarRightMiddle.style.height=this._checkValue(n-i*2-4)+"px",this._BarRightMiddle.style.width=""),r=(this._Height-this._Indicator.offsetHeight)/2,e=r-1,this._Indicator.style.top=this._checkValue(r)+"px",this._IndicatorDouble.style.top=this._checkValue(e)+"px"},PbarPr.setValue=function(n){var t,u,i,f,r,e;if(this._initNodes(),t=this._IsPrecision?1e3:100,n==null||typeof n=="undefined")throw PP.ArgumentNullException(this);return(typeof n=="string"&&(n=parseInt(n)||0),n<0||n>t)?this:(this._IsVertical?(i=Math.round((this._Height-this._BarSidesWidth)/t*n),f=Math.round(this._Height-this._BorderSidesWidth),i<this._BarSidesWidth||!this._Enabled?this._BarNode.style.display="none":(this._BarNode.style.display="block",this._BarNode.style.top=this._checkValue(f-i-this._BarSidesWidth/2)+"px",this._BarMiddle.style.height=this._checkValue(i-this._BorderSidesWidth)+"px"),u=this._Value,PP.Ui.ProgressBar.base.setValue.call(this,n),this.ValueChanged.fire(this,new PP.EventArgs(null)),n===0&&this.oldValue!==0&&this.MinValueReached.fire(this,{}),n===t&&this.oldValue!==t&&this.MaxValueReached.fire(this,{})):(i=Math.round((this._Width-this._BorderSidesWidth)/t*n),i<this._BarSidesWidth||!this._Enabled?this._BarNode.style.display="none":(this._BarNode.style.display="block",this._BarNode.style.top="",this._BarMiddle.style.width=this._checkValue(i-this._BarSidesWidth)+"px"),u=this._Value,PP.Ui.ProgressBar.base.setValue.call(this,n),this.ValueChanged.fire(this,new PP.EventArgs(null)),n===0&&this.oldValue!==0&&this.MinValueReached.fire(this,{}),n===t&&this.oldValue!==t&&this.MaxValueReached.fire(this,{})),this._DisplayValue&&(this._Indicator.innerHTML=(this._IsPrecision?n/10:n)+"%",this._IndicatorDouble.innerHTML=(this._IsPrecision?n/10:n)+"%",r=(this._Height-this._Indicator.offsetHeight)/2,e=r-1,this._Indicator.style.top=this._checkValue(r)+"px",this._IndicatorDouble.style.top=this._checkValue(e)+"px"),this)},PbarPr.setValueAnimated=function(n){var i=this._IsPrecision?1e3:100,t;return n<0||n>i?this:(t=new PP.Ui.Animation(this._Animation.AnimationTime,this._Value,n),t.animate(this,"setValue"),this)},PbarPr.setIsPrecision=function(n){return this._IsPrecision===n?this:(this._IsPrecision=!!n,this.setValue(this._IsPrecision?this._Value*10:Math.floor(this._Value/10)),this)},PbarPr.getIsPrecision=function(){return this._IsPrecision},PbarPr.setIsRTL=function(n){return this._IsVertical?this:(PP.Ui.ProgressBar.base.setIsRTL.call(this,n),this._DomNode.dir=this._IsRTL?"rtl":"ltr",this)},PbarPr.setEnabled=function(n){return this._DomNode.childNodes[1].firstChild.style.display=n?"block":"none",this._Enabled=!!n,this._Indicator.style.display=this._IndicatorDouble.style.display=this._Enabled?"block":"none",this._DoneRender&&this._updateValues(),this},PbarPr.setIsVertical=function(n){if(this._IsVertical=!!n,this._DomNode.dir=this._IsVertical?"ltr":this._IsRTL?"rtl":"ltr",PP.removeClass(this._DomNode,this._IsVertical?"PPProgressBar":"PPProgressBarV"),PP.addClass(this._DomNode,this._IsVertical?"PPProgressBarV":"PPProgressBar"),PP.IsIE){var t=this;setTimeout(function(){t._DomNode&&(t._DomNode.className=t._DomNode.className)},0)}this._updateValues()},PbarPr.getIsVertical=function(){return this._IsVertical},PbarPr.setDisplayValue=function(n){return this._DisplayValue=!!n,this._DisplayValue?(this._Indicator.innerHTML=(this._IsPrecision?this._Value/10:this._Value)+"%",this._IndicatorDouble.innerHTML=(this._IsPrecision?this._Value/10:this._Value)+"%"):(this._Indicator.innerHTML="",this._IndicatorDouble.innerHTML=""),this._updateValues(),this},PbarPr.setStyle=function(){PP.Ui.ProgressBar.base.setStyle.apply(this,arguments),this._initNodes()},PbarPr.getDisplayValue=function(){return this._DisplayValue},PbarPr=null,PP.Point=function(n,t){if(n&&PP.isObject(n))this._X=n.X,this._Y=n.Y;else if(n&&PP.isString(n)){var i=n.split(","),r=parseFloat(i[0]),u=parseFloat(i[1]);this._X=r?r:0,this._Y=u?u:0}else typeof t!="undefined"?(this._X=n,this._Y=t):this._X=this._Y=0},PP.initClass(PP.Point,PP.Object,"Point"),pntP=PP.Point.prototype,pntP.getX=function(){return this._X},pntP.setX=function(n){this._X=n},pntP.getY=function(){return this._Y},pntP.setY=function(n){this._Y=n},pntP.getSettings=function(n,t,i){return(i=i||",",t)?PP.Point.base.getSettings.apply(this,arguments):this._X+i+this._Y},pntP=null,PP.Brush=function(){this._Dictionary=this._Id=null,this._Opacity=1,PP.Brush.base.constructor.apply(this,arguments)},PP.initClass(PP.Brush,PP.Object,"Brush"),brshP=PP.Brush.prototype,brshP.raphaelPrepareFillColor=function(){},brshP.setOpacity=function(n){this._Opacity=n},brshP.getOpacity=function(){return this._Opacity},brshP.getSettings=function(n){n=typeof n=="undefined"?!1:n==!0;var i={"@Id":this._Id,"@Opacity":this._Opacity};return n&&(i.PPType=this.getTypeName()),i},brshP.dispose=function(){delete this._Dictionary,PP.Brush.base.dispose.apply(this,arguments)},(PP.BrushType=function(){var n=PP.BrushType;n.None="None",n.SolidColorBrush="SolidColorBrush",n.LinearGradientBrush="LinearGradientBrush",n.RadialGradientBrush="RadialGradientBrush",PP.initEnum(n,"PP.BrushType")})(),brshP=null,PP.SolidColorBrush=function(n){n&&n.Color instanceof PP.Color&&(n.Color=n.Color.toString()),this._Color="#000000",PP.SolidColorBrush.base.constructor.apply(this,arguments)},PP.initClass(PP.SolidColorBrush,PP.Brush,"SolidColorBrush"),sldClrBrshP=PP.SolidColorBrush.prototype,sldClrBrshP._initFields=function(){PP.SolidColorBrush.base._initFields.apply(this,arguments),this._Color&&this.setColor(this._Color)},sldClrBrshP.raphaelPrepareFillColor=function(){return this.getColor()},sldClrBrshP.setColor=function(n){var t=n instanceof PP.Color?n:PP.Color.parseARGB(n);t==null&&(t=PP.Color.parse(n)),t!=null&&(this._Color=t.toString(),PP.isString(n)&&n.length>7&&(this._Opacity=t.getOpacity()))},sldClrBrshP.getColor=function(){return this._Color},sldClrBrshP.getSettings=function(){var i=PP.SolidColorBrush.base.getSettings.apply(this,arguments);return i["@Color"]=this._Color,i},sldClrBrshP=null,PP.GradientBrush=function(){this._GradientStops=[],this._GradientType=0,PP.GradientBrush.base.constructor.apply(this,arguments),this.setOpacity(this._Opacity)},PP.initClass(PP.GradientBrush,PP.Brush,"GradientBrush"),grdntBrshP=PP.GradientBrush.prototype,grdntBrshP._initFields=function(){var i,t;if(PP.GradientBrush.base._initFields.apply(this,arguments),!Array.isArray(this._GradientStops))for(i=this._GradientStops.GradientStop,this._GradientStops=[],t=0;t<i.length;t++)this._GradientStops.push(new PP.GradientStop(i[t]))},grdntBrshP.getSettings=function(){for(var r=PP.GradientBrush.base.getSettings.apply(this,arguments),u=[],i=0;i<this._GradientStops.length;i++)u.push(this._GradientStops[i].getSettings());return r[this.getTypeName()+".GradientStops"]={GradientStop:u},r.GradientType=this._GradientType,r},grdntBrshP.raphaelPrepareFillColor=function(){},grdntBrshP.setGradientStops=function(n){this._GradientStops=n},grdntBrshP.getGradientStops=function(){return this._GradientStops},grdntBrshP.setGradientType=function(n){this._GradientType=n},grdntBrshP.getGradientType=function(){return this._GradientType},grdntBrshP.setOpacity=function(n){if(!(n>1)&&!(n<0)){PP.GradientBrush.base.setOpacity.apply(this,arguments);for(var i=this._GradientStops,r,u,t=0;t<i.length;t++)r=new PP.Color(i[t].getColor()),u=Math.round(n*r.getA()),r.setA(u),i[t].setColor(r.toString(!0));this.setGradientStops(i)}},grdntBrshP=null,PP.GradientStop=function(){this._Color="#000000",this._Offset=0,PP.GradientStop.base.constructor.apply(this,arguments)},PP.initClass(PP.GradientStop,PP.Object,"GradientStop"),grdntStpP=PP.GradientStop.prototype,grdntStpP.getColor=function(){return this._Color},grdntStpP.setColor=function(n){this._Color=n},grdntStpP.getOffset=function(){return this._Offset},grdntStpP.setOffset=function(n){this._Offset=n},grdntStpP.toCSSFormat=function(){var n=new PP.Color(this._Color);return PP.IsIE?n.toString(!0):n.toDecimalString(!0)+" "+this._Offset*100+"%"},grdntStpP.getSettings=function(n){n=typeof n=="undefined"?!1:n==!0;var i={"@Offset":this._Offset,"@Color":this._Color};return n&&(i.PPType=this.getTypeName()),i},grdntStpP=null,PP.LinearGradientBrush=function(){this._EndPoint=this._StartPoint=null,PP.LinearGradientBrush.base.constructor.apply(this,arguments)},PP.initClass(PP.LinearGradientBrush,PP.GradientBrush,"LinearGradientBrush"),lnrGrdntBrshP=PP.LinearGradientBrush.prototype,lnrGrdntBrshP._initFields=function(){PP.LinearGradientBrush.base._initFields.apply(this,arguments),this._StartPoint=new PP.Point(this._StartPoint),this._EndPoint=new PP.Point(this._EndPoint)},lnrGrdntBrshP.raphaelPrepareFillColor=function(){for(var u=(this._StartPoint.getY()-this._EndPoint.getY())/(this._StartPoint.getX()-this._EndPoint.getX()),f=360-Math.atan(u)*180/Math.PI,i=f,t=this._GradientStops,r,n=0;n<t.length;n++)r=PP.Color.getColor(t[n].getColor()),i+="-"+(r?r.toString():t[n].getColor()),i+=":"+t[n].getOffset().toFixed(2)*100;return i},lnrGrdntBrshP.getEndPoint=function(){return this._EndPoint},lnrGrdntBrshP.setEndPoint=function(n){this._EndPoint=n},lnrGrdntBrshP.getStartPoint=function(){return this._StartPoint},lnrGrdntBrshP.setStartPoint=function(n){this._StartPoint=n},lnrGrdntBrshP.toRaphaelFormat=function(n){if(!n||n.attr)throw new Error("ArgumentExeption");},lnrGrdntBrshP.toSVGFormat=function(){},lnrGrdntBrshP.toVMLFormat=function(){},lnrGrdntBrshP.toCSSFormat=function(){var n="",t=this._GradientStops,r=t.length,f,e,o,i,u;if(r===0)return n;if(PP.IsIE&&PP.IEVer<10)return n="filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='"+t[0].getColor().toString(!0)+"', endColorstr='"+t[r-1].getColor().toString(!0)+"',GradientType="+this._GradientType+");",PP.IEVer<=8&&(n+="filter:progid:DXImageTransform.Microsoft.Alpha(style=1",e=t[0].getColor()instanceof PP.Color?t[0].getColor():new PP.Color(t[0].getColor()),o=t[r-1].getColor()instanceof PP.Color?t[r-1].getColor():new PP.Color(t[r-1].getColor()),n+=", opacity="+e.getOpacity()*100,n+=", finishOpacity="+o.getOpacity()*100,n+=", startX="+this._StartPoint.getX(),n+=", startY="+this._StartPoint.getY(),n+=", finishX="+this._EndPoint.getX(),n+=", finishY="+this._EndPoint.getY()+");"),n;for(n="background:",PP.IsIE?n+="-ms-linear-gradient":PP.IsFF?n+="-moz-linear-gradient":PP.IsChrome||PP.IsSafari?n+="-webkit-linear-gradient":PP.IsOpera&&(n+="-o-linear-gradient"),i=this._EndPoint.getY()-this._StartPoint.getY(),u=this._EndPoint.getX()-this._StartPoint.getX(),n+=u?u<0&&i<0?"("+(Math.atan(i/u)*180/Math.PI-180)+"deg,":u<0&&i>0?"("+(Math.atan(i/u)*180/Math.PI+180)+"deg,":"("+Math.atan(i/u)*180/Math.PI+"deg,":i>0?"(top,":i<0?"(bottom,":"(left,",f=0;f<r;f++)n+=t[f].toCSSFormat(),f<r-1&&(n+=",");return n+=");"},lnrGrdntBrshP.getSettings=function(){var i=PP.LinearGradientBrush.base.getSettings.apply(this,arguments);return i["@EndPoint"]=this._EndPoint.getSettings(),i["@StartPoint"]=this._StartPoint.getSettings(),i},lnrGrdntBrshP=null,PP.RadialGradientBrush=function(){this._Center=null,PP.RadialGradientBrush.base.constructor.apply(this,arguments)},PP.initClass(PP.RadialGradientBrush,PP.GradientBrush,"RadialGradientBrush"),rdlGrdntBrshP=PP.RadialGradientBrush.prototype,rdlGrdntBrshP._initFields=function(){PP.RadialGradientBrush.base._initFields.apply(this,arguments),this._Center=new PP.Point(this._Center)},rdlGrdntBrshP.getSettings=function(){var i=PP.RadialGradientBrush.base.getSettings.apply(this,arguments);return i["@Center"]=this._Center.getSettings(),i},rdlGrdntBrshP.raphaelPrepareFillColor=function(){for(var t="r("+this._Center.getX()+","+this._Center.getY()+")",i=this._GradientStops,r,n=0;n<i.length;n++)n&&(t+="-"),r=PP.Color.getColor(i[n].getColor()),t+=r?r.toString():i[n].getColor(),t+=":"+i[n].getOffset().toFixed(2)*100;return t},rdlGrdntBrshP.getCenter=function(){return this._Center},rdlGrdntBrshP.setCenter=function(n){this._Center=n},rdlGrdntBrshP=null,PP.Rect=function(n){if(this._Height=this._Width=this._Top=this._Left=0,PP.isString(n)){var t=n.split(",");this._Left=parseFloat(t[0]),this._Top=parseFloat(t[1]),this._Width=parseFloat(t[2]),this._Height=parseFloat(t[3])}else PP.Rect.base.constructor.apply(this,arguments)},PP.initClass(PP.Rect,PP.Object,"Rect"),rctP=PP.Rect.prototype,rctP.getHeight=function(){return this._Height},rctP.setHeight=function(n){this._Height=n},rctP.getLeft=function(){return this._Left},rctP.setLeft=function(n){this._Left=n},rctP.getTop=function(){return this._Top},rctP.setTop=function(n){this._Top=n},rctP.getWidth=function(){return this._Width},rctP.setWidth=function(n){this._Width=n},rctP=null,PP.Ui.ToolTip=function(n){n||(n={}),n.UseScrollBox=!1,n.FocusOnOpen=!1,PP.Ui.ToolTip.base.constructor.call(this,n),this.setEnableResize(!1),this.setMinDropDownHeight(0),this.setMinDropDownWidth(0)},PP.initClass(PP.Ui.ToolTip,PP.Ui.DropPanel,"ToolTip"),toolTipP=PP.Ui.ToolTip.prototype,toolTipP._render=function(){PP.Ui.ToolTip.base._render.apply(this,arguments),PP.addClass(this._DomNode,"PPToolTip")},toolTipP._onDocumentMouseDown=function(){return this.hide(),!0},toolTipP.show=function(n,t){var i,r,u,f;this.getContent()&&(i=this.isVisibleArea(t,n),r={},i.VisibleByHeight||(u=t-i.Height-24,u>-1&&(r=this.isVisibleArea(u,n),r.VisibleByHeight&&(t=u))),i.VisibleByWidth||(f=document.documentElement.clientWidth-i.Width,r=this.isVisibleArea(t,f),r.VisibleByWidth&&(n=f)),PP.Ui.ToolTip.base.show.call(this,n,t,!0))},toolTipP.setIsRTL=function(n){PP.Ui.ToolTip.base.setIsRTL.call(this,n),this._ContentDomNode.dir=this._IsRTL?"rtl":"ltr"},toolTipP=null,PP.Ui.Clipboard={TextArea:null,Count:0},PP.Ui.Clipboard=function(){this._FocusObject=null,this._Data=null,PP.Ui.Clipboard.base.constructor.apply(this,arguments),PP.Ui.Clipboard.TextArea||(PP.Ui.Clipboard.TextArea=document.createElement("textarea"),PP.Ui.Clipboard.TextArea.TableSelector=this,PP.Ui.Clipboard.TextArea.id="CopyBufferTextArea_"+this.Name,document.body.appendChild(PP.Ui.Clipboard.TextArea),PP.Ui.Clipboard.TextArea.style.position="absolute",PP.Ui.Clipboard.TextArea.style.opacity="0.0",PP.IsIE&&PP.IEVer<=9&&(PP.Ui.Clipboard.TextArea.style.filter="alpha(opacity=0)"),PP.Ui.Clipboard.TextArea.style.width="1px",PP.Ui.Clipboard.TextArea.style.height="1px",PP.Ui.Clipboard.TextArea.style.overflow="hidden",PP.Ui.Clipboard.TextArea.style.zIndex="-400",PP.Ui.Clipboard.TextArea.style.top="-100px",PP.Ui.Clipboard.TextArea.style.left="-100px",PP.Ui.Clipboard.TextArea.style.tabIndex="1",PP.Ui.Clipboard.TextArea.onkeydown=function(n){n=n?n:event,n.preventDefault!=undefined&&n.preventDefault(),n.returnValue=!1}),PP.Ui.Clipboard.Count++,this._FocusTimer=null},PP.initClass(PP.Ui.Clipboard,PP.Object,"Clipboard"),ClipboardP=PP.Ui.Clipboard.prototype,ClipboardP.dispose=function(){this.isLive()&&(PP.Ui.Clipboard.Count--,PP.Ui.Clipboard.Count===0&&(document.body.removeChild(PP.Ui.Clipboard.TextArea),delete PP.Ui.Clipboard.TextArea,PP.Ui.Clipboard.TextArea=null),this._FocusTimer&&clearTimeout(this._FocusTimer),this._FocusTimer=null,this._FocusObject=null,this._Data=null,PP.Ui.Clipboard.base.dispose.call(this,arguments))},ClipboardP.getCopyPasteTextArea=function(){return PP.Ui.Clipboard.TextArea},ClipboardP._copyEnd=function(){var n=this.getCopyPasteTextArea();return n&&(n.style.display="none"),this._FocusTimer&&clearTimeout(this._FocusTimer),this._FocusObject&&(this._FocusObject.setFocus(),this._FocusObject._endCopy()),this},ClipboardP._pasteEnd=function(){var n=this.getCopyPasteTextArea();return n&&(n.style.display="none"),this._FocusTimer&&clearTimeout(this._FocusTimer),this._FocusObject&&(this._FocusObject.setFocus(),this._FocusObject._endPaste(this.getText())),this},ClipboardP.copy=function(n){var t=this.getCopyPasteTextArea(),i;return t&&(t.style.display="",t.value=n,t.setActive?t.setActive():t.focus(),t.select(),i=this,t.onkeyup=function(n){n=n?n:event,n.preventDefault!=undefined&&n.preventDefault(),i._FocusTimer=setTimeout(function(){i._copyEnd()},10),n.returnValue=!0}),this},ClipboardP.paste=function(){var n=this.getCopyPasteTextArea(),t;return n&&(n.style.display="",n.value="",n.setActive?n.setActive():n.focus(),n.select(),t=this,n.onkeyup=function(n){n=n?n:event,n.preventDefault!=undefined&&n.preventDefault(),t._FocusTimer=setTimeout(function(){t._pasteEnd()},10),n.returnValue=!0}),this},ClipboardP.getText=function(){var n=this.getCopyPasteTextArea(),t=null;return n&&(t=n.value),t},ClipboardP.setData=function(n){return this._Data=n,this},ClipboardP.getData=function(){return this._Data},ClipboardP=null,PP.Ui.TextEditor=function(){if(this._ImagePath="",this._TextAreaStyle="",this._TextAreaHeight=0,this._EnableResize=!0,this._defineEvents(["PropertyChanged","SelectionChanged","TextChanged","Blur"]),PP.Ui.TextEditor.base.constructor.apply(this,arguments),this._disabledScreen=null,this._bgColor=null,this._bgSelection=null,this._render(),this._TextAreaHeight){var t=this._TextAreaHeight;this._TextAreaHeight=null,this.setTextAreaHeight(t)}this._oldSelectionRange=null},PP.initClass(PP.Ui.TextEditor,PP.Ui.Control,"TextEditor"),textEditorP=PP.Ui.TextEditor.prototype,textEditorP._render=function(){this._initFromHTML("<div class='PPTextEditor'></div>",!0),this._FontBox=new PP.Ui.FontBox({ParentNode:this._DomNode,ImagePath:this._ImagePath,IsJustifyVisible:!1,PropertyChanged:PP.Delegate(this._onPropertyChanged,this)}),this._TextArea=PP.htmlToDOM("<div class='PPTextEditor_TextArea'><iframe frameborder='0'></iframe></div>"),PP.IsIE&&PP.IEVer===7&&(this._TextArea.firstChild.style.width=this._checkValue(this._Width?this._Width-2:402)+"px"),this._disabledScreen=PP.htmlToDOM("<div class='PPTextEditor_TextArea_DisabledScreen'></div>"),this._TextArea.appendChild(this._disabledScreen),this._DomNode.appendChild(this._TextArea),this._ResizerCorner=PP.htmlToDOM("<div class='PPTextEditor_ResizerCorner'></div>"),this._EnableResize&&(this._TextArea.appendChild(this._ResizerCorner),this._addEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown)),PP.Ui.TextEditor.base._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode),this._Width?this.setWidth(this._Width):PP.addClass(this._FontBox._DomNode.lastChild,"OneLine")},textEditorP._onBlur=function(){return PP.IsIE&&this._recoverSelectionIE(),this.Blur.fire(this,{})},textEditorP._iframeMouseDown=function(){this._removeEvent(this._IframeWindow.document,"mousedown",this._iframeMouseDown),this._addEvents(this._IframeWindow.document,{mousemove:this._updateControls,mouseup:this._iframeMouseUp}),PP.setCapture(this._IframeWindow.document)},textEditorP._updateControls=function(){this.SelectionChanged.fire(this,{IsBold:this.getIsBold(),IsUnderline:this.getIsUnderline(),IsItalic:this.getIsItalic(),FontSize:this.getFontSize(),FontFamily:this.getFontFamily(),FontColor:this.getFontColor(),BackgroundColor:this.getBackgroundColor(),Alignment:this.getAlignment()}),this.updateControls()},textEditorP._iframeMouseUp=function(){PP.releaseCapture(this._IframeWindow.document),this._removeEvent(this._IframeWindow.document,"mousemove",this._updateControls),this._removeEvent(this._IframeWindow.document,"mouseup",this._iframeMouseUp),this._addEvent(this._IframeWindow.document,"mousedown",this._iframeMouseDown)},textEditorP._iframeKey=function(n,t){t.Event.keyCode!=18&&t.Event.keyCode!=17&&t.Event.keyCode!=16&&this._getSelection()&&(this.updateControls(),t.Event.type==="keyup"&&(this.SelectionChanged.fire(this,{IsBold:this.getIsBold(),IsUnderline:this.getIsUnderline(),IsItalic:this.getIsItalic(),FontSize:this.getFontSize(),FontFamily:this.getFontFamily(),FontColor:this.getFontColor(),Alignment:this.getAlignment()}),this.TextChanged.fire(this,t)))},textEditorP._resizerCornerMouseDown=function(n,t){this._Enabled&&(this._bodyCoords=PP.calculateOffset(this._TextArea.firstChild),this._mouseCoordsDifference=[this._bodyCoords.X+this._TextArea.offsetWidth-PP.calculateMouseX(t.Event),this._bodyCoords.Y+this._TextArea.offsetHeight-PP.calculateMouseY(t.Event)],PP.setCapture(this._ResizerCorner),this._removeEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown),this._resizeDiv=PP.htmlToDOM("<div class='PPTextEditor_ResizerBack' style='height: "+document.documentElement.clientHeight+"px; width: "+document.documentElement.clientWidth+"px;'></div>"),document.body.appendChild(this._resizeDiv),this._addEvents(document,{mousemove:this._resizerCornerMouseMove,mouseup:this._resizerCornerMouseUp}))},textEditorP._resizerCornerMouseMove=function(n,t){var r=[PP.calculateMouseX(t.Event),PP.calculateMouseY(t.Event)],u=r[1]-this._bodyCoords.Y+this._mouseCoordsDifference[1],i;i=this.getIsRTL()?-r[0]+this._bodyCoords.X+this._mouseCoordsDifference[0]:r[0]-this._bodyCoords.X+this._mouseCoordsDifference[0],u>this._ResizerCorner.offsetHeight*2&&(this._TextAreaHeight=u,this._TextArea.style.height=u+"px",this._TextArea.firstChild.style.height="100%"),i>this._ResizerCorner.offsetWidth*2&&(this._TextArea.style.width=i+"px",PP.IsIE&&PP.IEVer===7&&(this._TextArea.firstChild.style.width=this._checkValue(i)+"px"))},textEditorP._resizerCornerMouseUp=function(){PP.releaseCapture(this._ResizerCorner),this._removeEvent(document,"mousemove",this._resizerCornerMouseMove),this._removeEvent(document,"mouseup",this._resizerCornerMouseUp),document.body.removeChild(this._resizeDiv),delete this._resizeDiv,this._addEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown)},textEditorP._onPropertyChanged=function(n,t){switch(t.PropertyName){case PP.Ui.FontBox.PropertyName.FontFamily:this.setFontFamily(t.Font.getFontFamily(),!1);break;case PP.Ui.FontBox.PropertyName.Size:var i=n.getFontSizeComboBox().getSelectedItem();i&&this.setFontSize(i.getValue(),!1);break;case PP.Ui.FontBox.PropertyName.Alignment:this.setAlignment(t.Alignment,!1);break;case PP.Ui.FontBox.PropertyName.IsBold:this.setIsBold(t.Font.getIsBold(),!1);break;case PP.Ui.FontBox.PropertyName.IsItalic:this.setIsItalic(t.Font.getIsItalic(),!1);break;case PP.Ui.FontBox.PropertyName.IsUnderline:this.setIsUnderline(t.Font.getIsUnderline(),!1);break;case PP.Ui.FontBox.PropertyName.Color:this.setFontColor(t.Font.getColor(),!1)}},textEditorP._getSelection=function(){var n,f,t,i,e=null,r,u;if(this._IframeWindow.getSelection){if(e=this._IframeWindow.getSelection(),e.rangeCount==0)return null;n=e.getRangeAt(0),t=n.startContainer,i=n.endContainer,f=n.commonAncestorContainer,t.nodeName=="#text"&&(t=t.parentNode),i.nodeName=="#text"&&(i=i.parentNode),t==i&&(f=t),e={root:f,start:t,end:i,range:n}}else if(this._IframeWindow.document.selection){if(n=this._IframeWindow.document.selection.createRange(),!n.duplicate)return null;r=n.duplicate(),u=n.duplicate(),r.collapse(!0),u.moveToElementText(r.parentElement()),u.setEndPoint("EndToStart",r),t=r.parentElement(),r=n.duplicate(),u=n.duplicate(),u.collapse(!1),r.moveToElementText(u.parentElement()),r.setEndPoint("StartToEnd",u),i=u.parentElement(),f=n.parentElement(),t==i&&(f=t),e={root:f,start:t,end:i,range:n}}return PP.IsFF&&this._bgSelection&&(!n.collapsed||this._bgSelection.range.startOffset!=n.startOffset||this._bgSelection.range.startContainer!=n.startContainer)&&(this._bgColor=null,this._bgSelection=null),e},textEditorP._recoverSelectionIE=function(){if(this.getEnabled()){var n=this._getSelection();(!n||n&&n.range.boundingHeight==0)&&this._IESelection&&(this._IframeWindow.getSelection&&(n=this._IframeWindow.getSelection()),n&&(PP.IEVer<9?this._IESelection.range.select():(n.removeAllRanges(),n.addRange(this._IESelection.range))))}return this},textEditorP._styleWithCss=function(){try{this._IframeWindow.document.execCommand("styleWithCSS",0,!0)}catch(n){try{this._IframeWindow.document.execCommand("useCSS",0,!0)}catch(n){try{this._IframeWindow.document.execCommand("styleWithCSS",!1,!0)}catch(n){}}}return this},textEditorP.getEnableResize=function(){return this._EnableResize},textEditorP.setEnableResize=function(n){return PP.isBoolean(n)&&n!=this._EnableResize&&(this._EnableResize=n,this._EnableResize?(this._TextArea.appendChild(this._ResizerCorner),this._addEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown)):(this._TextArea.removeChild(this._ResizerCorner),this._removeEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown))),this},textEditorP.getText=function(){return this._IframeWindow.document.body.innerText||this._IframeWindow.document.body.textContent},textEditorP.setText=function(n){return this._IframeWindow.document.body.innerHTML=n,this.focus(),this.selectAll(),this},textEditorP.getFormattedText=function(){return this._IframeWindow.document.body.innerHTML},textEditorP.getAlignment=function(){return this._IframeWindow.document.queryCommandState("JustifyLeft")?PP.HorizontalAlignment.Left:this._IframeWindow.document.queryCommandState("JustifyCenter")?PP.HorizontalAlignment.Center:this._IframeWindow.document.queryCommandState("JustifyRight")?PP.HorizontalAlignment.Right:this._IsRTL?PP.HorizontalAlignment.Right:PP.HorizontalAlignment.Left},textEditorP.setAlignment=function(n,t){return PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._FontBox.setAlignment(n),this._styleWithCss(),this._IframeWindow.document.execCommand(n==PP.HorizontalAlignment.Left?"JustifyLeft":n==PP.HorizontalAlignment.Center?"JustifyCenter":"JustifyRight",null,null),this.focus(),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Alignment,Value:n}),t&&this.updateControls(),this},textEditorP.getIsBold=function(){return this._IframeWindow.document.queryCommandState("Bold")},textEditorP.setIsBold=function(n,t){if(this.getIsBold()!=n)return PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),this._IframeWindow.document.execCommand("Bold","",n),this.focus(),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.IsBold,Value:n}),t&&this.updateControls(),this},textEditorP.getIsUnderline=function(){return this._IframeWindow.document.queryCommandState("Underline")},textEditorP.setIsUnderline=function(n,t){if(this.getIsUnderline()!=n)return PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),this._IframeWindow.document.execCommand("Underline","",n),this.focus(),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.IsUnderline,Value:n}),t&&this.updateControls(),this},textEditorP.getIsItalic=function(){return this._IframeWindow.document.queryCommandState("Italic")},textEditorP.setIsItalic=function(n,t){if(this.getIsItalic()!=n)return PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),this._IframeWindow.document.execCommand("Italic","",n),this.focus(),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.IsItalic,Value:n}),t&&this.updateControls(),this},textEditorP.getFontSize=function(){var n=(this._IframeWindow.document.queryCommandValue("FontSize")||12).toString();switch(n){case"1":n="8";break;case"2":n="10";break;case"3":n="12";break;case"4":n="14";break;case"5":n="18";break;case"6":n="24";break;case"7":n="36"}return n},textEditorP.setFontSize=function(n,t){var i,r;if(!n)return this;n=parseInt(n),i=1;switch(n){case 8:i=1;break;case 10:i=2;break;case 12:i=3;break;case 14:i=4;break;case 18:i=5;break;case 24:i=6;break;case 36:i=7;break;default:return this}return PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),this._IframeWindow.document.execCommand("FontSize","",i),r=this,setTimeout(function(){r.focus(),r=null},0),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Size,Value:n}),t&&this.updateControls(),this},textEditorP.getFontFamily=function(){var n=this._IframeWindow.document.queryCommandValue("FontName")||"Calibri";return n=n.replace(/'/g,"")},textEditorP.setFontFamily=function(n,t){PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),this._IframeWindow.document.execCommand("FontName","",n);var i=this;return setTimeout(function(){i.focus(),i=null},0),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.FontFamily,Value:n}),t&&this.updateControls(),this},textEditorP.getFontColor=function(){var n=this._IframeWindow.document.queryCommandValue("ForeColor");return PP.IsIE?(n=(n&255)<<16|n&65280|(n&16711680)>>>16,n=n.toString(16),n="#000000".slice(0,7-n.length)+n):n=n||"rgb(0, 0, 0)",PP.Color.getColor(n).toString()},textEditorP.setFontColor=function(n,t){return PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),this._IframeWindow.document.execCommand("ForeColor","",n.toString()),this.focus(),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.Color,Value:n}),t&&this.updateControls(),this},textEditorP.getBackgroundColor=function(){var n=this._IframeWindow.document.queryCommandValue(PP.IsFF||PP.IsOpera?"HiliteColor":"BackColor"),i,t;if(PP.IsIE&&PP.isNumber(n)&&(n=(n&255)<<16|n&65280|(n&16711680)>>>16,n=n.toString(16),n="#000000".slice(0,7-n.length)+n),PP.IsFF&&this._bgColor&&this._bgSelection&&(n=this._bgColor),PP.IsFF&&n=="transparent")if(i=this._getSelection(),i&&i.root){for(t=i.root;t.childNodes.length==1&&t.firstChild.nodeType==PP.XMLNodeType.ELEMENT_NODE;)t=t.firstChild;while(n=="transparent"&&t!=this._IframeWindow.document.body)n=PP.getStyle(t,"background-color"),t=t.parentNode;n=="transparent"&&(n=PP.getStyle(t,"background-color"))}else n=this._IframeWindow.document.queryCommandValue("BackColor");return n=n||"rgb(255, 255, 255)",PP.Color.getColor(n).toString()},textEditorP.setBackgroundColor=function(n,t){if(PP.isDefined(t)||(t=!0),PP.IsIE&&this._recoverSelectionIE(),this._styleWithCss(),PP.IsFF){var i=this._getSelection();i&&i.range&&i.range.collapsed?(this._bgColor=n,this._bgSelection=i):(this._bgColor=null,this._bgSelection=null)}return this._IframeWindow.document.execCommand(PP.IsOpera||PP.IsFF?"HiliteColor":"BackColor","",n.toString()),this.focus(),this.PropertyChanged.fire(this,{PropertyName:PP.Ui.FontBox.PropertyName.BackgroundColor,Value:n}),t&&this.updateControls(),this},textEditorP.getTextAreaHeight=function(){return this._TextAreaHeight},textEditorP.setTextAreaHeight=function(n){if(PP.isNumber(n)&&n!=this._TextAreaHeight){this._TextAreaHeight=n;var i=0,t=parseInt(PP.getStyle(this._TextArea,"borderBottomWidth"));isNaN(t)||(i+=t),t=parseInt(PP.getStyle(this._TextArea,"borderTopWidth")),isNaN(t)||(i+=t),this._TextArea.style.height=this._checkValue(n-i)+"px",this._TextArea.firstChild.style.height="100%"}return this},textEditorP.setIsRTL=function(n){return PP.Ui.TextEditor.base.setIsRTL.call(this,n),this._FontBox.setIsRTL(n),this._IframeWindow&&(this._IframeWindow.document.body.style.direction=n?"rtl":"ltr"),this},textEditorP.setEnabled=function(n,t){var u=this.getEnabled(),i,r;if(PP.Ui.TextEditor.base.setEnabled.call(this,n,t),this._FontBox.setEnabled(n,t),u!=n||t)if(!PP.IsIE&&this._IframeWindow&&(this._IframeWindow.document.designMode=n?"on":"off"),n){if(PP.IsIE)this._disabledScreen.style.height=0;else if(this._IframeWindow){for(r=this._IframeWindow.document.getElementsByTagName("style"),i=0;i<r.length;i++)if(r[i].enabledStyle=="true"){r[i].parentNode.removeChild(r[i]);break}this._IframeWindow.document.body.removeAttribute("disabled"),this._IframeWindow.document.body.setAttribute("enabled","enabled")}}else PP.IsIE?(this._disabledScreen.style.height="100%",this._IframeWindow&&(PP.IEVer<9?this._IframeWindow.document.selection.empty():this._IframeWindow.getSelection().removeAllRanges())):this._IframeWindow&&(i=PP.htmlToDOM("<style type='text/css'>body { -khtml-user-select: none;-moz-user-select: none;-o-user-select: none;-webkit-user-select: none;filter: alpha(opacity=50);opacity: 0.5;unselectable: on;user-select: none; }</style>"),i.enabledStyle="true",this._IframeWindow.document.getElementsByTagName("head")[0].appendChild(i),this._IframeWindow.document.body.removeAttribute("enabled"),this._IframeWindow.document.body.setAttribute("disabled","disabled"));return t||(n?this._addEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown):this._removeEvent(this._ResizerCorner,"mousedown",this._resizerCornerMouseDown)),this},textEditorP.setWidth=function(n){return PP.Ui.TextEditor.base.setWidth.call(this,n),this._FontBox&&(this._FontBox._DomNode.lastChild.offsetTop!=this._FontBox._DomNode.firstChild.offsetTop+this._FontBox._DomNode.firstChild.offsetHeight?PP.addClass(this._FontBox._DomNode.lastChild,"OneLine"):PP.removeClass(this._FontBox._DomNode.lastChild,"OneLine")),PP.IsIE&&PP.IEVer===7&&(!this._TextArea.style.width||this._TextArea.style.width.indexOf("px")<0)&&(this._TextArea.firstChild.style.width=this._checkValue(n-2)+"px"),this},textEditorP.getFontBox=function(){return this._FontBox},textEditorP.initTextArea=function(){if(this._IframeWindow)return!0;try{this._IframeWindow=this._TextArea.firstChild.contentWindow}catch(t){this._IframeWindow=null}if(!this._IframeWindow)return!1;this._IframeWindow.document.designMode="on",this._IframeWindow.document.open();var n="<head><style type='text/css'>body { margin: 0; font-family: Calibri; font-size: 16px; color: #000000; background: #FFFFFF; }</style></head><body style='"+this._TextAreaStyle+"'>"+(this._Content?this._Content:"")+"</body>";return this._IframeWindow.document.write(n),this._IframeWindow.document.close(),this._IframeWindow.document.body.style.direction=this._IsRTL?"rtl":"ltr",this._IframeWindow.document.designMode=this._Enabled?"on":"off",this._addEvent(this._IframeWindow,"blur",this._onBlur),this._addEvents(this._IframeWindow.document,{click:this._updateControls,mousedown:this._iframeMouseDown,keydown:this._iframeKey,keyup:this._iframeKey}),this.setEnabled(this.getEnabled(),!0),PP.setTimeout(this.focus,0,{Self:this}),!0},textEditorP.addToNode=function(){PP.Ui.TextEditor.base.addToNode.apply(this,arguments),this.initTextArea()},textEditorP.updateControls=function(){var t=this._getSelection(),f,i,n,u,r;if(PP.IsIE&&t&&(this._IESelection=t),f=!0,t&&this._oldSelectionRange&&(PP.IsIE&&t.range.boundingHeight>0?PP.IEVer<9?this._IESelection.range=t.range.duplicate():this._IESelection=t.range:t.range.startOffset==this._oldSelectionRange.startOffset&&t.range.endOffset==this._oldSelectionRange.endOffset&&t.root==this._oldSelectionRange.root&&(f=!1)),t&&f&&(this._oldSelectionRange={startOffset:t.range.startOffset,endOffset:t.range.endOffset,root:t.root}),i=this._FontBox.getFontFamilyComboBox().getListBox(),n=this.getFontFamily(),n.indexOf("'")>-1&&(n=n.substring(1,n.length-1)),i.setValue(n,!1),this._FontBox.getFontFamilyComboBox().setContent(i.getSelectedItem()?i.getSelectedItem().toString():"",!1),i=this._FontBox.getFontSizeComboBox().getListBox(),n=this.getFontSize()+"",n.indexOf("px")>-1)n=Math.round(parseInt(n)/96*72);else for(u=i.getItems(),r=0;r<u.length;r++)if(n==u[r].getData()){n=u[r].getValue();break}return this._FontBox.getFontSizeComboBox().setValue(n,!1),n=this.getAlignment(),this._FontBox.getToolbar().getItem(0).setIsChecked(n===PP.HorizontalAlignment.Left,!1),this._FontBox.getToolbar().getItem(1).setIsChecked(n===PP.HorizontalAlignment.Center,!1),this._FontBox.getToolbar().getItem(2).setIsChecked(n===PP.HorizontalAlignment.Right,!1),this._FontBox.getToolbar().getItem(3).setIsChecked(this.getIsBold(),!1),this._FontBox.getToolbar().getItem(5).setIsChecked(this.getIsUnderline(),!1),this._FontBox.getToolbar().getItem(4).setIsChecked(this.getIsItalic(),!1),this._FontBox.getColorCombo().setColor(this.getFontColor(),!1),this},textEditorP.insertNode=function(n){var t,i,r;return this.initTextArea()?(t=this._getSelection().range,t.pasteHTML?t.pasteHTML(n.outerHTML):((PP.IsOpera||PP.IsIE&&PP.IEVer>=9)&&(i=this._IframeWindow.document.createElement("span"),i.innerHTML=n.outerHTML,n=i.firstChild),t.deleteContents(),t.insertNode(n),t.selectNode(n)),t.collapse(!1),this._IframeWindow.getSelection&&(r=this._IframeWindow.getSelection(),r.removeAllRanges(),r.addRange(t)),this.focus(),this):this},textEditorP.focus=function(n){var t=this;return n&&n.Self&&(t=n.Self),t._IframeWindow&&(t._IframeWindow.focus(),t._IESelection=t._getSelection()),this},textEditorP.selectAll=function(){var t,n,r,i=this._IframeWindow.document.body,u=i.childNodes.length;t=u===1&&i.firstChild.nodeType===PP.XMLNodeType.ELEMENT_NODE?i.firstChild:i,document.createRange?(n=this._IframeWindow.document.createRange(),PP.IsFF||PP.IsIE&&PP.IEVer>=9?n.selectNodeContents(t):n.selectNode(t),r=this._IframeWindow.getSelection(),r.removeAllRanges(),r.addRange(n)):(n=this._IframeWindow.document.body.createTextRange(),n.moveToElementText(t),n.select())},textEditorP=null,PP.Ui.MetabaseSaveDialog=function(n){n=n||{},this._ResourceKey="saveDialog",this._MultiSelect=!1,this._AllowEmptyIdName=!0,n.AdditionalHeightDec||(n.AdditionalHeightDec=60),PP.isDefined(n.FocusToDefaultButton)||(n.FocusToDefaultButton=!1),this._defineEvents(["SaveAsObject"]),this._DefaultName="",this._DefaultId="",this._FieldsAutoFill=!0,PP.Ui.MetabaseSaveDialog.base.constructor.call(this,n),this._AllowEmptyIdName||this._OkButton.setEnabled(!1)},PP.initClass(PP.Ui.MetabaseSaveDialog,PP.Ui.MetabaseDialogBase,"MetabaseSaveDialog"),saveAsDialogProto=PP.Ui.MetabaseSaveDialog.prototype,saveAsDialogProto._render=function(){this._smallIcons=new PP.ImageList({Source:this._ImagePath+"Navigator/GlbClsImg16.png",IconHeight:16,IconWidth:16}),PP.Ui.MetabaseSaveDialog.base._render.call(this),this._newFolderButton=new PP.Ui.Button({ResourceKey:"MetabaseDialogBaseNewFolderButton"}),this._newFolderButton.addToNode(this._toolbarContainer,this._viewBtn.getDomNode()),this._bottomToolbarContainer.innerHTML="<table style='width:100%;'><tr><td class='Label'></td><td class='Control'></td><td style=\"display:none;\" class='FilterSelect'></td></tr><tr><td class='Label'></td><td class='Control'></td></tr></table>";var n=this._bottomToolbarContainer.firstChild;new PP.Ui.Label({ParentNode:n.rows[0].cells[0],ResourceKey:"MetabaseSaveDialogNameLabel"}),new PP.Ui.Label({ParentNode:n.rows[1].cells[0],ResourceKey:"MetabaseSaveDialogIdLabel"}),this._nameTextBox=new PP.Ui.TextBox({ParentNode:n.rows[0].cells[1],Content:this._DefaultName}),this._idTextBox=new PP.Ui.TextBox({ParentNode:n.rows[1].cells[1],Content:this._DefaultId,AfterChange:PP.Delegate(this._onTextChange,this)}),this._newFolderDialog=new PP.Ui.ConfirmSaveDialog({Height:130,TriState:!1,ContentAlign:"Left",ResourceKey:"NewFolderDialog",Closing:PP.Delegate(this._onNewFolderDialogClosing,this),OkButtonClicked:PP.Delegate(this._onNewFolderDialogOk,this),FocusToDefaultButton:!1,Content:new PP.Ui.TextBox({AfterChange:PP.Delegate(this._onNewFolderDialogTextChanged,this),Enter:PP.Delegate(this._onNewFolderDialogOk,this)})}),this._newFolderDialog._OkButton.setEnabled(!1),this._confirmOverWriteDialog=new PP.Ui.ConfirmDialog({ImagePath:this._ImagePath,YesButtonClicked:PP.Delegate(this._onOverWriteConfirmed,this)}),this._errorDialog=new PP.Ui.ErrorDialog({ResourceKey:"MetabaseSaveDialogIdError"}),this._errorDialog.Closed.add(this._onErrorDialogClosed,this),this.setWidth(this._Width),this.setHeight(this._Height)},saveAsDialogProto._bindEvents=function(){PP.Ui.MetabaseSaveDialog.base._bindEvents.call(this),this._newFolderButton.Click.add(this._onNewFolderButtonClick,this),this._FieldsAutoFill&&this._navigatorBox.ObjectSelected.add(this._onObjectSelected,this),this._navigatorBox.OpenObjects.add(this._onNavigatorBoxObjectOpened,this)},saveAsDialogProto._unBindEvents=function(){PP.Ui.MetabaseDialogBase.base._unBindEvents.apply(this,arguments),this._newFolderButton.Click.remove(this._onNewFolderButtonClick,this),this._navigatorBox.ObjectSelected.remove(this._onObjectSelected,this),this._navigatorBox.OpenObjects.remove(this._onNavigatorBoxObjectOpened,this)},saveAsDialogProto._onNewFolderButtonClick=function(){this._newFolderDialog.show(),this._newFolderDialog.getContent().setFocus()},saveAsDialogProto._onObjectSelected=function(n,t){var i=t[0];i&&i.getClass()!=PP.Mb.MetabaseObjectClass.KE_CLASS_FOLDER&&(this._nameTextBox.setContent(i.getName()),this._idTextBox.setContent(i.getId()))},saveAsDialogProto._onNavigatorBoxObjectOpened=function(n){var r=n.getSelectedObjects()[0],i;r&&(i=PP.resourceManager.getString("Content","saveDialogConfirmMessage"),this._confirmOverWriteDialog.setContent(i),this._confirmOverWriteDialog.show())},saveAsDialogProto._onOverWriteConfirmed=function(){this.SaveAsObject.fire(this,{ParentKey:this.getParentKey(),Name:this._nameTextBox.getContent(),Id:this._idTextBox.getContent(),ParentMbObject:this.getParentMbObject(),Operation:PP.Mb.ObjectCopyOperation.OverwriteExisting}),PP.Ui.MetabaseSaveDialog.base._onOkButtonClick.call(this)},saveAsDialogProto._onNewFolderDialogOk=function(){this._newFolderDialog.getContent().getValue().trim()>""?(this._navigatorBox.createFolder(this._newFolderDialog.getContent().getValue().trim()),this._newFolderDialog.close()):this._newFolderDialog.getContent().setFocus()},saveAsDialogProto._onNewFolderDialogClosing=function(){this._newFolderDialog.getContent().setValue("")},saveAsDialogProto._onNewFolderDialogTextChanged=function(n){n.getValue().trim()>""?this._newFolderDialog.setEnabledOkButton(!0):this._newFolderDialog.setEnabledOkButton(!1)},saveAsDialogProto._onTextChange=function(){var i=this._idTextBox.getContent(),r=PP.Mb.isValidIdent(i)||this._AllowEmptyIdName&&i.length==0;this._idTextBox.setValidState(r),this._OkButton.setEnabled(r)},saveAsDialogProto._onOkButtonClick=function(){var n=this._navigatorBox.getSelectedObjects()[0],t;n&&n.getClass()!=PP.Mb.MetabaseObjectClass.KE_CLASS_FOLDER&&n.getId()==this._idTextBox.getContent()?(t=PP.resourceManager.getString("Content","saveDialogConfirmMessage"),this._confirmOverWriteDialog.setContent(t),this._confirmOverWriteDialog.show()):this._Metabase.findObjects(0,{FindInfo:{Active:!0,Text:this._idTextBox.getContent(),Attribute:PP.Mb.FindInfoAttribute.Ident,CaseSensitive:!1,WholeWordsOnly:!0,ScanNestedNamespaces:!1,ScanHiddenFolders:!0}},PP.Delegate(this._onCheckId,this))},saveAsDialogProto._onCheckId=function(n,t){for(var f=JSON.parse(t.ResponseText).GetObjectsResult.objects,u=f.its.d,e=u?u.length:0,o=this._idTextBox.getContent().toUpperCase(),r,i=0;i<e;i++)if(u[i].i.toUpperCase()===o){r=PP.resourceManager.getString("Message","MetabaseSaveDialogIdIsUsed"),r=r.replace("{Id}",this._idTextBox.getContent().toUpperCase()),this._errorDialog.setMessage(r),this._errorDialog.show();return}this.SaveAsObject.fire(this,{ParentKey:this.getParentKey(),Name:this._nameTextBox.getContent(),Id:this._idTextBox.getContent(),ParentMbObject:this.getParentMbObject(),Operation:PP.Mb.ObjectCopyOperation.CreateNew}),PP.Ui.MetabaseSaveDialog.base._onOkButtonClick.call(this)},saveAsDialogProto._onErrorDialogClosed=function(){this._idTextBox.setFocus(),this._idTextBox.selectAll()},saveAsDialogProto.getNameControl=function(){return this._nameTextBox},saveAsDialogProto.getIdControl=function(){return this._idTextBox},saveAsDialogProto.show=function(){PP.Ui.MetabaseSaveDialog.base.show.apply(this,arguments),this._nameTextBox.setFocus(),this._nameTextBox.selectAll()},saveAsDialogProto.show=function(n,t,i){t&&PP.isString(t)&&this.getNameControl().setContent(t),i&&PP.isString(i)&&this.getIdControl().setContent(i),PP.Ui.MetabaseSaveDialog.base.show.call(this)},saveAsDialogProto=null,PP.Ajax=function(){if(this._Url="",this._Type=PP.Ajax.Type.GET,this._Id=this._Body=null,this._Async=!0,this._defineEvents(["Progress","Success","Fail"]),this._Transport=PP.Ajax.Transport.XMLHttpRequest,PP.Ajax.base.constructor.apply(this,arguments),!this._Url)throw PP.ArgumentNullException(this);this._IsLoaded=!1,this._ResponseText="";switch(this._Transport){case PP.Ajax.Transport.XMLHttpRequest:this._XHR=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this._XHR.onreadystatechange=this._onReadyStateChange,this._XHR._PPSelf=this;break;case PP.Ajax.Transport.Script:this._Script=document.createElement("script"),this._Id!=null&&this._Script.setAttribute("id",this._Id),this._Script.onload=this._OnscriptLoaded,this._Script.onerror=this._onScriptFail,this._Script.src=this._Url,this._Script.selfAjax=this,document.getElementsByTagName("head")[0].appendChild(this._Script)}},PP.initClass(PP.Ajax,PP.Object,"Ajax"),PP.Ajax.Transport={XMLHttpRequest:0,Script:1},PP.Ajax.Type={GET:"GET",POST:"POST",HEAD:"HEAD"},PP.Ajax.ResponseStatus={SUCCESS:200,ERROR:500,NOTFOUND:404},PP.Ajax.ReadyState={CREATED:0,OPENED:1,SENDED:2,RECEIVED:3,LOADED:4},PP.Ajax.prototype.send=function(n){this._Opened||(this._XHR.open(this._Type,this._Url,this._Async),this._Opened=!0),this._XHR.send(n?n:this._Body)},PP.Ajax.prototype.abort=function(){this._XHR&&this._XHR.abort(),delete this._XHR._PPSelf},PP.Ajax.prototype._OnscriptLoaded=function(){var n=this.selfAjax;n.Success.fire(n,{}),n._Script.onload=null,n._IsLoaded=!0,delete this.selfAjax},PP.Ajax.prototype._onScriptFail=function(){var n=this.selfAjax;n.Fail.fire(n,{}),n._Script.onerror=null,n._IsLoaded=!1,delete this.selfAjax},PP.Ajax.prototype._onReadyStateChange=function(){switch(this.readyState){case PP.Ajax.ReadyState.LOADED:this._PPSelf._IsLoaded=!0;switch(this.status){case PP.Ajax.ResponseStatus.SUCCESS:this._PPSelf._ResponseText=this.responseText,this._PPSelf.Success.fire(this._PPSelf,{ResponseText:this.responseText});break;case PP.Ajax.ResponseStatus.NOTFOUND:case PP.Ajax.ResponseStatus.ERROR:this._PPSelf._ResponseText=this.responseText,this._PPSelf.Fail.fire(this._PPSelf,{ResponseText:this.responseText,Status:this.status})}delete this._PPSelf}},PP.Ajax.prototype.getResponse=function(){return this._ResponseText},PP.Ajax.prototype.isLoaded=function(){return this._IsLoaded},PP.Ajax.prototype.getBody=function(){return this._Body},PP.Ajax.prototype.setBody=function(n){this._Body=n},PP.Ajax.prototype.getUrl=function(){return this._Url},PP.Ajax.prototype.getXHR=function(){return this._XHR},PP.Ajax.prototype.dispose=function(){this._XHR&&delete this._XHR._PPSelf;try{this._XHR.onreadystatechange=null}catch(n){}PP.Ajax.base.dispose.apply(this,arguments)},PP.Ajax.prototype.setRequestHeader=function(n,t){this._Opened||(this._XHR.open(this._Type,this._Url,this._Async),this._Opened=!0),this._XHR.setRequestHeader(n,t)},PP.Ui.FileUpload=function(){this._Width=240,this._ButtonWidth=80,this._AutoExpandable=!1,this._MaxInputsCount=3,this._PostUrl="",this._InputName="fileInput",this._defineEvents(["FileInputChanged","FileUploaded"]),PP.Ui.FileUpload.base.constructor.apply(this,arguments),this._FileName="",this._maxFileSizeField=null,this._fileInputs=[],this._render(),PP.resourceManager.ResourcesLoaded.add(this._onCultureChanged,this)},PP.initClass(PP.Ui.FileUpload,PP.Ui.Control,"FileUpload"),fileUploadPr=PP.Ui.FileUpload.prototype,fileUploadPr._render=function(){this._initFromHTML("<div class='PPFileUpload'><form name='uploadForm' method='post' action='' id='uploadForm' enctype='multipart/form-data'></form></div>",!0),this._UploadForm=this._DomNode.firstChild,this._addFileInput(),PP.Ui.FileUpload.base._render.apply(this,arguments),this._ParentNode&&this.addToNode(this._ParentNode)},fileUploadPr._addFileInput=function(){var u=this.getId(),i=this._fileInputs.length,t=PP.htmlToDOM("<div class='PPFileInputContainer'><table cellpadding='0' cellspacing='0'><tbody><tr><td class='PPFileTextBoxContainer'></td><td class='PPFileButtonContainer'></td></tr></tbody></table></div>"),s=PP.querySelector(t,".PPFileTextBoxContainer"),h=PP.querySelector(t,".PPFileButtonContainer"),f=new PP.Ui.TextBox({Id:"{0}_fileTextBox_{1}".replace("{0}",u).replace("{1}",i),EnableEdit:!1,ParentNode:s}),e=new PP.Ui.Button({ResourceKey:"browse",Id:"{0}_fileButton_{1}".replace("{0}",u).replace("{1}",i),ParentNode:h,Width:this._ButtonWidth}),n=PP.htmlToDOM("<input name='"+(this._InputName+"_"+i)+"' type='file' />"),o,r;n.id="{0}_fileInput_{1}".replace("{0}",u).replace("{1}",i),PP.IsIE?(o=PP.createElement(t,"PPFileInputWrapper"),o.appendChild(n)):t.appendChild(n),PP.addClass(n,"PPFileInput"),r={fileTextBox:f,fileButton:e,fileInput:n},f.setData(r),e.setData(r),this._addEvent(n,"change",this._onFileInputChange),this._fileInputs.push(r),this._UploadForm.appendChild(t),this.setWidth(this._Width)},fileUploadPr._getFileInputControlsByInput=function(n){for(var i=this._fileInputs.length,t=0;t<i;t++)if(this._fileInputs[t].fileInput===n)return this._fileInputs[t];return null},fileUploadPr._onFileInputChange=function(n,t){var i=this._getFileInputControlsByInput(t.Element);this._onFileInputChanged(i),this.FileInputChanged.fire(this,{FileInput:t.Element})},fileUploadPr._onFileInputChanged=function(n){var i,t,u,r;if(n.fileInput.value&&(i=n.fileInput.value.split("\\"),t="",t=i.length>0?i[i.length-1]:n.fileInput.value,this._FileName=t,n.fileTextBox.setContent(t)),this._AutoExpandable&&this._fileInputs.length<this._MaxInputsCount){for(u=this._fileInputs.length,r=0;r<this._fileInputs.length;r++)this._fileInputs[r].fileInput.value!==""&&u--;u==0&&this._addFileInput()}},fileUploadPr._onCultureChanged=function(n,t){return PP.Ui.FileUpload.base._onCultureChanged.call(this,n,t),this.setWidth(this._Width)},fileUploadPr._onIframeLoad=function(n){var i=n.target||n.srcElement,t=i.FileUpload,r;if(i.contentWindow.document.location.href=="about:blank"){t._UploadForm.action=i.Url,t._UploadForm.target="uploadIframe",setTimeout(function(){t._UploadForm.submit()},0);return}r="",i.contentWindow&&i.contentWindow.document&&(r=i.contentWindow.document.body.innerHTML),t.FileUploaded.fire(t,{Message:r}),PP.setTimeout(t._removeIframe,0,{Self:t})},fileUploadPr._removeIframe=function(n){document.body.removeChild(n.Self._UploadIframe)},fileUploadPr.setWidth=function(n){PP.Ui.FileUpload.base.setWidth.apply(this,arguments);for(var t=0;t<this._fileInputs.length;t++)this._fileInputs[t].fileTextBox.getDomNode().parentNode.style.width=this._checkValue(n-this._ButtonWidth)+"px",PP.IsFF&&(this._fileInputs[t].fileInput.size=n)},fileUploadPr.getAutoExpandable=function(){return this._AutoExpandable},fileUploadPr.setAutoExpandable=function(n){this._AutoExpandable=n},fileUploadPr.getMaxInputsCount=function(){return this._MaxInputsCount},fileUploadPr.setMaxInputsCount=function(n){this._MaxInputsCount=n},fileUploadPr.addToNode=function(n){PP.Ui.FileUpload.base.addToNode.call(this,n),this.setWidth(this._Width)},fileUploadPr.send=function(n){if(!this._PostUrl)throw PP.ArgumentNullException("PostUrl",this);this._UploadIframe=document.createElement("IFRAME"),this._UploadIframe.width="0",this._UploadIframe.height="0",this._UploadIframe.style.display="none",this._UploadIframe.src="about:blank",this._UploadIframe.id="uploadIframe",this._UploadIframe.name="uploadIframe",this._UploadIframe.FileUpload=this;var t=this._PostUrl;n&&(t+=(this._PostUrl.indexOf("?")==-1?"?":"&")+n),this._UploadIframe.Url=t,this._UploadIframe.attachEvent?this._UploadIframe.attachEvent("onload",this._onIframeLoad):this._UploadIframe.addEventListener("load",this._onIframeLoad,!1),document.body.appendChild(this._UploadIframe),this._UploadIframe.contentWindow.name="uploadIframe"},fileUploadPr._uploadFormInputClick=function(n){n.Self._uploadFormInput.click()},fileUploadPr.getFileName=function(){return this._FileName},fileUploadPr.setEnabled=function(n){var r,i,t;for(PP.Ui.FileUpload.base.setEnabled.apply(this,arguments),r=this._fileInputs.length,i=0;i<r;i++)t=this._fileInputs[i],t.fileTextBox.setEnabled(this._Enabled),t.fileButton.setEnabled(this._Enabled),n?PP.show(t.fileInput):PP.hide(t.fileInput)},fileUploadPr.setPostUrl=function(n){this._PostUrl=n},fileUploadPr.getPostUrl=function(){return this._PostUrl},fileUploadPr.dispose=function(){var t,n;if(this.isLive()){for(PP.resourceManager.ResourcesLoaded.remove(this._onCultureChanged,this),t=this._fileInputs.length,n=0;n<t;n++)this._removeAllEvents(this._fileInputs[n].fileInput),this._fileInputs[n].fileButton.dispose(),this._fileInputs[n].fileTextBox.dispose();PP.Ui.FileUpload.base.dispose.apply(this,arguments)}},fileUploadPr=null,PP.Ui.MetabaseOpenDialog=function(n){this._ResourceKey="openDialog",n.AdditionalHeightDec||(n.AdditionalHeightDec=30),this._defineEvents(["OpenObject"]),PP.Ui.MetabaseOpenDialog.base.constructor.call(this,n),this._itemsToOpen=[]},PP.initClass(PP.Ui.MetabaseOpenDialog,PP.Ui.MetabaseDialogBase,"MetabaseOpenDialog"),openDialogProto=PP.Ui.MetabaseOpenDialog.prototype,openDialogProto._render=function(){PP.Ui.MetabaseOpenDialog.base._render.call(this),this._bottomToolbarContainer.innerHTML="<table style='width:100%;'><tr><td class='LastItemSelectLabel'></td><td class='LastItemSelect'></td><td class='FilterSelect'></td></tr></table>";var n=this._bottomToolbarContainer.firstChild;new PP.Ui.Label({ParentNode:n.rows[0].cells[0],ResourceKey:"MetabaseOpenDialogNameLabel"}),this._nameTextBox=new PP.Ui.TextBox({ParentNode:n.rows[0].cells[1]}),this._lastitemAutocompliter=new PP.Ui.Autocomplete({Targets:[{Id:"lastitemAutocompliter",Control:this._nameTextBox,ImageList:this._smallIcons,ShowPopupSuggestion:!0,ShowTextSuggestion:!0,AlwaysShow:!0,Active:!0,MatchCase:!1,Suggestions:[]}]}),this._filterCombo.addToNode(n.rows[0].cells[2]),this.addClass("PPOpenDialog"),this._OkButton.setEnabled(!1),this._contextMenu=new PP.Ui.Menu({Items:[{MenuItem:{Id:"ContextMenuShowEmptyFolder",ResourceKey:"MetabaseOpenDialogShowEmptyFolder",Click:this._showEmptyFolder.bind(this),Checked:this._navigatorBox._ShowEmptyFolder}}]})},openDialogProto._bindEvents=function(){PP.Ui.MetabaseOpenDialog.base._bindEvents.call(this),this._navigatorBox.ObjectSelected.add(this._onObjectSelected,this),this._navigatorBox.ObjectListObjectsLoaded.add(this._onObjectListObjectsLoaded,this),this._navigatorBox.OpenObjects.add(this._onNavigatorBoxObjectOpened,this),this._navigatorBox.FolderTreeContextMenu.add(this._showNavigatorBoxContextMenu,this),this._navigatorBox.ObjectListContextMenu.add(this._showNavigatorBoxContextMenu,this),this._lastitemAutocompliter.Selected.add(this._onLastitemAutocompliterSelect,this)},openDialogProto._unBindEvents=function(){this._navigatorBox.ObjectSelected.remove(this._onObjectSelected,this),this._navigatorBox.ObjectListObjectsLoaded.remove(this._onObjectListObjectsLoaded,this),this._navigatorBox.OpenObjects.remove(this._onNavigatorBoxObjectOpened,this),this._navigatorBox.FolderTreeContextMenu.remove(this._showNavigatorBoxContextMenu,this),this._navigatorBox.ObjectListContextMenu.remove(this._showNavigatorBoxContextMenu,this),this._lastitemAutocompliter.Selected.remove(this._onLastitemAutocompliterSelect,this),PP.Ui.MetabaseOpenDialog.base._unBindEvents.call(this)},openDialogProto._onObjectSelected=function(){var n=this._navigatorBox.getSelectedObjects();this._setObjectsToOpen(n)},openDialogProto._setObjectsToOpen=function(n){var u,i,t,r;for(this._itemsToOpen=[],u=[],i="",t=0;t<n.length;t++)r=!1,r=this._CurrentFilter&&this._CurrentFilter.Filters&&this._CurrentFilter.Filters.length?this._CurrentFilter.Filters.indexOf(n[t].getClass())>=0:this._FolderTreeFilter&&this._FolderTreeFilter.length?this._FolderTreeFilter.indexOf(n[t].getClass())<0:!PP.Mb.Ui.isContainerableClass(n[t].getClass()),r&&(this._itemsToOpen.push(n[t]),u.push(PP.Mb.Ui.getObjectNameByDisplayMode(this._DisplayMode,{n:n[t].getName(),i:n[t].getId()})));i=this._itemsToOpen.length==0?"":this._itemsToOpen.length==1?u[0]:'"'+u.join('" "')+'"',this._nameTextBox.setContent(i),this._itemsToOpen.length>0?this._OkButton.setEnabled(!0):this._OkButton.setEnabled(!1)},openDialogProto.getObjectsToOpen=function(){return this._itemsToOpen},openDialogProto._setSuggestionAutocomplete=function(n){var i=[],t,r;if(n){for(t=0,r=n.length;t<r;t++)n[t].c!=0&&i.push(this._createSuggestionAutocomplete(n[t]));this._lastitemAutocompliter.setSuggestions(i,this._nameTextBox)}},openDialogProto._createSuggestionAutocomplete=function(n){return{Text:PP.Mb.Ui.getObjectNameByDisplayMode(this._DisplayMode,n),Value:n,Marker:{getImageUrl:function(){},getIconColumn:function(){return PP.Mb.Ui.getClassIconIndex(n.c)},getIconRow:function(){return 0}}}},openDialogProto._onNavigatorBoxObjectOpened=function(n,t){(this._CurrentFilter!=null&&this._CurrentFilter.Filters.indexOf(t.Objects[0].getClass())!=-1||this._CurrentFilter==null&&t.Objects[0].getClass()!=0)&&(this.hide(),this.OpenObject.fire(this,{Objects:t.Objects}))},openDialogProto._onObjectListObjectsLoaded=function(n,t){this._setSuggestionAutocomplete(t.Objects)},openDialogProto._onLastitemAutocompliterSelect=function(n,t){if(n.Control.getId()==this._nameTextBox.getId()){var i=n.Suggestions[t.SelectionIndex].Value;this._navigatorBox.setSelectedKeys([i.k])}},openDialogProto._onOkButtonClick=function(){PP.Ui.MetabaseOpenDialog.base._onOkButtonClick.call(this),this.OpenObject.fire(this,{Objects:this.getObjectsToOpen()})},openDialogProto._showNavigatorBoxContextMenu=function(n,t){this._contextMenu.showContext(t.Event.pageX,t.Event.pageY)},openDialogProto._showEmptyFolder=function(){this._navigatorBox.setShowEmptyFolder(this._contextMenu.getMenuItemById("ContextMenuShowEmptyFolder").getChecked())},openDialogProto=null,PP.Ui.IconListItem=function(){this._Template=PP.Templates.Radius2,this._CSSName="PPIconListItem",PP.Ui.IconListItem.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.IconListItem,PP.Ui.ListItem,"IconListItem"),PP.BezierSpline=function(n,t,i){this._StartPoint=n,this._EndPoint=t,this._ControlPoint=i,this._Epsilon=.0001},PP.initClass(PP.BezierSpline,PP.Object,"BezierSpline"),bzSpln=PP.BezierSpline.prototype,bzSpln._getLength=function(){return this._getSegmentLength(1)},bzSpln._getSegmentLength=function(n){var u=new PP.Point(this._ControlPoint.getX()-this._StartPoint.getX(),this._ControlPoint.getY()-this._StartPoint.getY()),e=new PP.Point(this._EndPoint.getX()-this._ControlPoint.getX()-u.getX(),this._EndPoint.getY()-this._ControlPoint.getY()-u.getY()),r=4*(u.getX()*u.getX()+u.getY()*u.getY()),t=8*(u.getX()*e.getX()+u.getY()*e.getY()),i=4*(e.getY()*e.getY()+e.getY()*e.getY()),f=0,s=0,l;if(Math.abs(i)<=this._Epsilon)return Math.abs(t)<=this._Epsilon?f=Math.sqrt(r)*n:(f=2/3*(t*n+r)*Math.sqrt(t*n+r)/t,s=2/3*r*Math.sqrt(r)/t,f-s);var h=Math.sqrt(i*n*n+t*n+r),c=Math.sqrt(r),o=Math.sqrt(i),a=(.5*t+i*n)/o+h;return f=a<this._Epsilon?.25*(2*i*n+t)*h/i:.25*(2*i*n+t)*h/i+.5*Math.log((.5*t+i*n)/o+h)/o*(r-.25*t*t/i),l=(.5*t+i*n)/o+h,s=l<this._Epsilon?.25*t*c/i:.25*t*c/i+.5*Math.log(.5*t/o+c)/o*(r-.25*t*t/i),f-s},bzSpln._rotateCounterClockWise=function(n,t){var i=n.getX(),r=n.getY(),u=i*Math.cos(t)-r*Math.sin(t),f=i*Math.sin(t)+r*Math.cos(t);return new PP.Point(u,f)},bzSpln.getPoint=function(n){if(isNaN(n))return null;if(n<=this._Epsilon)return new PP.Point(this._StartPoint.getX(),this._StartPoint.getY());if(Math.abs(n-1)<=this._Epsilon)return new PP.Point(this._EndPoint.getX(),this._EndPoint.getY());var t=1-n,i=this._StartPoint.getX()*t*t+this._ControlPoint.getX()*2*n*t+this._EndPoint.getX()*n*n,r=this._StartPoint.getY()*t*t+this._ControlPoint.getY()*2*n*t+this._EndPoint.getY()*n*n;return new PP.Point(i,r)},bzSpln.getTangentAngle=function(n){var r=this._StartPoint.getX(),u=this._StartPoint.getY(),t=this._ControlPoint.getX(),i=this._ControlPoint.getY(),f=r+(t-r)*n,e=u+(i-u)*n,o=t+(this._EndPoint.getX()-t)*n,s=i+(this._EndPoint.getY()-i)*n,h=o-f,c=s-e;return Math.atan2(c,h)},bzSpln.getParamByDistance=function(n){var h=0;if(isNaN(n))return h;var e=0,u=0,nt=this._getLength(),t=n/nt;if(n<=0)return h;if(n>=nt)return h=1;var o=new PP.Point(this._ControlPoint.getX()-this._StartPoint.getX(),this._ControlPoint.getY()-this._StartPoint.getY()),g=new PP.Point(this._EndPoint.getX()-this._ControlPoint.getX(),this._EndPoint.getY()-this._ControlPoint.getY()),s=new PP.Point(g.getX()-o.getX(),g.getY()-o.getY()),f=4*(o.getX()*o.getX()+o.getY()*o.getY()),i=8*(o.getX()*s.getX()+o.getY()*s.getY()),r=4*(s.getX()*s.getX()+s.getY()*s.getY()),d=f-.25*i*i/r,k=.25*i*Math.sqrt(f)/r,tt=.5*i/Math.sqrt(r)+Math.sqrt(f),w=Math.sqrt(f),c=Math.sqrt(r),l,b,p,v,y,a=100;if(Math.abs(r)<=this._Epsilon){if(Math.abs(i)<=this._Epsilon){do e=w*t,u=Math.sqrt(Math.sqrt(r*t*t+i*t+f)),u<=this._Epsilon&&(u=0),t=t-(e-n)/u;while(Math.abs(e-n)>this._Epsilon&&a-->0)}else do e=2/3*(i*t+f)*Math.sqrt(i*t+f)/i-2/3*f*w/i,u=Math.sqrt(Math.Sqrt(r*t*t+i*t+f)),u<=this._Epsilon&&(u=0),t=t-(e-n)/u;while(Math.sqrt(e-n)>this._Epsilon&&a-->0)}else do l=Math.sqrt(Math.abs(r*t*t+i*t+f)),b=(.5*i+r*t)/c+l,y=.25*(2*r*t+i)*l/r,v=b<this._Epsilon?y:y+.5*Math.log((.5*i+r*t)/c+l)/c*d,p=tt<this._Epsilon?k:k+.5*Math.log(.5*i/c+w)/c*d,e=v-p,u=l,u<=this._Epsilon&&(u=0),t=t-(e-n)/u;while(Math.abs(e-n)>this._Epsilon&&a-->0);return h=t},bzSpln.angleOffset=function(n,t){var i=new PP.Point(this._StartPoint.getX()+t.getX(),this._StartPoint.getY()+t.getY()),r=new PP.Point(this._EndPoint.getX()+t.getX(),this._EndPoint.getY()+t.getY()),u=new PP.Point(this._ControlPoint.getX()+t.getX(),this._ControlPoint.getY()+t.getY());i=this._rotateCounterClockWise(i,n),r=this._rotateCounterClockWise(r,n),u=this._rotateCounterClockWise(u,n),this._StartPoint=new PP.Point(i.getX()-t.getX(),i.getY()-t.getY()),this._EndPoint=new PP.Point(r.getX()-t.getX(),r.getY()-t.getY()),this._ControlPoint=new PP.Point(u.getX()-t.getX(),u.getY()-t.getY())},bzSpln.offset=function(n){this._StartPoint=new PP.Point(this._StartPoint.getX()+n.getX(),this._StartPoint.getY()+n.getY()),this._EndPoint=new PP.Point(this._EndPoint.getX()+n.getX(),this._EndPoint.getY()+n.getY()),this._ControlPoint=new PP.Point(this._ControlPoint.getX()+n.getX(),this._ControlPoint.getY()+n.getY())},bzSpln.setStartPoint=function(n){return n!=this._StartPoint&&(this._StartPoint=n),this},bzSpln.getStartPoint=function(){return this._StartPoint},bzSpln.setEndPoint=function(n){return n!=this._EndPoint&&(this._EndPoint=n),this},bzSpln.getEndPoint=function(){return this._EndPoint},bzSpln.setControlPoint=function(n){return n!=this._ControlPoint&&(this._ControlPoint=n),this},bzSpln.getControlPoint=function(){return this._ControlPoint},bzSpln=null,PP.Ui.Separator=function(){PP.Ui.Separator.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.Separator,PP.Ui.MenuItem,"Separator"),sepP=PP.Ui.Separator.prototype,sepP._render=function(){this._initFromHTML("<div class='PPSeparator'><div></div></div>",!0),PP.Ui.MenuItem.base._render.call(this)},sepP._onClicked=sepP._onMouseDown=function(){return!1},sepP=null,PP.AutocompleteEventArgs=function(){this.SelectionIndex=0,PP.AutocompleteEventArgs.base.constructor.apply(this,arguments)},PP.initClass(PP.AutocompleteEventArgs,PP.EventArgs,"AutocompleteEventArgs"),PP.Ui.Autocomplete=function(){this._ImageList=null,this._Targets=[],this._TargetsMap={},this._MinAutoFindSymbolsCount=3,this._defineEvents(["Opened","SelectionChanged","Selected"]),PP.Ui.Autocomplete.base.constructor.apply(this,arguments),this._ActiveTarget=null,this._ActiveTargetHoveredIndex=0,this._render()},PP.initClass(PP.Ui.Autocomplete,PP.Ui.Control,"Autocomplete"),autocompletePr=PP.Ui.Autocomplete.prototype,autocompletePr._render=function(){for(var n=0;n<this._Targets.length;n++)this.addTarget(this._Targets[n])},autocompletePr._onKeyDown=function(n,t){t||(t=event);switch(t.Event.keyCode){case 32:t.Event.ctrlKey&&(this.showSuggestion(n.getId()),t.Event.preventDefault());break;case 27:this._ActiveTarget&&(this.hideSuggestion(this._ActiveTarget.Control.getId()),this._ActiveTarget=null),t.Event.preventDefault()}},autocompletePr._onKeyUp=function(n,t){var r=t.Event.keyCode,u=PP.Key,f,i;r!==u.Down&&r!==u.Up&&(f={17:17,18:18,35:35,36:36,33:33,34:34,16:16,9:9,27:27,20:20,93:93},i=n.getContent(),t.Args.AlwaysShow&&!(t.Event.keyCode in f)&&i!==""&&i.toString().length>=this._MinAutoFindSymbolsCount?this.showSuggestion(n.getId()):(t.Event.keyCode===27||n.getContent()==="")&&(this._ActiveTarget&&(this.hideSuggestion(this._ActiveTarget.Control.getId()),this._ActiveTarget=null),t.Event.preventDefault()))},autocompletePr._onMenuOpened=function(){this._addEvent(document,"keydown",this._onSuggestionNavigate),this._addEvent(document,"keyup",this._onSuggestionAlter),this._ActiveTarget&&this._ActiveTarget.Control instanceof PP.Ui.Control&&this._ActiveTarget.Control.setFocus()},autocompletePr._onMenuClosed=function(){this._ActiveMenu=null,this._removeEvent(document,"keydown",this._onSuggestionNavigate),this._removeEvent(document,"keyup",this._onSuggestionAlter)},autocompletePr._onSuggestionNavigate=function(n,t){var u,i=-1,f,r;t||(t=event);switch(t.Event.keyCode){case 13:if(this._ActiveTarget){for(u=this._ActiveTarget.Menu.getItems(),r=0;r<u.length;r++)u[r].getIsVisible()&&u[r].getIsHovered()&&(i=r);i>=0&&(this._ActiveTarget.Control.setContent(u[i].getContent()),this.hideSuggestion(this._ActiveTarget.Control.getId()),t=new PP.AutocompleteEventArgs,t.SelectionIndex=this._ActiveTargetHoveredIndex,this.Selected.fire(this._ActiveTarget,t),this._ActiveTarget=null)}t.preventDefault&&t.preventDefault();break;case 38:if(this._ActiveTarget){for(u=this._ActiveTarget.Menu.getItems(),f=[],i=u.length-1,r=0;r<u.length;r++)u[r].getIsVisible()&&(f.push(r),u[r].getIsHovered()&&(i=f.length-1)),u[r].setIsHovered(!1);i--,i=i>=0?i:f.length-1,i=i<f.length?i:0,u[f[i]].setIsHovered(!0),this._ActiveTargetHoveredIndex=f[i],t=new PP.AutocompleteEventArgs,t.SelectionIndex=f[i],this.SelectionChanged.fire(this._ActiveTarget,t)}t.preventDefault&&t.preventDefault();break;case 40:if(this._ActiveTarget){for(u=this._ActiveTarget.Menu.getItems(),f=[],r=0;r<u.length;r++)u[r].getIsVisible()&&(f.push(r),u[r].getIsHovered()&&(i=f.length-1)),u[r].setIsHovered(!1);i++,i=i>=0?i:f.length-1,i=i<f.length?i:0,u[f[i]].setIsHovered(!0),this._ActiveTargetHoveredIndex=f[i],t=new PP.AutocompleteEventArgs,t.SelectionIndex=f[i],this.SelectionChanged.fire(this._ActiveTarget,t)}t.preventDefault&&t.preventDefault()}},autocompletePr._onSuggestionAlter=function(n,t){var i=t.Event.keyCode,r=PP.Key;i!==r.Down&&i!==r.Up&&this._ActiveTarget&&this.showSuggestion(this._ActiveTarget.Control.getId())},autocompletePr._onSuggestionSelected=function(n,t){n.getData().setContent(n.getContent());var r=n.getData(),i;i=typeof r=="string"?this._TargetsMap[r]:this._TargetsMap[r.getId()],t=new PP.AutocompleteEventArgs,t.SelectionIndex=i.Menu.getItems().indexOf(n),this.Selected.fire(i,t)},autocompletePr._alterSuggestion=function(n){var i,t,r,u;if((i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)&&i.Active){r=i.Control.getContent(),i.MatchCase||(r=r.toLowerCase());var f=i.Menu.getItems(),e=f.length,o=0;for(t=0;t<e;t++)f[t].hide();for(t=0;t<e;t++)u=f[t].getContent(),i.MatchCase||(u=u.toLowerCase()),u.indexOf(r)>=0&&u!=r&&(f[t].show(),o++);return o>0}},autocompletePr.getTargets=function(){return this._TargetsMap},autocompletePr.getMinAutoFindSymbolsCount=function(){return this._MinAutoFindSymbolsCount},autocompletePr.setMinAutoFindSymbolsCount=function(n){this._MinAutoFindSymbolsCount=n},autocompletePr.getActive=function(n){var t;return t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t.Active},autocompletePr.setActive=function(n,t){var i;return i=typeof t=="string"?this._TargetsMap[t]:this._TargetsMap[t.getId()],i.Active=n,this},autocompletePr.getSuggestions=function(n){var t;return t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t.Suggestions},autocompletePr.setSuggestions=function(n,t){var i,r,f,u;for(i=typeof t=="string"?this._TargetsMap[t]:this._TargetsMap[t.getId()],i.Suggestions=n,i.Menu||(i.Menu=new PP.Ui.Menu({ImageList:i.ImageList,IsRTL:i.Control.getIsRTL(),ShowIcons:!1}),i.Menu.Opened.add(this._onMenuOpened,this),i.Menu.Closed.add(this._onMenuClosed,this)),i.Menu.clearItems(),r=0;r<n.length;r++)f={Content:n[r].Text,ImageUrl:n[r].Marker?n[r].Marker.getImageUrl():"",ColumnIndex:n[r].Marker?n[r].Marker.getIconColumn():-1,RowIndex:n[r].Marker?n[r].Marker.getIconRow():-1,Parent:i.Menu,Data:t},u=new PP.Ui.MenuItem(f),u.Click.add(this._onSuggestionSelected,this),i.Menu.addItem(u);return this},autocompletePr.getMatchCase=function(n){var t;return t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t.MatchCase},autocompletePr.setMatchCase=function(n,t){var i;return i=typeof t=="string"?this._TargetsMap[t]:this._TargetsMap[t.getId()],i.MatchCase=n,this},autocompletePr.getIsIntellisenceStyle=function(n){var t;return t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t.IntellisenceStyle},autocompletePr.setIsIntellisenceStyle=function(n,t){var i;return i=typeof t=="string"?this._TargetsMap[t]:this._TargetsMap[t.getId()],i.IntellisenceStyle=n,this},autocompletePr.setIsRTL=function(n){PP.Ui.Autocomplete.base.setIsRTL.apply(this,arguments);for(var t in this._TargetsMap)this._TargetsMap[t].Menu.setIsRTL(n);return this},autocompletePr.getWidth=function(n){var t;if(t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t)return t.Menu.getWidth()},autocompletePr.setWidth=function(n,t){var i;if(i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)return i.Menu.setWidth(t),this},autocompletePr.getHeight=function(n){var i;if(i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)return i.Menu.getHeight()},autocompletePr.setHeight=function(n,t){var i;if(i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)return i.Menu.setHeight(t),this},autocompletePr.getMaxWidth=function(n){var t;if(t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t)return t.Menu.getMaxDropDownWidth()},autocompletePr.setMaxWidth=function(n,t){var i;if(i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)return i.Menu.setMaxDropDownWidth(t),this},autocompletePr.getMaxHeight=function(n){var i;if(i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)return i.Menu.getMaxDropDownHeight()},autocompletePr.setMaxHeight=function(n,t){var i;if(i=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],i)return i.Menu.setMaxDropDownHeight(t),this},autocompletePr.addTarget=function(n){n.AlwaysShow?n.Control.KeyUp.add(this._onKeyUp,this,n):n.Control.KeyDown.add(this._onKeyDown,this,n),this._TargetsMap[n.Control.getId()]=n,this.setSuggestions(n.Suggestions,n.Control)},autocompletePr.showSuggestion=function(n){var t;if((t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t)&&t.Active){var r=this._alterSuggestion(n),i=t.Control.getOffset(),u=t.Control.getHeight();this._ActiveTarget&&this._ActiveTarget!==t&&this.hideSuggestion(this._ActiveTarget.Control.getId()),r?(t.Menu.getItems()[this._ActiveTargetHoveredIndex].setIsHovered(!0),t.Menu.showContext(i.X,i.Y+u)):t.Menu.hide(),this._ActiveTarget=t,this.Opened.fire(this._ActiveTarget,new PP.AutocompleteEventArgs)}},autocompletePr.hideSuggestion=function(n){var t;t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t.Menu.hide()},autocompletePr.removeTarget=function(n){var t;t=typeof n=="string"?this._TargetsMap[n]:this._TargetsMap[n.getId()],t.AlwaysShow?t.Control.KeyUp.remove(this._onKeyUp,this):t.Control.KeyDown.remove(this._onKeyDown,this),t.Menu.dispose(),delete this._TargetsMap[t.Control.getId()],t=null},autocompletePr.dispose=function(){var i,n,t;for(i in this._TargetsMap)n=this._TargetsMap[i],t=n.Control,t.isLive()&&(t.KeyUp.remove(this._onKeyUp,this,n),t.KeyDown.remove(this._onKeyDown,this,n)),delete n.Control,n.Menu.dispose();PP.Ui.Autocomplete.base.dispose.apply(this,arguments)},autocompletePr=null,PP.Ui.ContentMenuItem=function(){PP.Ui.ContentMenuItem.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.ContentMenuItem,PP.Ui.MenuItem,"ContentMenuItem"),contentMenuItemP=PP.Ui.ContentMenuItem.prototype,contentMenuItemP._render=function(){this._initFromHTML("<div class='PPContentMenuItem'></div>"),this._ContentDomNode=this._DomNode,this._setContentToNode(this._Content,this._DomNode,"Content",!0),PP.Ui.MenuItem.base._render.call(this)},contentMenuItemP=null,PP.IEffect=function(){this._Dictionary=null,this._Id=null,PP.IEffect.base.constructor.apply(this,arguments)},PP.initClass(PP.IEffect,PP.Object,"IEffect"),iE=PP.IEffect.prototype,iE.apply=function(n,t){if(t){var i=n.getDomNode();!i||PP.IsIE||PP.IsOpera||i.parentNode.appendChild(i)}},iE.dispose=function(){delete this._Dictionary,PP.IEffect.base.dispose.apply(this,arguments)},iE=null,PP.BorderEffect=function(){this._BorderThickness=3,this._BorderColor="ff0000",this._LastShape=null,PP.BorderEffect.base.constructor.apply(this,arguments),this._Opacity=1,this._TempColor=null,this._TempOpacity=null,this._TempThickness=1},PP.initClass(PP.BorderEffect,PP.IEffect,"BorderEffect"),brE=PP.BorderEffect.prototype,brE._initFields=function(){PP.BorderEffect.base._initFields.apply(this,arguments),this._BorderColor&&this._prepareFillColor(this._BorderColor)},brE._prepareFillColor=function(n){var t=PP.Color.parseARGB(n);this._BorderColor=t?t.toString():n.toLowerCase(),this._Opacity=t?t.getOpacity():1},brE.apply=function(n,t){var r,i;PP.BorderEffect.base.apply.apply(this,arguments),r=n.getChart().getType()===PP.MapChart.Type.SVG,t?(r?(this._LastShape&&this._OldOptions&&PP.SVG.setAttr(n._DomNode,this._OldOptions),this._OldOptions=PP.SVG.getStroke(n._DomNode),PP.SVG.setAttr(n._DomNode,{stroke:this._BorderColor,"stroke-width":this._BorderThickness,"stroke-opacity":this._Opacity}),PP.IsIE&&(i=n._DomNode.parentNode,i&&(PP.IsSVG&&i.removeChild(n._DomNode),i.appendChild(n._DomNode)))):(this._LastShape&&this._OldOptions&&this._LastShape._setOptionsToGObj(this._OldOptions),this._OldOptions=n._getOptrionsFromGObj(["strokeWeight","strokeColor","strokeOpacity"]),n._setOptionsToGObj({strokeWeight:this._BorderThickness,strokeColor:this._BorderColor,strokeOpacity:this._Opacity})),this._LastShape=n):r?PP.SVG.setAttr(n._DomNode,this._OldOptions):n._setOptionsToGObj(this._OldOptions)},brE.getBorderColor=function(){return this._BorderColor},brE.setBorderColor=function(n){this._prepareFillColor(n)},brE.getBorderThickness=function(){return this._BorderThickness},brE.setBorderThickness=function(n){this._BorderThickness=parseInt(n)},brE.dispose=function(){delete this._LastShape,PP.BorderEffect.base.dispose.apply(this,arguments)},brE=null,PP.AlphaChannelEffect=function(){this._Opacity=null,PP.AlphaChannelEffect.base.constructor.apply(this,arguments)},PP.initClass(PP.AlphaChannelEffect,PP.IEffect,"AlphaChannelEffect"),alphChnlE=PP.AlphaChannelEffect.prototype,alphChnlE._initFields=function(){PP.AlphaChannelEffect.base._initFields.apply(this,arguments),this._Opacity=this._Opacity?parseFloat(this._Opacity):.5},alphChnlE.apply=function(){},alphChnlE=null,PP.BrushEffect=function(){this._Brush=null,PP.BrushEffect.base.constructor.apply(this,arguments)},PP.initClass(PP.BrushEffect,PP.IEffect,"BrushEffect"),brshE=PP.BrushEffect.prototype,brshE._initFields=function(){var t,r,i,u;PP.BrushEffect.base._initFields.apply(this,arguments),this._Brush?(t=this._Brush,r=typeof t,r=="object"?(i=PP.getFirstMember(t),t[i].PPType=i,this._Brush=PP.create(t[i])):r=="string"&&(u=PP.MapChart.getItemFromDictionary(t,this._Dictionary),this._Brush=u?u:new PP.SolidColorBrush({Color:t}))):this._Brush=new PP.SolidColorBrush({Color:"#AAAAAA"})},brshE._getFirstMember=function(n){for(var t in n)return t},brshE.apply=function(n,t){t?(this._OldColor=n._DomNode.getAttribute("fill"),n.draw(this._Brush)):n._DomNode.setAttribute("fill",this._OldColor)},brshE=null,PP.BlurEffect=function(){this._Radius=null,PP.BlurEffect.base.constructor.apply(this,arguments)},PP.initClass(PP.BlurEffect,PP.IEffect,"BlurEffect"),blrE=PP.BlurEffect.prototype,blrE._initFields=function(){PP.BlurEffect.base._initFields.apply(this,arguments),this._Radius=this._Radius?parseFloat(this._Radius):5},blrE.apply=function(n,t){var r,i,u,f;t?(r=document.createElementNS("http://www.w3.org/2000/svg","defs"),r.setAttribute("id",this._Id.toString()),n._DomNode.parentNode.appendChild(r),i=document.createElementNS("http://www.w3.org/2000/svg","filter"),i.setAttribute("id","f1"),i.setAttribute("x","-1"),i.setAttribute("y","-1"),i.setAttribute("width","400%"),i.setAttribute("height","400%"),u=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur"),u.setAttribute("result","blurOut"),u.setAttribute("in","SourceGraphic"),u.setAttribute("stdDeviation",this._Radius),i.appendChild(u),r.appendChild(i),n._DomNode.parentNode.appendChild(r),n._DomNode.setAttribute("filter","url(#f1)")):(f=document.getElementById(this._Id.toString()),f.parentNode.removeChild(f),n._DomNode.setAttribute("filter",""))},blrE=null,PP.DropShadowEffect=function(){this._BlurRadius=null,this._Color="#CCCCCC",this._Direction=null,this._Opacity=null,this._ShadowDepth=null,PP.DropShadowEffect.base.constructor.apply(this,arguments)},PP.initClass(PP.DropShadowEffect,PP.IEffect,"DropShadowEffect"),drpShdwE=PP.DropShadowEffect.prototype,drpShdwE._initFields=function(){PP.DropShadowEffect.base._initFields.apply(this,arguments),this._BlurRadius=this._BlurRadius?parseFloat(this._BlurRadius):5,this._Direction=this._Direction?parseFloat(this._Direction):1,this._Opacity=this._Opacity?parseFloat(this._Opacity):.5,this._ShadowDepth=this._ShadowDepth?parseFloat(this._ShadowDepth):1},drpShdwE.apply=function(n,t){var f,i,e,r,u;t?(f=document.createElementNS("http://www.w3.org/2000/svg","defs"),f.setAttribute("id",this._Id.toString()),n._DomNode.parentNode.appendChild(f),i=document.createElementNS("http://www.w3.org/2000/svg","filter"),i.setAttribute("id","f1"),i.setAttribute("x","-1"),i.setAttribute("y","-1"),i.setAttribute("width","400%"),i.setAttribute("height","400%"),e=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur"),e.setAttribute("result","blurOut"),e.setAttribute("in","SourceGraphic"),e.setAttribute("stdDeviation",this._BlurRadius),i.appendChild(e),f.appendChild(i),n._DomNode.parentNode.appendChild(f),r=n._DomNode.cloneNode(),r.setAttribute("fill",this._Color),r.setAttribute("id","shadow"),r.setAttribute("opacity",this._Opacity),r.setAttribute("filter","url(#f1)"),n._DomNode.parentNode.appendChild(r),r.setAttribute("transform"," translate("+this._ShadowDepth*Math.sin(this._Direction)+","+this._ShadowDepth*Math.cos(this._Direction)+")")):(u=document.getElementById(this._Id.toString()),u.parentNode.removeChild(u),u=document.getElementById("shadow"),u.parentNode.removeChild(u))},drpShdwE=null,PP.ScaleEffect=function(){this._Scale=null,PP.ScaleEffect.base.constructor.apply(this,arguments)},PP.initClass(PP.ScaleEffect,PP.IEffect,"ScaleEffect"),sclE=PP.ScaleEffect.prototype,sclE._initFields=function(){PP.ScaleEffect.base._initFields.apply(this,arguments),this._Scale=this._Scale?parseFloat(this._Scale):2},sclE.apply=function(n,t){var i=n.getBoundsRect();t?n._DomNode.setAttribute("transform"," translate("+-(i._Left+i._Width/2)*(this._Scale-1)+","+-(i._Top+i._Height/2)*(this._Scale-1)+") scale("+this._Scale+")"):PP.SVG.scale(n._DomNode,1,-i._Left+i._Width/2,-i._Top+i._Height/2)},sclE=null,PP.Ui.MainMenuButton=function(n){n=n||{},this._Parent=null,n.UseWrapping=!1,n.ImagePosition=PP.LTRB.Left,n.MenuArrowPosition=PP.LTRB.Right,PP.Ui.MainMenuButton.base.constructor.call(this,n)},PP.initClass(PP.Ui.MainMenuButton,PP.Ui.RibbonButton,"MainMenuButton"),mainMenuButtonP=PP.Ui.MainMenuButton.prototype,mainMenuButtonP._getMenuDropCoords=function(){var n=PP.Ui.MainMenuButton.base._getMenuDropCoords.call(this);return this._MenuDropPosition==PP.LTRB.Bottom&&(n[0]++,n[1]--),n},mainMenuButtonP.setUseWrapping=function(n){if(n=n==!0,n)throw new Error("PP.Ui.MainMenuButton must always be false");return this},mainMenuButtonP.dispose=function(){delete this._Parent,PP.Ui.MainMenuButton.base.dispose.apply(this,arguments)},mainMenuButtonP=null,PP.Ui.MenuHeader=function(){PP.Ui.MenuHeader.base.constructor.apply(this,arguments)},PP.initClass(PP.Ui.MenuHeader,PP.Ui.MenuItem,"MenuHeader"),menuHeaderP=PP.Ui.MenuHeader.prototype,menuHeaderP._render=function(){this._initFromHTML("<div class='PPMenuHeader'><div></div></div>"),this._ContentDomNode=this._DomNode.firstChild,this._setContentToNode(this._Content,this._ContentDomNode,"Content",!0),PP.Ui.MenuItem.base._render.call(this)},menuHeaderP._onClicked=menuHeaderP._onMouseDown=function(){return!1},menuHeaderP=null,PP.Ui.CellPicker=function(){this._ColumnCount=9,this._RowCount=6,this._defineEvents(["SelectionChanged","TableSelected"]),PP.Ui.CellPicker.base.constructor.apply(this,arguments),this._render(),this._selectTimer=null,this._currentCell=null},PP.initClass(PP.Ui.CellPicker,PP.Ui.Control,"CellPicker"),cellPickerP=PP.Ui.CellPicker.prototype,cellPickerP._render=function(){for(var n="<table border='0' cellpadding='0' cellspacing='0' class='PPCellPicker'><tbody>",i,t=0;t<this._RowCount;t++){for(n+="<tr>",i=0;i<this._ColumnCount;i++)n+="<td r="+t+" c="+i+"></td>";n+="</tr>"}n+="</tbody></table>",this._initFromHTML("<div class='PPCellPicker'>"+n+"</div>",!0),this._Table=this._DomNode.firstChild,this._ParentNode&&this.addToNode(this._ParentNode),PP.Ui.CellPicker.base._render.call(this)},cellPickerP._changeSelection=function(n,t){var h=PP.calculateMouseX(t.Event),c=PP.calculateMouseY(t.Event),u=document.elementFromPoint(h,c),f,e,o,s,i,r;if((!this._currentCell||this._currentCell!=u)&&u.tagName.toLowerCase()=="td"){if(f=parseInt(u.getAttribute("r")),e=parseInt(u.getAttribute("c")),this._currentCell){for(o=parseInt(this._currentCell.getAttribute("r")),s=parseInt(this._currentCell.getAttribute("c")),this._currentCell=u,i=0;i<=f;i++)for(r=0;r<=e;r++)this._Table.rows[i].cells[r].className="Hovered";for(i=f+1;i<this._RowCount;i++)for(r=0;r<this._ColumnCount;r++)this._Table.rows[i].cells[r].className="";for(i=e+1;i<this._ColumnCount;i++)for(r=0;r<f+1;r++)this._Table.rows[r].cells[i].className=""}else for(this._currentCell=u,o=parseInt(this._currentCell.getAttribute("r")),s=parseInt(this._currentCell.getAttribute("c")),i=0;i<=f;i++)for(r=0;r<=e;r++)this._Table.rows[i].cells[r].className="Hovered";t.ColumnCount=e+1,t.RowCount=f+1,this.SelectionChanged.fire(this,t)}},cellPickerP._bindEvents=function(){this._isBind||(PP.Ui.CellPicker.base._bindEvents.call(this),this._addEvent(this._DomNode,"mousemove",this._onMouseMove))},cellPickerP._unBindEvents=function(){PP.Ui.CellPicker.base._unBindEvents.call(this),this._removeEvent(this._DomNode,"mousemove",this._onMouseMove)},cellPickerP._onMouseMove=function(n,t){clearTimeout(this._selectTimer),this._selectTimer=PP.setTimeout(this._onChangeSelectionTimer,0,{Self:this,Sender:n,Args:t})},cellPickerP._onChangeSelectionTimer=function(n){n.Self._changeSelection(n.Sender,n.Args)},cellPickerP._onMouseOut=function(n,t){PP.reallyOut(this._DomNode,t.Event)&&PP.setTimeout(this._onMouseOutTimeout,0,{Self:this,Args:t})},cellPickerP._onMouseOutTimeout=function(n){n.Self.clearSelection(),n.Self.MouseOut.fire(n.Self,n.Args)},cellPickerP._onClicked=function(n,t){t.ColumnCount=parseInt(this._currentCell.getAttribute("c"))+1,t.RowCount=parseInt(this._currentCell.getAttribute("r"))+1,this.TableSelected.fire(this,t),this.Click.fire(this,t)},cellPickerP.clearSelection=function(){for(var t,n=0;n<this._RowCount;n++)for(t=0;t<this._ColumnCount;t++)this._Table.rows[n].cells[t].className="";this._currentCell=null},cellPickerP.setEnabled=function(n,t){(this._Enabled!==n||t)&&(n?this._bindEvents():this._unBindEvents()),PP.Ui.CellPicker.base.setEnabled.call(this,n,t)},cellPickerP=null,PP.Ui.TabsComboBox=function(n){n.DropPanel||(n.DropPanel={}),n.DropPanel.Template=PP.Templates.DropPanel,this._Position=PP.LTRB.Top;var t=n.Button?n.Button:{};t.Class="TabsComboBoxButton",t.IsToggleButton=!0,this._tbBtn=new PP.Ui.Button(t),this._tbBtn.Click.add(this._onButtonMouseDown,this),this._tbBtn.setData(this._Position),n.Button&&delete n.Button,PP.Ui.TabsComboBox.base.constructor.apply(this,arguments),this._DomNode.firstChild.style.display="none",typeof n.Width!="undefined"&&n.Width!=null&&this.setWidth(n.Width),typeof n.Height!="undefined"&&n.Height!=null&&this.setHeight(n.Height),this._tbBtn.addToNode(this._DomNode),this._tbBtn.setWidth(this._Width),this._tbBtn.setHeight(this._Height)},PP.initClass(PP.Ui.TabsComboBox,PP.Ui.ComboBox,"TabsComboBox"),tabsComboBoxP=PP.Ui.TabsComboBox.prototype,tabsComboBoxP._render=function(){PP.Ui.TabsComboBox.base._render.call(this),this._tbBtn.setWidth(this._Width),this._tbBtn.setHeight(this._Height)},tabsComboBoxP._onDropPanelOpened=function(n,t){PP.Ui.TabsComboBox.base._onDropPanelOpened.call(this,n,t),this._tbBtn.setIsPressed(!0,!1)},tabsComboBoxP._onDropPanelClosed=function(n,t){PP.Ui.TabsComboBox.base._onDropPanelClosed.call(this,n,t),this._tbBtn.setIsPressed(!1,!1)},tabsComboBoxP.setWidth=function(n){return typeof n!="undefined"&&n!=null&&(PP.Ui.TabsComboBox.base.setWidth.call(this,n),this._tbBtn.setWidth(n)),this},tabsComboBoxP.setHeight=function(n){return typeof n!="undefined"&&n!=null&&(PP.Ui.TabsComboBox.base.setHeight.call(this,n),this._tbBtn.setHeight(n)),this},tabsComboBoxP.setEnabled=function(n){n=n==!0,PP.Ui.TabsComboBox.base.setEnabled.call(this,n),this._tbBtn.setEnabled(n)},tabsComboBoxP=null,PP.Thickness=function(n){if(this._Bottom=this._Right=this._Top=this._Left=this._BorderRadiusLeftTop=this._BorderRadiusRightTop=this._BorderRadiusRightBottom=this._BorderRadiusLeftBottom=0,this._Background=null,this._defineEvents(["PropertyChanged"]),PP.isString(n)){var t;t=n.indexOf(",")>0?n.split(","):n.split(" "),this._Left=parseFloat(t[0]),this._Top=parseFloat(t[1]),this._Right=parseFloat(t[2]),this._Bottom=parseFloat(t[3])}else PP.Thickness.base.constructor.apply(this,arguments),this._setBackground(this._Background)},PP.initClass(PP.Thickness,PP.Object,"Thickness",PP.INotifyPropertyChanged),thknsP=PP.Thickness.prototype,thknsP._setBackground=function(n){n&&(n.Name?this._Background instanceof PP.Object?this._Background.setSettings(n):(n.PPType=n.Name,this._Background=PP.create(n)):this._Background instanceof PP.Brush&&this._Background.setSettings(n))},thknsP.setBackground=function(n){return this._setBackground(n),this},thknsP.getBackground=function(){return this._Background},thknsP.getSettings=function(n,t){return t?PP.Thickness.base.getSettings.apply(this,arguments):this._Left+" "+this._Top+" "+this._Right+" "+this._Bottom},thknsP.getBottom=function(){return this._Bottom},thknsP.setBottom=function(n){return this._Bottom=n,this},thknsP.getLeft=function(){return this._Left},thknsP.setLeft=function(n){return this._Left=n,this},thknsP.getRight=function(){return this._Right},thknsP.setRight=function(n){return this._Right=n,this},thknsP.getTop=function(){return this._Top},thknsP.setTop=function(n){return this._Top=n,this},thknsP.setBorderRadiusLeftTop=function(n){return this._BorderRadiusLeftTop=n,this},thknsP.setBorderRadiusRightTop=function(n){return this._BorderRadiusRightTop=n,this},thknsP.setBorderRadiusRightBottom=function(n){return this._BorderRadiusRightBottom=n,this},thknsP.setBorderRadiusLeftBottom=function(n){return this._BorderRadiusLeftBottom=n,this},thknsP.toCSSFormat=function(n){if(!n)throw new Error("ArgumentException");return n+":"+this._Top+"px "+this._Right+"px "+this._Bottom+"px "+this._Left+"px"},PP.INotifyPropertyChanged._implement(PP.Thickness,!0),thknsP=null,window.Silverlight||(window.Silverlight={}),Silverlight._silverlightCount=0,Silverlight.__onSilverlightInstalledCalled=!1,Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=",Silverlight.__installationEventFired=!1,Silverlight.onGetSilverlight=null,Silverlight.onSilverlightInstalled=function(){window.location.reload(!1)},Silverlight.isInstalled=function(n){var t,l,f,e,h,o,i,r,s,c,u;n==undefined&&(n=null),t=!1,l=null;try{if(f=null,e=!1,window.ActiveXObject)try{f=new ActiveXObject("AgControl.AgControl"),n===null?t=!0:f.IsVersionSupported(n)&&(t=!0),f=null}catch(a){e=!0}else e=!0;if(e&&(h=navigator.plugins["Silverlight Plug-In"],h))if(n===null)t=!0;else{for(o=h.description,o==="1.0.30226.2"&&(o="2.0.30226.2"),i=o.split(".");i.length>3;)i.pop();while(i.length<4)i.push(0);for(r=n.split(".");r.length>4;)r.pop();u=0;do s=parseInt(r[u]),c=parseInt(i[u]),u++;while(u<r.length&&s===c);s<=c&&!isNaN(s)&&(t=!0)}}catch(a){t=!1}return t},Silverlight.WaitForInstallCompletion=function(){if(!Silverlight.isBrowserRestartRequired&&Silverlight.onSilverlightInstalled){try{navigator.plugins.refresh()}catch(n){}Silverlight.isInstalled(null)&&!Silverlight.__onSilverlightInstalledCalled?(Silverlight.onSilverlightInstalled(),Silverlight.__onSilverlightInstalledCalled=!0):setTimeout(Silverlight.WaitForInstallCompletion,3e3)}},Silverlight.__startup=function(){if(navigator.plugins.refresh(),Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null),Silverlight.isBrowserRestartRequired){if(window.navigator.mimeTypes){var n=navigator.mimeTypes["application/x-silverlight-2"],i=navigator.mimeTypes["application/x-silverlight-2-b2"],r=navigator.mimeTypes["application/x-silverlight-2-b1"],t=r;i&&(t=i),!n&&(r||i)?Silverlight.__installationEventFired||(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0):n&&t&&n.enabledPlugin&&t.enabledPlugin&&n.enabledPlugin.description!=t.enabledPlugin.description&&(Silverlight.__installationEventFired||(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0))}}else Silverlight.WaitForInstallCompletion(),Silverlight.__installationEventFired||(Silverlight.onInstallRequired(),Silverlight.__installationEventFired=!0);Silverlight.disableAutoStartup||(window.removeEventListener?window.removeEventListener("load",Silverlight.__startup,!1):window.detachEvent("onload",Silverlight.__startup))},Silverlight.disableAutoStartup||(window.addEventListener?window.addEventListener("load",Silverlight.__startup,!1):window.attachEvent("onload",Silverlight.__startup)),Silverlight.createObject=function(n,t,i,r,u,f,e){var c={},o=r,h=u,s,a,l;if(c.version=o.version,o.source=n,c.alt=o.alt,f&&(o.initParams=f),o.isWindowless&&!o.windowless&&(o.windowless=o.isWindowless),o.framerate&&!o.maxFramerate&&(o.maxFramerate=o.framerate),i&&!o.id&&(o.id=i),delete o.ignoreBrowserVer,delete o.inplaceInstallPrompt,delete o.version,delete o.isWindowless,delete o.framerate,delete o.data,delete o.src,delete o.alt,Silverlight.isInstalled(c.version)){for(s in h)if(h[s])if(s=="onLoad"&&typeof h[s]=="function"&&h[s].length!=1&&(a=h[s],h[s]=function(n){return a(document.getElementById(i),e,n)}),l=Silverlight.__getHandlerName(h[s]),l!=null)o[s]=l,h[s]=null;else throw"typeof events."+s+" must be 'function' or 'string'";slPluginHTML=Silverlight.buildHTML(o)}else slPluginHTML=Silverlight.buildPromptHTML(c);if(t)t.innerHTML=slPluginHTML;else return slPluginHTML},Silverlight.buildHTML=function(n){var t=[],i;t.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"'),n.id!=null&&t.push(' id="'+Silverlight.HtmlAttributeEncode(n.id)+'"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),t.push(" >"),delete n.id,delete n.width,delete n.height;for(i in n)n[i]&&t.push('<param name="'+Silverlight.HtmlAttributeEncode(i)+'" value="'+Silverlight.HtmlAttributeEncode(n[i])+'" />');return t.push("</object>"),t.join("")},Silverlight.createObjectEx=function(n){var t=n,i=Silverlight.createObject(t.source,t.parentElement,t.id,t.properties,t.events,t.initParams,t.context);if(t.parentElement==null)return i},Silverlight.buildPromptHTML=function(n){var t="",r=Silverlight.fwlinkRoot,i=n.version;return n.alt?t=n.alt:(i||(i=""),t="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>",t=t.replace("{1}",i),t=t.replace("{2}",r+"108181")),t},Silverlight.getSilverlight=function(n){var t,i,r,u;Silverlight.onGetSilverlight&&Silverlight.onGetSilverlight(),t="",i=String(n).split("."),i.length>1&&(r=parseInt(i[0]),t=isNaN(r)||r<2?"1.0":i[0]+"."+i[1]),u="",t.match(/^\d+\056\d+$/)&&(u="&v="+t),Silverlight.followFWLink("149156"+u)},Silverlight.followFWLink=function(n){top.location=Silverlight.fwlinkRoot+String(n)},Silverlight.HtmlAttributeEncode=function(n){var t,i="",r;if(n==null)return null;for(r=0;r<n.length;r++)t=n.charCodeAt(r),i=t>96&&t<123||t>64&&t<91||t>43&&t<58&&t!=47||t==95?i+String.fromCharCode(t):i+"&#"+t+";";return i},Silverlight.default_error_handler=function(n,t){var u,r=t.ErrorType,i;u=t.ErrorCode,i="\nSilverlight error message     \n",i+="ErrorCode: "+u+"\n",i+="ErrorType: "+r+"       \n",i+="Message: "+t.ErrorMessage+"     \n",r=="ParserError"?(i+="XamlFile: "+t.xamlFile+"     \n",i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"):r=="RuntimeError"&&(t.lineNumber!=0&&(i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"),i+="MethodName: "+t.methodName+"     \n"),alert(i)},Silverlight.__cleanup=function(){for(var n=Silverlight._silverlightCount-1;n>=0;n--)window["__slEvent"+n]=null;Silverlight._silverlightCount=0,window.removeEventListener?window.removeEventListener("unload",Silverlight.__cleanup,!1):window.detachEvent("onunload",Silverlight.__cleanup)},Silverlight.__getHandlerName=function(n){var t="",i;return typeof n=="string"?t=n:typeof n=="function"?(Silverlight._silverlightCount==0&&(window.addEventListener?window.addEventListener("onunload",Silverlight.__cleanup,!1):window.attachEvent("onunload",Silverlight.__cleanup)),i=Silverlight._silverlightCount++,t="__slEvent"+i,window[t]=n):t=null,t},Silverlight.onRequiredVersionAvailable=function(){},Silverlight.onRestartRequired=function(){},Silverlight.onUpgradeRequired=function(){},Silverlight.onInstallRequired=function(){},Silverlight.IsVersionAvailableOnError=function(n,t){var i=!1;try{t.ErrorCode!=8001||Silverlight.__installationEventFired?t.ErrorCode!=8002||Silverlight.__installationEventFired?t.ErrorCode==5014||t.ErrorCode==2106?Silverlight.__verifySilverlight2UpgradeSuccess(t.getHost())&&(i=!0):i=!0:(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0):(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0)}catch(r){}return i},Silverlight.IsVersionAvailableOnLoad=function(n){var t=!1;try{Silverlight.__verifySilverlight2UpgradeSuccess(n.getHost())&&(t=!0)}catch(i){}return t},Silverlight.__verifySilverlight2UpgradeSuccess=function(n){var i=!1,r="2.0.31005",t=null;try{n.IsVersionSupported(r+".99")?(t=Silverlight.onRequiredVersionAvailable,i=!0):t=n.IsVersionSupported(r+".0")?Silverlight.onRestartRequired:Silverlight.onUpgradeRequired,t&&!Silverlight.__installationEventFired&&(t(),Silverlight.__installationEventFired=!0)}catch(u){}return i},Number.formatFunctions={count:0},Number.prototype.NaN="NaN",Number.prototype.posInfinity="Infinity",Number.prototype.negInfinity="-Infinity",Number.prototype.numberFormat=function(n,t){return isNaN(this)?Number.prototype.NaNstring:this==+Infinity?Number.prototype.posInfinity:this==-Infinity?Number.prototype.negInfinity:(Number.formatFunctions[n]==null&&Number.createNewFormat(n),this[Number.formatFunctions[n]](t))},Number.createNewFormat=function(n){var r="format"+Number.formatFunctions.count++,i,t;Number.formatFunctions[n]=r,i="Number.prototype."+r+" = function(context){\n",t=n.split(";");switch(t.length){case 1:i+=Number.createTerminalFormat(n);break;case 2:i+='return (this < 0) ? this.numberFormat("'+String.escape(t[1])+'", 1) : this.numberFormat("'+String.escape(t[0])+'", 2);';break;case 3:i+='return (this < 0) ? this.numberFormat("'+String.escape(t[1])+'", 1) : ((this == 0) ? this.numberFormat("'+String.escape(t[2])+'", 2) : this.numberFormat("'+String.escape(t[0])+'", 3));';break;default:i+="throw 'Too many semicolons in format string';"}eval(i+"}")},Number.createTerminalFormat=function(n){var t;if(n.length>0&&n.search(/[0#?]/)==-1)return"return '"+String.escape(n)+"';\n";var i="var val = (context == null) ? new Number(this) : Math.abs(this);\n",e=!1,u=n,o="",s=0,r=0,f=0,h=!1,c="";return t=n.match(/\..*(e)([+-]?)(0+)/i),t&&(c=t[1],h=t[2]=="+",f=t[3].length,n=n.replace(/(e)([+-]?)(0+)/i,"")),t=n.match(/^([^.]*)\.(.*)$/),t&&(u=t[1].replace(/\./g,""),o=t[2].replace(/\./g,"")),n.indexOf("%")>=0&&(i+="val *= 100;\n"),t=u.match(/(,+)(?:$|[^0#?,])/),t&&(i+="val /= "+Math.pow(1e3,t[1].length)+"\n;"),u.search(/[0#?],[0#?]/)>=0&&(e=!0),(t||e)&&(u=u.replace(/,/g,"")),t=u.match(/0[0#?]*/),t&&(s=t[0].length),t=o.match(/[0#?]*/),t&&(r=t[0].length),f>0?i+="var sci = Number.toScientific(val,"+s+", "+r+", "+f+", "+h+");\nvar arr = [sci.l, sci.r];\n":(r>20&&(r=20),n.indexOf(".")<0&&(i+="val = (val > 0) ? Math.ceil(val) : Math.floor(val);\n"),i+="var arr = val.round("+r+").toFixed("+r+").split('.');\n",i+="arr[0] = (val < 0 ? '-' : '') + String.leftPad((val < 0 ? arr[0].substring(1) : arr[0]), "+s+", '0');\n"),e&&(i+="arr[0] = Number.addSeparators(arr[0]);\n"),i+="arr[0] = Number.injectIntoFormat(arr[0].reverse(), '"+String.escape(u.reverse())+"', true).reverse();\n",r>0&&(i+="arr[1] = Number.injectIntoFormat(arr[1], '"+String.escape(o)+"', false);\n"),f>0&&(i+="arr[1] = arr[1].replace(/(\\d{"+r+"})/, '$1"+c+"' + sci.s);\n"),i+"return arr.join('.');\n"},Number.toScientific=function(n,t,i,r,u){var e={l:"",r:"",s:""},o="",s=Math.abs(n).toFixed(t+i+1).trim("0"),f=Math.round(new Number(s.replace(".","").replace(new RegExp("(\\d{"+(t+i)+"})(.*)"),"$1.$2"))).toFixed(0);return f.length>=t?f=f.substring(0,t)+"."+f.substring(t):f+=".",e.s=s.indexOf(".")-s.search(/[1-9]/)-f.indexOf("."),e.s<0&&e.s++,e.l=(n<0?"-":"")+String.leftPad(f.substring(0,f.indexOf(".")),t,"0"),e.r=f.substring(f.indexOf(".")+1),e.s<0?o="-":u&&(o="+"),e.s=o+String.leftPad(Math.abs(e.s).toFixed(0),r,"0"),e},Number.prototype.round=function(n){if(n>0){n>19&&(n=19);var t=this.toFixed(n+1).match(new RegExp("(-?\\d*).(\\d{"+n+"})(\\d)\\d*$"));if(t&&t.length)return new Number(t[1]+"."+String.leftPad(Math.round(t[2]+"."+t[3]),n,"0"))}return this},Number.injectIntoFormat=function(n,t,i){var u=0,f=0,r="",e=n.charAt(n.length-1)=="-";for(e&&(n=n.substring(0,n.length-1));u<t.length&&f<n.length&&t.substring(u).search(/[0#?]/)>=0;)t.charAt(u).match(/[0#?]/)?(r+=n.charAt(f)!="-"?n.charAt(f):"0",f++):r+=t.charAt(u),++u;return e&&f==n.length&&(r+="-"),f<n.length&&(i&&(r+=n.substring(f)),e&&(r+="-")),u<t.length&&(r+=t.substring(u)),r.replace(/#/g,"").replace(/\?/g," ")},Number.addSeparators=function(n){return n.reverse().replace(/(\d{3})/g,"$1,").reverse().replace(/^(-)?,/,"$1")},String.prototype.reverse=function(){for(var t="",n=this.length;n>0;--n)t+=this.charAt(n-1);return t},String.prototype.trim=function(n){return n||(n=" "),this.replace(new RegExp("^"+n+"+|"+n+"+$","g"),"")},String.leftPad=function(n,t,i){var r=new String(n);for(i==null&&(i=" ");r.length<t;)r=i+r;return r},String.escape=function(n){return n.replace(/('|\\)/g,"\\$1")};
})();
