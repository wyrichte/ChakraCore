
TARGETNAME=NativeUnitTests
TARGETTYPE=DYNLINK

_NT_TARGET_VERSION = $(_NT_TARGET_VERSION_WIN7)

# 386_STDCALL=0
USE_STL=1
STL_VER=70
USE_ATL=1
ATL_VER=30
# Prefix should skip code that we don't ship
TEST_CODE=1

!IF "$(_BUILDARCH)" == "arm" || "$(_BUILDARCH)" == "arm64"
NT_SIGNCODE=1
!ENDIF

INCLUDES=$(PUBLISH_SDK_INC_PATH);$(COREINCLUDES);..\..\lib\runtime\library;$(JSCRIPT_ROOT)\Dll\JScriptDiag;$(JSCRIPT_ROOT)\lib\common\memory;$(JSCRIPT_ROOT)\Dll\JScriptDiag;$(JSCRIPT_ROOT)\Exe\Common;

LINKLIBS = $(LINKLIBS) \
    $(OBJ_PATH)\..\..\lib\static\lib\$(O)\edgejsstatic.lib \
    $(SHELL_LIB_PATH)\CommonUtilityLibrary.lib       \
    $(INETCORE_LIB_PATH)\iertutilp.lib \
    $(INETCORE_LIB_PATH)\IESettingsId.lib \
    $(INETCORE_LIB_PATH)\IESettingsApi.lib \
    $(OBJECT_JSCRIPT_DIR)\exe\common\$(O)\Chakra.Host.Common.lib \

#4290: C++ exception specification ignored except to indicate a function is not __declspec(nothrow)
MSC_WARNING_LEVEL=$(MSC_WARNING_LEVEL) /wd4290

C_DEFINES =$(C_DEFINES) -DWINNT -DUNICODE -D_UNICODE

!INCLUDE sources.inc


SOURCES= \
    MyScriptDirectNative.cpp \
    ScriptDirectUnitTests.cpp \
    FastDOMNative.cpp \
    GetExtendedExceptionInfo.cpp \
    Regex.cpp \
    basictest.cpp \
    ExternalFuncThunkFpcw.cpp \
    Int64test.cpp \
    typedarraytest.cpp \
    HeapEnum.cpp \
    FakeMSHTML.cpp \
    ProfileCacheTests.cpp \
    TestEtwEventSinkImpl.cpp \
    VersionTest.cpp \
    ScriptDiagSerializationTest.cpp \
    JsdirectTest.cpp \
    AsyncDebug.cpp \
    CreatePromise.cpp \
    ParseJson.cpp \
    VarToNativeArraytest.cpp 

USE_IOSTREAM=1

PRECOMPILED_INCLUDE=stdafx.h
PRECOMPILED_SOURCEFILE=stdafx.cpp
PRECOMPILED_CXX=1
